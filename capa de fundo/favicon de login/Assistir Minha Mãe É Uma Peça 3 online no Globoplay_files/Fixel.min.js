function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});function runFixel(a,b){runEngagement(a,_objectSpread({},b,{label:{alias:"FXL",name:"Fixel",appUrl:"https://api.fixelapp.com",scriptUrl:"https://script.fixel.ai",convPath:"/conversions/fxl_conversions.js",convFunc:"fixelConversions",validationQueryParam:"fixelValidation",docsLink:"https://docs.fixel.ai/docs/getting-started/why-does-fixel-take-a-few-days-to-run"}}))}function fxlCodeLoader(a){var b=[document.getElementById("Fixel")];b[0]||(b=[].slice.call(document.getElementsByTagName("script")).filter(function(b){return b.src.toLowerCase().includes(a||"fixel")}));var c=b.map(function(a){return a.getAttribute("fxl_code")||a.getAttribute("src").split("fxl_code=")[1]&&a.getAttribute("src").split("fxl_code=")[1].split("&")[0]}),d=!0,e=!1,f=void 0;try{for(var g,h,i=c[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h=g.value,h&&runFixel&&runFixel(h)}catch(a){e=!0,f=a}finally{try{d||null==i.return||i.return()}finally{if(e)throw f}}}fxlCodeLoader();function runEngagement(a,b){function c(a,b){var c=document.createElement("script");c.setAttribute("src",a),document.head.appendChild(c),c.addEventListener("load",b)}if(!a)return void console.log("Attempted to run "+(b.label&&b.label.name)+" with no installation code.");if(!b.label||!b.label.appUrl||!b.label.scriptUrl)return void console.log("Configuration incomplete - :URL is missing");var d=b.label.alias.toLowerCase(),e={minLogLevel:1,levels:{error:0,warn:1,info:2,verbose:3,debug:4,silly:5},url:"https://"+b.label.appUrl+"/api/log/"+a,log:function g(b,c,d){!b in this.levels&&(b="warn");var e={level:b,error:c,context:d,code:a,timestamp:Date.now(),version:VERSION},f=new XMLHttpRequest;f.open("POST",this.url,!0),f.withCredentials=!1,f.setRequestHeader("Content-type","text/plain"),f.send(e)}},f=new XMLHttpRequest,g=b.label.scriptUrl;f.open("GET",g+"/config/"+a+".json",!0),f.setRequestHeader("Content-type","application/json"),f.withCredentials=!1,f.send(),f.onerror=function(){console.log("Failed to fetch code.")},f.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(f.response);if(e=_objectSpread({},b,e),window[d+"Config"]=e,e.code!=a)return void console.log("Attempted to run "+b.label.name+" with mismatching code.");if(e.disabled)return void console.log("Attempted to run a disabled "+b.label.name+" segment");if(e.multiSegment){var j=e.multiSegment;for(var k in j)location.href.includes(j[k].url)&&(e.display=j[k].display,runCoreEngScript(a+"/"+(j[k].code||j[k].display),e))}if(e.noMainSegment||runCoreEngScript(a,e||b),e.conversions&&b.label.convPath&&b.label.convFunc){var h=g+b.label.convPath;c(h,function(){window[b.label.convFunc](a)})}if(e.domEvents)for(var i=0;i<e.domEvents.length;i++)c(g+"/custom/"+e.domEvents[i])}403==this.status&&runCoreEngScript(a,b)}}function runCoreEngScript(a,b){function c(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()}function d(a){var b={},c=[{name:"utm_source",code:"s_us",check:"u_u"},{name:"utm_medium",code:"s_um",check:"u_u"},{name:"utm_campaign",code:"s_uca",check:"u_u"},{name:"utm_term",code:"s_ut",check:"u_u"},{name:"utm_content",code:"s_uco",check:"u_u"},{name:"gclid",code:"s_gc",isBoolean:!0},{name:"fbclid",code:"s_fb",isBoolean:!0}];for(var d in a)for(var g,h=0;h<c.length;h++)if(g=c[h],g.name===d){b[g.code]=!!g.isBoolean||a[d],g.check&&(b[g.check]=!0);break}b.u_p=location.pathname.split("/")[1],b.u_pf=location.pathname,b.u_h=location.host,b.n_d=f(),b.s_r=document.referrer,b.n_l=navigator.language,b.n_ig=window.innerHeight,b.n_ir=window.innerWidth,b.n_l=navigator.language,b.d_d=new Date().toISOString(),b.d_w=new Date().getDay(),b.d_h=new Date().getHours(),b.n_ua=e(),b.lp_t=document.title;var i=document.getElementsByTagName("h1");return 0<i.length&&(b.lp_h=i[0].innerText||i[0].textContent),b}function e(){var a={firefox:"undefined"!=typeof InstallTrigger,opera:!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),safari:/constructor/i.test(window.HTMLElement)||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!window.safari||"undefined"!=typeof safari&&safari.pushNotification),IE:!!document.documentMode,edge:!!window.StyleMedia,chrome:!!window.chrome&&!!window.chrome.csi};for(var b in a)if(a[b])return b;return"failed to detect"}function f(){return 767>=window.innerWidth?"mobile":1024>=window.innerWidth?"tablet":"desktop"}function g(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this;if("object"!=_typeof(a))return!1;if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(){return new Date(Date.now()-1e3*(60*new Date().getTimezoneOffset())).toISOString()}function i(){return window.location.search.substr(1).split("&").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return a[d]=e,a},{})}function j(){var a=i(),b=d(a);p.restartSessionStorage(),o.currentSequence=1,o.previousSequence=1,k=new q(p,b)}dataLayer=window.dataLayer||[],b=b||{},b.subSegment&&(a+="/"+b.subSegment);var k,l,m=b.label.alias.toLowerCase(),n={possible_integrations:["li","ga","fb","ob","tb","ms","pt","gtag","gtm","capi"],active_integrations:[m],init:function e(){if(b.disable_dl||b.integrations&&b.integrations.includes("nodl"))b.integrations.splice(b.integrations.indexOf("nodl"));else{this.active_integrations.push("gtm");for(var a,c=0;c<dataLayer.length;c++){if(a=dataLayer[c],a.length&&"config"===a[0]&&a[1].toLowerCase().includes("ua")){this.active_integrations.push("gtag");break}if(15<=c)break}}if(b.integrations)this.active_integrations=this.active_integrations.concat(b.integrations);else for(var d in b)this.possible_integrations.includes(d)&&(d.active||"object"!=_typeof(d)&&b[d])&&this.active_integrations.push(d)}},o={DEFAULT_TAG:b.defaultTag||"api",send:function d(){if(!p.isHalted()){this.endpoint||this.initEndpoint();var b=new XMLHttpRequest,c=this.endpoint+"/api/v2/grade/"+a;b.open("POST",c,!0),b.setRequestHeader("Content-type","text/plain"),b.withCredentials=!1,b.send(k.getPayload()),p.setAttributesSent(!0),b.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var a=JSON.parse(b.response);if(a.deactivated)return p.setHalted(!0);k.setGrade(a.value||0,a.class),k.setSample(a.sample),k.Fire()}else if(403===this.status)return console.log("Unauthorized Code."),p.setHalted(!0)}}},initEndpoint:function c(){var a=p.getEnvironmentTag();a||(a=this.createEnvironmentTag()),this.endpoint=b.label.appUrl.replace("/api.","/"+a+".")},sequence:function d(){if(p.isHalted())return console.log(b.label.name+" disabled.");var a=this,c=this.currentSequence;this.currentSequence+=this.previousSequence,this.previousSequence=c,setTimeout(function(){var b=p.getMostRecentSequence();(!b||a.currentSequence>p.getMostRecentSequence())&&(p.setMostRecentSequence(a.currentSequence),a.send()),a.sequence()},1e3*this.currentSequence)},createEnvironmentTag:function c(){if(b.environmentRatio&&b.environment){var a=Math.random()<=b.environmentRatio?b.environment:this.DEFAULT_TAG;return p.setEnvironmentTag(a),a}return!b.default_tag&&b.environment?this.DEFAULT_TAG:b.extensions?b.extensions.sub:this.DEFAULT_TAG},init:function b(){this.initEndpoint();var a=p.getMostRecentSequence();a&&5<a?(this.previousSequence=Math.round(a/1.618),this.currentSequence=a):(this.previousSequence=1,this.currentSequence=1),p.isHalted()||(this.send(),this.sequence())},validate:function k(c){var d={X:"<span style=\"border-radius: 150%; height: 30px; width: 30px; padding: 4px 7px; color: black; background-color: #f1c232; font-size: 20px; margin-right: 5px;\"> &#10007;</span>",V:"<span style=\"border-radius: 150%; height: 30px; width: 30px; padding: 4px 7px; color: white; background-color: #4caf50;; font-size: 20px; margin-right: 5px;\"> &#10003;</span>"},e=c===a,f=b.label.scriptUrl+"/script/assets/",g=e?d.V:d.X,h="The "+b.label.name+" Segment "+(e?"has been properly installed on this page.":"you are trying to verify does not match <br><br> the one installed on this page."),i=new XMLHttpRequest,j=this.endpoint+"/api/validate/"+c;i.open("GET",j,!0),i.withCredentials=!1,i.send(),i.onreadystatechange=function(){if(4===this.readyState&&(200===this.status||403===this.status)){var a=JSON.parse(i.response);403===this.status&&(a.img="X",a.message="Your segment is invalid.");var c="<div style=\"direction:ltr;background-color:#3c3c3c; width:auto;color:white;padding:10px;font-family:sans-serif;"+"position:fixed;left:20px;top:20px;z-index:1000000;box-shadow: 0 4px 2px 0 rgba(0, 0, 0, .7), 0 2px 6px 0 rgba(0, 0, 0, .7);\">"+g+h+" <br><br>"+d[a.img]+"<span style=\"margin-bottom: 1rem;\">"+a.message+"</span><br>"+"<br><span style=\"margin-top: 30px;\"></span><a style=\"color:#ffbe11\" "+"href=\""+b.label.docsLink+"/\">"+"learn more</a><br></div>";document.body.innerHTML+=c}}}},p={actionMap:{button_click:m+"_ob",general_click:m+"_gc",link_click:m+"_lc",scroll:m+"_sc",total_scroll:m+"_ts",submit:m+"_su",keypress:m+"_se",video_played:m+"_vp",pageview:m+"_pa_v"},eventFireMap:{High:"HighFired",Med:"MedFired",Basic:"BasicFired"},init:function b(){this.incrementPageAmount();var a=+this.getItem(m+"_la")||0;Date.now()-a>1e3*(10*60)&&j()},restartSessionStorage:function c(){for(var a in this.actionMap)a.toLowerCase().includes("total")||this.deleteItem([this.actionMap[a]]);for(var b in this.eventFireMap)this.deleteItem([this.eventFireMap[b]]);this.restartSessionID(),this.deleteItem(m+"_m_r_sq"),this.deleteItem(m+"_is_sample"),this.deleteItem(m+"_sessionTime"),this.deleteItem(m+"_op_a"),this.deleteItem(m+"_attr_sent"),this.deleteItem(m+"_l_g"),this.deleteItem(m+"_s_t")},isSample:function a(){return"true"===this.getItem(m+"_is_sample")},setSample:function b(a){this.setItem(m+"_is_sample",a)},setEnvironmentTag:function b(a){this.setItem(m+"_s_t",a)},getEnvironmentTag:function a(){return this.getItem(m+"_s_t")},wereAttributesSent:function a(){return"true"===this.getItem(m+"_attr_sent")},setAttributesSent:function b(a){this.setItem(m+"_attr_sent",a)},incrementPageAmount:function b(){var a=this.getItem(m+"_po_a")||0;0>a&&(a=0),this.setItem(m+"_po_a",++a)},setFired:function b(a){this.setItem(this.eventFireMap[a],!0)},setGrade:function b(a){this.setItem(m+"_l_g",a)},getGrade:function a(){return+this.getItem(m+"_l_g")},setClass:function b(a){this.setItem(m+"_c",a)},getClass:function a(){return this.getItem(m+"_c")},isFired:function b(a){return"true"===this.getItem(this.eventFireMap[a])},setMostRecentSequence:function b(a){this.setItem(m+"_m_r_sq",a)},getMostRecentSequence:function a(){return+this.getItem(m+"_m_r_sq")||0},incrementAction:function d(a){var b=Date.now();30<this.getSessionTime()&&b-+this.getItem(m+"_la")>1e3*(10*60)&&j();var c=+this.getItem(this.actionMap[a]);return this.setItem(this.actionMap[a],++c),this.setItem(m+"_la",Date.now()),c},getAction:function b(a){return+this.getItem(this.actionMap[a])},setMostRecentServerRequest:function b(a){this.setItem(m+"_m_r_sr_rq",a)},getMostRecentServerRequest:function a(){return+this.getItem(m+"_m_r_sr_rq")},incrementTimer:function d(){var a=Date.now();if(!(990>a-+this.getItem(m+"_lud"))){this.setItem(m+"_lud",a);var b=+this.getItem(m+"_sessionTime");this.setItem(m+"_sessionTime",++b);var c=+this.getItem(m+"_totalTime");this.setItem(m+"_totalTime",++c)}},isHalted:function a(){return"true"===this.getItem(m+"_halt")},setHalted:function b(a){a="true"===a||!0===a,this.setItem(m+"_halt",a)},PermanentID:function b(){var a=this.getItem(m+"_permUser");return a||(a=c(),this.setItem(m+"_permUser",a)),a},restartSessionID:function b(){var a=c();return this.setItem(m+"_user",a),a},getSessionID:function b(){var a=this.getItem(m+"_user");return a||(a=c(),this.setItem(m+"_user",a)),a},getSessionTime:function a(){return+this.getItem(m+"_sessionTime")||0},getTotalTime:function a(){return+this.getItem(m+"_totalTime")||0},deleteItem:function c(b){try{delete localStorage[b+"-"+a]}catch(a){}},setItem:function d(b,c){try{localStorage.setItem(b+"-"+a,c)}catch(a){}},getItem:function d(b){var c;try{c=localStorage.getItem(b+"-"+a)}catch(a){}return"null"===c?void 0:c},exists:function c(b){return null!==localStorage.getItem(b+"-"+a)}},q=function(){function c(a,b){_classCallCheck(this,c),this.storage=a,this.sessionTimer=this.storage.getSessionTime()||0,this.totalTimer=this.storage.getTotalTime()||0,this.pageScrolls=this.storage.getAction("scroll"),this.totalScrolls=this.storage.getAction("totalScroll"),this.buttonClicks=this.storage.getAction("button_click"),this.formSubmittions=this.storage.getAction("submit"),this.keyPresses=this.storage.getAction("keypress"),this.pageClicks=this.storage.getAction("general_click"),this.linkClicks=this.storage.getAction("link_click"),this.storage.incrementAction("pageview"),this.attributes=b,p.exists(m+"_is_sample")&&this.setSample(p.isSample()),this.registerEvents(),this.storage.setItem(m+"_la",Date.now());setTimeout(this.registerEvents,6e3);setInterval(this.registerEvents,15e3)}return _createClass(c,[{key:"setTimer",value:function c(a,b){this.sessionTimer=a,this.totalTimer=b}},{key:"setSample",value:function b(a){this.isSample="true"===a||!0===a,this.storage.setSample(this.isSample)}},{key:"setGrade",value:function c(a,b){this.storage.setClass(b),this.storage.setGrade(a)}},{key:"getGrade",value:function a(){return this.storage.getGrade()||0}},{key:"getClass",value:function a(){return this.storage.getClass()}},{key:"initializeTimer",value:function b(){var a=this;setInterval(function(){p.incrementTimer(),a.setTimer(p.getSessionTime(),p.getTotalTime())},1e3)}},{key:"prettify",value:function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this;for(var b in a)"object"===_typeof(a[b])&&this.prettify(a[b]),a[b]||delete a[b],"object"===_typeof(a[b])&&g(a[b])&&delete a[b];return a}},{key:"getPayload",value:function c(){var b=this.prettify({grade:this.getGrade(),attr:this.storage.wereAttributesSent()?null:this.attributes,code:a,isMobile:"mobile"===f(),datetime:h(),actions:{gc:this.storage.getAction("general_click"),sc:this.storage.getAction("scroll"),ts:this.storage.getAction("total_scroll"),su:this.storage.getAction("submit"),ob:this.storage.getAction("button_click"),se:this.storage.getAction("keypress"),lc:this.storage.getAction("link_click"),vp:this.storage.getAction("video_played"),t:this.storage.getSessionTime(),tt:this.storage.getTotalTime(),pv:this.storage.getAction("pageview")},user:p.getSessionID(),permUser:p.PermanentID(),clientVersion:"4.05",conversion:this.conversion});return b.actions||(b.actions={}),b.isSample=this.isSample,JSON.stringify(b)}},{key:"registerEvents",value:function l(){function a(a,b,c){a[m+"_registered"]=!0,a.addEventListener(b,function(){p.incrementAction(c)})}this;document[m+"_registered"]||(a(document,"click","general_click"),a(document,"wheel","scroll"),a(document,"wheel","total_scroll"),a(document,"touchmove","scroll"),a(document,"touchmove","total_scroll"));for(var b,c=[document.getElementsByClassName("button"),document.getElementsByTagName("button"),document.getElementsByClassName("btn"),document.getElementsByTagName("submit")],d=0;d<c.length;d++){b=c[d];for(var e,f=0;f<b.length;f++)e=b[f],e[m+"_registered"]||(e[m+"_registered"]=!0,"submit"===e.type&&a(e,"click","submit"),a(e,"click","button_click"))}for(var g=document.getElementsByTagName("input"),d=0;d<g.length;d++)g[d][m+"_registered"]||a(g[d],"keypress","keypress");for(var h=document.getElementsByTagName("a"),d=0;d<h.length;d++)h[d][m+"_registered"]||a(h[d],"click","link_click");for(var k=document.getElementsByTagName("video"),d=0;d<k.length;d++)k[d][m+"_registered"]||a(k[d],"play","video_played");window.addEventListener("unload",function(){var a=+p.getItem(m+"_po_a");p.setItem(m+"_po_a",--a)})}},{key:"Fire",value:function h(){if(this.getClass()){var a={High:["High","Med","Basic"],Med:["Med","Basic"],Basic:["Basic"]}[this.getClass()],b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,p.isFired(f)||this.fireEvent(f)}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}}}},{key:"fireEvent",value:function q(c){var d=b.display||a,e=b.label.name.toLowerCase(),f={li:function i(){var a=new Date().getTime(),f=location.origin+"/"+d+"/"+e+"-"+c.toLowerCase(),g=b.li_pid||b.li.pid;if(!g)throw console.log("no LinkedIn PID provided"),new DOMException;var h=document.createElement("script");h.type="text/javascript",h.src="https://px.ads.linkedin.com/collect/?time="+a+"&pid="+g+"&url="+f+"&fmt=js&s=1",document.getElementsByTagName("body")[0].appendChild(h)},ga:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){return!!window.ga&&void ga("send","event",b.label.name,c,d,{nonInteraction:!0})}),gtag:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){return!!window.gtag&&void gtag("event",c,{event_category:b.label.name,event_label:d,non_interaction:!0})}),fb:function a(){return!!window.fbq&&void fbq("trackCustom",b.label.name+"_"+d+"_"+c)},ob:function e(){if(!window.obApi)return!1;var a=d.substring(0,9);obApi("track",b.label.alias+a+" "+c)},tb:function a(){return!!window._tfa&&void(window._tfa=window._tfa||[],_tfa.push({notify:"event",name:e+"_"+d+"_"+c}))},ms:function e(){if(!window.uetq)return!1;var a=d.substring(0,9);window.uetq.push({ea:c,ec:b.label.name,el:a})},pt:function a(){return!!window.pintrk&&void pintrk("track",b.label.name+"_"+c)},gtm:function f(){if(!window.dataLayer)return!1;var d={event:e+"_event"};d[e+"_eventCategory"]=b.label.name,d[e+"_eventLabel"]=b.display||a,d[e+"_eventAction"]=c,dataLayer.push(d)},capi:function f(){var d=document.cookie.split(";").filter(function(a){return a.includes("_fbp=")}).map(function(a){return a.split("_fbp=")[1]}),e=document.cookie.split(";").filter(function(a){return a.includes("_fbc=")}).map(function(a){return a.split("_fbc=")[1]});if(d=d.length&&d[0]||null,e=e.length&&e[0]||null,d||e){var g={fbp:d,fbc:e,site:window.location.origin+window.location.pathname,class:c,codeName:b.display||a,code:a};navigator.sendBeacon(b.label.appUrl+"/api/v2/fb/capi/"+a,JSON.stringify(g))}}};f[m]=function(){l.class=c,l.codeName=b.display||a,l.code=a,document.dispatchEvent(l)},p.setFired(c);var g=!0,h=!1,i=void 0;try{for(var j,k,o=n.active_integrations[Symbol.iterator]();!(g=(j=o.next()).done);g=!0){k=j.value;try{f[k]()}catch(a){console.log(b.label.name+" tries to fire "+k.toUpperCase()+" pixel, but no pixel found.")}}}catch(a){h=!0,i=a}finally{try{g||null==o.return||o.return()}finally{if(h)throw i}}}}]),c}();(function(){n.init(),p.init();var a=i(),c=d(a);k=new q(p,c),o.init(),b.label.validationQueryParam&&a[b.label.validationQueryParam]&&o.validate(a[b.label.validationQueryParam]);var e=p.isHalted();return e?console.log(b.label.name+" Disabled."):void(k.initializeTimer(),l=document.createEvent("Event"),l.initEvent(m+"_event",!0,!0))})()}