var WP3=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return T(this,n)}}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=w(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var P={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},O=function(){var e,t,n,i,r,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,y=/^(?:body|html)$/i,m=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],E=c.createElement("table"),A=c.createElement("tr"),k={tr:c.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:A,th:A,"*":c.createElement("div")},T=/complete|loaded|interactive/,_=/^[\w-]*$/,w={},S=w.toString,C={},R=c.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},x=Array.isArray||function(e){return e instanceof Array};function D(e){return null==e?String(e):w[S.call(e)]||"object"}function P(e){return"function"==D(e)}function O(e){return null!=e&&e==e.window}function L(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==D(e)}function N(e){return M(e)&&!O(e)&&Object.getPrototypeOf(e)==Object.prototype}function U(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!O(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||p[B(e)]?t:t+"px"}function H(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function j(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function K(n,i,r){for(t in i)r&&(N(i[t])||x(i[t]))?(N(i[t])&&!N(n[t])&&(n[t]={}),x(i[t])&&!x(n[t])&&(n[t]=[]),K(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function G(e,t){return null==t?n(e):n(e).filter(t)}function z(e,t,n,i){return P(t)?t.call(e,n,i):t}function W(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Y(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function q(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function $(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)$(e.childNodes[n],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=R).appendChild(e),i=~C.qsa(r,t).indexOf(e),a&&R.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},C.fragment=function(t,i,r){var a,o,s;return g.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(v,"<$1></$2>")),i===e&&(i=f.test(t)&&RegExp.$1),i in k||(i="*"),(s=k[i]).innerHTML=""+t,a=n.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),N(r)&&(o=n(a),n.each(r,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new j(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,i){var r,a;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&f.test(t))r=C.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}else{if(P(t))return n(c).ready(t);if(C.isZ(t))return t;if(x(t))a=t,r=l.call(a,(function(e){return null!=e}));else if(M(t))r=[t],t=null;else if(f.test(t))r=C.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}}return C.Z(r,t)},(n=function(e,t){return C.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){K(e,n,t)})),e},C.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,o=_.test(a);return e.getElementById&&o&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=D,n.isFunction=P,n.isWindow=O,n.isArray=x,n.isPlainObject=N,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var i,r,a,o,s=[];if(U(e))for(r=0;r<e.length;r++)null!=(i=t(e[r],r))&&s.push(i);else for(a in e)null!=(i=t(e[a],a))&&s.push(i);return(o=s).length>0?n.fn.concat.apply([],o):o},n.each=function(e,t){var n,i;if(U(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return T.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var i=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):U(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return M(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return o.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:C.matches(a,e));)a=a!==t&&!L(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!L(e)&&t.indexOf(e)<0)return t.push(e),e}));return G(t,e)},parent:function(e){return G(a(this.pluck("parentNode")),e)},children:function(e){return G(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return G(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(i){var r=n(this),a=r.contents(),o=t?e.call(this,i):e;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append(z(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=z(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(n))for(t in n)W(this,t,n[t]);else W(this,n,z(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){W(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(n){this[e]=z(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(m,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?q(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=z(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=z(this,e,t,i.offset()),a=i.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(x(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return n.each(e,(function(e,t){o[t]=a.style[r(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==D(e))i||0===i?l=B(e)+":"+V(e,i):this.each((function(){this.style.removeProperty(B(e))}));else for(t in e)e[t]||0===e[t]?l+=B(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(B(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Y(e))}),F(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=Y(this);z(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&Y(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return Y(this,"");i=Y(this),z(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(F(e)," ")})),Y(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);z(this,t,r,Y(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=y.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!y.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,o=this[0];return r===e?O(o)?o["inner"+i]:L(o)?o.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(o=n(this)).css(t,z(this,r,e,o[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,o=n.map(arguments,(function(i){var r=[];return"array"==(t=D(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(C.fragment(t)))})),r):"object"==t||null==i?i:C.fragment(i)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&$(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),C.Z.prototype=j.prototype=n.fn,C.uniq=a,C.deserializeValue=q,n.zepto=C,n}();window.Zepto=O,void 0===window.$&&(window.$=O),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i,a){if(t.global)return function(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}(n||r,i,a)}function p(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===h(t,n,"ajaxBeforeSend",[e,t]))return!1;h(t,n,"ajaxSend",[e,t])}function f(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),h(n,r,"ajaxSuccess",[t,n,e]),v(a,t,n)}function g(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),h(i,a,"ajaxError",[n,i,e||t]),v(t,n,i)}function v(t,n,i){var r=i.context;i.complete.call(r,n,t),h(i,r,"ajaxComplete",[n,i]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(i)}function y(){}function m(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&a?f(a[0],h,t,n):g(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===p(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:y},e.ajax=function(i){var a,v,b=e.extend({},i||{}),E=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===b[t]&&(b[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(b),b.crossDomain||((a=r.createElement("a")).href=b.url,a.href=a.href,b.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),b.url||(b.url=window.location.toString()),(v=b.url.indexOf("#"))>-1&&(b.url=b.url.slice(0,v)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=m(t.url,t.data),t.data=void 0)}(b);var A=b.dataType,k=/\?.+=\?/.test(b.url);if(k&&(A="jsonp"),!1!==b.cache&&(i&&!0===i.cache||"script"!=A&&"jsonp"!=A)||(b.url=m(b.url,"_="+Date.now())),"jsonp"==A)return k||(b.url=m(b.url,b.jsonp?b.jsonp+"=?":!1===b.jsonp?"":"callback=?")),e.ajaxJSONP(b,E);var T,_=b.accepts[A],w={},S=function(e,t){w[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,R=b.xhr(),I=R.setRequestHeader;if(E&&E.promise(R),b.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",_||"*/*"),(_=b.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),R.overrideMimeType&&R.overrideMimeType(_)),(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())&&S("Content-Type",b.contentType||"application/x-www-form-urlencoded"),b.headers)for(n in b.headers)S(n,b.headers[n]);if(R.setRequestHeader=S,R.onreadystatechange=function(){if(4==R.readyState){R.onreadystatechange=y,clearTimeout(T);var t,n=!1;if(R.status>=200&&R.status<300||304==R.status||0==R.status&&"file:"==C){if(A=A||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}(b.mimeType||R.getResponseHeader("content-type")),"arraybuffer"==R.responseType||"blob"==R.responseType)t=R.response;else{t=R.responseText;try{t=function(e,t,n){if(n.dataFilter==y)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(t,A,b),"script"==A?(0,eval)(t):"xml"==A?t=R.responseXML:"json"==A&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return g(n,"parsererror",R,b,E)}f(t,R,b,E)}else g(R.statusText||null,R.status?"error":"abort",R,b,E)}},!1===p(R,b))return R.abort(),g(null,"abort",R,b,E),R;var x=!("async"in b)||b.async;if(R.open(b.type,b.url,x,b.username,b.password),b.xhrFields)for(n in b.xhrFields)R[n]=b.xhrFields[n];for(n in w)I.apply(R,w[n]);return b.timeout>0&&(T=setTimeout((function(){R.onreadystatechange=y,R.abort(),g(null,"timeout",R,b,E)}),b.timeout)),R.send(b.data?b.data:null),R},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),l=b(t,n,i),u=l.success;return s.length>1&&(l.url=s[0],r=s[1]),l.success=function(t){o.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(l),this};var E=encodeURIComponent;function A(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?A(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(E(t)+"="+E(n))},A(i,t,n),i.join("&").replace(/%20/g,"+")}}(O),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,r,a,o,s,l=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,i=!0,s=a||0,a=0,o=l.length,r=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:d.disable())},d={add:function(){if(l){var i=l.length,s=function(n){e.each(n,(function(e,n){"function"==typeof n?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),r?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&e.each(arguments,(function(t,n){for(var i;(i=e.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=o&&--o,i<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d}}(O),function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var s=e.isFunction(t[i])&&t[i];o[r[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,o=s?[t]:arguments;n[r[0]+"With"](i,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(i,(function(e,t){var n=t[2],s=t[3];a[t[1]]=n.add,s&&n.add((function(){r=s}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=n.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(i){var r,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=n}(O),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=p(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e,t){return e.del&&!l&&e.e in u||!!t}function g(e){return c[e]||l&&u[e]||e}function v(n,i,r,a,s,l,u){var h=d(n),v=o[h]||(o[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var o=p(i);o.fn=r,o.sel=s,o.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=l;var d=l||r;o.proxy=function(e){if(!(e=k(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},o.i=v.length,v.push(o),"addEventListener"in n&&n.addEventListener(g(o.e),o.proxy,f(o,u))}))}function y(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,f(t,r))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:v,remove:y},e.proxy=function(t,n){var o=2 in arguments&&i.call(arguments,2);if(r(t)){var s=function(){return t.apply(n,o?o.concat(i.call(arguments)):arguments)};return s._zid=d(t),s}if(a(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var m=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function k(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(A,(function(e,t){var r=i[e];n[e]=function(){return this[t]=m,r&&r.apply(i,arguments)},n[t]=b})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=m)),n}function T(e){var n,i={originalEvent:e};for(n in e)E.test(n)||e[n]===t||(i[n]=e[n]);return k(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,o,s,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||r(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=b),h.each((function(t,r){u&&(c=function(e){return y(r,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var n,a=e(t.target).closest(o,r).get(0);if(a&&a!==r)return n=e.extend(T(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),v(r,n,l,s,o,d||c)})))},e.fn.off=function(n,i,o){var s=this;return n&&!a(n)?(e.each(n,(function(e,t){s.off(e,i,t)})),s):(a(i)||r(o)||!1===o||(o=i,i=t),!1===o&&(o=b),s.each((function(){y(this,n,o,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):k(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(o,s){(i=T(a(t)?e.Event(t):t))._args=n,i.target=s,e.each(h(s,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),k(n)}}(O),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=o.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var s=Number(i);i=isNaN(s)?i.replace(/^["']|["']$/g,""):s}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(O);var L,M,N,U=O,B=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],F=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],V={},H=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},j=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},K=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}}(navigator.userAgent);V.isEdge=/edge/i.test(navigator.userAgent),V.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!V.isEdge,V.isSafari=/safari/i.test(navigator.userAgent)&&!V.isChrome&&!V.isEdge,V.isFirefox=/firefox/i.test(navigator.userAgent),V.isLegacyIE=!!window.ActiveXObject,V.isIE=V.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),V.isIE11=/trident.*rv:11/i.test(navigator.userAgent),V.isChromecast=V.isChrome&&/CrKey/i.test(navigator.userAgent),V.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),V.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),V.isAndroid=/Android/i.test(navigator.userAgent),V.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),V.isWin8App=/MSAppHost/i.test(navigator.userAgent),V.isWiiU=/WiiU/i.test(navigator.userAgent),V.isPS4=/PlayStation 4/i.test(navigator.userAgent),V.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),V.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),V.name=K.name,V.version=K.version,V.userAgent=navigator.userAgent,V.data=function(){var e,t={},n=V.userAgent.toLowerCase(),i=D(B);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&H(o[1],t)}else H(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t}(),V.os=function(){var e,t={},n=V.userAgent.toLowerCase(),i=D(F);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)j(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])j(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&j(o[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t}(),V.viewport=((L={}).width=U(window).width(),L.height=U(window).height(),L),V.device=(M=V.userAgent,(N=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(M))&&(N[1]||N[2])||""),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:V.viewport.orientation="landscape";break;default:V.viewport.orientation="portrait"}}();var G={},z=[],W=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Y=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function q(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function X(e,t){var n=function(e){b(i,e);var n=_(i);function i(){var e;g(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t.initialize&&t.initialize.apply(k(e),a),e}return y(i)}(e);return q(n.prototype,t),n}var Z={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},Q=function(){function e(){g(this,e)}return y(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return V.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(V.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),e}(),J=function(){function e(){g(this,e)}return y(e,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}]),e}();function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=J.params[e]||J.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}function te(e){return G[e]||(G[e]=0),e+ ++G[e]}function ne(e){return e-parseFloat(e)+1>=0}function ie(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function re(){return window.navigator&&window.navigator.language}function ae(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:P.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var oe=function(){function e(){g(this,e)}return y(e,null,[{key:"configure",value:function(e){this.options=U.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&z.length>0?z.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(U(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),z.push(e))}}]),e}();oe.options={recycleVideo:!1};var se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;g(this,e),this.delay=t,this.lastTime=0}return y(e,[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}]),e}(),le={Config:Q,Fullscreen:Z,QueryString:J,DomRecycler:oe,assign:q,extend:X,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",r<1&&(o+="00:")),(r&&r>0||t)&&(o+=("0"+r).slice(-2)+":"),o+=("0"+i).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()},seekStringToSeconds:ee,uniqueId:te,currentScriptUrl:ie,isNumber:ne,requestAnimationFrame:W,cancelAnimationFrame:Y,getBrowserLanguage:re,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))},canAutoPlayMedia:ae,Media:P,DoubleEventHandler:se},ue="font-weight: bold; font-size: 13px;",ce="color: #ff8000;"+ue,de="color: #ff0000;"+ue,he=["color: #0000ff;font-weight: bold; font-size: 13px;","color: #006600;font-weight: bold; font-size: 13px;",ce,de,de],pe=["debug","info","warn","error","disabled"],fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;g(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.previousLevel=this.level,this.offLevel=n}return y(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+pe[this.level],ce)}},{key:"log",value:function(e,t,n){if(!(this.EXCLUDE_LIST.indexOf(n[0])>=0||t<this.level)){n||(n=e,e=null);var i=he[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+pe[t]+"]"+r,i].concat(n))}}}]),e}();fe.LEVEL_DEBUG=0,fe.LEVEL_INFO=1,fe.LEVEL_WARN=2,fe.LEVEL_ERROR=3,fe.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},fe.setLevel=function(e){this.getInstance().level=e},fe.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},fe.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},fe.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},fe.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var ge=Array.prototype.slice,ve=/\s+/,ye=function(e,t,n,i){if(!n)return!0;if("object"===f(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(ve.test(n)){for(var a=n.split(ve),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},me=function(e,t,n,i){var r,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++a<o;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s);return;case 2:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l);return;case 3:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l,u);return;default:for(;++a<o;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){fe.error.apply(fe,[n,"error on event",i,"trigger","-",e]),c()}}()},be=function(){function e(){g(this,e)}return y(e,[{key:"on",value:function(e,t,n){return ye(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!ye(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,o,s,l,u,c;if(!this._events||!ye(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=0,l=(o=e?[e]:Object.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(fe.debug.apply(fe,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=ge.call(arguments,1);if(!ye(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&me(i,n,t,e),r&&me(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==f(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):fe.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}]),e}(),Ee={listenTo:"on",listenToOnce:"once"};Object.keys(Ee).forEach((function(e){be.prototype[e]=function(t,n,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=te("l"))]=t,i||"object"!==f(n)||(i=this),t[Ee[e]](n,i,this),this}})),be.PLAYER_READY="ready",be.PLAYER_RESIZE="resize",be.PLAYER_FULLSCREEN="fullscreen",be.PLAYER_PLAY="play",be.PLAYER_PAUSE="pause",be.PLAYER_STOP="stop",be.PLAYER_ENDED="ended",be.PLAYER_SEEK="seek",be.PLAYER_ERROR="playererror",be.ERROR="error",be.PLAYER_TIMEUPDATE="timeupdate",be.PLAYER_VOLUMEUPDATE="volumeupdate",be.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",be.PLAYBACK_PROGRESS="playback:progress",be.PLAYBACK_TIMEUPDATE="playback:timeupdate",be.PLAYBACK_READY="playback:ready",be.PLAYBACK_BUFFERING="playback:buffering",be.PLAYBACK_BUFFERFULL="playback:bufferfull",be.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",be.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",be.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",be.PLAYBACK_BITRATE="playback:bitrate",be.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",be.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",be.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",be.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",be.PLAYBACK_DVR="playback:dvr",be.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",be.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",be.PLAYBACK_ENDED="playback:ended",be.PLAYBACK_PLAY_INTENT="playback:play:intent",be.PLAYBACK_PLAY="playback:play",be.PLAYBACK_PAUSE="playback:pause",be.PLAYBACK_SEEK="playback:seek",be.PLAYBACK_SEEKED="playback:seeked",be.PLAYBACK_STOP="playback:stop",be.PLAYBACK_ERROR="playback:error",be.PLAYBACK_STATS_ADD="playback:stats:add",be.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",be.PLAYBACK_LEVEL_SWITCH="playback:level:switch",be.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",be.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",be.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",be.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",be.CORE_CONTAINERS_CREATED="core:containers:created",be.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",be.CORE_OPTIONS_CHANGE="core:options:change",be.CORE_READY="core:ready",be.CORE_FULLSCREEN="core:fullscreen",be.CORE_RESIZE="core:resize",be.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",be.CORE_MOUSE_MOVE="core:mousemove",be.CORE_MOUSE_LEAVE="core:mouseleave",be.CONTAINER_PLAYBACKSTATE="container:playbackstate",be.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",be.CONTAINER_BITRATE="container:bitrate",be.CONTAINER_STATS_REPORT="container:stats:report",be.CONTAINER_DESTROYED="container:destroyed",be.CONTAINER_READY="container:ready",be.CONTAINER_RESIZE="container:resize",be.CONTAINER_ERROR="container:error",be.CONTAINER_LOADEDMETADATA="container:loadedmetadata",be.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",be.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",be.CONTAINER_AUDIO_AVAILABLE="container:audio:available",be.CONTAINER_AUDIO_CHANGED="container:audio:changed",be.CONTAINER_TIMEUPDATE="container:timeupdate",be.CONTAINER_PROGRESS="container:progress",be.CONTAINER_PLAY="container:play",be.CONTAINER_STOP="container:stop",be.CONTAINER_PAUSE="container:pause",be.CONTAINER_ENDED="container:ended",be.CONTAINER_CLICK="container:click",be.CONTAINER_DBLCLICK="container:dblclick",be.CONTAINER_CONTEXTMENU="container:contextmenu",be.CONTAINER_MOUSE_ENTER="container:mouseenter",be.CONTAINER_MOUSE_LEAVE="container:mouseleave",be.CONTAINER_MOUSE_UP="container:mouseup",be.CONTAINER_MOUSE_DOWN="container:mousedown",be.CONTAINER_SEEK="container:seek",be.CONTAINER_SEEKED="container:seeked",be.CONTAINER_VOLUME="container:volume",be.CONTAINER_FULLSCREEN="container:fullscreen",be.CONTAINER_STATE_BUFFERING="container:state:buffering",be.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",be.CONTAINER_SETTINGSUPDATE="container:settingsupdate",be.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",be.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",be.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",be.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",be.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",be.CONTAINER_STATS_ADD="container:stats:add",be.CONTAINER_OPTIONS_CHANGE="container:options:change",be.MEDIACONTROL_RENDERED="mediacontrol:rendered",be.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",be.MEDIACONTROL_SHOW="mediacontrol:show",be.MEDIACONTROL_HIDE="mediacontrol:hide",be.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",be.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",be.MEDIACONTROL_PLAYING="mediacontrol:playing",be.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",be.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",be.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var Ae=function(e){b(n,e);var t=_(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(this,n),(e=t.call(this,i))._options=i,e.uniqueId=te("o"),e}return y(n,[{key:"options",get:function(){return this._options}}]),n}(be),ke={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Te=/(.)^/,_e={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},we=/\\|'|\r|\n|\t|\u2028|\u2029/g,Se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ce=new RegExp("[&<>\"']","g"),Re=function(e){return null===e?"":(""+e).replace(Ce,(function(e){return Se[e]}))},Ie=0,xe=function(e,t){var n,i=new RegExp([(ke.escape||Te).source,(ke.interpolate||Te).source,(ke.evaluate||Te).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(we,(function(e){return"\\"+_e[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t})),a+="';\n",ke.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Ie+++"]";try{n=new Function(ke.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,Re);var o=function(e){return n.call(this,e,Re)};return o.source="function("+(ke.variable||"obj")+"){\n"+a+"}",o};xe.settings=ke;var De={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return U('<style class="clappr-style"></style>').html(xe(e.toString())(t))}},Pe=/^(\S+)\s*(.*)$/,Oe=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e)).cid=te("c"),i._ensureElement(),i.delegateEvents(),i}return y(n,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=U.zepto.isZ(e)?e:U(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(Pe),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=U.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=U(oe.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),n}(Ae),Le=function(e){b(n,e);var t=_(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return g(this,n),(e=t.call(this,i)).core=r,e}return y(n,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(be.ERROR,e):fe.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),n}(Ae),Me={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),o={description:"",level:Le.Levels.FATAL,origin:i,scope:n,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(r&&s.level==Le.Levels.FATAL&&!s.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):fe.warn(i,"PlayerError is not defined. Error: ",s),s}},Ne=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i.render(),i}return y(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),n}(Oe);Object.assign(Ne.prototype,Me),Ne.extend=function(e){return X(Ne,e)},Ne.type="core";var Ue=function(e){b(n,e);var t=_(n);function n(e,i,r){var a;return g(this,n),(a=t.call(this,e))._i18n=i,a.currentTime=0,a.volume=100,a.playback=e.playback,a.playerError=r,a.settings=U.extend(!0,{},a.playback.settings),a.isReady=!1,a.mediaControlDisabled=!1,a.plugins=[a.playback],a.dblTapHandler=new se(500),a.clickTimer=null,a.clickDelay=200,a.actionsMetadata={},a.bindEvents(),a}return y(n,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"bindEvents",value:function(){this.listenTo(this.playback,be.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,be.PLAYBACK_READY,this.ready),this.listenTo(this.playback,be.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,be.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,be.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,be.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,be.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,be.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,be.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,be.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,be.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,be.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,be.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,be.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,be.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,be.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,be.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,be.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,be.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,be.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,be.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,be.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,be.PLAYBACK_AUDIO_CHANGED,this.audioChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(be.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(be.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(be.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(be.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(be.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(be.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(be.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(be.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(be.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(be.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(be.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(be.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(be.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[be.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(be.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(be.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(be.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(be.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(be.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(be.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(be.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(be.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(be.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(be.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(be.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(be.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(be.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(be.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(be.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(be.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(be.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(be.CONTAINER_MOUSE_DOWN)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(be.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(be.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(be.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(be.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(be.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=U.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(be.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=De.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),n}(Oe);Object.assign(Ue.prototype,Me);var Be=function(e){b(n,e);var t=_(n);function n(e,i,r){var a;return g(this,n),(a=t.call(this,e)).settings={},a._i18n=i,a.playerError=r,a._consented=!1,a}return y(n,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return n.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=U.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}}]),n}(Oe);Object.assign(Be.prototype,Me),Be.extend=function(e){return X(Be,e)},Be.canPlay=function(e,t){return!1},Be.VOD="vod",Be.AOD="aod",Be.LIVE="live",Be.NO_OP="no_op",Be.type="playback";var Fe=function(e){b(n,e);var t=_(n);function n(e,i,r,a){var o;return g(this,n),(o=t.call(this,e))._i18n=r,o.loader=i,o.playerError=a,o}return y(n,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var e=this;return U.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===f(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=p(p({},this.options),{},{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new Be;i=p(p({},i),{},{playback:a});var o=new Ue(i,this._i18n,this.playerError),s=U.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,be.CONTAINER_READY,(function(){return s.resolve(o)})),o}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),n}(Ae),Ve=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e)).playerError=new Le(e,k(i)),i.configureDomRecycler(),i.firstResize=!0,i.plugins=[],i.containers=[],i._boundFullscreenHandler=function(){return i.handleFullscreenChange()},U(document).bind("fullscreenchange",i._boundFullscreenHandler),U(document).bind("MSFullscreenChange",i._boundFullscreenHandler),U(document).bind("mozfullscreenchange",i._boundFullscreenHandler),V.isMobile&&U(window).bind("resize",(function(e){i.handleWindowResize(e)})),i}return y(n,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Ne(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(be.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){return this.activePlayback.$el.find("video")[0]||this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;oe.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=U.Deferred(),this.defer.promise(this),this.containerFactory=new Fe(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){V.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:U(window).width(),height:U(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:U(window).width(),height:U(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){ne(e.height)||ne(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})}),500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(be.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;U.when.apply(U,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(be.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=U.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),U(document).unbind("fullscreenchange",this._boundFullscreenHandler),U(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),U(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(be.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(be.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,be.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(be.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=Z.fullscreenElement();return e&&(e===this.el||e===this.activePlaybackEl)||this.activePlaybackEl.webkitDisplayingFullscreen}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen()){var t=V.isiOS?this.activePlaybackEl:document;Z.cancelFullscreen(t),!V.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var n=V.isiOS?this.activePlaybackEl:this.el;if(!n)return;V.isSafari||V.isiOS?Z.requestFullscreen(n):Z.requestFullscreen(n).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!V.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(be.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(be.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=U.extend(!0,this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(be.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){var e=De.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl}),t=De.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),n}(Oe);Object.assign(Ve.prototype,Me);var He,je,Ke=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e.options)).player=e,i}return y(n,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new Ve(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}]),n}(Ae),Ge=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,ze=function(){function e(t,n,i){g(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return y(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(Ge)||[],i=C(n,4),r=i[1],a=i[2],o=i[3];return void 0===r?null:new e(r,a,o)}}]),e}(),We=function(e,t){return e&&t?Object.entries(e).filter((function(e){return C(e,2)[1].type===t})).reduce((function(e,t){var n=C(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},Ye=(He={plugins:{},playbacks:[]},je="0.4.22",function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g(this,e),this.playerId=n,this.playbackPlugins=R(He.playbacks);var i=e.registeredPlugins,r=i.core,a=i.container;this.containerPlugins=Object.values(a),this.corePlugins=Object.values(r),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return y(e,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(t){var n="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,i="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var r=t.playback.filter((function(t){return e.checkVersionSupport(t),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(t.container){var a=t.container.filter((function(t){return e.checkVersionSupport(t),!0}));this.containerPlugins=n?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var o=t.core.filter((function(t){return e.checkVersionSupport(t),!0}));this.corePlugins=n?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}],[{key:"registeredPlaybacks",get:function(){return R(He.playbacks)}},{key:"registeredPlugins",get:function(){var e=He.plugins;return{core:We(e,"core"),container:We(e,"container")}}},{key:"checkVersionSupport",value:function(e){var t=e.prototype,n=t.supportedVersion,i=t.name;if(!n||!n.min)return fe.warn("Loader","missing version information for ".concat(i)),!1;var r=n.max?ze.parse(n.max):ze.parse(n.min).inc("minor"),a=ze.parse(n.min);return!!ze.parse(je).satisfies(a,r)||(fe.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(je," does not match required range [").concat(a,",").concat(r,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return fe.warn("Loader","missing information to register plugin: ".concat(t)),!1;e.checkVersionSupport(t);var n=He.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&fe.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;e.checkVersionSupport(t);var n=He.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var r=n[i];n.splice(i,1),fe.warn("Loader","overriding playback entry: ".concat(r.name," - ").concat(r))}return He.playbacks=[t].concat(R(n)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=He.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(e){if(!e)return!1;var t=He.playbacks,n=t.findIndex((function(t){return t.prototype.name===e}));return!(n<0||(t.splice(n,1),He.playbacks=t,0))}},{key:"clearPlugins",value:function(){He.plugins={}}},{key:"clearPlaybacks",value:function(){He.playbacks=[]}}]),e}()),qe=ie().replace(/\/[^/]+$/,""),$e=function(e){b(n,e);var t=_(n);function n(e){var i;g(this,n),i=t.call(this,e);var r={playerId:te(""),persistConfig:!0,width:640,height:360,baseUrl:qe,allowUserInteraction:V.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};return i._options=U.extend(!0,r,e),i.options.sources=i._normalizeSources(e),i.options.chromeless||(i.options.allowUserInteraction=!0),i.options.allowUserInteraction||(i.options.disableKeyboardShortcuts=!0),i._registerOptionEventListeners(i.options.events),i._coreFactory=new Ke(k(i)),i.options.parentId?i.setParentId(i.options.parentId):i.options.parent&&i.attachTo(i.options.parent),i}return y(n,[{key:"loader",get:function(){return this._loader||(this._loader=new Ye(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:be.PLAYER_READY,onResize:be.PLAYER_RESIZE,onPlay:be.PLAYER_PLAY,onPause:be.PLAYER_PAUSE,onStop:be.PLAYER_STOP,onEnded:be.PLAYER_ENDED,onSeek:be.PLAYER_SEEK,onError:be.PLAYER_ERROR,onTimeUpdate:be.PLAYER_TIMEUPDATE,onVolumeUpdate:be.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:be.PLAYER_SUBTITLE_AVAILABLE}}},{key:"setParentId",value:function(e){var t=document.querySelector(e);return t&&this.attachTo(t),this}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,be.CORE_READY,this._onReady),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,be.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,be.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,be.CONTAINER_PLAY,this._onPlay),this.listenTo(e,be.CONTAINER_PAUSE,this._onPause),this.listenTo(e,be.CONTAINER_STOP,this._onStop),this.listenTo(e,be.CONTAINER_ENDED,this._onEnded),this.listenTo(e,be.CONTAINER_SEEK,this._onSeek),this.listenTo(e,be.CONTAINER_ERROR,this._onError),this.listenTo(e,be.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,be.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,be.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(t).length>0;return i&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(be.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(be.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(be.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(be.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(be.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(){this.trigger(be.PLAYER_PLAY)}},{key:"_onPause",value:function(){this.trigger(be.PLAYER_PAUSE)}},{key:"_onStop",value:function(){this.trigger(be.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function(){this.trigger(be.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(be.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(be.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(be.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),n}(Ae);Object.assign($e.prototype,Me);var Xe=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),n}(Ae);Object.assign(Xe.prototype,Me),Xe.extend=function(e){return X(Xe,e)},Xe.type="container";var Ze=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),n}(Ae);Object.assign(Ze.prototype,Me),Ze.extend=function(e){return X(Ze,e)},Ze.type="core";var Qe=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),n}(Oe);Object.assign(Qe.prototype,Me),Qe.extend=function(e){return X(Qe,e)},Qe.type="container";var Je={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};Je.ogv=Je.ogg,Je["3gp"]=Je["3gpp"];var et={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},tt=Object.keys(et).reduce((function(e,t){return[].concat(R(e),R(et[t]))}),[]),nt={code:"unknown",message:"unknown"},it=function(e){b(n,e);var t=_(n);function n(){var e;g(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];(e=t.call.apply(t,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var o,s=e.options.playback,l=s.preload||(V.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?o=e.options.poster:"string"==typeof e.options.poster.url&&(o=e.options.poster.url)),U.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:o,preload:l||"metadata",crossOrigin:s.crossOrigin,"x-webkit-playsinline":s.playInline}),(s.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),s.playInline&&e.$el.attr({playsinline:"playsinline"}),s.crossOrigin&&e.$el.attr({crossorigin:s.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],s.externalTracks&&e._setupExternalTracks(s.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return y(n,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=n._mimeTypesForUrl(e,et,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||tt.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===Be.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"configure",value:function(e){S(E(n.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&fe.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};V.isMobile&&oe.options.recycleVideo&&(t.element=this.el),ae(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(be.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==Be.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===Be.VOD||this.getPlaybackType()===Be.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(be.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?Be.AOD:Be.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?Be.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying()||this.el._consented)S(E(n.prototype),"consent",this).call(this,e);else{var i=function i(){t.el.removeEventListener("loadedmetadata",i,!1),t.el.removeEventListener("error",i,!1),t.el._consented=!0,S(E(n.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(be.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch((function(){}))}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(be.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(be.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(be.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(be.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(be.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(be.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(be.PLAYBACK_BUFFERING,this.name):this.trigger(be.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||nt,t=e.code,n=e.message,i=t===nt.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?Le.Levels.WARN:Le.Levels.FATAL});i?fe.warn(this.name,"HTML5 unknown error: ",r):this.trigger(be.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),S(E(n.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,oe.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(be.PLAYBACK_DVR,e),this.trigger(be.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(fe.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=ee();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(be.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(R(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(be.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var t=n._mimeTypesForUrl(e,Je,this.options.mimeType);return 0===t.length&&(t=n._mimeTypesForUrl(e,et,this.options.mimeType)),(t[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(be.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(be.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(be.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===n.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(t){return{id:e++,name:t.label,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(ne(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(be.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return xe('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=De.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}]),n}(Be);it._mimeTypesForUrl=function(e,t,n){var i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=n||i&&t[i.toLowerCase()]||[];return r.constructor===Array?r:[r]},it._canPlay=function(e,t,n,i){var r=it._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},it.canPlay=function(e,t){return it._canPlay("audio",et,e,t)||it._canPlay("video",Je,e,t)};var rt=function(e){b(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(be.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return Be.AOD}}]),n}(it);rt.canPlay=function(e,t){return it._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};var at=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e)).el.src=e.src,i}return y(n,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return Be.NO_OP}},{key:"render",value:function(){var e=De.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(be.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(be.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(be.PLAYBACK_ERROR,{message:t},this.name)}}]),n}(Be);at.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var ot=function(e){b(n,e);var t=_(n);function n(){var e;g(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._noiseFrameNum=-1,e}return y(n,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=De.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(be.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<r;){if(o<0)o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24;o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=W((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(Y(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),n}(Be);ot.canPlay=function(e){return!0};var st=function(e){b(n,e);var t=_(n);function n(e){var i;return g(this,n),(i=t.call(this,e))._initializeMessages(),i}return y(n,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||re()}},{key:"_initializeMessages",value:function(){this._messages=U.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurck zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser untersttzt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproduccin de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vdeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vdeo.",default_error_message:"Se ha producido un problema al cargar el vdeo."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},bg:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"       . ,    .",default_error_title:"     .",default_error_message:"     ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar}}]),n}(Ze),lt=function(e){b(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}}]),n}(Ze),ut="0.4.22";Ye.registerPlugin(st),Ye.registerPlugin(lt),Ye.registerPlayback(ot),Ye.registerPlayback(at),Ye.registerPlayback(rt),Ye.registerPlayback(it);var ct={Player:$e,Events:be,Browser:V,ContainerPlugin:Xe,UIContainerPlugin:Qe,CorePlugin:Ze,UICorePlugin:Ne,Playback:Be,Container:Ue,Core:Ve,PlayerError:Le,Loader:Ye,BaseObject:Ae,UIObject:Oe,Utils:le,HTML5Audio:rt,HTML5Video:it,HTMLImg:at,Log:fe,Styler:De,version:ut,template:xe,$:U},dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pt(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var ft=ht(pt((function(e,t){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var i=Object.prototype.hasOwnProperty,r="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},u.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||i&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var i,r,a,o,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,r=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
    !*** ./node_modules/webworkify-webpack/index.js ***!
    \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,i){var l={};l[i]=[];var u=t.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;for(var d,h=c[1],p=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");d=p.exec(u);)"dll-reference"!==d[3]&&l[i].push(d[3]);for(p=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");d=p.exec(u);)e[d[2]]||(l[i].push(d[1]),e[d[2]]=n(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var f=Object.keys(l),g=0;g<f.length;g++)for(var v=0;v<l[f[g]].length;v++)s(l[f[g]][v])&&(l[f[g]][v]=1*l[f[g]][v]);return l}function u(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var r={main:n.m},a=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};u(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],c=n[s].pop();if(r[s]=r[s]||{},!r[s][c]&&e[s][c]){r[s][c]=!0,i[s]=i[s]||[],i[s].push(c);for(var d=l(e,e[s][c],s),h=Object.keys(d),p=0;p<h.length;p++)n[h[p]]=n[h[p]]||[],n[h[p]]=n[h[p]].concat(d[h[p]])}}return i}(r,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
    !*** ./src/crypt/decrypter.js + 3 modules ***!
    \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){n.r(t);var i=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),r=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=f^f<<1^f<<2^f<<3^f<<4;v=v>>>8^255&v^99,e[p]=v,t[v]=p;var y=h[p],m=h[y],b=h[m],E=257*h[v]^16843008*v;i[p]=E<<24|E>>>8,r[p]=E<<16|E>>>16,a[p]=E<<8|E>>>24,o[p]=E,E=16843009*b^65537*m^257*y^16843008*p,l[v]=E<<24|E>>>8,u[v]=E<<16|E>>>16,c[v]=E<<8|E>>>24,d[v]=E,p?(p=y^h[h[h[b^y]]],f^=h[h[f]]):p=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,p=this.rcon,f=this.invSubMix,g=f[0],v=f[1],y=f[2],m=f[3];for(a=0;a<u;a++)a<r?s=c[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[a/r|0]<<24):r>6&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-r]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^y[h[l>>>8&255]]^m[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n,i){for(var r,a,o,s,l,u,c,d,h,p,f,g,v,y,m,b,E,A=this.keySize+6,k=this.invKeySchedule,T=this.invSBox,_=this.invSubMix,w=_[0],S=_[1],C=_[2],R=_[3],I=this.uint8ArrayToUint32Array_(n),x=I[0],D=I[1],P=I[2],O=I[3],L=new Int32Array(e),M=new Int32Array(L.length),N=this.networkToHostOrderSwap;t<L.length;){for(h=N(L[t]),p=N(L[t+1]),f=N(L[t+2]),g=N(L[t+3]),l=h^k[0],u=g^k[1],c=f^k[2],d=p^k[3],v=4,y=1;y<A;y++)r=w[l>>>24]^S[u>>16&255]^C[c>>8&255]^R[255&d]^k[v],a=w[u>>>24]^S[c>>16&255]^C[d>>8&255]^R[255&l]^k[v+1],o=w[c>>>24]^S[d>>16&255]^C[l>>8&255]^R[255&u]^k[v+2],s=w[d>>>24]^S[l>>16&255]^C[u>>8&255]^R[255&c]^k[v+3],l=r,u=a,c=o,d=s,v+=4;r=T[l>>>24]<<24^T[u>>16&255]<<16^T[c>>8&255]<<8^T[255&d]^k[v],a=T[u>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&l]^k[v+1],o=T[c>>>24]<<24^T[d>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^k[v+2],s=T[d>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^k[v+3],v+=3,M[t]=N(r^x),M[t+1]=N(s^D),M[t+2]=N(o^P),M[t+3]=N(a^O),x=h,D=p,P=f,O=g,t+=4}return i?(m=M.buffer,b=m.byteLength,(E=b&&new DataView(m).getUint8(b-1))?m.slice(0,b-E):m):M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=n("./src/errors.ts"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),d=function(){function e(e,t,n){var i=(void 0===n?{}:n).removePKCS7Padding,r=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=r,r)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),o(u.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new r(c,t)),this.fastAesKey.expandKey().then((function(r){new i(c,n).decrypt(e,r).catch((function(i){l.onWebCryptoError(i,e,t,n,o)})).then((function(e){o(e)}))})).catch((function(i){l.onWebCryptoError(i,e,t,n,o)}))}},t.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=d},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
    !*** ./src/demux/demuxer-inline.js + 12 modules ***!
    \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){n.r(t);var i=n("./src/events.js"),r=n("./src/errors.ts"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number.js"),s=n("./src/utils/logger.js"),l=n("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&u(e,t))}function p(e,t){if(h(e,t)){var n=c(e,t);if(t+n>=e.length)return!1;var i=d(e,t);if(i<=n)return!1;var r=t+i;if(r===e.length||r+1<e.length&&u(e,r))return!0}return!1}function f(e,t,n,a,o){if(!e.samplerate){var l=function(e,t,n,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),p=a,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[n+2])>>>6),!((l=(60&t[n+2])>>>2)>f.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+f[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:f[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:p};e.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,n,a,o);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(e){return 9216e4/e}function v(e,t,n,i,r){var a=function(e,t,n,i,r){var a,o,s=e.length;if(a=c(e,t),o=d(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+i*r}}(t,n,i,r,g(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:t.subarray(n+s,n+s+l),pts:o,dts:o};return e.samples.push(u),{sample:u,length:l+s}}}var y=n("./src/demux/id3.js"),m=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(y.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(p(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,n,i){for(var r=this._audioTrack,a=y.default.getID3Data(e,0)||[],l=y.default.getTimeStamp(a),u=Object(o.isFiniteNumber)(l)?90*l:9e4*t,c=0,d=u,p=e.length,g=a.length,m=[{pts:d,dts:d,data:a}];g<p-1;)if(h(e,g)&&g+5<p){f(r,this.observer,e,g,r.manifestCodec);var b=v(r,e,g,u,c);if(!b){s.logger.log("Unable to parse AAC frame");break}g+=b.length,d=b.sample.pts,c++}else y.default.isHeader(e,g)?(a=y.default.getID3Data(e,g),m.push({pts:d,dts:d,data:a}),g+=a.length):g++;this.remuxer.remux(r,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,n,i)},t.destroy=function(){},e}(),b=n("./src/demux/mp4demuxer.js"),E={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,l=1e3*E.BitratesMap[14*s+r-1],u=3===n?0:2===n?1:2,c=E.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,h=E.SamplesCoefficients[n][i],p=E.BytesInSlot[i],f=8*h*p;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+o,10)*p,samplesPerFrame:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},A=E,k=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,n=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,n,i,r,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),g=this.skipBits.bind(this),v=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=p();if(3===b&&g(1),y(),y(),g(1),f())for(a=3!==b?8:12,o=0;o<a;o++)f()&&m(o<6?16:64)}y();var E=p();if(0===E)p();else if(1===E)for(g(1),v(),v(),t=p(),o=0;o<t;o++)v();y(),g(1),n=p(),i=p(),0===(r=h(1))&&g(1),g(1),f()&&(s=p(),l=p(),u=p(),c=p());var A=[1,1];if(f()&&f())switch(d()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-r)*(i+1)*16-(r?2:4)*(u+c),pixelRatio:A}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),T=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,n,i){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},t.decryptAvcSample=function(e,t,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){r.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,o),!o)return}}}},e}(),_={video:1,audio:2,id3:3,text:4},w=function(){function e(e,t,n,i){this.observer=e,this.config=n,this.typeSupported=i,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new T(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0||(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:_[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},t.resetTimeStamp=function(){},t.append=function(t,n,a,o){var l,u,c,d,h,p=t.length,f=!1;this.pmtUnknownTypes={},this.contiguous=a;var g=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,m=this._id3Track,b=v.pid,E=y.pid,A=m.pid,k=this._pmtId,T=v.pesData,_=y.pesData,w=m.pesData,S=this._parsePAT,C=this._parsePMT.bind(this),R=this._parsePES,I=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),O=e._syncOffset(t);for(p-=(p+O)%188,l=O;l<p;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case b:u&&(T&&(h=R(T))&&I(h,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,l+188)),T.size+=l+188-d);break;case E:u&&(_&&(h=R(_))&&(y.isAAC?x(h):D(h)),_={data:[],size:0}),_&&(_.data.push(t.subarray(d,l+188)),_.size+=l+188-d);break;case A:u&&(w&&(h=R(w))&&P(h),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,l+188)),w.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),k=this._pmtId=S(t,d);break;case k:u&&(d+=t[d]+1);var L=C(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=L.avc)>0&&(v.pid=b),(E=L.audio)>0&&(y.pid=E,y.isAAC=L.isAAC),(A=L.id3)>0&&(m.pid=A),f&&!g&&(s.logger.log("reparse from beginning"),f=!1,l=O-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(h=R(T))?(I(h,!0),v.pesData=null):v.pesData=T,_&&(h=R(_))?(y.isAAC?x(h):D(h),y.pesData=null):(_&&_.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=_),w&&(h=R(w))?(P(h),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(y,v,m,this._txtTrack,n,a,o):this.decryptAndRemux(y,v,m,this._txtTrack,n,a,o)},t.decryptAndRemux=function(e,t,n,i,r,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,i,r,a,o)}))}else this.decryptAndRemuxAvc(e,t,n,i,r,a,o)},t.decryptAndRemuxAvc=function(e,t,n,i,r,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,i,r,a,o)}))}else this.remuxer.remux(e,t,n,i,r,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,n){var i=this.pmtUnknownTypes[e]||0;return 0===i&&(this.pmtUnknownTypes[e]=0,t.call(s.logger,n)),this.pmtUnknownTypes[e]++,i},t._parsePMT=function(e,t,n,i){var r,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){this._trackUnknownPmt(e[t],s.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!i){this._trackUnknownPmt(e[t],s.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):this._trackUnknownPmt(e[t],s.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,n,i,r,a,o,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(n=t[7])&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&n?o-(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l):l=o),u=(r=t[8])+9,e.size<=u)return null;e.size-=u,a=new Uint8Array(e.size);for(var p=0,f=d.length;p<f;p++){var g=(t=d[p]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}a.set(t,c),c+=g}return i&&(i-=r+3),{data:a,pts:o,dts:l,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;var r=n[i-1];e.pts=r.pts,e.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var h=new k(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(n=new k(a.discardEPB(t.data))).readUByte();for(var p=0,f=0,g=!1,v=0;!g&&n.bytesAvailable>1;){p=0;do{p+=v=n.readUByte()}while(255===v);f=0;do{f+=v=n.readUByte()}while(255===v);if(4===p&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var m=n.readUByte(),b=31&m,E=[m,n.readUByte()];for(r=0;r<b;r++)E.push(n.readUByte()),E.push(n.readUByte()),E.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}else if(5===p&&0!==n.bytesAvailable){if(g=!0,f>16){var A=[];for(r=0;r<16;r++)A.push(n.readUByte().toString(16)),3!==r&&5!==r&&7!==r&&9!==r||A.push("-");var T=f-16,_=new Uint8Array(T);for(r=0;r<T;r++)_[r]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:p,uuid:A.join(""),userDataBytes:_,userData:Object(y.utf8ArrayToStr)(_.buffer)})}}else if(f<n.bytesAvailable)for(r=0;r<f;r++)n.readUByte()}break;case 7:if(i=!0,u=!0,!o.sps){var w=(n=new k(t.data)).readSPS();o.width=w.width,o.height=w.height,o.pixelRatio=w.pixelRatio,o.sps=[t.data],o.duration=a._duration;var S=t.data.subarray(1,4),C="avc1.";for(r=0;r<3;r++){var R=S[r].toString(16);R.length<2&&(R="0"+R),C+=R}o.codec=C}break;case 8:i=!0,o.pps||(o.pps=[t.data]);break;case 9:i=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)})),t&&l&&(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,n,i,r,a=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,r=31&e[0],l=0,a=1);a<o;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)i={data:e.subarray(d,a-l-1),type:r},c.push(i);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(n=a-l-1)>0)){var p=new Uint8Array(h.data.byteLength+n);p.set(h.data,0),p.set(e.subarray(0,n),h.data.byteLength),h.data=p}}a<o?(d=a,r=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(i={data:e.subarray(d,o),type:r,state:l},c.push(i)),0===c.length){var f=this._getLastNalUnit();if(f){var g=new Uint8Array(f.data.byteLength+e.byteLength);g.set(f.data,0),g.set(e,f.data.byteLength),f.data=g}}return s.naluState=l,c},t.discardEPB=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},t._parseAACPES=function(e){var t,n,a,o,l,u,c,d=this._audioTrack,p=e.data,y=e.pts,m=this.aacOverFlow,b=this.aacLastPTS;if(m){var E=new Uint8Array(m.byteLength+p.byteLength);E.set(m,0),E.set(p,m.byteLength),p=E}for(a=0,l=p.length;a<l-1&&!h(p,a);a++);if(!a||(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(f(d,this.observer,p,a,this.audioCodec),n=0,t=g(d.samplerate),m&&b){var A=b+t;Math.abs(A-y)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((A-y)/90)),y=A)}for(;a<l;){if(h(p,a)){if(a+5<l){var k=v(d,p,a,y,n);if(k){a+=k.length,o=k.sample.pts,n++;continue}}break}a++}m=a<l?p.subarray(a,l):null,this.aacOverFlow=m,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,a=e.pts;r<n;)if(A.isHeader(t,r)){var o=A.appendFrame(this._audioTrack,t,r,a,i);if(!o)break;r+=o.length,i++}else r++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),S=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=y.default.getID3Data(e,0);if(i&&void 0!==y.default.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(A.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,n,i){for(var r=y.default.getID3Data(e,0)||[],a=y.default.getTimeStamp(r),o=void 0!==a?90*a:9e4*t,s=r.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:r}];s<l;)if(A.isHeader(e,s)){var p=A.appendFrame(d,e,s,o,u);if(!p)break;s+=p.length,c=p.sample.pts,u++}else y.default.isHeader(e,s)?(r=y.default.getID3Data(e,s),h.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},t.destroy=function(){},e}(),C=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),R=Math.pow(2,32)-1,I=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;r<a;r++)t.set(n[r],i),i+=n[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(R+1)),r=Math.floor(n%(R+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(R+1)),r=Math.floor(n%(R+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,o=Math.floor(i/(R+1)),s=Math.floor(i%(R+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(R+1)),o=Math.floor(n%(R+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=u[i]).duration,o=r.size,s=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,i=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),n.set(i,e.FTYP.byteLength),n},e}();function x(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=e*t*n;return i?Math.round(r):r}function D(e,t){return void 0===t&&(t=!1),x(e,1e3,1/9e4,t)}function P(e,t){return void 0===t&&(t=1),x(e,9e4,1/t)}var O=P(10),L=P(.2),M=null;function N(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}var U,B=function(){function e(e,t,n,i){if(this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===M){var r=navigator.userAgent.match(/Chrome\/(\d+)/i);M=r?parseInt(r[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,N(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&s.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,r,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var p=this.getVideoStartPts(t.samples),f=(N(e.samples[0].pts,p)-p)/t.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var g,v=this.remuxAudio(e,d,o,l);c&&(v&&(g=v.endPTS-v.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,g))}else if(c){var y=this.remuxVideo(t,h,o,0,l);y&&e.codec&&this.remuxEmptyAudio(e,d,o,y)}}n.samples.length&&this.remuxID3(n,a),r.samples.length&&this.remuxText(r,a),this.observer.trigger(i.default.FRAG_PARSED)},t.generateIS=function(e,t,n){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",p={},f={tracks:p},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:I.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=u[0].pts-Math.round(e.inputTimeScale*n))),t.sps&&t.pps&&c.length){var v=t.inputTimeScale;if(t.timescale=v,p.video={container:"video/mp4",codec:t.codec,initSegment:I.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var y=this.getVideoStartPts(c),m=Math.round(v*n);o=Math.min(o,N(c[0].dts,y)-m),a=Math.min(a,y-m),this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:a})}}else g&&p.audio&&this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:a});Object.keys(p).length?(l.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,n,a){var o,l,u,c,d,h=e.timescale,p=e.samples,f=[],g=p.length,v=this._initPTS,y=8,m=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,E=0,A=!1,k=this.nextAvcDts;if(0!==g){n||(k=t*h-(p[0].pts-N(p[0].dts,p[0].pts)));for(var T=0;T<g;T++){var _=p[T];_.pts=N(_.pts-v,k),_.dts=N(_.dts-v,k),_.dts>_.pts&&(E=Math.max(Math.min(E,_.pts-_.dts),-1*L)),_.dts<p[T>0?T-1:T].dts&&(A=!0)}A&&p.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i||e.id-t.id})),c=p[0].dts,d=p[g-1].dts;var w=Math.round((d-c)/(g-1));if(E<0){if(E<-2*w){s.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+D(-w,!0)+" ms");for(var S=E,C=0;C<g;C++)p[C].dts=S=Math.max(S,p[C].pts-w),p[C].pts=Math.max(S,p[C].pts)}else{s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+D(E,!0)+" ms to overcome this issue");for(var R=0;R<g;R++)p[R].dts=p[R].dts+E}c=p[0].dts,d=p[g-1].dts}if(n){var x=c-k,P=x>w;if(P||x<-1){P?s.logger.warn("AVC: "+D(x,!0)+" ms ("+x+"dts) hole between fragments detected, filling it"):s.logger.warn("AVC: "+D(-x,!0)+" ms ("+x+"dts) overlapping between fragments detected"),c=k;var O=p[0].pts-x;p[0].dts=c,p[0].pts=O,s.logger.log("Video: First PTS/DTS adjusted: "+D(O,!0)+"/"+D(c,!0)+", delta: "+D(x,!0)+" ms")}}M&&M<75&&(c=Math.max(0,c));for(var U=0,B=0,F=0;F<g;F++){for(var V=p[F],H=V.units,j=H.length,K=0,G=0;G<j;G++)K+=H[G].data.length;B+=K,U+=j,V.length=K,V.dts=Math.max(V.dts,c),V.pts=Math.max(V.pts,V.dts,0),m=Math.min(V.pts,m),b=Math.max(V.pts,b)}d=p[g-1].dts;var z=B+4*U+8;try{l=new Uint8Array(z)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var W=new DataView(l.buffer);W.setUint32(0,z),l.set(I.types.mdat,4);for(var Y=0;Y<g;Y++){for(var q,$=p[Y],X=$.units,Z=0,Q=0,J=X.length;Q<J;Q++){var ee=X[Q],te=ee.data,ne=ee.data.byteLength;W.setUint32(y,ne),y+=4,l.set(te,y),y+=ne,Z+=4+ne}if(Y<g-1)o=p[Y+1].dts-$.dts;else{var ie=this.config,re=$.dts-p[Y>0?Y-1:Y].dts;if(ie.stretchShortVideoTrack){var ae=ie.maxBufferHole,oe=Math.floor(ae*h),se=(a?m+a*h:this.nextAudioPts)-$.pts;se>oe?((o=se-re)<0&&(o=re),s.logger.log("It is approximately "+D(se,!1)+" ms to the next segment; using duration "+D(o,!1)+" ms for the last video frame.")):o=re}else o=re}q=Math.round($.pts-$.dts),f.push({size:Z,duration:o,cts:q,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:$.key?2:1,isNonSync:$.key?0:1}})}this.nextAvcDts=d+o;var le=e.dropped;if(e.nbNalu=0,e.dropped=0,f.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ue=f[0].flags;ue.dependsOn=2,ue.isNonSync=0}e.samples=f,u=I.moof(e.sequenceNumber++,c,e),e.samples=[];var ce={data1:u,data2:l,startPTS:m/h,endPTS:(b+o)/h,startDTS:c/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:f.length,dropped:le};return this.observer.trigger(i.default.FRAG_PARSING_DATA,ce),ce}},t.remuxAudio=function(e,t,n,a){var o,l,u,c,d,h,p=e.inputTimeScale,f=e.timescale,g=p/f,v=(e.isAAC?1024:1152)*g,y=this._initPTS,m=!e.isAAC&&this.typeSupported.mpeg,b=m?0:8,E=e.samples,A=[],k=this.nextAudioPts;if(n|=E.length&&k&&(a&&Math.abs(t-k/p)<.1||Math.abs(E[0].pts-k-y)<20*v),E.forEach((function(e){e.pts=e.dts=N(e.pts-y,t*p)})),0!==(E=E.filter((function(e){return e.pts>=0}))).length){if(n||(k=a?Math.max(0,t*p):E[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,_=0,w=k;_<E.length;){var S=E[_],R=S.pts,x=R-w;if(x<=-T*v)n||_>0?(s.logger.warn("Dropping 1 audio frame @ "+D(w,!0)/1e3+"s due to "+D(x,!0)+" ms overlap."),E.splice(_,1)):(s.logger.warn("Audio frame @ "+D(R,!0)/1e3+"s overlaps nextAudioPts by "+D(x,!0)+" ms."),w=R+v,_++);else if(x>=T*v&&x<O&&w){var P=Math.round(x/v);s.logger.warn("Injecting "+P+" audio frames @ "+D(w,!0)/1e3+"s due to "+D(x,!0)+" ms gap.");for(var L=0;L<P;L++){var M=Math.max(w,0);(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=S.unit.subarray()),E.splice(_,0,{unit:l,pts:M,dts:M}),w+=v,_++}S.pts=S.dts=w,w+=v,_++}else S.pts=S.dts=w,w+=v,_++}for(var U=E.length,B=0;U--;)B+=E[U].unit.byteLength;for(var F=0,V=E.length;F<V;F++){var H=E[F],j=H.unit,K=H.pts;if(void 0!==h&&o)o.duration=Math.round((K-h)/g);else{var G=K-k,z=0;if(n&&e.isAAC&&G){if(G>0&&G<O)z=Math.round((K-k)/v),s.logger.log(D(G,!0)+" ms hole between AAC samples detected,filling it"),z>0&&((l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=j.subarray()),B+=z*l.length);else if(G<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+D(k,!0)+" ms / "+D(K,!0)+" ms / "+D(-G,!0)+" ms"),B-=j.byteLength;continue}K=k}if(d=K,!(B>0))return;B+=b;try{u=new Uint8Array(B)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}m||(new DataView(u.buffer).setUint32(0,B),u.set(I.types.mdat,4));for(var W=0;W<z;W++)(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=j.subarray()),u.set(l,b),b+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o)}u.set(j,b);var Y=j.byteLength;b+=Y,o={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o),h=K}var q=0;if((U=A.length)>=2&&(q=A[U-2].duration,o.duration=q),U){this.nextAudioPts=k=h+g*q,e.samples=A,c=m?new Uint8Array:I.moof(e.sequenceNumber++,d/g,e),e.samples=[];var $=d/p,X=k/p,Z={data1:c,data2:u,startPTS:$,endPTS:X,startDTS:$,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:U};return this.observer.trigger(i.default.FRAG_PARSING_DATA,Z),Z}return null}},t.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,l=(void 0!==o?o:i.startDTS*r)+this._initDTS,u=i.endDTS*r+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var p=[],f=0;f<d;f++){var g=l+f*c;p.push({unit:h,pts:g,dts:g})}e.samples=p,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<n;s++){var l=e.samples[s];l.pts=N(l.pts-a,t*r)/r,l.dts=N(l.dts-o,t*r)/r}this.observer.trigger(i.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var n=e.samples.length,r=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++){var s=e.samples[o];s.pts=N(s.pts-a,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(i.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}(),F=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,n,r,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(i.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(i.default.FRAG_PARSED)},e}(),V=Object(l.getSelfScope)();try{U=V.performance.now.bind(V.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),U=V.Date.now}var H=function(){function e(e,t,n,i){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,n,r,o,s,l,u,c,d,h,p){var f=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var v=U();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=U();f.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),f.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,u,c,d,h,p)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,u,c,d,h,p)},t.pushDecrypted=function(e,t,n,a,o,s,l,u,c,d,h,p){var f=this.demuxer,g=this.remuxer;if(!f||l||u){for(var v,y=this.observer,E=this.typeSupported,A=this.config,k=[{demux:w,remux:B},{demux:b.default,remux:F},{demux:m,remux:B},{demux:S,remux:B}],T=0,_=k.length;T<_&&!(v=k[T]).demux.probe(e);T++);if(!v)return void y.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof v.remux||(g=new v.remux(y,A,E,this.vendor)),f&&f instanceof v.demux||(f=new v.demux(y,g,A,E),this.probe=v.demux.probe),this.demuxer=f,this.remuxer=g}(l||u)&&(f.resetInitSegment(n,a,o,d),g.resetInitSegment()),l&&(f.resetTimeStamp(p),g.resetTimeStamp(p)),"function"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,s,c,h)},e}();t.default=H},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
    !*** ./src/demux/demuxer-worker.js ***!
    \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,n){n.r(t);var i=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),r=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger */"./src/utils/logger.js"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(r.default.FRAG_DECRYPTED,n),t.on(r.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.default.FRAG_PARSED,n),t.on(r.default.ERROR,n),t.on(r.default.FRAG_PARSING_METADATA,n),t.on(r.default.FRAG_PARSING_USERDATA,n),t.on(r.default.INIT_PTS_FOUND,n),t.on(r.default.FRAG_PARSING_DATA,(function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)}))}},"./src/demux/id3.js":
/*!**************************!*\
    !*** ./src/demux/id3.js ***!
    \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,n){n.r(t),n.d(t,"utf8ArrayToStr",(function(){return s}));var i,r=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);)r+=10,r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r;if(r>0)return t.subarray(i,i+r)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),a=(n+=10)+r;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&i.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=o();if(n){var i=n.decode(e);if(t){var r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var a,s,l,u=e.length,c="",d=0;d<u;){if(0===(a=e[d++])&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0)}}return c},e}();function o(){var e=Object(r.getSelfScope)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder("utf-8")),i}var s=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.js ***!
    \*********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var i=n(/*! ../utils/logger */"./src/utils/logger.js"),r=n(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,n,i,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?t:null})),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i,r,a,o,s,l,u=[];if(t.data?(s=t.start,a=t.end,t=t.data):(s=0,a=t.byteLength),!n.length)return null;for(i=s;i<a;)l=(r=e.readUint32(t,i))>1?i+r:a,e.bin2str(t.subarray(i+4,i+8))===n[0]&&(1===n.length?u.push({data:t,start:i+8,end:l}):(o=e.findBox({data:t,start:i+8,end:l},n.slice(1))).length&&(u=u.concat(o))),i=l;return u},e.parseSegmentIndex=function(t){var n,i=e.findBox(t,["moov"])[0],r=i?i.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var u=o.end+0,c=e.readUint16(o,a);a+=2;for(var d=0;d<c;d++){var h=a,p=e.readUint32(o,h);h+=4;var f=2147483647&p;if(1==(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(o,h);h+=4,n.push({referenceSize:f,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+f-1}}),u+=f,a=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:r}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var a=r.data[r.start],o=0===a?12:20,s=e.readUint32(r,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=0===(a=l.data[l.start])?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=e.bin2str(h.data.subarray(h.start+12,h.start+16));i.logger.log("MP4Demuxer:"+d+":"+p+" found")}n[s]={timescale:u,type:d},n[d]={timescale:u,id:s}}}}}})),n},e.getStartDTS=function(t,n){var i,r,a;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var r,a;return r=e.readUint32(i,4),a=t[r].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/a}))}))),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var o=e.readUint32(r,4),s=t[o].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*s,r=Math.max(r,0);var o=Math.floor(r/(a+1)),l=Math.floor(r%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,n,i,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,n){var i,r;n.r(t),n.d(t,"ErrorTypes",(function(){return i})),n.d(t,"ErrorDetails",(function(){return r})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(r||(r={}))},"./src/events.js":
/*!***********************!*\
    !*** ./src/events.js ***!
    \***********************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
    !*** ./src/hls.ts + 50 modules ***!
    \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,n){n.r(t),n.d(t,"default",(function(){return ln}));var i={};n.r(i),n.d(i,"newCue",(function(){return pt}));var r,a,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.ts"),l=n("./src/polyfills/number.js"),u=n("./src/events.js"),c=n("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var p=n("./src/demux/mp4demuxer.js");function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g,v=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,n,i;return t=e,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&f(t.prototype,n),i&&f(t,i),e}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(g||(g={}));var m=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[g.AUDIO]=!1,e[g.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,n,i,r=e.prototype;return r.setByteRange=function(e,t){var n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},r.addElementaryStream=function(e){this._elementaryStreams[e]=!0},r.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},r.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},r.setDecryptDataFromLevelKey=function(e,t){var n=e;return(null==e?void 0:e.method)&&e.uri&&!e.iv&&((n=new v(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},t=e,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&y(t.prototype,n),i&&y(t,i),e}();function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,n,i;return t=e,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(t.prototype,n),i&&b(t,i),e}(),A=/^(\d+)x(\d+)$/,k=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,T=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=A.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(k.lastIndex=0;null!==(t=k.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),_={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function w(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,C=/#EXT-X-MEDIA:(.*)/g,R=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),I=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=/\.(mp4|m4s|m4v|m4a)$/i,D=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i,r=[],a={},o=!1;function s(e,t){["video","audio"].forEach((function(n){var i=e.filter((function(e){return function(e,t){var n=_[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(i.length){var r=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(S.lastIndex=0;null!=(i=S.exec(t));)if(i[1]){var l={},u=l.attrs=new T(i[1]);l.url=e.resolve(i[2],n);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),r.push(l)}else if(i[3]){var d=new T(i[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:r,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,n,i,r){var a;void 0===r&&(r=[]);var o=[],s=0;for(C.lastIndex=0;null!==(a=C.exec(t));){var l=new T(a[1]);if(l.TYPE===i){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:i,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,n)),r.length){var c=e.findGroup(r,u.groupId);u.audioCodec=c?c.codec:r[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,n,i,r){var a,o,s,u=0,d=0,h=new E(t),p=0,f=null,g=new m,y=null;for(R.lastIndex=0;null!==(a=R.exec(e));){var b=a[1];if(b){g.duration=parseFloat(b);var A=(" "+a[2]).slice(1);g.title=A||null,g.tagList.push(A?["INF",b,A]:["INF",b])}else if(a[3]){if(Object(l.isFiniteNumber)(g.duration)){var k=u++;g.type=i,g.start=d,s&&(g.levelkey=s),g.sn=k,g.level=n,g.cc=p,g.urlId=r,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),P(g,f),h.fragments.push(g),f=g,d+=g.duration,g=new m}}else if(a[4]){var _=(" "+a[4]).slice(1);f?g.setByteRange(_,f):g.setByteRange(_)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===y&&(y=h.fragments.length);else{if(!(a=a[0].match(I))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var w=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(S?[w,S]:[w]);break;case"PLAYLIST-TYPE":h.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(w);break;case"TARGETDURATION":h.targetduration=parseFloat(w);break;case"VERSION":h.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":p++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":p=parseInt(w);break;case"KEY":var C=new T(w),D=C.enumeratedString("METHOD"),O=C.URI,L=C.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(C.KEYFORMAT||"identity")){c.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}D&&(s=new v(t,O),O&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(s.method=D,s.key=null,s.iv=L));break;case"START":var M=new T(w).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(M)&&(h.startTimeOffset=M);break;case"MAP":var N=new T(w);g.relurl=N.URI,N.BYTERANGE&&g.setByteRange(N.BYTERANGE),g.baseurl=t,g.level=n,g.type=i,g.sn="initSegment",h.initSegment=g,(g=new m).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(g=f)&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=p,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return x.test(e.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new m).relurl=h.fragments[0].relurl,g.baseurl=t,g.level=n,g.type=i,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),y&&function(e,t){for(var n=e[t],i=t-1;i>=0;i--){var r=e[i];r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(h.fragments,y),h},e}();function P(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var O=window.performance,L=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.canHaveQualityLevels=function(e){return e!==r.AUDIO_TRACK&&e!==r.SUBTITLE_TRACK},i.mapContextToLevelType=function(e){switch(e.type){case r.AUDIO_TRACK:return a.AUDIO;case r.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},i.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var o=i.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return e.loader=r,this.loaders[e.type]=r,r},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:r.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:r.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:r.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:r.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,i,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case r.MANIFEST:n=t.manifestLoadingMaxRetry,i=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case r.LEVEL:n=0,o=0,a=0,i=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,i=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var u={timeout:i,maxRetry:n,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},o.loadsuccess=function(e,t,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,i);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=e.data;t.tload=O.now(),0===r.indexOf("#EXTM3U")?r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,i):this._handleMasterPlaylist(e,t,n,i):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},o.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},o.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},o._handleMasterPlaylist=function(e,t,n,r){var a=this.hls,o=e.data,s=i.getResponseUrl(e,n),l=D.parseMasterPlaylist(o,s),d=l.levels,h=l.sessionData;if(d.length){var p=d.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),f=D.parseMasterPlaylistMedia(o,s,"AUDIO",p),g=D.parseMasterPlaylistMedia(o,s,"SUBTITLES"),v=D.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(f.length){var y=!1;f.forEach((function(e){e.url||(y=!0)})),!1===y&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u.default.MANIFEST_LOADED,{levels:d,audioTracks:f,subtitles:g,captions:v,url:s,stats:t,networkDetails:r,sessionData:h})}else this._handleManifestParsingError(e,n,"no level found in manifest",r)},o._handleTrackOrLevelPlaylist=function(e,t,n,a){var o=this.hls,c=n.id,d=n.level,h=n.type,p=i.getResponseUrl(e,n),f=Object(l.isFiniteNumber)(c)?c:0,g=Object(l.isFiniteNumber)(d)?d:f,v=i.mapContextToLevelType(n),y=D.parseLevelPlaylist(e.data,p,g,v,f);if(y.tload=t.tload,y.fragments.length){if(h===r.MANIFEST){var m={url:p,details:y};o.trigger(u.default.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:p,stats:t,networkDetails:a,sessionData:null})}if(t.tparsed=O.now(),y.needSidxRanges){var b=y.initSegment.url;this.load({url:b,isSidxRequest:!0,type:h,level:d,levelDetails:y,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=y,this._handlePlaylistLoaded(e,t,n,a)}else o.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:p,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=p.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var i=n.references,r=t.levelDetails;i.forEach((function(e,t){var n=e.info;if(r){var i=r.fragments[t];0===i.byteRange.length&&i.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),r&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,n,i){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:i})},o._handleNetworkError=function(e,t,n,i){var a,o;void 0===n&&(n=!1),void 0===i&&(i=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case r.MANIFEST:a=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case r.LEVEL:a=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case r.AUDIO_TRACK:a=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};i&&(d.response=i),this.hls.trigger(u.default.ERROR,d)},o._handlePlaylistLoaded=function(e,t,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration)if(i.canHaveQualityLevels(n.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:t,networkDetails:a});else switch(o){case r.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:a});break;case r.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,n,"invalid target duration",a)},i}(h),M=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){var t=this.loaders;for(var n in t){var i=t[n];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders,r=this.hls.config,a=r.fLoader,o=r.loader;t.loaded=0;var s,u,d,h=i[n];h&&(c.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=i[n]=t.loader=r.fLoader?new a(r):new o(r),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var p=t.byteRangeStartOffset,f=t.byteRangeEndOffset;Object(l.isFiniteNumber)(p)&&Object(l.isFiniteNumber)(f)&&(s.rangeStart=p,s.rangeEnd=f),u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},r.loadsuccess=function(e,t,n,i){void 0===i&&(i=null);var r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})},r.loaderror=function(e,t,n){void 0===n&&(n=null);var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},r.loadtimeout=function(e,t,n){void 0===n&&(n=null);var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},r.loadprogress=function(e,t,n,i){void 0===i&&(i=null);var r=t.frag;r.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},i}(h),N=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n];if(t.decryptdata){var r=t.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(i&&(c.logger.warn("abort previous key loader for type:"+n),i.abort()),!r)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[n]=new a.loader(a),this.decrypturl=r,this.decryptkey=null;var o={url:r,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(u.default.KEY_LOADED,{frag:i})):c.logger.error("after key load, decryptdata unset")},r.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},r.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},i}(h),U="NOT_LOADED",B="APPENDING",F="PARTIAL",V="OK",H=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var n=this.fragments,i=Object.keys(n).filter((function(i){var r=n[i];if(r.body.type!==t)return!1;if(!r.buffered)return!1;var a=r.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===i.length)return null;var r=i.pop();return n[r].body},r.detectEvictedFragments=function(e,t){var n=this;Object.keys(this.fragments).forEach((function(i){var r=n.fragments[i];if(r&&r.buffered){var a=r.range[e];if(a)for(var o=a.time,s=0;s<o.length;s++){var l=o[s];if(!n.isTimeBuffered(l.startPTS,l.endPTS,t)){n.removeFragment(r.body);break}}}}))},r.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),i=this.fragments[n];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var r=t.timeRanges[n];i.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,r)}})))},r.getBufferedTimes=function(e,t,n){for(var i,r,a=[],o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,e>=i&&t<=r){a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<r&&t>i)a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),o=!0;else if(t<=i)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(e){var t,n,i,r=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=r.fragments[s];r.isPartial(l)&&(n=l.body.startPTS-r.bufferPadding,i=l.body.endPTS+r.bufferPadding,e>=n&&e<=i&&(t=Math.min(e-n,i-e),o<=t&&(a=l.body,o=t)))})),a},r.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],i=U;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?F:V:B),i},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},i}(h),j={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}},K=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var i,r=e.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a=i.length;if(a){var o=i[a-1].end;e[r].start-o<n?e[r].end>o&&(i[a-1].end=e[r].end):i.push(e[r])}else i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,p=i[d].end;if(t+n>=h&&t<p)u=h,l=(c=p)-t;else if(t+n<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),G=n("./node_modules/eventemitter3/index.js"),z=n("./node_modules/webworkify-webpack/index.js"),W=n("./src/demux/demuxer-inline.js");function Y(){return window.MediaSource||window.WebKitMediaSource}var q=n("./src/utils/get-self-scope.js"),$=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emit.apply(this,[e,e].concat(n))},i}(G.EventEmitter),X=Object(q.getSelfScope)(),Z=Y()||{isTypeSupported:function(){return!1}},Q=function(){function e(e,t){var n=this;this.hls=e,this.id=t;var i=this.observer=new $,r=e.config,a=function(t,i){(i=i||{}).frag=n.frag,i.id=n.id,e.trigger(t,i)};i.on(u.default.FRAG_DECRYPTED,a),i.on(u.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(u.default.FRAG_PARSING_DATA,a),i.on(u.default.FRAG_PARSED,a),i.on(u.default.ERROR,a),i.on(u.default.FRAG_PARSING_METADATA,a),i.on(u.default.FRAG_PARSING_USERDATA,a),i.on(u.default.INIT_PTS_FOUND,a);var o={mp4:Z.isTypeSupported("video/mp4"),mpeg:Z.isTypeSupported("audio/mpeg"),mp3:Z.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=z(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(r)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&X.URL.revokeObjectURL(d.objectURL),this.demuxer=new W.default(i,o,r,l),this.w=void 0}}else this.demuxer=new W.default(i,o,r,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function(e,t,n,i,r,a,o,s){var u=this.w,d=Object(l.isFiniteNumber)(r.startPTS)?r.startPTS:r.start,h=r.decryptdata,p=this.frag,f=!(p&&r.cc===p.cc),g=!(p&&r.level===p.level),v=p&&r.sn===p.sn+1,y=!g&&v;if(f&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:f,trackSwitch:g,contiguous:y,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,h,t,n,i,d,f,g,y,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":X.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function J(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function ee(e,t,n){var i=e[t],r=e[n],a=r.startPTS;if(Object(l.isFiniteNumber)(a))n>t?(i.duration=a-i.start,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"));else if(n>t){var o=i.cc===r.cc;r.start=i.start+(o&&i.minEndPTS?i.minEndPTS-i.start:i.duration)}else r.start=Math.max(i.start-r.duration,0)}function te(e,t,n,i,r,a){var o=n,s=i;if(Object(l.isFiniteNumber)(t.startPTS)){var u=Math.abs(t.startPTS-n);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),s=Math.min(i,t.endPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var c=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=i,t.minEndPTS=s,t.startDTS=r,t.endDTS=a,t.duration=i-n;var d,h,p,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(d=f-e.startSN,(h=e.fragments)[d]=t,p=d;p>0;p--)ee(h,p,p-1);for(p=d;p<h.length-1;p++)ee(h,p,p+1);return e.PTSKnown=!0,c}function ne(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,i=0;if(ie(e,t,(function(e,r){i=e.cc-r.cc,Object(l.isFiniteNumber)(e.startPTS)&&(r.start=r.startPTS=e.startPTS,r.endPTS=e.endPTS,r.duration=e.duration,r.backtracked=e.backtracked,r.dropped=e.dropped,n=r),t.PTSKnown=!0})),t.PTSKnown){if(i){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var r=t.fragments,a=0;a<r.length;a++)r[a].cc+=i}n?te(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(e,t){var n=t.startSN-e.startSN,i=e.fragments,r=t.fragments;if(!(n<0||n>i.length))for(var a=0;a<r.length;a++)r[a].start+=i[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function ie(e,t,n){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=i;o<=r;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;n(s,l,o)}}function re(e,t,n){var i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),r=i/2;return e&&t.endSN===e.endSN&&(i=r),n&&(i=Math.max(r,i-(window.performance.now()-n))),Math.round(i)}var ae={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function oe(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function se(e,t,n){!function(e,t,n){if(function(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}(e,n,t)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=function(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);if(r&&(!r||r.startPTS))return r;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,t);i&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),oe(i.start,t))}}(e,n,t),!n.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-n)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(i)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),oe(i,e))}}(n,t.details)}function le(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var r=e[i];if(de(t,n,r))return r}return null}function ue(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;if(e?r=t[e.sn-t[0].sn+1]:0===n&&0===t[0].start&&(r=t[0]),r&&0===ce(n,i,r))return r;var a=j.search(t,ce.bind(null,n,i));return a||r}function ce(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function de(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}var he=function(){function e(e,t,n,i){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,n=this.media,i=this.stalled,r=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===e){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=K.bufferInfo(n,r,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>2,p=!d||d-r>2&&!this.fragmentTracker.getPartialFragment(r);if(h||p)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(d,l.start||0)-r;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==i){var v=g-i;!a&&v>=250&&this._reportStall(l.len);var y=K.bufferInfo(n,r,t.maxBufferHole);this._tryFixBufferStall(y,v)}else this.stalled=g}}}else if(this.moved=!0,null!==i){if(this.stallReported){var m=self.performance.now()-i;c.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(m)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media.currentTime,a=i.getPartialFragment(r);a&&this._trySkipBufferHole(a)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,i=this.media,r=i.currentTime,a=0,o=0;o<i.buffered.length;o++){var l=i.buffered.start(o);if(r+t.maxBufferHole>=a&&r<l){var d=Math.max(l+.05,i.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+d),this.moved=!0,this.stalled=null,i.currentTime=d,e&&n.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+d,frag:e}),d}a=i.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if(this.nudgeRetry=r,r<e.nudgeMaxRetry){var a=i+r*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+i+" to "+a),n.currentTime=a,t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fe=function(e){var t,n;function i(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e.call.apply(e,[this,t].concat(r))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(pe(n)),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},i}(h),ge="STOPPED",ve="STARTING",ye="IDLE",me="PAUSED",be="KEY_LOADING",Ee="FRAG_LOADING",Ae="FRAG_LOADING_WAITING_RETRY",ke="WAITING_TRACK",Te="PARSING",_e="PARSED",we="BUFFER_FLUSHING",Se="ENDED",Ce="ERROR",Re="WAITING_INIT_PTS",Ie="WAITING_LEVEL",xe=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ge},r._streamEnded=function(e,t){var n=this.fragCurrent,i=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var r=i.getState(n);return r===F||r===V}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,n=this.mediaBuffer,i=this.state,r=t?t.currentTime:null,a=K.bufferInfo(n||t,r,this.config.maxBufferHole);if(c.logger.log("media seeking to "+(Object(l.isFiniteNumber)(r)?r.toFixed(3):r)),i===Ee){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;r<u||r>d?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ye):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===Se&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ye);t&&(this.lastCurrentTime=r),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=r),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=ge,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},i}(fe);function De(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Pe,Oe=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=n,i.config=t.config,i.audioCodecSwap=!1,i._state=ge,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i.audioOnly=!1,i.bitrateTest=!1,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,o,d,h=i.prototype;return h.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ye,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ge},h.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case we:this.fragLoadError=0;break;case ye:this._doTickIdle();break;case Ie:var e=this.levels[this.level];e&&e.details&&(this.state=ye);break;case Ae:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ye)}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=i<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,d=K.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,l),h=d.len;if(!(h>=o)){c.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var p=a.details;if(!p||p.live&&this.levelLastLoaded!==r)this.state=Ie;else{if(this._streamEnded(d,p)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(u.default.BUFFER_EOS,f),void(this.state=Se)}this._fetchPayloadOrEos(i,d,p)}}}}},h._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=(this.level,n.fragments),a=r.length;if(0!==a){var o,s=r[0].start,l=r[a-1].start+r[a-1].duration,u=t.end;if(n.initSegment&&!n.initSegment.data)o=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(o=this._ensureFragmentAtLivePoint(n,u,s,l,i,r)))return}else u<s&&(o=r[0]);o||(o=this._findFragment(s,i,a,r,u,l,n)),o&&(o.encrypted?this._loadKey(o,n):this._loadFragment(o,n,e,u))}},h._ensureFragmentAtLivePoint=function(e,t,n,i,r,a){var o,s=this.hls.config,u=this.media,d=1/0;if(void 0!==s.liveMaxLatencyDuration?d=s.liveMaxLatencyDuration:Object(l.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(d=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(n-s.maxFragLookUpTolerance,i-d)){var h=this.liveSyncPosition=this.computeLivePosition(n,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>i&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&r)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),o=le(a,r.endProgramDateTime,s.maxFragLookUpTolerance);else{var p=r.sn+1;if(p>=e.startSN&&p<=e.endSN){var f=a[p-e.startSN];r.cc===f.cc&&(o=f,c.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=j.search(a,(function(e){return r.cc-e.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},h._findFragment=function(e,t,n,i,r,a,o){var s,l=this.hls.config;if(s=r<a?ue(t,i,r,r>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[n-1]){var u=s.sn-o.startSN,d=t&&s.level===t.level,h=i[u-1],p=i[u+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var f=t.deltaPTS;f&&f>l.maxBufferHole&&t.dropped&&u?(s=h,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=p,this.fragmentTracker.getState(s)!==V&&c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(p&&p.backtracked?(c.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},h._loadKey=function(e,t){c.logger.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},h._loadFragment=function(e,t,n,i){var r=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||r===U||r===F?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,c.logger.log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(i.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=Ee):r===B&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},h.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},h.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},h._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),K.isBuffered(n,t)?e=this.getBufferedFrag(t):K.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},h.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused)||t.pause():e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&K.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},h.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=this.getBufferedFrag(e.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,r=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},h.flushMainBuffer=function(e,t){this.state=we;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,n)},h.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new he(n,t,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},h.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(e){var t,n=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},h.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=t.totalduration,o=0;if(c.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=r.details;s&&t.fragments.length>0?(ne(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,i,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ie&&(this.state=ye),this.tick()},h.onKeyLoaded=function(){this.state===be&&(this.state=ye,this.tick())},h.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,i=this.levels,r=this.media,a=e.frag;if(this.state===Ee&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=i[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&n.nextLoadLevel)this.state=ye,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=ye,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=Te,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(r&&r.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],p=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(e.payload,h,p,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Te){var i,r,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=e.id}for(i in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,a),a){r=a[i],c.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===Te){var r=this.levels[this.level],a=n;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&a.addElementaryStream(g.AUDIO),!0===e.hasVideo&&a.addElementaryStream(g.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=r.details;if(!o||a.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ye,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=te(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&t.state===Te&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Te&&(this.stats.tparsed=window.performance.now(),this.state=_e,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(e){var t=this.altAudio,n=!!e.url,i=e.id;if(!n){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ye}var a=this.hls;t&&a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i})}},h.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},h.onBufferCreated=function(e){var t,n,i=e.tracks,r=!1;for(var a in i){var o=i[a];"main"===o.id?(n=a,t=o,"video"===a&&(this.videoBuffer=i[a].buffer)):r=!0}r&&t?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==Te&&t!==_e||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(!(this.state!==_e||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+ae.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=ye}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},h.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&K.isBuffered(this.media,this.media.currentTime)&&K.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Ae}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ce&&(e.fatal?(this.state=Ce,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Ie||(this.state=ye));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Te&&this.state!==_e||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ye):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},h.onFragLoadEmergencyAborted=function(){this.state=ye,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?g.AUDIO:g.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=ye,this.fragPrevious=null},h.onLevelsUpdated=function(e){this.levels=e.levels},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=this.startPosition;if(t!==n&&n>=0){if(e.seeking)return void c.logger.log("could not seek to "+n+", already seeking at "+t);var i=(e.buffered.length?e.buffered.start(0):0)-n;i>0&&i<this.config.maxBufferHole&&(c.logger.log("adjusting start position by "+i+" to match buffer start"),n+=i,this.startPosition=n),c.logger.log("seek to target start position "+n+" from current time "+t+". ready state "+e.readyState),e.currentTime=n}},h._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},r=i,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&De(r.prototype,o),d&&De(r,d),i}(xe);function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Pe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(e){var t,n=[],i=[],r={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Pe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=r[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&J(a||e,"audio",t.AUDIO),t.SUBTITLES&&J(a||e,"text",t.SUBTITLES))})),o&&l&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||w(t,"audio"))&&(!n||w(n,"video"))})),e.audioTracks&&(i=e.audioTracks.filter((function(e){return!e.audioCodec||w(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}var h=l&&!o;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:n,audioTracks:i,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:!h&&i.some((function(e){return!!e.url}))})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,n.trigger(u.default.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||a.live){var o=r.urlId;n.trigger(u.default.LEVEL_LOADING,{url:r.url[o],level:e,id:o})}}else n.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},l.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,i=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,i)}},l.recoverLevel=function(e,t,n,i){var r,a,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=i,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||i)&&((r=d.url.length)>1&&d.loadError<r?(d.urlId=(d.urlId+1)%r,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):i&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(e){var t=this,n=e.level,i=e.details;if(n===this.currentLevelIndex){var r=this._levels[n];if(r.fragmentError||(r.loadError=0,this.levelRetryCount=0),i.live){var a=re(r.details,i,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},l.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===t){i=r;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},l.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,i=e.url[n];c.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(u.default.LEVEL_LOADING,{url:i,level:t,id:n})}}},l.removeLevel=function(e,t){var n=this.levels.filter((function(n,i){return i!==e||n.url.length>1&&void 0!==t&&(n.url=n.url.filter((function(e,n){return n!==t})),n.urlId=0,!0)})).map((function(e,t){var n=e.details;return n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=n,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:n})},r=i,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Le(r.prototype,a),o&&Le(r,o),i}(h),Ne=n("./src/demux/id3.js");function Ue(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Be(e){if(null==e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Fe=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){h.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){Be(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ue(n,this.media),n}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=Ne.default.getID3Frames(n[r].data);if(a){var o=Math.max(n[r].pts,0),s=r<n.length-1?n[r+1].pts:t.endPTS;s||(s=t.start+t.duration),s-o<=0&&(s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Ne.default.isTimeStampFrame(u)){var c=new i(o,s,"");c.value=u,this.id3Track.addCue(c)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,i=e.length-1;n<=i;){var r=Math.floor((i+n)/2);if(t<e[r].endTime)i=r-1;else{if(!(t>e[r].endTime))return e[r];n=r+1}}return e[n].endTime-t<t-e[i].endTime?e[n]:e[i]}(n.cues,t);if(i)for(;n.cues[0]!==i;)n.removeCue(n.cues[0])}},i}(h),Ve=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),He=function(){function e(e,t,n,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ve(t),this.fast_=new Ve(n)}var t=e.prototype;return t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ke=window.performance,Ge=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,d=i.prototype;return d.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},d.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,i,r=this.hls,a=r.config,o=t.level;r.levels[o].details.live?(n=a.abrEwmaFastLive,i=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,i=a.abrEwmaSlowVoD),this._bwEstimator=new He(r,i,n,a.abrEwmaDefaultEstimate)}},d._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var i=n.loader;if(!i||i.stats&&i.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=i.stats;if(t&&r&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=Ke.now()-r.trequest,o=Math.abs(t.playbackRate);if(a>500*n.duration/o){var s=e.levels,l=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/a),d=s[n.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=r.total?r.total:Math.max(r.loaded,Math.round(n.duration*h/8)),f=t.currentTime,g=(p-r.loaded)/l,v=(K.bufferInfo(t,f,e.config.maxBufferHole).end-f)/o;if(v<2*n.duration/o&&g>v){var y,m,b=e.minAutoLevel;for(m=n.level-1;m>b;m--){var E=s[m].realBitrate?Math.max(s[m].realBitrate,s[m].bitrate):s[m].bitrate;if(n.duration*E/(6.4*l)<v)break}y<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(a,r.loaded),i.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:r}))}}}}},d.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},d.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object(l.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},d.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){clearInterval(this.timer),this.timer=null},d._findBestLevel=function(e,t,n,i,r,a,o,s,l){for(var u=r;u>=i;u--){var d=l[u];if(d){var h=d.details,p=h?h.totalduration/h.fragments.length:t,f=!!h&&h.live,g=void 0;g=u<=e?o*n:s*n;var v=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=v*p/g;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+v+"/"+p+"/"+a+"/"+y),g>v&&(!y||f&&!this.bitrateTestDelay||y<a))return u}}return-1},r=i,(a=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(K.bufferInfo(a,l,i.maxBufferHole).end-l)/u,p=this._findBestLevel(o,s,d,r,t,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(p>=0)return p;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(0===h){var y=this.bitrateTestDelay;y&&(f=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-y,c.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),g=v=1)}return p=this._findBestLevel(o,s,d,r,t,h+f,g,v,n),Math.max(p,0)}}])&&je(r.prototype,a),o&&je(r,o),i}(h),ze=Y(),We=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(u.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,i=n.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),r={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");r[o]=s.buffered}n.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:i,timeRanges:r}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===i&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=t.config,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){h.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-e.start)>.1){var r=i.updating;try{i.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},r.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&ze){var n=this.mediaSource=new ze;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},r.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var i in e)if(!t[i]){var r=e[i];if(!r)throw Error("source buffer exists for track "+i+", however track does not");var a=r.levelCodec||r.codec,o=r.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var l=t[i]=n.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:a,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,i=Object.keys(n),r=t-Math.max(e,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=n[o];if(s){var l=s.buffered;l.length>0&&r>l.start(0)&&this.removeBufferRange(o,s,0,r)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var i=this.sourceBuffer[n];if(i&&!0===i.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n){var r=n[i];r&&(t+=r.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=n.shift();if(r)try{var a=i[r.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(r);a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){c.logger.error("error while trying to append buffer:"+i.message),n.unshift(r);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===i.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u.default.ERROR,o)}}}},r.flushBuffer=function(e,t,n){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+r+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=i[n];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},r.removeBufferRange=function(e,t,n,i){try{for(var r=0;r<t.buffered.length;r++){var a=t.buffered.start(r),o=t.buffered.end(r),s=Math.max(a,n),l=Math.min(o,i);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},i}(h);function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,s=i.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,r){return i.isLevelAllowed(r,t.restrictedLevels)&&r<=e}));return this.clientRect=null,i.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},i.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i,r,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(i=s,!(r=e[o+1])||i.width!==r.width||i.height!==r.height)){a=o;break}}return a},r=i,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(a=[{key:"mediaWidth",get:function(){return this.getDimensions().width*i.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*i.contentScaleFactor}}])&&Ye(r.prototype,a),o&&Ye(r,o),i}(h),$e=window.performance,Xe=function(e){var t,n;function i(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},r.checkFPS=function(e,t,n){var i=$e.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},i}(h),Ze=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===n){var o=t.status;if(o>=200&&o<300){var s,l;i.tload=Math.max(i.tfirst,window.performance.now()),l="arraybuffer"===r.responseType?(s=t.response).byteLength:(s=t.responseText).length,i.loaded=i.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,i,r,t)}else i.retry>=a.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:t.statusText},r,t)):(c.logger.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}();function Qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Je=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},l.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},l.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},l._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,i=t.type,r=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:r,type:i,url:n}),this._loadTrackDetailsIfNeeded(t)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],i=null;if(n&&(i=n.name),this._selectDefaultTrack){var r=t.filter((function(e){return e.default}));r.length?t=r:c.logger.warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||i&&i!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(i=null,o()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live||!n)},l._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},l._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,i=t.language,r=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+r+', name/language: "'+n+'" / "'+i+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}a!==e?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+i+'"')},r=i,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&Qe(r.prototype,a),o&&Qe(r,o),i}(fe);function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt=window.performance,nt=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=n,i.config=t.config,i.audioCodecSwap=!1,i._state=ge,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i.waitingVideoCC=null,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,d=i.prototype;return d.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from main: "+i),this.state===Re&&this.tick())},d.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ye):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ve),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ge},d.doTick=function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case Ce:case me:case we:break;case ve:this.state=ke,this.loadedmetadata=!1;break;case ye:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=e<r.maxBufferHole?Math.max(2,r.maxBufferHole):r.maxBufferHole,h=K.bufferInfo(o,e,d),p=K.bufferInfo(s,e,d),f=h.len,g=h.end,v=this.fragPrevious,y=Math.min(r.maxBufferLength,r.maxMaxBufferLength),m=Math.max(y,p.len),b=this.audioSwitch,E=this.trackId;if((f<m||b)&&E<a.length){if(void 0===(n=a[E].details)){this.state=ke;break}if(!b&&this._streamEnded(h,n))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=Se);var A,k=n.fragments,T=k.length,_=k[0].start,w=k[T-1].start+k[T-1].duration;if(b)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,n.PTSKnown&&e<_){if(!(h.end>_||h.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(n.initSegment&&!n.initSegment.data)A=n.initSegment;else if(g<=_){if(A=k[0],null!==this.videoTrackCC&&A.cc!==this.videoTrackCC&&(A=function(e,t){return j.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(k,this.videoTrackCC)),n.live&&A.loadIdx&&A.loadIdx===this.fragLoadIdx){var S=h.nextStart?h.nextStart:_;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var C,R=r.maxFragLookUpTolerance,I=v?k[v.sn-k[0].sn+1]:void 0;g<w?(g>w-R&&(R=0),C=I&&!ce(g,R,I)?I:j.search(k,(function(e){return ce(g,R,e)}))):C=k[T-1],C&&(A=C,_=C.start,v&&A.level===v.level&&A.sn===v.sn&&(A.sn<n.endSN?(A=k[A.sn+1-n.startSN],this.fragmentTracker.getState(A)!==V&&c.logger.log("SN just loaded, load next one: "+A.sn)):A=null))}A&&(A.encrypted?(c.logger.log("Loading key for "+A.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E),this.state=be,i.trigger(u.default.KEY_LOADING,{frag:A})):(this.fragCurrent=A,(b||this.fragmentTracker.getState(A)===U)&&(c.logger.log("Loading "+A.sn+", cc: "+A.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+E+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+g.toFixed(3)),"initSegment"!==A.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(A.sn)&&(this.nextLoadPosition=A.start+A.duration),i.trigger(u.default.FRAG_LOADING,{frag:A}),this.state=Ee)))}break;case ke:(t=this.tracks[this.trackId])&&t.details&&(this.state=ye);break;case Ae:var x=tt.now(),D=this.retryDate,P=(o=this.media)&&o.seeking;(!D||x>=D||P)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ye);break;case Re:var O=this.waitingFragment;if(O){var L=O.frag.cc;if(void 0!==this.initPTS[L])this.waitingFragment=null,this.state=Ee,this.onFragLoaded(O);else if(this.videoTrackCC!==this.waitingVideoCC)c.logger.log("Waiting fragment cc ("+L+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var M=K.bufferInfo(this.mediaBuffer,this.media.currentTime,r.maxBufferHole);ce(M.end,r.maxFragLookUpTolerance,O.frag)<0&&(c.logger.log("Waiting fragment cc ("+L+") @ "+O.frag.start+" cancelled because another fragment at "+M.end+" is needed"),this.clearWaitingFragment())}}else this.state=ye}},d.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=ye)},d.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},d.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},d.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=me,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ye),this.tick()},d.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var o=i.details;o&&t.fragments.length>0?(ne(o,t),a=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(a,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ke&&(this.state=ye),this.tick()},d.onKeyLoaded=function(){this.state===be&&(this.state=ye,this.tick())},d.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Ee&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=ye,h.tparsed=h.tbuffered=tt.now(),r.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=Te,this.appended=!1,this.demuxer||(this.demuxer=new Q(this.hls,"audio"));var p=this.initPTS[l],f=r.initSegment?r.initSegment.data:[];void 0!==p?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.demuxer.push(e.payload,f,d,null,t,a,!1,p)):(c.logger.log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Re)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Te){var i,r=e.tracks;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,r),c.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},d.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===Te){var r=this.trackId,a=this.tracks[r],o=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(g.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(a.details,n,e.startPTS,e.endPTS);var d=this.media,h=!1;if(this.audioSwitch)if(d&&d.readyState){var p=d.currentTime;c.logger.log("switching audio track : currentTime:"+p),p>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=we,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r});var f=this.pendingData;if(!f)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&f.push({type:e.type,data:t,parent:"audio",content:"data"})})),!h&&f.length&&(f.forEach((function(e){t.state===Te&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},d.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Te&&(this.stats.tparsed=tt.now(),this.state=_e,this._checkAppendedParsed())},d.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},d.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},d.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Te&&t!==_e||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==_e||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=tt.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&c.logger.log("audio buffered : "+ae.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ye}this.tick()}},d.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var r=this.config;if(i<=r.fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=tt.now()+a,this.state=Ae}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ce&&(this.state=e.fatal?Ce:ye,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Te||this.state===_e)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&K.isBuffered(o,l)&&K.isBuffered(o,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=ye}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=we,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},d.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=_e):(this.state=ye,this.fragPrevious=null,this.tick())},r=i,(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&et(r.prototype,a),o&&et(r,o),i}(xe),it=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function r(t,r,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=t,d=r,h=a,p=null,f="",g=!0,v="auto",y="start",m=50,b="middle",E=50,A="middle";Object.defineProperty(o,"id",i({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},s,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},s,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},s,{get:function(){return f},set:function(t){var n=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");f=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},s,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},s,{get:function(){return y},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},s,{get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},s,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},s,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},s,{get:function(){return A},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),o.displayState=void 0}return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}(),rt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function at(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new rt,this.regionList=[]}function ot(){this.values=Object.create(null)}function st(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&t(o[0],o[1])}}ot.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var lt=new it(0,0,0),ut="middle"===lt.align?"middle":"center";function ct(e,t,n){var i=e;function r(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new ot;st(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",ut,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",ut,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",ut,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===lt.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",ut);var a=i.get("position","auto");"auto"===a&&50===lt.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function dt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}at.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=dt(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?st(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new it(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{ct(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var ht=at;function pt(e,t,n,i){for(var r,a,o,s,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<i.rows.length;d++)if(o=!0,s=0,l="",!(r=i.rows[d]).isEmpty()){for(var h=0;h<r.chars.length;h++)r.chars[h].uchar.match(/\s/)&&o?s++:(l+=r.chars[h].uchar,o=!1);r.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,dt(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),u.push(a),e&&e.addCue(a)}return u}var ft,gt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},vt=function(e){var t=e;return gt.hasOwnProperty(e)&&(t=gt[e]),String.fromCharCode(t)},yt=15,mt=100,bt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Et={17:2,18:4,21:6,22:8,23:10,19:13,20:15},At={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},kt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Tt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(ft||(ft={}));var _t=function(){function e(){this.time=null,this.verboseLevel=ft.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&c.logger.log(this.time+" ["+e+"] "+t)},e}(),wt=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},St=function(){function e(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ct=function(){function e(e,t,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new St(t,n,i,r,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Rt=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<mt;t++)this.chars.push(new Ct);this.logger=e,this.pos=0,this.currPenState=new St}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<mt;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<mt;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<mt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(ft.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>mt&&(this.logger.log(ft.DEBUG,"Too large cursor position "+this.pos),this.pos=mt)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=vt(e);this.pos>=mt?this.logger.log(ft.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<mt;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<mt;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),It=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<yt;t++)this.rows.push(new Rt(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<yt;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<yt;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<yt;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<yt;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(ft.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(ft.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<yt;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(ft.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(ft.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(ft.INFO,"Rolling up")}else this.logger.log(ft.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<yt;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),xt=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new It(n),this.nonDisplayedMemory=new It(n),this.lastOutputScreen=new It(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(ft.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(ft.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(ft.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(ft.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(ft.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(ft.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(ft.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(ft.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(ft.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(ft.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(ft.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(ft.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(ft.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(ft.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(ft.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ft.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(ft.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(ft.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function Dt(e,t,n){n.a=e,n.b=t}function Pt(e,t,n){return n.a===e&&n.b===t}var Ot=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new _t;this.channels=[null,new xt(e,t,i),new xt(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,i,r,a=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(i=127&t[o],r=127&t[o+1],0!==i||0!==r){if(this.logger.log(ft.DATA,"["+wt([t[o],t[o+1]])+"] -> ("+wt([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(ft.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(ft.WARNING,"Couldn't parse cleaned data "+wt([i,r])+" orig: "+wt([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Pt(e,t,n))return Dt(null,null,n),this.logger.log(ft.DEBUG,"Repeated command ("+wt([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,r=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),Dt(e,t,n),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(ft.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(ft.DEBUG,"MIDROW ("+wt([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Pt(e,t,i))return Dt(null,null,i),!0;var r=e<=23?1:2;n=t>=64&&t<=95?1===r?bt[e]:At[e]:1===r?Et[e]:kt[e];var a=this.channels[r];return!!a&&(a.setPAC(this.interpretPAC(n,t)),Dt(e,t,i),this.currentChannel=r,!0)},t.interpretPAC=function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){var a=t;a=17===r?t+80:18===r?t+112:t+144,this.logger.log(ft.INFO,"Special char '"+vt(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=wt(i);this.logger.log(ft.DEBUG,"Char codes =  "+o.join(",")),Dt(e,t,this.cmdHistory)}return i},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=Tt[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var r=e<=23?1:2;return this.channels[r].setBkgData(i),Dt(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}(),Lt=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Mt=function(e,t,n){return e.substr(n||0,t.length)===t},Nt=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Ut={parse:function(e,t,n,i,r,a){var o,s=Object(Ne.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,p=[],f=!0,g=!1,v=new ht;v.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==d?r=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,i,h)),h&&(r=h-n.presentationOffset),g&&(e.startTime+=r-d,e.endTime+=r-d),e.id=Nt(e.startTime.toString())+Nt(e.endTime.toString())+Nt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&p.push(e)},v.onparsingerror=function(e){o=e},v.onflush=function(){o&&a?a(o):r(p)},s.forEach((function(e){if(f){if(Mt(e,"X-TIMESTAMP-MAP=")){f=!1,g=!0,e.substr(16).split(",").forEach((function(e){Mt(e,"LOCAL:")?u=e.substr(6):Mt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*n[i].start||0)<0&&(t+=8589934592),c-=t,d=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(i)&&Object(l.isFiniteNumber)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*i)+36e5*r}(u)/1e3,h=c/9e4}catch(e){g=!1,o=e}return}""===e&&(f=!1)}v.parse(e+"\n")})),v.flush()}};function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Vt=function(e){var t,n;function i(t){var n;if((n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},n.hls=t,n.config=t.config,n.Cues=t.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var i=new Lt(Bt(n),"textTrack1"),r=new Lt(Bt(n),"textTrack2"),a=new Lt(Bt(n),"textTrack3"),o=new Lt(Bt(n),"textTrack4");n.cea608Parser1=new Ot(1,i,r),n.cea608Parser2=new Ot(3,a,o)}return n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.addCues=function(e,t,n,i,r){for(var a,o,s,l,c=!1,d=r.length;d--;){var h=r[d],p=(a=h[0],o=h[1],s=t,l=n,Math.min(o,l)-Math.max(a,s));if(p>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],n),c=!0,p/(n-t)>.5))return}if(c||r.push([t,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,n,i);else{var f=this.Cues.newCue(null,t,n,i);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:f,track:e})}},r.onInitPtsFound=function(e){var t=this,n=e.frag,i=e.id,r=e.initPTS,a=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]=r),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},r.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},r.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,r=t[e],a=r.label,o=r.languageCode,s=this.getExistingTrack(e);if(s)n[e]=s,Be(n[e]),Ue(n[e],i);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,n[e]=l)}}},r.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},r.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Be(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Be(t[n])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=e.subtitles||[],i=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,n){var i;if(n<r.length){for(var a=null,o=0;o<r.length;o++)if(Ft(r[o],e)){a=r[o];break}a&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}else if(!i&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var n=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(n){var i="textTrack"+n[1],r=t.captionsProperties[i];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}}))},r.onFragLoaded=function(e){var t=e.frag,n=e.payload,i=this.cea608Parser1,r=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var c=t.sn;t.sn!==o+1&&i&&r&&(i.reset(),r.reset()),this.lastSn=c}else if("subtitle"===t.type)if(n.byteLength){if(!Object(l.isFiniteNumber)(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(t,n)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var n=this,i=this.hls,r=this.prevCC,a=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:r,new:!0},this.prevCC=e.cc),Ut.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){if(n.config.renderTextTracksNatively){var r=a[e.level];if("disabled"===r.mode)return void i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){c.logger.debug("Failed occurred on adding cues: "+n);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}))}else{var o=n.tracks[e.level].default?"default":"subtitles"+e.level;i.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:t,track:o})}i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.onFragDecrypted=function(e){var t=e.frag,n=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,n)}},r.onFragParsingUserdata=function(e){var t=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&t&&n)for(var i=0;i<e.samples.length;i++){var r=e.samples[i].bytes;if(r){var a=this.extractCea608Data(r);t.addData(e.samples[i].pts,a[0]),n.addData(e.samples[i].pts,a[1])}}},r.extractCea608Data=function(e){for(var t=31&e[0],n=2,i=[[],[]],r=0;r<t;r++){var a=e[n++],o=127&e[n++],s=127&e[n++],l=3&a;0===o&&0===s||0!=(4&a)&&(0!==l&&1!==l||(i[l].push(o),i[l].push(s)))}return i},i}(h);function Ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}var Kt,Gt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,s=i.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),jt(this.media.textTracks).forEach((function(e){Be(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,i=e.details,r=this.trackId,a=this.tracks,o=a[r];if(n>=a.length||n!==r||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),i.live){var s=re(o.details,i,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,i=t[e];e<0||!i||i.details&&!i.details.live||(c.logger.log("Loading subtitle track "+e),n.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,i=this.trackId;if(t){var r=jt(t.textTracks);if(-1===e)[].slice.call(r).forEach((function(e){e.mode="disabled"}));else{var a=r[i];a&&(a.mode="disabled")}var o=r[e];o&&(o.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=jt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},r=i,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Ht(r.prototype,a),o&&Ht(r,o),i}(h),zt=n("./src/crypt/decrypter.js"),Wt=window.performance,Yt=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=n,i.config=t.config,i.state=ge,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new zt.default(t,t.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.startLoad=function(){this.stopLoad(),this.state=ye;var e=this.tracks[this.currentTrackId];e&&e.details&&(this.setInterval(500),this.tick())},r.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=ye,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=t.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}var s=t.start+t.duration;r?r.end=s:(r={start:a,end:s},i.push(r))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=ye},r.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ge)},r.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=ye)},r.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,i=this.currentTrackId,r=this.tracks,a=r[i];t>=r.length||t!==i||!a||(n.live&&function(e,t,n){void 0===n&&(n=0);var i=-1;ie(e,t,(function(e,t,n){t.start=e.start,i=n}));var r=t.fragments;if(i<0)r.forEach((function(e){e.start+=n}));else for(var a=i+1;a<r.length;a++)r[a].start=r[a-1].start+r[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},r.onKeyLoaded=function(){this.state===be&&(this.state=ye)},r.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,i=e.frag,r=this.hls;if(this.state===Ee&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Wt.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,(function(e){var t=Wt.now();r.trigger(u.default.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},r.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case ye:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,i=this.media,r=this.tracks;if(!r||!r[t]||!r[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=K.bufferedInfo(this._getBuffered(),i.currentTime,o),h=d.end,p=d.len,f=r[t].details,g=f.fragments,v=g.length,y=g[v-1].start+g[v-1].duration;if(p>l)return;var m=this.fragPrevious;h<y?(m&&f.hasProgramDateTime&&(a=le(g,m.endProgramDateTime,s)),a||(a=ue(m,g,h,s))):a=g[v-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===U&&(this.fragCurrent=a,this.state=Ee,this.hls.trigger(u.default.FRAG_LOADING,{frag:a}))}else this.state=ye},r.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){if(this.fragCurrent){var e=this.media?this.media.currentTime:0,t=this.config.maxFragLookUpTolerance,n=this.fragCurrent.start-t,i=this.fragCurrent.start+this.fragCurrent.duration+t;(e<n||e>i)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=ye,this.tick())}},i}(xe);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Kt||(Kt={}));var qt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function $t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(e){if(c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!n.mediaKeysPromise)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){n._media&&(n._attemptSetMediaKeys(t),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};n.mediaKeysPromise.then(t).catch(t)},n._config=t.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=t.config.drmSystemOptions,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.getLicenseServerUrl=function(e){switch(e){case Kt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,n){var i=this,r=function(e,t,n,i){switch(e){case Kt.WIDEVINE:return function(e,t,n){var i={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})})),t.forEach((function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})})),[i]}(t,n,i);default:throw new Error("Unknown key-system: "+e)}}(e,t,n,this._drmSystemOptions);c.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,r);this.mediaKeysPromise=a.then((function(t){return i._onMediaKeySystemAccessObtained(e,t)})),a.catch((function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var n=this;c.logger.log('Access for key-system "'+e+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i);var r=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return i.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t}));return r.catch((function(e){c.logger.error("Failed to create media-keys:",e)})),r},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},l._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var n=this,i=this._mediaKeysList[0];if(!i)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var r=i.mediaKeysSession;if(!r)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,r.generateRequest(e,t).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(e){c.logger.error("Error generating key-session request:",e),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,e)}catch(t){i.open("POST",e,!0),r(i,e)}i.readyState||i.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,n),i},l._onLicenseRequestReadyStageChange=function(e,t,n,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var r=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+r+" attempts left"),this._requestLicense(n,i)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Kt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,e,t);c.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(n,e);r.send(a)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),n=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Kt.WIDEVINE,t,n)}},r=i,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&$t(r.prototype,a),o&&$t(r,o),i}(h);function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var en=Qt(Qt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ze,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ge,bufferController:We,capLevelController:qe,fpsController:Xe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:qt,testBandwidth:!0},{cueHandler:i,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Yt,subtitleTrackController:Gt,timelineController:Vt,audioStreamController:nt,audioTrackController:Je,emeController:Xt});function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sn(e,t,n){return t&&on(e.prototype,t),n&&on(e,n),e}var ln=function(e){var t,n;function i(t){var n;void 0===t&&(t={}),(n=e.call(this)||this).config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var r=i.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=nn(nn({},r),t);var a=an(n).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(a.debug),n._autoLevelCapping=-1;var o=n.abrController=new a.abrController(an(n)),s=new a.bufferController(an(n)),l=n.capLevelController=new a.capLevelController(an(n)),u=new a.fpsController(an(n)),d=new L(an(n)),h=new M(an(n)),p=new N(an(n)),f=new Fe(an(n)),g=n.levelController=new Me(an(n)),v=new H(an(n)),y=[g,n.streamController=new Oe(an(n),v)],m=a.audioStreamController;m&&y.push(new m(an(n),v)),n.networkControllers=y;var b=[d,h,p,o,s,l,u,f,v];if(m=a.audioTrackController){var E=new m(an(n));n.audioTrackController=E,b.push(E)}if(m=a.subtitleTrackController){var A=new m(an(n));n.subtitleTrackController=A,y.push(A)}if(m=a.emeController){var k=new m(an(n));n.emeController=k,b.push(k)}return(m=a.subtitleStreamController)&&y.push(new m(an(n),v)),(m=a.timelineController)&&b.push(new m(an(n))),n.coreComponents=b,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.isSupported=function(){return function(){var e=Y();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}()},sn(i,null,[{key:"version",get:function(){return"0.14.15"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return i.defaultConfig?i.defaultConfig:en},set:function(e){i.defaultConfig=e}}]);var r=i.prototype;return r.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},r.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},r.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},r.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},sn(i,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),i}($);ln.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
    !*** ./src/polyfills/number.js ***!
    \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,n){n.r(t),n.d(t,"isFiniteNumber",(function(){return i})),n.d(t,"MAX_SAFE_INTEGER",(function(){return r}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
    !*** ./src/utils/get-self-scope.js ***!
    \*************************************/
/*! exports provided: getSelfScope */function(e,t,n){function i(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",(function(){return i}))},"./src/utils/logger.js":
/*!*****************************!*\
    !*** ./src/utils/logger.js ***!
    \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,n){n.r(t),n.d(t,"enableLogs",(function(){return c})),n.d(t,"logger",(function(){return d}));var i=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function r(){}var a={trace:r,debug:r,log:r,warn:r,info:r,error:r},o=a;function s(e,t){return t="["+e+"] > "+t}var l=Object(i.getSelfScope)();function u(e){var t=l.console[e];return t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i[0]&&(i[0]=s(e,i[0])),t.apply(l.console,i)}:r}var c=function(e){if(l.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},d=o}}).default},e.exports=n())}))),gt=pt((function(e,t){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var e="undefined"!=typeof window?window:dt,n={};for(var i in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t){for(var n=o,i=e.split("."),r=0;r<i.length-1;r++){var s=i[r];s in n||(n[s]={}),n=n[s]}(s=t(r=n[i=i[i.length-1]]))!=r&&null!=s&&a(n,i,{configurable:!0,writable:!0,value:s})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function c(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.a=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.a};var n=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(i||"")+"_"+n++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={Xd:!0},p=f.Xd;break e}catch(e){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=d;function v(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n]}function y(){this.j=!1,this.g=null,this.b=void 0,this.a=1,this.f=this.h=0,this.v=this.c=null}function m(e){if(e.j)throw new TypeError("Generator is already running");e.j=!0}function b(e,t){e.c={wd:t,Cd:!0},e.a=e.h||e.f}function E(e,t,n){return e.a=n,{value:t}}function A(e){e.a=0}function k(e,t,n){e.h=t,null!=n&&(e.f=n)}function T(e){e.h=0,e.f=2}function _(e,t){e.a=t,e.h=0}function w(e){e.h=0;var t=e.c.wd;return e.c=null,t}function S(e){e.v=[e.c],e.h=0,e.f=0}function C(e,t){var n=e.v.splice(0)[0];(n=e.c=e.c||n)?n.Cd?e.a=e.h||e.f:null!=n.u&&e.f<n.u?(e.a=n.u,e.c=null):e.a=e.f:e.a=t}function R(e){this.a=new y,this.b=e}function I(e,t,n,i){try{var r=t.call(e.a.g,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.j=!1,r;var a=r.value}catch(t){return e.a.g=null,b(e.a,t),x(e)}return e.a.g=null,i.call(e.a,a),x(e)}function x(e){for(;e.a.a;)try{var t=e.b(e.a);if(t)return e.a.j=!1,{value:t.value,done:!1}}catch(t){e.a.b=void 0,b(e.a,t)}if(e.a.j=!1,e.a.c){if(t=e.a.c,e.a.c=null,t.Cd)throw t.wd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return m(e.a),e.a.g?t=I(e,e.a.g.next,t,e.a.m):(e.a.m(t),t=x(e)),t},this.throw=function(t){return m(e.a),e.a.g?t=I(e,e.a.g.throw,t,e.a.m):(b(e.a,t),t=x(e)),t},this.return=function(t){return function(e,t){m(e.a);var n=e.a.g;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),x(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function P(e,t){var n=new D(new R(t));return g&&g(n,e.prototype),n}function O(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new D(new R(e)))}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Y:r,Ud:a}}return{Y:-1,Ud:void 0}}function N(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y.prototype.m=function(e){this.b=e},y.prototype.return=function(e){this.c={return:e},this.a=this.f},y.prototype.u=function(e){this.a=e},s("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var r=o.setTimeout;n.prototype.c=function(e){r(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.w),reject:e(this.f)}},t.prototype.w=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.C(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.G(t,e):this.h(e)},t.prototype.f=function(e){this.j(2,e)},t.prototype.h=function(e){this.j(1,e)},t.prototype.j=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.m()},t.prototype.m=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.C=function(e){var t=this.c();e.ac(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.ac(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.ac=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).ac(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).ac(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),s("WeakMap",(function(e){function t(e){if(this.a=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!L(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!L(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.a]=t,this},t.prototype.get=function(e){return i(e)&&L(e,s)?e[s][this.a]:void 0},t.prototype.has=function(e){return i(e)&&L(e,s)&&L(e[s],this.a)},t.prototype.delete=function(e){return!!(i(e)&&L(e,s)&&L(e[s],this.a))&&delete e[s][this.a]},t})),s("Map",(function(e){function t(){var e={};return e.Fa=e.next=e.head=e}function n(e,t){var n=e.a;return l((function(){if(n){for(;n.head!=e.a;)n=n.Fa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&L(e.b,n))for(var r=0;r<i.length;r++){var s=i[r];if(t!=t&&s.key!=s.key||t===s.key)return{id:n,list:i,index:r,X:s}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Fa:this.a.Fa,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Fa.next=n.X,this.a.Fa=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Fa.next=e.X.next,e.X.next.Fa=e.X.Fa,e.X.head=null,this.size--,!0)},r.prototype.clear=function(){this.b={},this.a=this.a.Fa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),s("Set",(function(e){function t(e){if(this.a=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).Y}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==N(this,e,"includes").indexOf(e,t||0)}})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),s("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).Ud}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}}));var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)L(i,r)&&(e[r]=i[r])}return e};s("Object.assign",(function(e){return e||U})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)L(e,t)&&n.push(e[t]);return n}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=N(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}}));var B=this||self;function F(e,t){var n,i=e.split("."),r=B;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function V(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function H(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function j(e){return e.a/(1-Math.pow(e.c,e.b))}function K(){this.b=new V(2),this.c=new V(5),this.a=0}function G(){}function z(){}function W(){}function Y(){}K.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(j(this.b),j(this.c))};var q=new Set;if(e.console&&e.console.log.bind){var $={},X=($[1]=console.error.bind(console),$[2]=console.warn.bind(console),$[3]=console.info.bind(console),$[4]=console.log.bind(console),$[5]=console.debug.bind(console),$[6]=console.debug.bind(console),$);W=X[2],z=X[1]}function Z(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}var Q=function e(t){var n;return P(e,(function(e){return 1==e.a&&(n=0),3!=e.a?n<t?E(e,n,3):e.u(0):(n++,e.u(2))}))},J=function e(t){var n,i,r,a,o,s;return P(e,(function(e){return 1==e.a&&(n=-1,r=i=void 0,a=u(t),o=a.next()),5!=e.a?o.done?-1==n?e.u(0):E(e,{Y:n,Je:i,item:r,next:void 0},0):(s=o.value,0<=n?E(e,{Y:n,item:r,Je:i,next:s},5):e.u(5)):(n++,i=r,r=s,o=a.next(),e.u(2))}))},ee=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
function te(e){var t;e instanceof te?(ne(this,e.ta),this.Za=e.Za,this.sa=e.sa,ie(this,e.ob),this.ja=e.ja,re(this,e.a.clone()),this.Pa=e.Pa):e&&(t=String(e).match(ee))?(ne(this,t[1]||"",!0),this.Za=ae(t[2]||""),this.sa=ae(t[3]||"",!0),ie(this,t[4]),this.ja=ae(t[5]||"",!0),re(this,t[6]||"",!0),this.Pa=ae(t[7]||"")):this.a=new pe(null)}function ne(e,t,n){e.ta=n?ae(t,!0):t,e.ta&&(e.ta=e.ta.replace(/:$/,""))}function ie(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.ob=t}else e.ob=null}function re(e,t,n){t instanceof pe?e.a=t:(n||(t=oe(t,de)),e.a=new pe(t))}function ae(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function oe(e,t,n){return null!=e?(e=encodeURI(e).replace(t,se),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function se(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=te.prototype).ta="",i.Za="",i.sa="",i.ob=null,i.ja="",i.Pa="",i.toString=function(){var e=[],t=this.ta;if(t&&e.push(oe(t,le,!0),":"),t=this.sa){e.push("//");var n=this.Za;n&&e.push(oe(n,le,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.ob)&&e.push(":",String(t))}return(t=this.ja)&&(this.sa&&"/"!=t.charAt(0)&&e.push("/"),e.push(oe(t,"/"==t.charAt(0)?ce:ue,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Pa)&&e.push("#",oe(t,he)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.ta&&(t=new te);var n=!!e.ta;n?ne(t,e.ta):n=!!e.Za,n?t.Za=e.Za:n=!!e.sa,n?t.sa=e.sa:n=null!=e.ob;var i=e.ja;if(n)ie(t,e.ob);else if(n=!!e.ja){if("/"!=i.charAt(0))if(this.sa&&!this.ja)i="/"+i;else{var r=t.ja.lastIndexOf("/");-1!=r&&(i=t.ja.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ja=i:n=""!==e.a.toString(),n?re(t,e.a.clone()):n=!!e.Pa,n&&(t.Pa=e.Pa),t},i.clone=function(){return new te(this)};var le=/[#\/\?@]/g,ue=/[#\?:]/g,ce=/[#\?]/g,de=/[#\?@]/g,he=/#/g;function pe(e){this.a=e||null}function fe(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function ge(e){this.b=e,this.a=null}function ve(e){this.b=e,this.a=null}function ye(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.j=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function me(e){var t,n;return O((function(i){if(1==i.a){if(e.a>=e.j){if(!e.c)throw new fe(2,7,1010);e.a=1,e.b=e.f}return t=e.a,e.a++,0==t?i.return():(n=e.b*(1+(2*Math.random()-1)*e.h),E(i,new Promise((function(e){new ve(e).R(n/1e3)})),2))}e.b*=e.g,A(i)}))}function be(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Ee(e,t){this.promise=e,this.c=t,this.a=!1}function Ae(e){return new Ee(Promise.reject(e),(function(){return Promise.resolve()}))}function ke(){var e=Promise.reject(new fe(2,7,7001));return e.catch((function(){})),new Ee(e,(function(){return Promise.resolve()}))}function Te(e){return new Ee(Promise.resolve(e),(function(){return Promise.resolve()}))}function _e(e){return new Ee(e,(function(){return e.catch((function(){}))}))}function we(e){return new Ee(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Se(){}function Ce(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Re(e)==Re(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=xe(e),i=xe(t),r=u(Q(e.byteLength)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function Re(e){return e instanceof ArrayBuffer?e:e.buffer}function Ie(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function xe(e,t,n){return Pe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function De(e,t,n){return Pe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Pe(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Re(e),t,Math.min(t+Math.max(n,0),r)-t)}function Oe(t,n){for(var i in n=void 0===n?{}:n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Le(){this.a={}}function Me(){this.Fc=new Le,this.Wb=this}function Ne(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Ue(e){var t,n={};for(t in e)n[t]=e[t];return n}function Be(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Fe(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ve(e,t,n){if(n||(n=Be),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={uc:i.uc},r=e.next()){if(i.uc=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.uc,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function He(e,t,n){if(n||(n=Be),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function je(){this.a=[]}function Ke(e,t){e.a.push(t.finally((function(){Fe(e.a,t)})))}function Ge(e){Me.call(this),this.f=!1,this.g=new je,this.a=new Set,this.b=new Set,this.c=e||null}function ze(e,t,n){n=n||Ze;var i=Qe[e];(!i||n>=i.priority)&&(Qe[e]={priority:n,Ie:t})}function We(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Ye(e,t,n,i,r,a,o){var s=new te(n.uris[r]),l=s.ta,u=!1;l||(ne(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c,d=(l=Qe[l])?l.Ie:null;return d?_e(me(i)).U((function(){return e.f?ke():(c=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&t==Xe&&(e.c(n,i),u=!0,o.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,Be:u}}),(function(s){if(e.f)return ke();if(s instanceof fe){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity){var l=new Oe("retry",{error:s});return e.dispatchEvent(l),r=(r+1)%n.uris.length,Ye(e,t,n,i,r,s,o)}}throw s})):Ae(new fe(2,1,1e3,s))}function qe(){this.a=0}function $e(e,t,n){Ee.call(this,e,t),this.b=n}(i=pe.prototype).ga=null,i.cc=null,i.add=function(e,t){if(!this.ga&&(this.ga={},this.cc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ga.hasOwnProperty(e)&&this.ga[e])||(this.ga[e]=n=[]),n.push(t),this.cc++,this},i.toString=function(){if(this.a)return this.a;if(!this.ga)return"";var e,t=[];for(e in this.ga)for(var n=encodeURIComponent(e),i=this.ga[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},i.clone=function(){var e=new pe;if(e.a=this.a,this.ga){var t,n={};for(t in this.ga)n[t]=this.ga[t].concat();e.ga=n,e.cc=this.cc}return e},fe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},F("shaka.util.Error",fe),fe.Severity={RECOVERABLE:1,CRITICAL:2},fe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},fe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},ge.prototype.R=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},ge.prototype.stop=function(){this.a&&(this.a(),this.a=null)},ve.prototype.Ob=function(){return this.stop(),this.b(),this},ve.prototype.R=function(e){var t=this;return this.stop(),this.a=new ge((function(){t.b()})).R(e),this},ve.prototype.pa=function(e){var t=this;return this.stop(),this.a=new ge((function(){t.a.R(e),t.b()})).R(e),this},ve.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},F("shaka.util.Timer",ve),ve.prototype.stop=ve.prototype.stop,ve.prototype.tickEvery=ve.prototype.pa,ve.prototype.tickAfter=ve.prototype.R,ve.prototype.tickNow=ve.prototype.Ob,be.prototype.resolve=function(){},be.prototype.reject=function(){},Ee.prototype.abort=function(){return this.a=!0,this.c()},Ee.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Ee.prototype.U=function(e,t){function n(n){return function(s){if(r.a&&n)a.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new be,o=new fe(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ee(a,(function(){return i()}))},F("shaka.util.AbortableOperation",Ee),Ee.prototype.chain=Ee.prototype.U,Ee.prototype.finally=Ee.prototype.finally,Ee.all=we,Ee.prototype.abort=Ee.prototype.abort,Ee.notAbortable=_e,Ee.completed=Te,Ee.aborted=ke,Ee.failed=Ae,F("shaka.util.BufferUtils",Se),Se.toDataView=De,Se.toUint8=xe,Se.toArrayBuffer=Ie,Se.equal=Ce,Oe.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Oe.prototype.stopImmediatePropagation=function(){this.a=!0},Oe.prototype.stopPropagation=function(){},Le.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},Le.prototype.get=function(e){return(e=this.a[e])?e.slice():null},Le.prototype.remove=function(e,t){e in this.a&&(this.a[e]=this.a[e].filter((function(e){return e!=t})))},Me.prototype.addEventListener=function(e,t){this.Fc.push(e,t)},Me.prototype.removeEventListener=function(e,t){this.Fc.remove(e,t)},Me.prototype.dispatchEvent=function(e){for(var t=this.Fc.get(e.type)||[],n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Wb,e.currentTarget=this.Wb;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},je.prototype.destroy=function(){for(var e=[],t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.a=[],Promise.all(e)},v(Ge,Me),(i=Ge.prototype).Ke=function(e){this.a.add(e)},i.cf=function(e){this.a.delete(e)},i.ce=function(){this.a.clear()},i.Le=function(e){this.b.add(e)},i.df=function(e){this.b.delete(e)},i.de=function(){this.b.clear()},i.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},i.request=function(e,t){var n=this,i=new qe;if(this.f){var r=Promise.reject(new fe(2,7,7001));return r.catch((function(){})),new $e(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ne(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Ne(t.uris);var a=(r=function(e,t,n){for(var i=Te(void 0),r={},a=(e=u(e.a)).next();!a.done;r={xc:r.xc},a=e.next())r.xc=a.value,i=i.U(function(e){return function(){return n.body&&(n.body=Ie(n.body)),e.xc(t,n)}}(r));return i.U(void 0,(function(e){if(e instanceof fe&&7001==e.code)throw e;throw new fe(2,1,1006,e)}))}(this,e,t)).U((function(){return Ye(n,e,t,new ye(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=Te(void 0),r={},a=(e=u(e.b)).next();!a.done;r={yc:r.yc},a=e.next())r.yc=a.value,i=i.U(function(e){return function(){var i=n.response;return i.data&&(i.data=Ie(i.data)),e.yc(t,i)}}(r));return i.U((function(){return n}),(function(e){var t=2;if(e instanceof fe){if(7001==e.code)throw e;t=e.severity}throw new fe(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=o.U((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Be||!n.c||r.fromCache||e!=Xe||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new $e(d.promise,(function(){return d.abort()}),i),Ke(this.g,r),r},F("shaka.net.NetworkingEngine",Ge),Ge.prototype.request=Ge.prototype.request,Ge.prototype.destroy=Ge.prototype.destroy,Ge.makeRequest=We,Ge.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},Ge.prototype.clearAllResponseFilters=Ge.prototype.de,Ge.prototype.unregisterResponseFilter=Ge.prototype.df,Ge.prototype.registerResponseFilter=Ge.prototype.Le,Ge.prototype.clearAllRequestFilters=Ge.prototype.ce,Ge.prototype.unregisterRequestFilter=Ge.prototype.cf,Ge.prototype.registerRequestFilter=Ge.prototype.Ke,Ge.unregisterScheme=function(e){delete Qe[e]},Ge.registerScheme=ze,Ge.NumBytesRemainingClass=qe,v($e,Ee),Ge.PendingRequest=$e;var Xe=1;Ge.RequestType={MANIFEST:0,SEGMENT:Xe,LICENSE:2,APP:3,TIMING:4};var Ze=3;Ge.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Ze};var Qe={};function Je(e){this.a=!1,this.b=new be,this.c=e}function et(e,t){if(e.a){if(t instanceof fe&&7003==t.code)throw t;throw new fe(2,7,7003,t)}}function tt(){this.a=new Le}function nt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=it;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}it=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}Je.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},(i=tt.prototype).release=function(){this.Xa(),this.a=null},i.l=function(e,t,n,i){this.a&&(e=new nt(e,t,n,i),this.a.push(t,e))},i.ha=function(e,t,n,i){var r=this;this.l(e,t,(function i(a){r.qa(e,t,i),n(a)}),i)},i.qa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.qa(),this.a.remove(t,r))},i.Xa=function(){if(this.a){var e,t=this.a,n=[];for(e in t.a)n.push.apply(n,c(t.a[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.qa();this.a.a={}}},F("shaka.util.EventManager",tt),tt.prototype.removeAll=tt.prototype.Xa,tt.prototype.unlisten=tt.prototype.qa,tt.prototype.listenOnce=tt.prototype.ha,tt.prototype.listen=tt.prototype.l,tt.prototype.release=tt.prototype.release,nt.prototype.qa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var it=void 0;function rt(e){this.b=e,this.a=void 0}function at(){}function ot(e){if(!e)return"";239==(e=xe(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=dt(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new fe(2,2,2004)}}function st(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new fe(2,2,2004);var i=Math.floor(e.byteLength/2);n=new Uint16Array(i),e=De(e);for(var r=(i=u(Q(i))).next();!r.done;r=i.next())n[r=r.value]=e.getUint16(2*r,t);return dt(n)}function lt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=xe(e);if(239==n[0]&&187==n[1]&&191==n[2])return ot(n);if(254==n[0]&&255==n[1])return st(n.subarray(2),!1);if(255==n[0]&&254==n[1])return st(n.subarray(2),!0);if(0==n[0]&&0==n[2])return st(e,!1);if(0==n[1]&&0==n[3])return st(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ot(e);throw new fe(2,2,2003)}function ut(e){e=encodeURIComponent(e);var t=unescape(e);e=new Uint8Array(t.length);for(var n=(t=u(J(t))).next();!n.done;n=t.next())e[(n=n.value).Y]=n.item.charCodeAt(0);return Ie(e)}function ct(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=u(J(e)),a=r.next();!a.done;a=r.next())a=a.value,i.setUint16(2*a.Y,a.item.charCodeAt(0),t);return n}function dt(e){return ht.value()(e)}rt.prototype.value=function(){return null==this.a&&(this.a=this.b()),this.a},F("shaka.util.StringUtils",at),at.resetFromCharCode=function(){ht.a=void 0},at.toUTF16=ct,at.toUTF8=ut,at.fromBytesAutoDetect=lt,at.fromUTF16=st,at.fromUTF8=ot;var ht=new rt((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ia:65536};0<t.Ia;(t={Ia:t.Ia}).Ia/=2)if(e(t.Ia))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ia)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ia));return n}}(t);return null}));function pt(){}function ft(e){return new te(e=lt(e)).sa}function gt(e,t,n){function i(e){De(a).setUint32(o,e.byteLength,!0),o+=4,a.set(xe(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new fe(2,6,6015);var r;r="string"==typeof t?ct(t,!0):t,e=ct(e=lt(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function vt(e,t){this.a=e,this.b=t}function yt(e,t){var n=new vt(4,0),i=Et,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function mt(e,t,n,i){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function bt(e,t,n,i){z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}F("shaka.util.FairPlayUtils",pt),pt.initDataTransform=gt,pt.defaultGetContentId=ft,vt.prototype.toString=function(){return"v"+this.a+"."+this.b};var Et=null;function At(e,t){return e.concat(t)}function kt(){}function Tt(e){return null!=e}function _t(e){var t=Object.create(e.prototype||Object.prototype);return(e=e.call(t))||(yt("Factories requiring new","Factories should be plain functions"),e=t),e}function wt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new te(e)}));return e.map((function(e){return new te(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(At,[]).map((function(e){return e.toString()}))}function St(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:new Set}}var Ct={Ca:"video",eb:"audio",$:"text",qf:"image",gf:"application"};function Rt(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function It(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function xt(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=u(e),i=n.next();!i.done;i=n.next()){var r=u(i.value);if(i=r.next().value,r=r.next().value,!t.has(i))return!1;if((i=t.get(i))!=r||null==i)return!1}return!0}function Dt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Pt(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}var Ot=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Lt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Mt(e){return""!=Vt().canPlayType(e)}function Nt(){return!!navigator.userAgent.match(/Edge?\//)}function Ut(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ft("Tizen")}function Bt(){if(!Ut())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ft(e){return(navigator.userAgent||"").includes(e)}function Vt(){return jt||(Ht||(Ht=new ve((function(){jt=null}))),(jt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(jt=document.createElement("video")),Ht.R(1),jt)}var Ht=null,jt=null;function Kt(){}function Gt(e){return e=dt(xe(e)),btoa(e)}function zt(e,t){t=null==t||t;var n=Gt(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function Wt(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length);for(var i=(n=u(J(n))).next();!i.done;i=n.next())t[(i=i.value).Y]=i.item.charCodeAt(0);return t}function Yt(t){for(var n=t.length/2,i=new Uint8Array(n),r=(n=u(Q(n))).next();!r.done;r=n.next())i[r=r.value]=e.parseInt(t.substr(2*r,2),16);return i}function qt(e){var t=xe(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function $t(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var i=0,r=u(t);for(n=r.next();!n.done;n=r.next())i+=n.value.byteLength;for(i=new Uint8Array(i),r=0,n=(t=u(t)).next();!n.done;n=t.next())n=n.value,i.set(xe(n),r),r+=n.byteLength;return i}function Xt(e,t){var n=this;t=void 0===t?1:t,this.s=e,this.m=new Set,this.a=this.h=null,this.M=!1,this.G=0,this.c=null,this.b=new tt,this.f=new Map,this.v=[],this.j=new be,this.i=null,this.g=function(t){n.j.reject(t),e.onError(t)},this.ca=new Map,this.T=new Map,this.I=new ve((function(){return function(e){var t=e.ca,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new fe(2,6,6014)),e.s.jc(It(n))}(n)})),this.w=!1,this.C=[],this.H=!1,this.W=new ve((function(){!function(e){e.f.forEach((function(t,n){var i=t.Xc,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.s.onExpirationUpdated(n.sessionId,r),t.Xc=r)}))}(n)})).pa(t),this.j.catch((function(){})),this.D=new Je((function(){return function(e){return O((function(t){switch(t.a){case 1:return e.b.release(),e.b=null,e.j.reject(),e.W.stop(),e.W=null,e.I.stop(),e.I=null,E(t,cn(e),2);case 2:if(!e.a){t.u(3);break}return k(t,4),E(t,e.a.setMediaKeys(null),6);case 6:_(t,5);break;case 4:w(t);case 5:e.a=null;case 3:e.c=null,e.m.clear(),e.h=null,e.v=[],e.i=null,e.g=function(){},e.s=null,A(t)}}))}(n)}))}function Zt(e,t,n){return e.v=n,e.w=0<n.length,Qt(e,t)}function Qt(t,n){var i=function(t){if(0==(t=Rt(t.i.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=Yt(t),a=Yt(e);r={kty:"oct",kid:zt(r,!1),k:zt(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:xe(ut(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:new Set(i)}}(t);if(i)for(var r=u(n),a=r.next();!a.done;a=r.next())(a=a.value).video&&a.video.encrypted&&(a.video.drmInfos=[i]),a.audio&&a.audio.encrypted&&(a.audio.drmInfos=[i]);for((i=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})}));for(var i=u(e),r=i.next();!r.done;r=i.next())(r=r.value).video&&r.video.encrypted&&(r.video.drmInfos=n),r.audio&&r.audio.encrypted&&(r.audio.drmInfos=n)}(n,r=Rt(t.i.servers)),a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(((a=a.value).video?a.video.drmInfos:[]).concat(a.audio?a.audio.drmInfos:[]))).next();!o.done;o=a.next())fn(o.value,Rt(t.i.servers),Rt(t.i.advanced||{}));return(r=function(e,t){for(var n=new Set,i=u(t),r=i.next();!r.done;r=i.next()){var a=u(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]));for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=u(n),r=i.next();!r.done;r=i.next())fn(r.value,Rt(e.i.servers),Rt(e.i.advanced||{}));a=e.w?"required":"optional";var o=e.w?["persistent-license"]:["temporary"];for(i=new Map,n=u(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=u(t),r=n.next();!r.done;r=n.next())for(r=r.value,a=u([r.audio,r.video]),r=a.next();!r.done;r=a.next())if(o=r.value){var s=Dt(o.mimeType,o.codecs),l=u(o.drmInfos);for(r=l.next();!r.done;r=l.next()){var c=r.value;(r=i.get(c.keySystem)).drmInfos.push(c),c.distinctiveIdentifierRequired&&(r.distinctiveIdentifier="required"),c.persistentStateRequired&&(r.persistentState="required"),c={robustness:("audio"==o.type?c.audioRobustness:c.videoRobustness)||"",contentType:s},"audio"==o.type?r.audioCapabilities.push(c):r.videoCapabilities.push(c)}}return i}(t,n)).size?(r=an(t,r),i?r:r.catch((function(){}))):(t.M=!0,Promise.resolve())}function Jt(e){return O((function(t){if(1==t.a)return e.h&&e.c&&e.c.serverCertificate&&e.c.serverCertificate.length?(k(t,3),E(t,e.h.setServerCertificate(e.c.serverCertificate),5)):t.u(0);if(3!=t.a)return _(t,0);throw new fe(2,6,6004,w(t).message)}))}function en(e){for(var t=(e.c?e.c.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())tn(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.v)).next();!i.done;i=n.next())on(e,i.value);return t.length||e.v.length||e.j.resolve(),e.j}function tn(e,t,n){for(var i=e.f.values(),r=(i=u(i)).next();!r.done;r=i.next())if(Ce(n,r.value.initData)&&!Ft("Tizen 2"))return;!function(e,t,n){try{var i=e.w?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new fe(2,6,6005,t.message))}e.b.l(i,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.H?e.C.push(t):ln(e,t)})),e.b.l(i,"keystatuseschange",(function(t){return un(e,t)})),e.f.set(i,{initData:n,loaded:!1,Xc:1/0,za:null});try{n=e.i.initDataTransform(n,t,e.c)}catch(n){return t=n,n instanceof fe||(t=new fe(2,6,6016,n)),void e.g(t)}e.i.logLicenseExchange&&zt(n),i.generateRequest(t,n).catch((function(t){if(!e.D.a){e.f.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.g(new fe(2,6,6006,t.message,t,r))}}))}(e,t,n)}function nn(e){return e?e.keySystem:""}function rn(e){return e=Z(e=e.f.keys(),(function(e){return e.sessionId})),Array.from(e)}function an(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,T,S,C;return O((function(R){switch(R.a){case 1:if(1==t.size&&t.has(""))throw new fe(2,6,6e3);for(n=u(t.values()),i=n.next();!i.done;i=n.next())0==(r=i.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;o=u([!0,!1]),s=o.next();case 2:if(s.done){R.u(4);break}l=s.value,c=u(t.keys()),d=c.next();case 5:if(d.done){R.u(7);break}if(h=d.value,p=t.get(h),p.drmInfos.some((function(e){return!!e.licenseServerUri}))!=l){R.u(6);break}return k(R,8),E(R,navigator.requestMediaKeySystemAccess(h,[p]),10);case 10:a=R.b,R.u(7);break;case 8:w(R);case 9:et(e.D);case 6:d=c.next(),R.u(5);break;case 7:if(a){R.u(4);break}s=o.next(),R.u(2);break;case 4:if(!a)throw new fe(2,6,6001);for(et(e.D),k(R,11),e.m.clear(),f=a.getConfiguration(),g=f.audioCapabilities||[],v=f.videoCapabilities||[],y=u(g),m=y.next();!m.done;m=y.next())b=m.value,e.m.add(b.contentType.toLowerCase());for(A=u(v),m=A.next();!m.done;m=A.next())T=m.value,e.m.add(T.contentType.toLowerCase());if(e.c=function(e,t){var n=[],i=[],r=[],a=new Set;return function(e,t,n,i,r){for(var a={},o=(e=u(e)).next();!o.done;a={ma:a.ma},o=e.next()){if(a.ma=o.value,t.includes(a.ma.licenseServerUri)||t.push(a.ma.licenseServerUri),a.ma.serverCertificate&&(n.some(function(e){return function(t){return Ce(t,e.ma.serverCertificate)}}(a))||n.push(a.ma.serverCertificate)),a.ma.initData){o={};for(var s=u(a.ma.initData),l=s.next();!l.done;o={Rb:o.Rb},l=s.next())o.Rb=l.value,i.some(function(e){return function(t){var n=e.Rb;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Ce(t.initData,n.initData)}}(o))||i.push(o.Rb)}if(a.ma.keyIds)for(s=(o=u(a.ma.keyIds)).next();!s.done;s=o.next())r.add(s.value)}}(t.drmInfos,n,i,r,a),{keySystem:e,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:i[0],initData:r,keyIds:a}}(a.keySystem,t.get(a.keySystem)),!e.c.licenseServerUri)throw new fe(2,6,6012,e.c.keySystem);return E(R,a.createMediaKeys(),13);case 13:return S=R.b,et(e.D),e.h=S,e.M=!0,E(R,Jt(e),14);case 14:et(e.D),_(R,0);break;case 11:if(C=w(R),et(e.D,C),e.c=null,e.m.clear(),C instanceof fe)throw C;throw new fe(2,6,6002,C.message)}}))}function on(e,t){var n,i,r,a,o;return O((function(s){switch(s.a){case 1:try{n=e.h.createSession("persistent-license")}catch(t){return i=new fe(2,6,6005,t.message),e.g(i),s.return(Promise.reject(i))}return e.b.l(n,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.H?e.C.push(t):ln(e,t)})),e.b.l(n,"keystatuseschange",(function(t){return un(e,t)})),r={initData:null,loaded:!1,Xc:1/0,za:null},e.f.set(n,r),k(s,2),E(s,n.load(t),4);case 4:return a=s.b,et(e.D),a?(r.loaded=!0,pn(e)&&e.j.resolve(),s.return(n)):(e.f.delete(n),e.g(new fe(2,6,6013)),s.return(Promise.resolve()));case 2:o=w(s),et(e.D,o),e.f.delete(n),e.g(new fe(2,6,6005,o.message));case 3:return s.return(Promise.resolve())}}))}function sn(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=gt(e,n=ft(e),t)),e}function ln(e,t){var n,i,r,a,o,s,l,c,d,h,p,f;O((function(g){switch(g.a){case 1:return n=t.target,e.i.logLicenseExchange&&zt(t.message),i=e.f.get(n),r=e.c.licenseServerUri,a=e.i.advanced[e.c.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=We([r],e.i.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,"com.microsoft.playready"!=e.c.keySystem&&"com.chromecast.playready"!=e.c.keySystem||function(e){var t=st(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=Wt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),k(g,2),E(g,e.s.lb.request(2,o).promise,4);case 4:l=g.b,_(g,3);break;case 2:return c=w(g),d=new fe(2,6,6007,c),e.g(d),i&&i.za&&i.za.reject(d),g.return();case 3:return e.D.a?g.return():(e.G+=(Date.now()-s)/1e3,e.i.logLicenseExchange&&zt(l.data),k(g,5),E(g,n.update(l.data),7));case 7:_(g,6);break;case 5:return h=w(g),p=new fe(2,6,6008,h.message),e.g(p),i&&i.za&&i.za.reject(p),g.return();case 6:f=new Oe("drmsessionupdate"),e.s.onEvent(f),i&&(i.za&&i.za.resolve(),new ve((function(){i.loaded=!0,pn(e)&&e.j.resolve()})).R(vn)),A(g)}}))}function un(e,t){var n=t.target,i=e.f.get(n),r=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var a=n;n=t,t=a}if("com.microsoft.playready"==e.c.keySystem&&16==n.byteLength&&(Ft("Trident/")||Nt())){var o=(a=De(n)).getUint32(0,!0),s=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,l,!1)}"com.microsoft.playready"==e.c.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(i.loaded=!0),"expired"==t&&(r=!0),a=qt(n),e.ca.set(a,t)}));var a=n.expiration-Date.now();(0>a||r&&1e3>a)&&i&&!i.za&&(e.f.delete(n),n.close().catch((function(){}))),pn(e)&&(e.j.resolve(),e.I.R(yn))}function cn(e){var t;return O((function(n){return t=Array.from(e.f.keys()),e.f.clear(),E(n,Promise.all(t.map((function(e){return O((function(t){return 1==t.a?(k(t,2),E(t,function(e){var t;return O((function(n){return 1==n.a?(t=new Promise((function(e,t){new ve(t).R(gn)})),k(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.a?_(n,0):(w(n),void A(n))}))}(e),4)):2!=t.a?_(t,0):(w(t),void A(t))}))}))),0)}))}function dn(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!Nt()&&!e.m.has(Dt(n.mimeType,n.codecs).toLowerCase())||i&&i.encrypted&&!Nt()&&!e.m.has(Dt(i.mimeType,i.codecs).toLowerCase()))return!1;var r=nn(e.c);return 0==(n=(i?i.drmInfos:[]).concat(n?n.drmInfos:[])).length||n.some((function(e){return e.keySystem==r}))}function hn(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=u(t),o=a.next();!o.done;o=a.next())if(o=o.value,r.keySystem==o.keySystem){a=(a=(a=[]).concat(r.initData||[])).concat(o.initData||[]);var s=r.keyIds&&o.keyIds?new Set(c(r.keyIds).concat(c(o.keyIds))):r.keyIds||o.keyIds;n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,initData:a,keyIds:s});break}}return n}function pn(e){return function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}(e=e.f.values(),(function(e){return e.loaded}))}function fn(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}F("shaka.util.Uint8ArrayUtils",Kt),Kt.concat=$t,Kt.toHex=qt,Kt.fromHex=Yt,Kt.fromBase64=Wt,Kt.toBase64=zt,Kt.toStandardBase64=Gt,Kt.equal=function(e,t){return yt("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),Ce(e,t)},Xt.prototype.destroy=function(){return this.D.destroy()},Xt.prototype.configure=function(e){this.i=e},Xt.prototype.yb=function(e){var t,n=this;return O((function(i){if(1==i.a)return n.h?(n.a=e,n.b.ha(n.a,"play",(function(){for(var e=u(n.C),t=e.next();!t.done;t=e.next())ln(n,t.value);n.H=!0,n.C=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.a&&n.b.l(n.a,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return cn(n)})),E(i,n.a.setMediaKeys(n.h).catch((function(e){return Promise.reject(new fe(2,6,6003,e.message))})),2)):(n.b.ha(e,"encrypted",(function(){n.g(new fe(2,6,6010))})),i.return());et(n.D),en(n),n.c.initData.length||n.v.length||(t=function(e){return tn(n,e.initDataType,xe(e.initData))},n.b.l(n.a,"encrypted",t)),A(i)}))},Xt.prototype.Cb=function(){for(var e=1/0,t=this.f.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};var gn=1,vn=5,yn=.5,mn=new rt((function(){return Ie(new Uint8Array([0]))}));function bn(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function En(){}function An(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function kn(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Tn(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=u(_n(e)),r=i.next();!r.done;r=i.next()){var a=r.value;r=a.start,(a=a.end)>t&&(n+=a-Math.max(r,t))}return n}function _n(e){if(!e)return[];for(var t=[],n=u(Q(e.length)),i=n.next();!i.done;i=n.next())i=i.value,t.push({start:e.start(i),end:e.end(i)});return t}function wn(){var e=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.h=[],this.c=[],this.g=[],this.f=!1,this.a.on("data",(function(t){e.c=t.captions,e.g=t.metadata,e.h.push($t(t.initSegment,t.data))})),this.a.on("done",(function(){var t={data:$t.apply(Kt,c(e.h)),captions:e.c,metadata:e.g};e.b.resolve(t),e.f=!1}))}function Sn(t,n){if(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])return!1;if(n)return MediaSource.isTypeSupported(Cn(n,t));var i=Cn("audio",t),r=Cn("video",t);return MediaSource.isTypeSupported(i)||MediaSource.isTypeSupported(r)}function Cn(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function Rn(e,t,n){this.startTime=e,this.direction=Mn,this.endTime=t,this.payload=n,this.region=new Kn,this.position=null,this.positionAlign=xn,this.size=0,this.textAlign=Dn,this.writingMode=Nn,this.lineInterpretation=Un,this.line=null,this.lineHeight="",this.lineAlign=Bn,this.displayAlign=On,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Vn,this.fontStyle=Hn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1,this.cellResolution={columns:32,rows:15}}function In(e,t){for(var n in e)if("nestedCues"==n){if(!He(e.nestedCues,t.nestedCues,In))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!He(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}bn.prototype.init=function(e){var t=muxjs.mp4.probe;e=xe(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},bn.prototype.b=function(e,t){var n=xe(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},bn.prototype.c=function(){this.a.resetCaptionStream()},En.prototype.init=function(){},En.prototype.b=function(){},En.prototype.c=function(){},wn.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Rn.prototype.clone=function(){var e,t=new Rn(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},F("shaka.text.Cue",Rn);var xn="auto";Rn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:xn};var Dn="center",Pn={LEFT:"left",RIGHT:"right",CENTER:Dn,START:"start",END:"end"};Rn.textAlign=Pn;var On="after",Ln={BEFORE:"before",CENTER:"center",AFTER:On};Rn.displayAlign=Ln;var Mn="ltr";Rn.direction={HORIZONTAL_LEFT_TO_RIGHT:Mn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Nn="horizontal-tb";Rn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Nn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Un=0;Rn.lineInterpretation={LINE_NUMBER:Un,PERCENTAGE:1};var Bn="start",Fn={CENTER:"center",START:Bn,END:"end"};Rn.lineAlign=Fn;var Vn=400;Rn.fontWeight={NORMAL:Vn,BOLD:700};var Hn="normal",jn={NORMAL:Hn,ITALIC:"italic",OBLIQUE:"oblique"};function Kn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Gn,this.scroll=zn}Rn.fontStyle=jn,Rn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},F("shaka.text.CueRegion",Kn);var Gn=1;Kn.units={PX:0,PERCENTAGE:Gn,LINES:2};var zn="";function Wn(e){this.m=null,this.c=e,this.f=this.v=0,this.g=1/0,this.b=this.a=null,this.j="",this.h=new Map}function Yn(t){return!!($n[t]||e.muxjs&&"application/cea-608"==t)}function qn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=u(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=r,l.endTime+=r,l.startTime>=e.f&&l.startTime<e.g&&(l=new Rn(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.j&&e.c.append([l]))}for(a=(r=u(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.h.has(a)||e.h.set(a,new Map),s=(t=u(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.h.get(a).set(s,l);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.g))}Kn.scrollMode={NONE:zn,UP:"up"},Wn.prototype.destroy=function(){return this.c=this.m=null,this.h.clear(),Promise.resolve()},Wn.prototype.remove=function(e,t){var n=this;return O((function(i){if(1==i.a)return E(i,Promise.resolve(),2);!n.c||!n.c.remove(e,t)||null==n.a||t<=n.a||e>=n.b||(e<=n.a&&t>=n.b?n.a=n.b=null:e<=n.a&&t<n.b?n.a=t:e>n.a&&t>=n.b&&(n.b=e)),A(i)}))},F("shaka.text.TextEngine",Wn),Wn.prototype.destroy=Wn.prototype.destroy,Wn.unregisterParser=function(e){delete $n[e]},Wn.registerParser=function(e,t){$n[e]=t};var $n={};function Xn(e,t,n,i){var r=this;this.a=e,this.h=n,this.f={},this.c=null,this.C=i||function(){},this.g={},this.b=new tt,this.m={},this.v=t,this.w=new be,this.j=function(e,t){var n=new MediaSource;return e.b.ha(n,"sourceopen",t.resolve),e.a.src=di(n),n}(this,this.w),this.D=new Je((function(){return function(e){var t,n,i,r,a,o,s;return O((function(l){if(1==l.a){for(n in t=[],e.g)for(i=e.g[n],r=i[0],e.g[n]=i.slice(0,1),r&&t.push(r.p.catch(kt)),a=u(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new fe(2,7,7003,void 0));for(s in e.c&&t.push(e.c.destroy()),e.h&&t.push(e.h.destroy()),e.m)t.push(e.m[s].destroy());return E(l,Promise.all(t),2)}e.b&&(e.b.release(),e.b=null),e.a&&(e.a.removeAttribute("src"),e.a.load(),e.a=null),e.j=null,e.c=null,e.h=null,e.f={},e.m={},e.v=null,e.g={},A(l)}))}(r)}))}function Zn(e){var t=Dt(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Ot.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return Yn(t)||MediaSource.isTypeSupported(n)||Sn(t,e.type)}function Qn(e,t){e.c||(e.c=new Wn(e.h)),"application/cea-608"!=t&&(e.c.m=_t($n[t]))}function Jn(e){return!e.j||"ended"==e.j.readyState}function ei(e,t){if("text"==t)var n=e.c.a;else n=!(n=ni(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function ti(e,t){return"text"==t?e.c.b:An(ni(e,t))}function ni(e,t){try{return e.f[t].buffered}catch(e){return null}}function ii(t,n,i,r,a,o){var s,l,u,c;return O((function(d){return 1==d.a?n==(s=Ct).$?E(d,function(e,t,n,i){var r,a,o;return O((function(s){return 1==s.a?E(s,Promise.resolve(),2):e.m&&e.c?null==n||null==i?(e.m.parseInit(xe(t)),s.return()):(r={periodStart:e.v,segmentStart:n,segmentEnd:i},a=e.m.parseMedia(xe(t),r),o=a.filter((function(t){return t.startTime>=e.f&&t.startTime<e.g})),e.c.append(o),null==e.a&&(e.a=Math.max(n,e.f)),e.b=Math.min(i,e.g),void A(s)):s.return()}))}(t.c,i,r,a),0):t.m[n]?E(d,function(e,t){e.f=!0,e.b=new be,e.h=[],e.c=[],e.g=[];var n=xe(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new fe(2,3,3018)),e.b}(t.m[n],i),10):(o&&e.muxjs&&(t.c||Qn(t,"text/vtt"),null==r&&null==a?t.v.init(i):t.v.b(i,(function(e){e.length&&qn(t.c,e,r,a,t.f[s.Ca].timestampOffset)}))),E(d,si(t,n,(function(){t.f[n].appendBuffer(i)})),0)):(l=d.b,t.c||Qn(t,"text/vtt"),l.metadata&&(u=t.f[n].timestampOffset,t.C(l.metadata,u,a)),l.captions&&l.captions.length&&(c=t.f[s.Ca].timestampOffset,qn(t.c,l.captions,r,a,c)),E(d,si(t,n,(function(){t.f[n].appendBuffer(l.data)})),0))}))}function ri(e,t){var n=ti(e,"video")||0;!function(e,t,n){if(e.j=t,t=e.h.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.c.append(r)}(e.c,t,n)}function ai(e,t){return O((function(n){return t==Ct.$?e.c?E(n,e.c.remove(0,1/0),0):n.return():E(n,si(e,t,(function(){var n=e.j.duration;0>=n?oi(e,t):e.f[t].remove(0,n)})),0)}))}function oi(e,t){var n=e.g[t][0];n&&(n.p.resolve(),ui(e,t))}function si(e,t,n){return et(e.D),n={start:n,p:new be},e.g[t].push(n),1==e.g[t].length&&ci(e,t),n.p}function li(e,t){var n,i,r,a,o;return O((function(s){switch(s.a){case 1:for(r in et(e.D),n=[],i={},e.f)i.ub=new be,a={start:function(e){return function(){return e.ub.resolve()}}(i),p:i.ub},e.g[r].push(a),n.push(i.ub),1==e.g[r].length&&a.start(),i={ub:i.ub};return k(s,2),E(s,Promise.all(n),4);case 4:_(s,3);break;case 2:throw w(s);case 3:try{t()}catch(e){throw new fe(2,3,3015,e)}finally{for(o in e.f)ui(e,o)}A(s)}}))}function ui(e,t){e.g[t].shift(),ci(e,t)}function ci(e,t){var n=e.g[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new fe(2,3,3017,t)):n.p.reject(new fe(2,3,3015,i)),ui(e,t)}}(i=Xn.prototype).destroy=function(){return this.D.destroy()},i.init=function(e,t){var n,i,r,a,o,s,l,c=this;return O((function(d){if(1==d.a)return n=Ct,E(d,c.w,2);for(i={},r=u(e.keys()),a=r.next();!a.done;i={la:i.la},a=r.next())i.la=a.value,o=e.get(i.la),s=Dt(o.mimeType,o.codecs),i.la==n.$?Qn(c,s):(!t&&MediaSource.isTypeSupported(s)||!Sn(s,i.la)||(c.m[i.la]=new wn,s=Cn(i.la,s)),l=c.j.addSourceBuffer(s),c.b.l(l,"error",function(e){return function(){c.g[e.la][0].p.reject(new fe(2,3,3014,c.a.error?c.a.error.code:0))}}(i)),c.b.l(l,"updateend",function(e){return function(){return oi(c,e.la)}}(i)),c.f[i.la]=l,c.g[i.la]=[]);A(d)}))},i.dc=function(){var e={total:_n(this.a.buffered),audio:_n(ni(this,"audio")),video:_n(ni(this,"video")),text:[]};if(this.c){var t=this.c.a,n=this.c.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return O((function(r){return E(r,e==Ct.$?i.c.remove(t,n):si(i,e,(function(){n<=t?oi(i,e):i.f[e].remove(t,n)})),0)}))},i.flush=function(e){var t=this;return O((function(n){return e==Ct.$?n.return():E(n,si(t,e,(function(){t.a.currentTime-=.001,oi(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return O((function(n){return E(n,li(t,(function(){Jn(t)||(e?t.j.endOfStream(e):t.j.endOfStream())})),0)}))},i.ya=function(e){var t=this;return O((function(n){return E(n,li(t,(function(){t.j.duration=e})),0)}))},i.getDuration=function(){return this.j.duration};var di=e.URL.createObjectURL;function hi(e,t){return e=gi(e),t=gi(t),e.split("-")[0]==t.split("-")[0]}function pi(e,t){e=gi(e),t=gi(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function fi(e,t){e=gi(e),t=gi(t);var n=e.split("-"),i=t.split("-");return 2==n.length&&2==i.length&&n[0]==i[0]}function gi(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=bi.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function vi(e,t){return e=gi(e),(t=gi(t))==e?4:pi(t,e)?3:fi(t,e)?2:pi(e,t)?1:0}function yi(e){return e.language?gi(e.language):e.audio&&e.audio.language?gi(e.audio.language):e.video&&e.video.language?gi(e.video.language):"und"}function mi(e,t){for(var n=gi(e),i=new Set,r=u(t),a=r.next();!a.done;a=r.next())i.add(gi(a.value));for(a=(r=u(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(pi(a=a.value,n))return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(fi(a=a.value,n))return a;for(a=(i=u(i)).next();!a.done;a=i.next())if(pi(n,a=a.value))return a;return null}var bi=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ei(e,t){function n(e){var t="";e.video&&(t=Pt(e.video.codecs)[0]);var n="";return e.audio&&(n=Pt(e.audio.codecs)[0]),t+"-"+n}for(var i=Ii(e.variants,t),r=new Le,a=(i=u(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,l=1/0;!function(e,t){for(var n in e.a)t(n,e.a[n])}(r,(function(e,t){for(var n=0,i=0,r=u(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;(n/=i)<l&&(s=e,l=n)})),e.variants=e.variants.filter((function(e){return n(e)==s}))}function Ai(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function ki(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Ti(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var l=new Set;if(t)for(var c=u(t.roles),d=c.next();!d.done;d=c.next())l.add(d.value);if(n)for(d=(c=u(n.roles)).next();!d.done;d=c.next())l.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function _i(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function wi(e){return e.__shaka_id||(e.__shaka_id=Pi++),e.__shaka_id}function Si(e){var t=Ci(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t}function Ci(e){return{id:wi(e),active:!1,type:"",bandwidth:0,language:gi(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Ri(e){return e.allowedByApplication&&e.allowedByKeySystem}function Ii(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,c(r))):i.get(Math.min.apply(Math,c(n)))}function xi(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=mi(gi(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return gi(e.language)==o})))}if(n){if((e=Di(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(At,[])).length?Di(i,e[0]):i}function Di(e,t){return e.filter((function(e){return e.roles.includes(t)}))}var Pi=0;function Oi(){this.h=null,this.c=!1,this.a=new K,this.b=[],this.g=1,this.j=!1,this.i=this.f=null}function Li(e,t){return e&&(t=t.filter((function(t){return Ai(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Mi(e,t){this.a=e,this.b=new Set([e]);for(var n=u(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Ni(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Ui(n,i)&&Bi(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Ui(n=e.video,i=t.video)&&Bi(n.roles,i.roles))),!n}function Ui(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Pt(e)[0]})),i=t.codecs.split(",").map((function(e){return Pt(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=u(Q(n.length)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function Bi(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=u(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Fi(e){this.a=e,this.b=new Vi(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Vi(e,t,n,i,r){this.f=e,this.c=t,this.a=n,this.b=void 0===i?"":i,this.g=void 0===r?"":r}function Hi(){this.a=Gi,this.b=(new Map).set(Gi,2).set(Ki,1)}function ji(e,t,n){e.b.set(Gi,n).set(Ki,t)}(i=Oi.prototype).stop=function(){this.h=null,this.c=!1,this.b=[],this.g=1,this.f=null},i.init=function(e){this.h=e},i.chooseVariant=function(){var e=Li(this.i.restrictions,this.b),t=this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate);this.b.length&&!e.length&&(e=[(e=Li(null,this.b))[0]]);for(var n=e[0]||null,i=(e=u(J(e))).next();!i.done;i=e.next()){var r=i.value;i=r.item;var a=isNaN(this.g)?1:Math.abs(this.g);r=a*(r.next||{bandwidth:1/0}).bandwidth/this.i.bandwidthUpgradeTarget,t>=a*i.bandwidth/this.i.bandwidthDowngradeTarget&&t<=r&&(n=i)}return this.f=Date.now(),n},i.enable=function(){this.c=!0},i.disable=function(){this.c=!1},i.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,H(n.b,r,i),H(n.c,r,i)}if(null!=this.f&&this.c)e:{if(this.j){if(Date.now()-this.f<1e3*this.i.switchInterval)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseVariant(),this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate),n&&this.h(n)}},i.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate)},i.setVariants=function(e){this.b=e},i.playbackRateChanged=function(e){this.g=e},i.configure=function(e){this.i=e},F("shaka.abr.SimpleAbrManager",Oi),Oi.prototype.configure=Oi.prototype.configure,Oi.prototype.playbackRateChanged=Oi.prototype.playbackRateChanged,Oi.prototype.setVariants=Oi.prototype.setVariants,Oi.prototype.getBandwidthEstimate=Oi.prototype.getBandwidthEstimate,Oi.prototype.segmentDownloaded=Oi.prototype.segmentDownloaded,Oi.prototype.disable=Oi.prototype.disable,Oi.prototype.enable=Oi.prototype.enable,Oi.prototype.chooseVariant=Oi.prototype.chooseVariant,Oi.prototype.init=Oi.prototype.init,Oi.prototype.stop=Oi.prototype.stop,Mi.prototype.add=function(e){return!!Ni(this.a,e)&&(this.b.add(e),!0)},Mi.prototype.values=function(){return this.b.values()},Fi.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ni(t.a,e)}));return n.length?new Mi(n[0],n):this.b.create(e)},Vi.prototype.create=function(e){var t=[];t=function(e,t){var n=mi(gi(t),e.map((function(e){return yi(e)})));return n?e.filter((function(e){return n==yi(e)})):[]}(e,this.f);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.c&&((e=function(e,t,n){return e.filter((function(e){if(n){var i=e[n];return i&&i.roles.includes(t)}return i=e.audio,e=e.video,i&&i.roles.includes(t)||e&&e.roles.includes(t)}))}(t,this.c,this.g)).length&&(t=e)),this.a&&((e=Ii(t,this.a)).length&&(t=e)),this.b&&((e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b)).length&&(t=e)),e=new Mi(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Ni(e.a,n)&&e.add(n);return e};var Ki=0,Gi=1;function zi(){}function Wi(e,t,n,i){var r,a,o,s;return O((function(l){if(1==l.a)return i&&(r=qi[i.toLowerCase()])?l.return(r):(a=Yi(e))&&(o=$i[a])?l.return(o):i?l.u(2):E(l,function(e,t,n){var i,r,a;return O((function(o){return 1==o.a?((i=We([e],n)).method="HEAD",E(o,t.request(0,i).promise,2)):(r=o.b,a=r.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}(e,t,n),3);if(2!=l.a&&(i=l.b)&&(s=qi[i]))return l.return(s);throw new fe(2,4,4e3,e)}))}function Yi(e){return 1==(e=new te(e).ja.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}F("shaka.media.ManifestParser",zi),zi.unregisterParserByMime=function(e){delete qi[e]},zi.registerParserByMime=function(e,t){qi[e]=t},zi.registerParserByExtension=function(e,t){$i[e]=t};var qi={},$i={};function Xi(e,t,n){this.c=e,this.b=t,this.a=n}function Zi(e,t,n,i,r,a,o,s,l){this.startTime=e,this.endTime=t,this.c=n,this.b=i,this.a=r,this.f=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l}function Qi(e,t,n){this.f=e,this.mc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.j=0,this.m=!0,this.v=0,this.w=void 0===n||n}function Ji(e,t){this.g=e,this.h=tr(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.j=t,this.c=function(){}}function er(e){this.a=e}function tr(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.currentTime;for(var n=(e=u(_n(e.a.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function nr(e,t,n,i,r){var a=this;this.a=e,this.w=t,this.i=n,this.v=r,this.b=new tt,this.j=!1,this.m=e.readyState,this.f=!1,this.c=i,this.h=!1,this.b.l(e,"waiting",(function(){return ir(a)})),this.g=new ve((function(){ir(a)})).pa(.25)}function ir(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.j)return}else e.j=!1;if(!e.a.paused){var t;if(e.a.readyState!=e.m&&(e.f=!1,e.m=e.a.readyState),!(t=!e.c)){var n=(t=e.c).g,i=tr(n),r=n.a.currentTime,a=Date.now()/1e3;t.a==r&&t.h==i||(t.f=a,t.a=r,t.h=i,t.b=!1),(i=(r=a-t.f)>=t.j&&i&&!t.b)&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime),t=!i}if(t){var o=e.i.smallGapLimit;if(r=e.a.currentTime,!(null==(n=function(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;var n=Nt()||Ft("Trident/")||Ft("Tizen")||Ft("CrKey")?.5:.1,i=_n(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}));return 0<=i?i:null}(t=e.a.buffered,r))||0==n&&!e.h||(i=t.start(n),i>=e.w.Ea()))){o=(a=i-r)<=o;var s=!1;.001>a||(o||e.f||(e.f=!0,(r=new Oe("largegap",{currentTime:r,gapSize:a})).cancelable=!0,e.v(r),e.i.jumpLargeGaps&&!r.defaultPrevented&&(s=!0)),!o&&!s)||(0!=n&&t.end(n-1),e.a.currentTime=i)}}}}}function rr(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ar.get(t),n.ha(e,t,i))}Xi.prototype.Lc=function(){return this.b},Xi.prototype.Kc=function(){return this.a},F("shaka.media.InitSegmentReference",Xi),Xi.prototype.getEndByte=Xi.prototype.Kc,Xi.prototype.getStartByte=Xi.prototype.Lc,Zi.prototype.we=function(){return this.startTime},Zi.prototype.je=function(){return this.endTime},Zi.prototype.Lc=function(){return this.b},Zi.prototype.Kc=function(){return this.a},F("shaka.media.SegmentReference",Zi),Zi.prototype.getEndByte=Zi.prototype.Kc,Zi.prototype.getStartByte=Zi.prototype.Lc,Zi.prototype.getEndTime=Zi.prototype.je,Zi.prototype.getStartTime=Zi.prototype.we,(i=Qi.prototype).getDuration=function(){return this.g},i.oe=function(){return this.a},i.ya=function(e){this.g=e},i.ve=function(){return this.f},i.Pd=function(e){this.j=e},i.Nb=function(e){this.m=e},i.ld=function(e){this.h=e},i.Xe=function(e){this.mc=e},i.ie=function(){return this.mc},i.mb=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Vc(e[0].startTime),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,t),null!=this.f&&this.w&&(this.f=(Date.now()+this.j)/1e3-this.b-this.a)}},i.Vc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},i.Uc=function(e){this.a=Math.max(this.a,e)},i.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},i.S=function(){return 1/0==this.g&&!this.m},i.Ta=function(){return 1/0!=this.g&&!this.m},i.Qa=function(){return Math.max(this.v,this.Ka()-this.h)},i.Qd=function(e){this.v=e},i.Ka=function(){return this.S()||this.Ta()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.g):this.g},i.Eb=function(e){var t=Math.max(this.c,this.v);return 1/0==this.h?t:Math.max(t,Math.min(this.Ka()-this.h+e,this.Ea()))},i.ib=function(){return this.Eb(0)},i.Ea=function(){return Math.max(0,this.Ka()-(this.S()||this.Ta()?this.mc:0))},i.Td=function(){return!(null==this.f||null!=this.b&&this.w)},F("shaka.media.PresentationTimeline",Qi),Qi.prototype.usingPresentationStartTime=Qi.prototype.Td,Qi.prototype.getSeekRangeEnd=Qi.prototype.Ea,Qi.prototype.getSeekRangeStart=Qi.prototype.ib,Qi.prototype.getSafeSeekRangeStart=Qi.prototype.Eb,Qi.prototype.getSegmentAvailabilityEnd=Qi.prototype.Ka,Qi.prototype.setUserSeekStart=Qi.prototype.Qd,Qi.prototype.getSegmentAvailabilityStart=Qi.prototype.Qa,Qi.prototype.isInProgress=Qi.prototype.Ta,Qi.prototype.isLive=Qi.prototype.S,Qi.prototype.offset=Qi.prototype.offset,Qi.prototype.notifyMaxSegmentDuration=Qi.prototype.Uc,Qi.prototype.notifyMinSegmentStartTime=Qi.prototype.Vc,Qi.prototype.notifySegments=Qi.prototype.mb,Qi.prototype.getDelay=Qi.prototype.ie,Qi.prototype.setDelay=Qi.prototype.Xe,Qi.prototype.setSegmentAvailabilityDuration=Qi.prototype.ld,Qi.prototype.setStatic=Qi.prototype.Nb,Qi.prototype.setClockOffset=Qi.prototype.Pd,Qi.prototype.getPresentationStartTime=Qi.prototype.ve,Qi.prototype.setDuration=Qi.prototype.ya,Qi.prototype.getMaxSegmentDuration=Qi.prototype.oe,Qi.prototype.getDuration=Qi.prototype.getDuration,Ji.prototype.release=function(){this.g=null,this.c=function(){}},nr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.g&&(this.g.stop(),this.g=null),this.c&&(this.c.release(),this.c=null),this.a=this.w=this.v=null},nr.prototype.Yc=function(){this.h=!0,ir(this)};var ar=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function or(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.h=!1,this.b=new tt,this.c=new dr(e),rr(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){ur(i,i.f)}))}function sr(e){return e.h?e.a.currentTime:e.f}function lr(e,t){0<e.a.readyState?hr(e.c,t):rr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){ur(e,e.f)}))}function ur(e,t){.001>Math.abs(e.a.currentTime-t)?cr(e):(e.b.ha(e.a,"seeking",(function(){cr(e)})),hr(e.c,0==e.a.currentTime?t:e.a.currentTime))}function cr(e){e.h=!0,e.b.l(e.a,"seeking",(function(){return e.g()}))}function dr(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new ve((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function hr(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.pa(.1)}function pr(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new tt,rr(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.ha(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function fr(e,t,n,i,r,a){var o=this;this.c=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.i=n,this.w=r,this.j=null,this.f=new nr(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new Ji(new er(e),t.stallThreshold);return function(e,t){e.c=t}(i,(function(){n?e.currentTime+=n:(e.pause(),e.play())})),i}(e,n),a),this.b=new or(e,(function(){var e=o.f;e.j=!0,e.h=!1,e.f=!1;var t=sr(o.b);return e=vr(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.j||o.j<t-1)?(o.j=t,lr(o.b,e),e=void 0):(o.w(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.getDuration()?e.a.ib():e.a.Ea():0>t&&(t=e.a.Ea()+t),gr(e,yr(e,t))}(this,i)),this.h=new ve((function(){if(0!=o.c.readyState&&!o.c.paused){var e=sr(o.b),t=o.a.ib(),n=o.a.Ea();3>n-t&&(t=n-3),e<t&&(e=vr(o,e),o.c.currentTime=e)}})).pa(.25)}function gr(e,t){var n=e.a.getDuration();return t>=n?n-e.i.durationBackoff:t}function vr(e,t){var n=Math.max(e.C,e.i.rebufferingGoal),i=e.i.safeSeekOffset,r=e.a.ib(),a=e.a.Ea(),o=e.a.getDuration();3>a-r&&(r=a-3);var s=e.a.Eb(n),l=e.a.Eb(i);return n=e.a.Eb(n+i),t>=o?gr(e,t):t>a?a:t<r?kn(e.c.buffered,l)?l:n:t>=s||kn(e.c.buffered,t)?t:n}function yr(e,t){var n=e.a.ib();return t<n||t>(n=e.a.Ea())?n:t}function mr(e){this.a=e,this.b=null,this.c=0}function br(e,t,n){return new mr([new Zi(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Er(e){this.b=e,this.a=this.b.find(0)||0}function Ar(){mr.call(this,[]),this.f=[]}function kr(e){var t=this;this.a=e,this.f=!1,this.b=this.a.fc(),this.c=new ve((function(){t.a.Gd(.25*t.b)}))}function Tr(e){e.c.stop();var t=e.f?0:e.b;if(0<=t)try{return void(e.a.fc()!=t&&e.a.kd(t))}catch(e){}e.c.pa(.25),0!=e.a.fc()&&e.a.kd(0)}function _r(e){var t=this;this.c=e,this.a=new Set,this.b=new ve((function(){wr(t,!1)})).pa(.25)}function wr(e,t){for(var n=u(e.a),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=e.c.currentTime,a=t,o=u(i.g.a),s=o.next();!s.done;s=o.next()){s=s.value;var l=i.f.get(s),c=r<s.startTime?Rr:r>s.endTime?xr:Ir;i.f.set(s,c);for(var d=u(i.h),h=d.next();!h.done;h=d.next())(h=h.value).ab==l&&h.$a==c&&h.Sa(s,a)}}}function Sr(e){var t=this;this.b=function(){},this.a=new Set,this.f=e,this.c=new ve((function(){for(var e=t.f(),n=u(t.a),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&t.a.delete(i)})).pa(2)}function Cr(e){var t=this;this.g=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.h=[{ab:null,$a:Ir,Sa:function(e,n){return t.a(e,n)}},{ab:Rr,$a:Ir,Sa:function(e,n){return t.a(e,n)}},{ab:xr,$a:Ir,Sa:function(e,n){return t.a(e,n)}},{ab:Ir,$a:Rr,Sa:function(e,n){return t.b(e,n)}},{ab:Ir,$a:xr,Sa:function(e,n){return t.b(e,n)}},{ab:Rr,$a:xr,Sa:function(e,n){return t.c(e,n)}},{ab:xr,$a:Rr,Sa:function(e,n){return t.c(e,n)}}]}or.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},dr.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},pr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},pr.prototype.m=function(e){this.c=this.f?this.c:e},pr.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},pr.prototype.v=function(){},fr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.f&&(this.f.release(),this.f=null),this.h&&(this.h.stop(),this.h=null),this.c=this.b=this.a=this.i=null,this.w=function(){}},fr.prototype.m=function(e){lr(this.b,e)},fr.prototype.g=function(){var e=sr(this.b);return 0<this.c.readyState&&!this.c.paused?yr(this,e):e},fr.prototype.v=function(){this.f.Yc()},(i=mr.prototype).destroy=function(){return yt("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},i.release=function(){this.a=[],this.b&&this.b.stop(),this.b=null},i.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return t+this.c}return this.a.length&&e<this.a[0].startTime?this.c:null},i.get=function(e){return 0==this.a.length||0>(e-=this.c)||e>=this.a.length?null:this.a[e]},i.offset=function(e){for(var t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},i.kb=function(e){var t,n=this.a[this.a.length-1];t=this.a.length?e.filter((function(e){return e.startTime>=n.startTime})):e,n&&t.length&&t[0].startTime==n.startTime&&this.a.pop(),this.a.push.apply(this.a,c(t))},i.Oa=function(e){var t=this.a.length;this.a=this.a.filter((function(t){return t.endTime>e})),this.c+=t-this.a.length},i.Ja=function(e,t){for(;this.a.length&&this.a[this.a.length-1].startTime>=t;)this.a.pop();for(;this.a.length&&this.a[0].endTime<=e;)this.a.shift(),this.c++;if(0!=this.a.length){var n=this.a[this.a.length-1];this.a[this.a.length-1]=new Zi(n.startTime,t,n.c,n.b,n.a,n.f,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd)}},i.oc=function(e,t){var n=this;this.b&&this.b.stop(),this.b=new ve((function(){var e=t();n.a.push.apply(n.a,c(e)),0==n.a.length&&(n.b.stop(),n.b=null)})),this.b.pa(e)},mr.prototype[Symbol.iterator]=function(){return new Er(this)},F("shaka.media.SegmentIndex",mr),mr.forSingleSegment=br,mr.prototype.updateEvery=mr.prototype.oc,mr.prototype.fit=mr.prototype.Ja,mr.prototype.evict=mr.prototype.Oa,mr.prototype.merge=mr.prototype.kb,mr.prototype.offset=mr.prototype.offset,mr.prototype.get=mr.prototype.get,mr.prototype.find=mr.prototype.find,mr.prototype.release=mr.prototype.release,mr.prototype.destroy=mr.prototype.destroy,Er.prototype.seek=function(e){return null==(e=this.b.find(e))?(this.a=Math.pow(2,31),null):(this.a=e,this.b.get(this.a++))},Er.prototype.current=function(){return this.b.get(this.a-1)},Er.prototype.next=function(){var e=this.b.get(this.a++);return{value:e,done:!e}},F("shaka.media.SegmentIterator",Er),Er.prototype.next=Er.prototype.next,Er.prototype.current=Er.prototype.current,Er.prototype.seek=Er.prototype.seek,v(Ar,mr),(i=Ar.prototype).clone=function(){var e=new Ar;return e.f=this.f.slice(),e},i.release=function(){for(var e=u(this.f),t=e.next();!t.done;t=e.next())t.value.release();this.f=[]},i.find=function(e){for(var t=0,n=u(this.f),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.c+i.a.length}return null},i.get=function(e){for(var t=0,n=u(this.f),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.c+i.a.length}return null},i.offset=function(){},i.kb=function(){},i.Oa=function(){},i.Ja=function(){},i.oc=function(){},F("shaka.media.MetaSegmentIndex",Ar),Ar.prototype.updateEvery=Ar.prototype.oc,Ar.prototype.fit=Ar.prototype.Ja,Ar.prototype.evict=Ar.prototype.Oa,Ar.prototype.merge=Ar.prototype.kb,Ar.prototype.offset=Ar.prototype.offset,Ar.prototype.get=Ar.prototype.get,Ar.prototype.find=Ar.prototype.find,Ar.prototype.release=Ar.prototype.release,kr.prototype.release=function(){this.c&&(this.c.stop(),this.c=null),this.a=null},kr.prototype.set=function(e){this.b=e,Tr(this)},_r.prototype.release=function(){this.b.stop();for(var e=u(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Sr.prototype.release=function(){this.b=function(){},this.a.clear(),this.c.stop()},Cr.prototype.release=function(){this.g=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}};var Rr=1,Ir=2,xr=3;function Dr(e,t){this.P=De(e),this.a=t==Or,this.B=0}function Pr(){return new fe(2,3,3e3)}(i=Dr.prototype).ua=function(){return this.B<this.P.byteLength},i.ue=function(){return this.B},i.ke=function(){return this.P.byteLength},i.oa=function(){try{var e=this.P.getUint8(this.B);return this.B+=1,e}catch(e){throw Pr()}},i.Kb=function(){try{var e=this.P.getUint16(this.B,this.a);return this.B+=2,e}catch(e){throw Pr()}},i.J=function(){try{var e=this.P.getUint32(this.B,this.a);return this.B+=4,e}catch(e){throw Pr()}},i.Kd=function(){try{var e=this.P.getInt32(this.B,this.a);return this.B+=4,e}catch(e){throw Pr()}},i.pb=function(){try{if(this.a)var e=this.P.getUint32(this.B,!0),t=this.P.getUint32(this.B+4,!0);else t=this.P.getUint32(this.B,!1),e=this.P.getUint32(this.B+4,!1)}catch(e){throw Pr()}if(2097151<t)throw new fe(2,3,3001);return this.B+=8,t*Math.pow(2,32)+e},i.Wa=function(e){if(this.B+e>this.P.byteLength)throw Pr();var t=xe(this.P,this.B,e);return this.B+=e,t},i.skip=function(e){if(this.B+e>this.P.byteLength)throw Pr();this.B+=e},i.Md=function(e){if(this.B<e)throw Pr();this.B-=e},i.seek=function(e){if(0>e||e>this.P.byteLength)throw Pr();this.B=e},i.$c=function(){for(var e=this.B;this.ua()&&0!=this.P.getUint8(this.B);)this.B+=1;return e=xe(this.P,e,this.B-e),this.B+=1,ot(e)},F("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.$c,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.Md,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.Wa,Dr.prototype.readUint64=Dr.prototype.pb,Dr.prototype.readInt32=Dr.prototype.Kd,Dr.prototype.readUint32=Dr.prototype.J,Dr.prototype.readUint16=Dr.prototype.Kb,Dr.prototype.readUint8=Dr.prototype.oa,Dr.prototype.getLength=Dr.prototype.ke,Dr.prototype.getPosition=Dr.prototype.ue,Dr.prototype.hasMoreData=Dr.prototype.ua;var Or=1;function Lr(){this.c=[],this.b=[],this.a=!1}function Mr(e){for(var t=null!=e.flags?12:8;e.reader.ua()&&!e.parser.a;)e.parser.lc(e.start+t,e.reader,e.partialOkay)}function Nr(e){for(var t=null!=e.flags?12:8,n=e.reader.J(),i=(n=u(Q(n))).next();!i.done&&(e.parser.lc(e.start+t,e.reader,e.partialOkay),!e.parser.a);i=n.next());}function Ur(e){return function(t){e(t.reader.Wa(t.reader.P.byteLength-t.reader.B))}}function Br(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Fr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Or},(i=Lr.prototype).L=function(e,t){var n=Br(e);return this.c[n]=Vr,this.b[n]=t,this},i.ea=function(e,t){var n=Br(e);return this.c[n]=Hr,this.b[n]=t,this},i.stop=function(){this.a=!0},i.parse=function(e,t){var n=new Dr(e,0);for(this.a=!1;n.ua()&&!this.a;)this.lc(0,n,t)},i.lc=function(e,t,n){var i=t.B,r=t.J(),a=t.J();switch(r){case 0:r=t.P.byteLength-i;break;case 1:r=t.pb()}var o=this.b[a];if(o){var s=null,l=null;this.c[a]==Hr&&(s=(l=t.J())>>>24,l&=16777215),a=i+r,n&&a>t.P.byteLength&&(a=t.P.byteLength),o({parser:this,partialOkay:n||!1,version:s,flags:l,reader:t=new Dr(t=0<(a-=t.B)?t.Wa(a):new Uint8Array(0),0),size:r,start:i+e})}else t.skip(Math.min(i+r-t.B,t.P.byteLength-t.B))},F("shaka.util.Mp4Parser",Lr),Lr.typeToString=Fr,Lr.allData=Ur,Lr.sampleDescription=Nr,Lr.children=Mr,Lr.prototype.parseNext=Lr.prototype.lc,Lr.prototype.parse=Lr.prototype.parse,Lr.prototype.stop=Lr.prototype.stop,Lr.prototype.fullBox=Lr.prototype.ea,Lr.prototype.box=Lr.prototype.L;var Vr=0,Hr=1;function jr(e,t,n,i){return e=We(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Kr(e,t){var n=this;this.s=t,this.o=e,this.i=null,this.f=1,this.c=this.b=null,this.a=new Map,this.h=!1,this.j=null,this.g=!1,this.D=new Je((function(){return function(e){var t,n,i,r;return O((function(a){if(1==a.a){for(t=[],n=u(e.a.values()),i=n.next();!i.done;i=n.next())na(r=i.value),t.push(ia(r));return E(a,Promise.all(t),2)}e.a.clear(),e.s=null,e.o=null,e.i=null,A(a)}))}(n)}))}function Gr(e,t){var n=e.a.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ya&&(Yr(e,r,!1,0,!1),n.Ya=i)}else(i=n.Ya)&&(n.Ya=null,Yr(e,i,!0,0,!1))}}function zr(e,t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.b=t,e.h&&(t.video&&Yr(e,t.video,n,i,!1),t.audio&&Yr(e,t.audio,n,i,!1))}function Wr(e,t){e.c=t,e.h&&Yr(e,t,!0,0,!1)}function Yr(e,t,n,i,r){var a=e.a.get(t.type);a||"text"!=t.type?a&&(a.Ya&&(t.trickModeVideo?(a.Ya=t,t=t.trickModeVideo):a.Ya=null),a.stream!=t||r)&&("text"==t.type&&Qn(e.s.K,Dt(t.mimeType,t.codecs)),a.stream=t,a.xa=null,n&&(a.zb?a.rc=!0:a.Va?(a.rb=!0,a.bc=i,a.rc=!0):(na(a),ea(e,a,!0,i).catch((function(t){e.s&&e.s.onError(t)})))),function(e,t){var n,i;return O((function(r){if(1==r.a)return t.ia?(n=t.stream,i=t.ia,n.segmentIndex?r.u(2):E(r,n.createSegmentIndex(),2)):r.return();if(t.ia!=i||t.stream!=n)return r.return();t.xa=t.stream.segmentIndex[Symbol.iterator]();var a=e.s.ec(),o=ti(e.s.K,t.type),s=Xr(e,t,a,o),l=s&&s.a?s.a-s.b:null;s&&!l&&(l=(s.endTime-s.startTime)*(t.stream.bandwidth||0)/8),l?((s=s.f)&&(l+=(s.a?s.a-s.b:null)||0),a=8*l/(s=e.s.getBandwidthEstimate())<(o||0)-a-Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal)||t.ia.b.a>l):a=!1,a&&t.ia.abort(),A(r)}))}(e,a).catch((function(t){e.s&&e.s.onError(t)}))):function(e,t){var n,i,r,a;O((function(o){switch(o.a){case 1:return n=Ct,k(o,2),E(o,ai(e.s.K,n.$),4);case 4:_(o,3);break;case 2:i=w(o),e.s&&e.s.onError(i);case 3:r=Dt(t.mimeType,t.codecs),Qn(e.s.K,r),(e.s.K.h.isTextVisible()||e.i.alwaysStreamText)&&(a=$r(t),e.a.set(n.$,a),ta(e,a,0)),A(o)}}))}(e,t)}function qr(e,t){t.zb||t.rb||(t.Va?(t.rb=!0,t.bc=0):null==ei(e.s.K,t.type)?null==t.Ha&&ta(e,t,0):(na(t),ea(e,t,!1,0).catch((function(t){e.s&&e.s.onError(t)}))))}function $r(e){var t=e.segmentIndex?e.segmentIndex[Symbol.iterator]():null;return{stream:e,type:e.type,Hb:null,xa:t,La:null,Rc:null,Sc:null,Qc:null,Pc:null,Ya:null,endOfStream:!1,Va:!1,Ha:null,rb:!1,bc:0,rc:!1,zb:!1,cd:!1,Fb:!1,ia:null}}function Xr(e,t,n,i){return t.stream==t.Hb?t.xa.current():t.La?t.xa.seek(t.La.endTime):i?t.xa.seek(i):((i=t.xa.seek(Math.max(n-e.i.inaccurateManifestTolerance,0)))&&Zr(e,i)||(i=t.xa.seek(n)),i)}function Zr(e,t){var n=e.o.presentationTimeline,i=n.Ka();return!(t.endTime<n.Qa()||t.startTime>i)}function Qr(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Jr(e,t,n){var i,r,a,o;return O((function(s){return 1==s.a?(i=Xe,r=jr(n.c(),n.b,n.a,e.i.retryParameters),a=e.s.lb.request(i,r),t.ia=a,E(s,a.promise,2)):(o=s.b,t.ia=null,s.return(o.data))}))}function ea(e,t,n,i){var r,a;return O((function(o){return 1==o.a?(t.rb=!1,t.rc=!1,t.bc=0,t.zb=!0,t.Hb=null,t.La=null,i?(r=e.s.ec(),a=e.s.K.getDuration(),E(o,e.s.K.remove(t.type,r+i,a),3)):E(o,ai(e.s.K,t.type),4)):3!=o.a?(et(e.D),n?E(o,e.s.K.flush(t.type),3):o.u(3)):(et(e.D),t.zb=!1,t.endOfStream=!1,ta(e,t,0),void A(o))}))}function ta(e,t,n){t.Ha=new ge((function(){var n;return O((function(i){return 1==i.a?(k(i,2),E(i,e.Ib(t),4)):2!=i.a?_(i,0):(n=w(i),e.s&&e.s.onError(n),void A(i))}))})).R(n)}function na(e){null!=e.Ha&&(e.Ha.stop(),e.Ha=null)}function ia(e){return O((function(t){return e.ia?E(t,e.ia.abort(),0):t.u(0)}))}function ra(e,t){O((function(n){if(1==n.a)return E(n,me(e.j),2);et(e.D),e.s.onError(t),t.handled||e.i.failureCallback(t),A(n)}))}function aa(e,t){var n=uo(),i=this;this.h=t,this.c=e,this.f=n,this.j=null,this.g=[],this.b=this.a=null,this.m=Promise.resolve().then((function(){return function(e){return O((function(t){if(e.D.a)t=t.u(0);else{if(0==e.g.length||e.a&&!e.a.Ra)var n=!1;else{e.a&&(e.a.va.Ua(),e.a=null);var i=(n=e.g.shift()).create(e.f);i?(n.va.nb(),e.a={node:i.node,payload:i.payload,Ra:i.Ra,va:n.va}):n.va.kc(),n=!0}n?n=Promise.resolve():e.a?n=function(e){var t,n;return O((function(i){switch(i.a){case 1:return e.c=e.h.qe(e.c,e.f,e.a.node,e.a.payload),k(i,2),e.b=e.h.fe(e.c,e.f,e.a.payload),E(i,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.va.ic(),e.a=null),_(i,0);break;case 2:return 7001==(t=w(i)).code?e.a.va.Ua():e.a.va.onError(t),e.a=null,e.b=null,n=e,E(i,e.h.handleError(e.f,t),5);case 5:n.c=i.b,A(i)}}))}(e):(e.h.Ge(e.c),e.j=new be,n=e.j),t=E(t,n,1)}return t}))}(i)})),this.D=new Je((function(){return function(e){var t,n;return O((function(i){if(1==i.a)return e.b&&e.b.abort(),sa(e),E(i,e.m,2);for(e.a&&e.a.va.Ua(),t=u(e.g),n=t.next();!n.done;n=t.next())n.value.va.Ua();e.a=null,e.g=[],e.h=null,A(i)}))}(i)}))}function oa(e,t){var n={nb:function(){},ic:function(){},Ua:function(){},onError:function(){},kc:function(){},Lf:function(){}};return e.g.push({create:t,va:n}),e.b&&e.b.abort(),sa(e),n}function sa(e){e.j&&(e.j.resolve(),e.j=null)}function la(e){this.a=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n);this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ua(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ca(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function da(){}function ha(e,t){var n=this;this.h=!1,this.f=[],this.a=e,this.g=t,this.b=document.createElement("div"),this.b.classList.add("shaka-text-container"),this.b.style.textAlign="center",this.b.style.display="flex",this.b.style.flexDirection="column",this.b.style.alignItems="center",this.b.style.justifyContent="flex-end",this.g.appendChild(this.b),this.j=new ve((function(){pa(n)})).pa(.25),this.c=new Map}function pa(e){function t(t){return e.f.includes(t)&&e.h&&t.startTime<=n&&t.endTime>=n}for(var n=e.a.currentTime,i=u(e.c.keys()),r=i.next();!r.done;r=i.next())if(!t(r=r.value)){var a=e.c.get(r);e.b.removeChild(a),e.c.delete(r)}for(i=new Set(e.c.values()),a=(r=u(Array.from(e.b.childNodes))).next();!a.done;a=r.next())a=a.value,i.has(a)||e.b.removeChild(a);for(r=(i=u(i=e.f.filter((function(n){return t(n)&&!e.c.has(n)})).sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})))).next();!r.done;r=i.next())ga(e,e.b,r.value)}function fa(e,t,n,i){var r=document.createElement("span");return i&&r.classList.add("shaka-nested-cue"),n.spacer?r.style.display="block":va(e,r,n,!0),t.appendChild(r),r}function ga(e,t,n){if(n.nestedCues.length){var i=document.createElement("p");i.style.width="100%",va(e,i,n,!1);for(var r=0;r<n.nestedCues.length;r++)fa(e,i,n.nestedCues[r],!0);t.appendChild(i),e.c.set(n,i)}else e.c.set(n,fa(e,t,n,!1))}function va(e,t,n,i){var r=t.style;r.whiteSpace="pre-line",t.textContent=n.payload,i&&(r.backgroundColor=n.backgroundColor),r.border=n.border,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=ya(n.linePadding,n,e.g),r.paddingRight=ya(n.linePadding,n,e.g),n.backgroundImage&&(r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==n.backgroundColor&&(r.backgroundColor="transparent")),n.backgroundImage&&n.region&&(t=n.region.widthUnits==Gn?"%":"px",r.height=n.region.height+(n.region.heightUnits==Gn?"%":"px"),r.width=n.region.width+t),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end",n.nestedCues.length&&(r.display="flex",r.flexDirection="row",r.margin="0",r.alignItems=r.justifyContent,r.justifyContent="center"),i&&(r.maxWidth="100%"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=ya(n.fontSize,n,e.g),n.line?1==n.lineInterpretation&&(r.position="absolute",n.writingMode==Nn?n.lineAlign==Bn?r.top=n.line+"%":"end"==n.lineAlign&&(r.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==Bn?r.left=n.line+"%":"end"==n.lineAlign&&(r.right=n.line+"%"):n.lineAlign==Bn?r.right=n.line+"%":"end"==n.lineAlign&&(r.left=n.line+"%")):n.region&&n.region.id&&!i&&(e=n.region.widthUnits==Gn?"%":"px",i=n.region.viewportAnchorUnits==Gn?"%":"px",r.height=n.region.height+(n.region.heightUnits==Gn?"%":"px"),r.width=n.region.width+e,r.position="absolute",r.top=n.region.viewportAnchorY+i,r.left=n.region.viewportAnchorX+i),r.lineHeight=n.lineHeight,n.position&&(n.writingMode==Nn?r.paddingLeft=n.position:r.paddingTop=n.position),"line-left"==n.positionAlign?r.cssFloat="left":"line-right"==n.positionAlign&&(r.cssFloat="right"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,n.size&&(n.writingMode==Nn?r.width=n.size+"%":r.height=n.size+"%")}function ya(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),bf:i[2]}:null;if(!i)return e;var r=i.value;switch(i.bf){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function ma(){}function ba(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=Ne(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ne(u)),l=ba(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(z("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&W("Unexpected number of arguments for "+l),e[a]=t[a]):(z("Invalid config, unrecognized key "+l),s=!1)}return s}function Ea(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Aa(){}function ka(){var e=1e6,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:sn,logLicenseExchange:!1,updateExpirationTime:1},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};(Ft("Web0S")||Ft("Tizen")||Ft("CrKey"))&&(r.stallSkip=0);var a={trackSelectionCallback:function(e){return O((function(t){return t.return(e)}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:function(){return new Oi},abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return O((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=mi(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return gi(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=u(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage))}))},o}function Ta(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return ba(e,t,n||ka(),i,"")}function _a(){this.a=null,this.b=[]}function wa(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Sa(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=u(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Ca(){this.b=this.c=null,this.a=[]}function Ra(e,t,n){e.c!=t&&(e.c=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}))}function Ia(e,t,n){e.b!=t&&(e.b=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function xa(){this.g=this.h=this.w=this.m=this.C=this.c=this.v=this.f=this.G=this.H=this.I=this.j=this.M=NaN,this.b=new _a,this.a=new Ca}function Da(t,n){Me.call(this);var i=this;this.g=Uo,this.Zb=this.a=null,this.T=!1,this.b=new tt,this.Bc=this.j=this.wb=this.o=this.Xb=this.m=this.c=this.Yb=this.C=this.Ub=this.w=this.Aa=this.v=this.G=this.h=this.N=null,this.rd=1e9,this.i=Va(this),this.Hc={width:1/0,height:1/0},this.f=null,this.xb=new Vi(this.i.preferredAudioLanguage,this.i.preferredVariantRole,this.i.preferredAudioChannelCount),this.ca=this.i.preferredTextLanguage,this.Vb=this.i.preferredTextRole,this.Cc=[],n&&n(this),this.N=function(e){return new Ge((function(t,n){e.j&&e.j.segmentDownloaded(t,n)}))}(this),this.H=null,Ko&&(this.H=_t(Ko)),this.b.l(e,"online",(function(){i.dd()})),this.da={name:"detach"},this.Da={name:"attach"},this.M={name:"unload"},this.sc={name:"manifest-parser"},this.Gc={name:"manifest"},this.ra={name:"media-source"},this.Dc={name:"drm-engine"},this.I={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.Ba={name:"src-equals"};var r=new Map;r.set(this.Da,(function(e,t){return _e(function(e,t,n){return null==t.A&&(t.A=n.A,e.b.l(t.A,"error",(function(){var t=eo(e);t&&Qa(e,t)}))),e.a=t.A,Promise.resolve()}(i,e,t))})),r.set(this.da,(function(e){return e.A&&(i.b.qa(e.A,"error"),e.A=null),i.a=null,_e(e=Promise.resolve())})),r.set(this.M,(function(e){return _e(Oa(i,e))})),r.set(this.ra,(function(t){return _e(t=function(t,n){var i,r,a,o;return O((function(s){if(1==s.a)return i=e.muxjs?new bn:new En,r=t.i.textDisplayFactory,a=_t(r),t.Ec=r,E(s,(o=function(e,t,n,i){return new Xn(e,t,n,i)}(n.A,i,a,(function(e,n,i){for(var r=(e=u(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var a=r.cueTime+n,o=i,s=u(r.frames),l=s.next();!l.done;l=s.next())La(t,a,o,"ID3",l.value);t.H&&t.H.onHlsTimedMetadata(r,a)}}))).w,2);t.G=o,A(s)}))}(i,t))})),r.set(this.sc,(function(e,t){return _e(function(e,t,n){var i,r,a,o;return O((function(s){if(1==s.a)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.N,e.wb=i,a=e,E(s,Wi(i,r,e.i.manifest.retryParameters,t.mimeType),2);a.Xb=s.b,e.m=_t(e.Xb),o=Ne(e.i.manifest),n.A&&"AUDIO"===n.A.nodeName&&(o.disableVideo=!0),e.m.configure(o),A(s)}))}(i,e,t))})),r.set(this.Gc,(function(e){return function(e,t){var n=t.uri,i=e.N;e.Yb=new Sr((function(){return e.ed()})),function(e,t){e.b=t}(e.Yb,(function(t){Ja(e,Io,t),e.H&&e.H.onDashTimedMetadata(t)}));var r={networkingEngine:i,filter:function(t){return O((function(n){return n.return(e.fb(t))}))},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=u(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"==(r=r.value).mimeType&&n.add(r.originalId);for(i=u(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=u(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=new Ar;s={id:e.rd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:s,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Yb;e:{for(var i=u(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Qa(e,t)}},a=Date.now()/1e3;return new Ee(function(){var t,i,o,s;return O((function(l){if(1==l.a)return t=e,E(l,e.m.start(n,r),2);if(t.o=l.b,i=Pa(Ao),e.dispatchEvent(i),0==e.o.variants.length)throw new fe(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.o),o=Date.now()/1e3,s=o-a,e.f.v=s,A(l)}))}(),(function(){return e.m.stop()}))}(i,e)})),r.set(this.Dc,(function(){return _e(function(e){var t,n;return O((function(i){if(1==i.a)return t=Date.now()/1e3,n=!0,e.h=Ma(e,{lb:e.N,onError:function(t){Qa(e,t)},jc:function(t){to(e,t)},onExpirationUpdated:function(t,n){no(e,t,n)},onEvent:function(i){e.dispatchEvent(i),i.type==go&&n&&(n=!1,e.f.c=Date.now()/1e3-t)}}),e.h.configure(e.i.drm),E(i,Zt(e.h,e.o.variants,e.o.offlineSessionIds),2);e.fb(e.o),A(i)}))}(i))})),r.set(this.I,(function(e,t){return _e(function(e,t,n){var i,r,a,o,s,l,c,d,h,p;return O((function(f){switch(f.a){case 1:return t.startTime=n.startTime,i=t.A,r=t.uri,e.wb=r,e.w=new kr({fc:function(){return t.A.playbackRate},kd:function(e){t.A.playbackRate=e},Gd:function(e){t.A.currentTime+=e}}),a=function(){return Ka(e)},o=function(){return ja(e)},e.b.l(i,"playing",a),e.b.l(i,"pause",a),e.b.l(i,"ended",a),e.b.l(i,"ratechange",o),s=e.i.abrFactory,e.j&&e.Bc==s||(e.Bc=s,e.j=_t(s),"function"!=typeof e.j.playbackRateChanged&&(yt("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.j.playbackRateChanged=function(){}),e.j.configure(e.i.abr)),e.xb=new Vi(e.i.preferredAudioLanguage,e.i.preferredVariantRole,e.i.preferredAudioChannelCount),e.ca=e.i.preferredTextLanguage,function(e,t,n){0<t&&(e.S()||e.Qd(t)),t=e.getDuration(),n<t&&(e.S()||e.ya(n))}(e.o.presentationTimeline,e.i.playRangeStart,e.i.playRangeEnd),E(f,e.h.yb(i),2);case 2:if(e.j.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.c&&t!=e.c.b&&(Ra(e.f.a,t,!0),zr(e.c,t,n,i),Wa(e))})),e.v=function(e,t){return new fr(e.a,e.o,e.i.streaming,t,(function(){if(e.Aa&&wr(e.Aa,!0),e.c)for(var t=e.c,n=t.s.ec(),i=t.i.smallGapLimit,r=u(t.a.keys()),a=r.next();!a.done;a=r.next()){a=a.value;var o=t.a.get(a),s=t.s.K;"text"==a?s=null!=(s=s.c).a&&null!=s.b&&(n>=s.a&&n<s.b):s=kn(s=ni(s,a),n,i),s||(null!=ti(t.s.K,a)&&qr(t,o),o.ia&&(o.ia.abort(),o.ia=null),"text"===a&&t.s.K.v.c())}e.C&&Ua(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.Aa=function(e){var t=new Cr(e.Yb);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(t,(function(t){Ja(e,xo,t)}),(function(t){Ja(e,Do,t)}),(function(t,n){n||(Ja(e,xo,t),Ja(e,Do,t))}));var n=new _r(e.a);return n.a.add(t),n}(e),l=Math.max(e.o.minBufferTime,e.i.streaming.rebufferingGoal),Na(e,l),Ei(e.o,e.i.preferredAudioChannelCount),e.c=function(e){return new Kr(e.o,{ec:function(){return e.v.g()},getBandwidthEstimate:function(){return e.j.getBandwidthEstimate()},K:e.G,lb:e.N,onError:function(t){return Qa(e,t)},onEvent:function(t){return e.dispatchEvent(t)},He:function(){e.m&&e.m.update&&e.m.update()},Yc:function(){e.v&&e.v.v(),Ua(e)}})}(e),e.c.configure(e.i.streaming),e.g=Bo,e.dispatchEvent(Pa(So)),c=Ga(e)?e.j.chooseVariant():null,Ra(e.f.a,c,!0),zr(e.c,c,!1,0),(d=xi(e.o.textStreams,e.ca,e.Vb)[0]||null)&&Ia(e.f.a,d,!0),d?(c.audio&&function(e,t,n){return e=gi(e.i.preferredTextLanguage),t=gi(t.language),hi(n=gi(n.language),e)&&!hi(t,n)}(e,c.audio,d)&&(e.T=!0),e.T&&e.G.h.setTextVisibility(!0),Xa(e)):e.T=!1,d&&(e.i.streaming.alwaysStreamText||e.Oc())&&Wr(e.c,d),!e.i.streaming.startAtSegmentBoundary){f.u(3);break}return h=e.v.g(),E(f,function(e,t){var n,i,r,a,o;return O((function(s){return 1==s.a?(n=e.audio,i=e.video,r=function(e,t){var n,i;return O((function(r){return 1==r.a?e?E(r,e.createSegmentIndex(),2):r.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(i=n.startTime,r.return(i)):r.return(null)}))},E(s,r(n,t),2)):3!=s.a?(a=s.b,E(s,r(i,t),3)):null!=(o=s.b)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(c,h),4);case 4:p=f.b,e.v.m(p);case 3:return E(f,e.c.start(),5);case 5:e.i.abr.enabled&&(e.j.enable(),Za(e)),e.fb(e.o),Ya(e),Wa(e),Ga(e),e.o.variants.some((function(e){return e.primary})),e.b.ha(i,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.md})),A(f)}}))}(i,e,t))})),r.set(this.Ic,(function(e){return _e(e=function(e,t){var n,i,r,a;return O((function(o){return 1==o.a?(n=Ct,i=Date.now()/1e3,r=!0,e.h=Ma(e,{lb:e.N,onError:function(t){Qa(e,t)},jc:function(t){to(e,t)},onExpirationUpdated:function(t,n){no(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==go&&r&&(r=!1,e.f.c=Date.now()/1e3-i)}}),e.h.configure(e.i.drm),a={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Ca,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},E(o,Zt(e.h,[a],[]),2)):E(o,e.h.yb(t.A),0)}))}(i,e))})),r.set(this.Ba,(function(e,t){return function(e,t,n){function i(){return Ka(e)}t.uri=n.uri,t.startTime=n.startTime,e.wb=t.uri,e.v=new pr(t.A),null!=t.startTime&&e.v.m(t.startTime),e.w=new kr({fc:function(){return t.A.playbackRate},kd:function(e){t.A.playbackRate=e},Gd:function(e){t.A.currentTime+=e}}),Na(e,e.i.streaming.rebufferingGoal),e.b.l(t.A,"playing",i),e.b.l(t.A,"pause",i),e.b.l(t.A,"ended",i),e.b.l(t.A,"ratechange",(function(){return ja(e)})),"none"!=e.a.preload&&e.b.ha(e.a,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.md})),e.a.audioTracks&&(e.b.l(e.a.audioTracks,"addtrack",(function(){return Ya(e)})),e.b.l(e.a.audioTracks,"removetrack",(function(){return Ya(e)})),e.b.l(e.a.audioTracks,"change",(function(){return Ya(e)}))),e.a.textTracks&&(e.b.l(e.a.textTracks,"addtrack",(function(t){Ya(e),function(e,t){var n=t.track;"metadata"==n.kind&&(n.mode="hidden",e.b.l(n,"cuechange",(function(){if(n.activeCues)for(var t=u(n.activeCues),i=t.next();!i.done;i=t.next())i=i.value,La(e,i.startTime,i.endTime,i.type,i.value),e.H&&e.H.onCueMetadataChange(i.value)})),new ve((function(){for(var t=Fa(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Ob().R(.5))}(e,t)})),e.b.l(e.a.textTracks,"removetrack",(function(){return Ya(e)})),e.b.l(e.a.textTracks,"change",(function(){return Ya(e)}))),t.A.src=t.uri,(Ft("Tizen")||Ft("Web0S"))&&t.A.load(),e.g=Fo,e.dispatchEvent(Pa(So));var r=new be;rr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){r.resolve()}));var a=!1;return e.Cc.push((function(){a=!0})),rr(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.b,(function(){return O((function(t){return 1==t.a?a?t.return():(function(e){var t=e.i.preferredAudioLanguage;if(""!=t){e.fd(t);var n=e.i.preferredVariantRole;""!=n&&e.fd(t,n)}}(e),Fa(e).find((function(e){return"disabled"!=e.mode}))?t.u(2):E(t,new Promise((function(t){e.b.ha(e.a.textTracks,"change",t),new ve(t).R(1)})),2)):a?t.return():(function(e){var t=e.i.preferredTextLanguage;if(""!=t){e.gd(t);var n=e.i.preferredTextRole;""!=n&&e.gd(t,n)}}(e),void A(t))}))})),e.a.error?r.reject(eo(e)):"none"==e.a.preload&&(W('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),r.resolve()),e.b.ha(e.a,"error",(function(){r.reject(eo(e))})),new Ee(r,(function(){return r.reject(new fe(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.W=new aa(this.da,{qe:function(e,t,n,r){var a=null;return e==i.da&&(a=n==i.da?i.da:i.Da),e==i.Da&&(a=n==i.da||t.A!=r.A?i.da:n==i.Da?i.Da:n==i.ra||n==i.I?i.ra:n==i.Ba?i.Ic:null),e==i.ra&&(a=n==i.I&&t.A==r.A?i.sc:i.M),e==i.sc&&(a=lo(i.I,i.Gc,i.M,n,t,r)),e==i.Gc&&(a=lo(i.I,i.Dc,i.M,n,t,r)),e==i.Dc&&(a=lo(i.I,i.I,i.M,n,t,r)),e==i.Ic&&(a=n==i.Ba&&t.A==r.A?i.Ba:i.M),e!=i.I&&e!=i.Ba||(a=i.M),e==i.M&&(a=r.A&&t.A==r.A?i.Da:i.da),a},fe:function(e,t,n){return i.dispatchEvent(Pa(To,{state:e.name})),r.get(e)(t,n)},handleError:function(e){return O((function(t){return 1==t.a?E(t,Oa(i,e),2):t.return(e.A?i.Da:i.da)}))},Ge:function(e){i.dispatchEvent(Pa(_o,{state:e.name}))}}),t&&this.yb(t,!0)}function Pa(e,t){return new Oe(e,t)}function Oa(e,t){var n,i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:return e.g!=No&&(e.g=Uo),n=e.Cc.map((function(e){return e()})),e.Cc=[],E(h,Promise.all(n),2);case 2:if(e.dispatchEvent(Pa(Oo)),t.mimeType=null,t.startTime=null,t.uri=null,t.A&&(e.b.qa(t.A,"loadedmetadata"),e.b.qa(t.A,"playing"),e.b.qa(t.A,"pause"),e.b.qa(t.A,"ended"),e.b.qa(t.A,"ratechange")),e.Aa&&(e.Aa.release(),e.Aa=null),e.Ub&&(e.Ub.stop(),e.Ub=null),!e.m){h.u(3);break}return E(h,e.m.stop(),4);case 4:e.m=null,e.Xb=null;case 3:if(!e.j){h.u(5);break}return E(h,e.j.stop(),5);case 5:if(!e.c){h.u(7);break}return E(h,e.c.destroy(),8);case 8:e.c=null;case 7:if(e.w&&(e.w.release(),e.w=null),e.v&&(e.v.release(),e.v=null),!e.G){h.u(9);break}return E(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.H&&e.H.onAssetUnload(),!t.A||!t.A.src){h.u(11);break}return E(h,new Promise((function(e){return new ve(e).R(.1)})),12);case 12:t.A.removeAttribute("src"),t.A.load();case 11:if(!e.h){h.u(13);break}return E(h,e.h.destroy(),14);case 14:e.h=null;case 13:if(e.wb=null,e.C=null,e.o){for(i=u(e.o.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=u([a.audio,a.video]),s=o.next();!s.done;s=o.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.o.textStreams),s=c.next();!s.done;s=c.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.o=null,e.f=new xa,e.Ec=null,Ha(e),A(h)}}))}function La(e,t,n,i,r){e.dispatchEvent(Pa(ko,{startTime:t,endTime:n,Jf:i,payload:r}))}function Ma(e,t){return new Xt(t,e.i.drm.updateExpirationTime)}function Na(e,t){e.C=new Hi,e.C.a=Ki,ji(e.C,t,Math.min(.5,t/2)),Ha(e),e.Ub=new ve((function(){Ua(e)})).pa(.25)}function Ua(e){switch(e.g){case Fo:if(e.a.ended)var t=!0;else{var n=An(e.a.buffered);t=null!=n&&n>=e.a.duration-1}break;case Bo:e:if(e.a.ended||Jn(e.G))t=!0;else{if(e.o.presentationTimeline.S()){n=e.o.presentationTimeline.Ka();var i=An(e.a.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Tn(e.a.buffered,e.a.currentTime);var r=t,a=(n=e.C).b.get(n.a);t=n.a,i=r||i>=a?Gi:Ki,n.a=i,t!=i&&Ha(e)}function Ba(e){if(e.m){var t=Ne(e.i.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.m.configure(t)}if(e.h&&e.h.configure(e.i.drm),e.c){e.c.configure(e.i.streaming);try{e.fb(e.o)}catch(t){Qa(e,t)}e.j&&Ga(e),!(t=e.c.b)||t.allowedByApplication&&t.allowedByKeySystem||za(e)}if(e.G&&(t=e.i.textDisplayFactory,e.Ec!=t)){var n=_t(t),i=e.G,r=i.h;i.h=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.c&&(i.c.c=n),e.Ec=t,e.c&&((n=(t=e.c).a.get("text"))&&Yr(t,n.stream,!0,0,!0))}e.j&&(e.j.configure(e.i.abr),e.i.abr.enabled?e.j.enable():e.j.disable(),Za(e)),e.C&&(t=e.i.streaming.rebufferingGoal,e.o&&(t=Math.max(t,e.o.minBufferTime)),ji(e.C,t,Math.min(.5,t/2)))}function Fa(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Va(e){var t=ka();return t.streaming.failureCallback=function(t){e.S()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.dd())},t.textDisplayFactory=function(){return e.Zb?new ha(e.a,e.Zb):new la(e.a)},t}function Ha(e){var t=e.Nc();if(e.f&&e.C&&e.v){var n=e.w;n.f=t,Tr(n),Ka(e)}e.dispatchEvent(Pa(fo,{buffering:t}))}function ja(e){var t=e.a.playbackRate;0!=t&&(e.w&&e.w.set(t),t=Pa(wo),e.dispatchEvent(t))}function Ka(e){if(e.f&&e.C){var t=e.f.b;e.C.a==Ki?wa(t,"buffering"):e.a.paused?wa(t,"paused"):e.a.ended?wa(t,"ended"):wa(t,"playing")}}function Ga(e){try{io(e,e.o)}catch(t){return Qa(e,t),!1}var t=e.o.variants.filter((function(e){return Ri(e)}));return t=e.xb.create(t),e.j.setVariants(Array.from(t.values())),!0}function za(e){var t;if(t=Ga(e)?e.j.chooseVariant():null){if(t==e.c.b)return;Ra(e.f.a,t,!0),zr(e.c,t,!0,0),qa(e)}Wa(e)}function Wa(e){ro(e,Pa(po))}function Ya(e){ro(e,Pa(Po))}function qa(e){ro(e,Pa(Lo))}function $a(e){ro(e,Pa(Co))}function Xa(e){ro(e,Pa(Ro))}function Za(e){ro(e,Pa(ho,{Kf:e.i.abr.enabled}))}function Qa(e,t){if(e.g!=No){var n=Pa(yo,{detail:t});e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Ja(e,t,n){e.dispatchEvent(Pa(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function eo(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new fe(2,3,3016,t,n,e.a.error.message)}function to(e,t){if(e.c){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.o.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=s.value;if(s=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!Ho.includes(c)}s!=a.allowedByKeySystem&&(r=!0)}}r&&Ga(e),(i=e.c.b)&&!i.allowedByKeySystem&&za(e),r&&Ya(e)}}function no(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),t=Pa(mo),e.dispatchEvent(t)}function io(e,t){var n=e.h?It(e.h.T):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=new Set,s=new Set,l=u(t.variants),c=l.next();!c.done;c=l.next()){var d=[];(c=c.value).audio&&d.push(c.audio),c.video&&d.push(c.video);for(var h=(d=u(d)).next();!h.done;h=d.next())if((h=h.value).keyIds.size)for(var p=(h=u(h.keyIds)).next();!p.done;p=h.next()){p=p.value;var f=n[i?"00":p];f?Ho.includes(f)&&s.add(f):o.add(p)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new fe(2,4,4012,n={hasAppRestrictions:a,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)})}function ro(e,t){O((function(n){if(1==n.a)return E(n,Promise.resolve(),2);e.g!=No&&e.dispatchEvent(t),A(n)}))}function ao(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(gi(n.language)):t.add("und");return t}function oo(e){for(var t=new Map,n=(e=u(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=gi(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=u(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function so(){return new fe(2,7,7e3)}function lo(e,t,n,i,r,a){return i==e&&r.A==a.A&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function uo(){return{A:null,mimeType:null,startTime:null,md:NaN,uri:null}}function co(e){return new Promise((function(t,n){e.Ua=function(){return n(so())},e.ic=function(){return t()},e.onError=function(e){return n(e)},e.kc=function(){return n(so())}}))}Kr.prototype.destroy=function(){return this.D.destroy()},Kr.prototype.configure=function(e){this.i=e,this.j=new ye({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Kr.prototype.start=function(){var e=this;return O((function(t){if(1==t.a)return E(t,function(e){var t,n,i,r,a,o,s,l,c,d;return O((function(h){if(1==h.a){if(t=Ct,!e.b)throw new fe(2,5,5006);return n=new Map,i=new Set,e.b.audio&&(n.set(t.eb,e.b.audio),i.add(e.b.audio)),e.b.video&&(n.set(t.Ca,e.b.video),i.add(e.b.video)),e.c&&(n.set(t.$,e.c),i.add(e.c)),r=e.s.K,a=e.i.forceTransmuxTS,E(h,r.init(n,a),2)}et(e.D);var p=e.o.presentationTimeline.getDuration();for(1/0>p?e.s.K.ya(p):e.s.K.ya(Math.pow(2,32)),o=u(n.keys()),s=o.next();!s.done;s=o.next())l=s.value,c=n.get(l),e.a.has(l)||(d=$r(c),e.a.set(l,d),ta(e,d,0));A(h)}))}(e),2);et(e.D),e.h=!0,A(t)}))},Kr.prototype.Ib=function(e){var t,n,i,r,a=this;return O((function(o){switch(o.a){case 1:if(et(a.D),e.Va||null==e.Ha||e.zb)return o.return();if(e.Ha=null,!e.rb){o.u(2);break}return E(o,ea(a,e,e.rc,e.bc),3);case 3:return o.return();case 2:if(e.stream.segmentIndex){o.u(4);break}return t=e.stream,E(o,e.stream.createSegmentIndex(),5);case 5:if(t!=e.stream)return null==e.Ha&&ta(a,e,0),o.return();case 4:e.xa||(e.xa=e.stream.segmentIndex[Symbol.iterator]());try{null!=(n=function(e,t){if(Qr(t))return ri(e.s.K,t.stream.originalId||""),null;var n=e.s.ec(),i=t.Hb&&t.La?t.La.endTime:n,r=function(e,t,n){return"text"==t?null==(e=e.c).b||e.b<n?0:e.b-Math.max(n,e.a):Tn(e=ni(e,t),n)}(e.s.K,t.type,n),a=Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.f;if(i>=e.o.presentationTimeline.getDuration())return t.endOfStream=!0,"video"==t.type&&(n=e.a.get("text"))&&Qr(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,r>=a)return.5;if(r=ti(e.s.K,t.type),!(r=Xr(e,t,n,r))||!Zr(e,r))return 1;a=1/0;for(var o=Array.from(e.a.values()),s=(o=u(o)).next();!s.done;s=o.next())Qr(s=s.value)||(a=Math.min(a,s.Hb&&s.La?s.La.endTime:n));return i>=a+e.o.presentationTimeline.a?1:(function(e,t,n,i){var r,a,o,s,l,u,c,d;return O((function(h){switch(h.a){case 1:return r=Ct,a=t.stream,t.Va=!0,o=function(e,t,n){var i,r,a,o,s,l,u;return O((function(c){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Sc&&r==t.Qc&&a==t.Pc||(s=function(){var n;return O((function(i){if(1==i.a)return k(i,2),t.Qc=r,t.Pc=a,t.Sc=o,E(i,function(e,t,n,i,r){return O((function(a){return t==Ct.$?(e.c.v=n,function(e,t,n){e.f=t,e.g=n}(e.c,i,r),a.return()):E(a,Promise.all([si(e,t,(function(){var n=e.f[t].appendWindowStart,i=e.f[t].appendWindowEnd;e.f[t].abort(),e.f[t].appendWindowStart=n,e.f[t].appendWindowEnd=i,oi(e,t)})),si(e,t,(function(){var i=n;0>i&&(i+=.001),e.f[t].timestampOffset=i,oi(e,t)})),si(e,t,(function(){e.f[t].appendWindowStart=0,e.f[t].appendWindowEnd=r,e.f[t].appendWindowStart=i,oi(e,t)}))]),0)}))}(e.s.K,t.type,o,r,a),4);if(2!=i.a)return _(i,0);throw n=w(i),t.Qc=null,t.Pc=null,t.Sc=null,n}))},i.push(s())),n.f!=t.Rc&&(t.Rc=n.f)&&(l=Jr(e,t,n.f),u=function(){var n,i,r;return O((function(a){switch(a.a){case 1:return k(a,2),E(a,l,4);case 4:return n=a.b,et(e.D),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(a,ii(e.s.K,t.type,n,null,null,i),5);case 5:_(a,0);break;case 2:throw r=w(a),t.Rc=null,r}}))},i.push(u())),E(c,Promise.all(i),0)}))}(e,t,i),s=Jr(e,t,i),k(h,2),E(h,Promise.all([o,s]),4);case 4:return l=h.b,et(e.D),e.g?h.return():E(h,function(e,t,n,i,r,a){var o;return O((function(s){return 1==s.a?(o=i.closedCaptions&&0<i.closedCaptions.size,null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Lr).ea("emsg",(function(t){var n=i.emsgSchemeIdUris,a=t.reader.$c(),o=t.reader.$c(),s=t.reader.J(),l=t.reader.J(),u=t.reader.J(),c=t.reader.J();t=t.reader.Wa(t.reader.P.byteLength-t.reader.B);var d=r.startTime+l/s;n.includes(a)&&("urn:mpeg:dash:event:2012"==a?e.s.He():(n=new Oe(vo,{detail:{startTime:d,endTime:d+u/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t}}),e.s.onEvent(n)))})).parse(a),E(s,function(e,t,n){var i,r,a;return O((function(o){if(1==o.a)return i=Math.max(e.i.bufferBehind,e.o.presentationTimeline.a),null==(r=ei(e.s.K,t.type))||0>=(a=n-r-i)?o.return():E(o,e.s.K.remove(t.type,r,r+a),2);et(e.D),A(o)}))}(e,t,n),2)):3!=s.a?(et(e.D),E(s,ii(e.s.K,t.type,a,r.startTime,r.endTime,o),3)):(et(e.D),t.Hb=i,t.La=r,t.stream==i&&t.xa.next(),void A(s))}))}(e,t,n,a,i,l[1]),5);case 5:if(et(e.D),e.g)return h.return();t.Va=!1,t.cd=!1,u=e.s.K.dc(),c=u[t.type],JSON.stringify(c),t.rb||e.s.Yc(),ta(e,t,0),_(h,0);break;case 2:if(d=w(h),et(e.D,d),e.g)return h.return();t.Va=!1,t.type==r.$&&e.i.ignoreTextStreamFailures?e.a.delete(r.$):7001==d.code?(t.Va=!1,t.Ha=null,ta(e,t,0)):3017==d.code?function(e,t,n){if(!Array.from(e.a.values()).some((function(e){return e!=t&&e.cd}))){var i=Math.round(100*e.f);if(20<i)e.f-=.2;else{if(!(4<i))return t.Fb=!0,e.g=!0,void e.s.onError(n);e.f-=.04}t.cd=!0}ta(e,t,4)}(e,t,d):(t.Fb=!0,d.severity=2,ra(e,d)),A(h)}}))}(e,t,n,r).catch((function(){})),null)}(a,e))&&(ta(a,e,n),e.Fb=!1)}catch(e){return ra(a,e),o.return()}if(i=Array.from(a.a.values()),!a.h||!i.every((function(e){return e.endOfStream}))){o.u(0);break}return E(o,a.s.K.endOfStream(),7);case 7:et(a.D),0!=(r=a.s.K.getDuration())&&r<a.o.presentationTimeline.getDuration()&&a.o.presentationTimeline.ya(r),A(o)}}))},aa.prototype.destroy=function(){return this.D.destroy()},(i=la.prototype).remove=function(e,t){return!!this.a&&(ca(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){var t=e.map((function(e){if(e.nestedCues.length){var t=e.nestedCues.map((function(e){return e.spacer?"\n":e.payload+" "})).join("").replace(/ $/m,"");return(e=e.clone()).nestedCues=[],e.payload=t,e}return e})),n=[];e=this.a.cues?Array.from(this.a.cues):[];for(var i={},r=(t=u(t)).next();!r.done;i={bb:i.bb},r=t.next())i.bb=r.value,e.some(function(e){return function(t){return t.startTime==e.bb.startTime&&t.endTime==e.bb.endTime&&t.text==e.bb.payload}}(i))||(r=ua(i.bb))&&n.push(r);for(i=(e=u(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!i.done;i=e.next())this.a.addCue(i.value)},i.destroy=function(){return this.a&&(ca(this.a,(function(){return!0})),this.a.mode="disabled"),this.a=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.a.mode},i.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},F("shaka.text.SimpleTextDisplayer",la),la.prototype.setTextVisibility=la.prototype.setTextVisibility,la.prototype.isTextVisible=la.prototype.isTextVisible,la.prototype.destroy=la.prototype.destroy,la.prototype.append=la.prototype.append,la.prototype.remove=la.prototype.remove,F("shaka.util.Dom",da),da.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},(i=ha.prototype).append=function(e){for(var t={},n=(e=u(e)).next();!n.done;t={Pb:t.Pb},n=e.next())t.Pb=n.value,this.f.some(function(e){return function(t){return In(t,e.Pb)}}(t))||this.f.push(t.Pb);pa(this)},i.destroy=function(){this.g.removeChild(this.b),this.b=null,this.h=!1,this.f=[],this.j&&this.j.stop(),this.c.clear()},i.remove=function(e,t){return!!this.b&&(this.f=this.f.filter((function(n){return n.startTime<e||n.endTime>=t})),pa(this),!0)},i.isTextVisible=function(){return this.h},i.setTextVisibility=function(e){this.h=e},F("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,F("shaka.util.ConfigUtils",ma),ma.convertToConfigObject=Ea,ma.mergeConfigObjects=ba,F("shaka.util.PlayerConfiguration",Aa),Aa.mergeConfigObjects=Ta,v(Da,Me),(i=Da.prototype).destroy=function(){var e,t=this;return O((function(n){switch(n.a){case 1:return t.g==No?n.return():(t.g=No,e=oa(t.W,(function(){return{node:t.da,payload:uo(),Ra:!1}})),E(n,new Promise((function(t){e.nb=function(){},e.ic=function(){t()},e.Ua=function(){t()},e.onError=function(){t()},e.kc=function(){t()}})),2));case 2:return E(n,t.W.destroy(),3);case 3:if(t.b&&(t.b.release(),t.b=null),t.Bc=null,t.j=null,t.i=null,t.f=null,t.Zb=null,!t.N){n.u(0);break}return E(n,t.N.destroy(),5);case 5:t.N=null,A(n)}}))},i.yb=function(e,t){if(t=void 0===t||t,this.g==No)return Promise.reject(so());var n=uo();n.A=e,Lt()||(t=!1);var i=t?this.ra:this.Da,r=oa(this.W,(function(){return{node:i,payload:n,Ra:!1}}));return r.nb=function(){},co(r)},i.detach=function(){var e=this;if(this.g==No)return Promise.reject(so());var t=oa(this.W,(function(){return{node:e.da,payload:uo(),Ra:!1}}));return t.nb=function(){},co(t)},i.pd=function(e){var t=this;if(e=void 0===e||e,this.g==No)return Promise.reject(so());Lt()||(e=!1);var n=uo(),i=oa(this.W,(function(i){var r=i.A&&e?t.ra:i.A?t.Da:t.da;return n.A=i.A,{node:r,payload:n,Ra:!1}}));return i.nb=function(){},co(i)},i.load=function(e,t,n){var i=this;if(this.g==No)return Promise.reject(so());this.dispatchEvent(Pa(Eo));var r=uo();r.uri=e,r.md=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!Lt())return!0;var n=t.mimeType,i=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Yi(i)]),!!n&&(""!=(t.A||Vt()).canPlayType(n)&&(!Lt()||!(n in qi)&&!(Yi(i)in $i)||Ut()&&e.i.streaming.useNativeHlsOnSafari))}(this,r)?this.Ba:this.I,o=oa(this.W,(function(e){return null==e.A?null:(r.A=e.A,{node:a,payload:r,Ra:!0})}));return this.f=new xa,o.nb=function(){},new Promise((function(e,t){o.kc=function(){return t(new fe(2,7,7002))},o.ic=function(){e(),i.dispatchEvent(Pa(bo))},o.Ua=function(){return t(so())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ea(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(yt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay);var n=Ta(this.i,e,Va(this));return Ba(this),n},i.getConfiguration=function(){var e=Va(this);return Ta(e,this.i,Va(this)),e},i.Qe=function(){for(var e in this.i)delete this.i[e];Ta(this.i,Va(this),Va(this)),Ba(this)},i.le=function(){return this.g},i.pe=function(){return this.a},i.Db=function(){return this.N},i.Jc=function(){return this.wb},i.yd=function(){return function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];q.has(e)||(q.add(e),W.apply(G,c(n)))}("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!"),this.H},i.S=function(){return this.o?this.o.presentationTimeline.S():!(!this.a||!this.a.src)&&1/0==this.a.duration},i.Ta=function(){return!!this.o&&this.o.presentationTimeline.Ta()},i.Ce=function(){if(this.o){var e=this.o.variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},i.ed=function(){if(this.o){var e=this.o.presentationTimeline;return{start:e.ib(),end:e.Ea()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.keySystem=function(){return nn(this.drmInfo())},i.drmInfo=function(){return this.h?this.h.c:null},i.Cb=function(){return this.h?this.h.Cb():1/0},i.Nc=function(){return!!this.C&&this.C.a==Ki},i.re=function(){return this.a?this.w?this.w.b:1:0},i.af=function(e){0==e?W("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.w.set(e),this.g==Bo&&(this.j.playbackRateChanged(e),Gr(this.c,1<Math.abs(e))))},i.ae=function(){this.g==Fo&&this.w.set(1),this.g==Bo&&(this.w.set(1),this.j.playbackRateChanged(1),Gr(this.c,!1))},i.Mc=function(){if(this.o){for(var e=this.c?this.c.b:null,t=[],n=u(this.o.variants),i=n.next();!i.done;i=n.next())if(Ri(i=i.value)){var r=Ti(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return Si(e)})):[]},i.hc=function(){if(this.o){for(var e=this.c?this.c.c:null,t=[],n=u(this.o.textStreams),i=n.next();!i.done;i=n.next()){var r=_i(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Fa(this).map((function(e){var t=Ci(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t})):[]},i.Od=function(e){if(this.o&&this.c){var t=this.o.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.c.c&&(Ia(this.f.a,t,!1),Wr(this.c,t),$a(this),this.ca=t.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(var n=(t=u(t=Fa(this))).next();!n.done;n=t.next())wi(n=n.value)==e.id?n.mode=this.T?"showing":"hidden":n.mode="disabled";$a(this)}},i.Re=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.o&&this.c){this.i.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.o.variants.find((function(t){return t.id==e.id}));i&&Ri(i)&&i!=this.c.b&&(Ra(this.f.a,i,!1),zr(this.c,i,t,n),qa(this),this.xb=new Fi(i),Ga(this))}else if(this.a&&this.a.audioTracks){for(n=(t=u(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())wi(n=n.value)==e.id&&(n.enabled=!0);qa(this)}},i.he=function(){return oo(this.Mc())},i.ze=function(){return oo(this.hc())},i.ge=function(){return Array.from(ao(this.Mc()))},i.ye=function(){return Array.from(ao(this.hc()))},i.fd=function(e,t){if(this.o&&this.v)this.xb=new Vi(e,t||"",0,"","audio"),za(this);else if(this.a&&this.a.audioTracks){for(var n=Array.from(this.a.audioTracks),i=gi(e),r=(n=u(n)).next();!r.done;r=n.next()){var a=Si(r=r.value);gi(a.language)!=i||t&&!a.roles.includes(t)||(r.enabled=!0)}qa(this)}},i.gd=function(e,t){if(this.o&&this.v){this.ca=e,this.Vb=t||"";var n=xi(this.o.textStreams,this.ca,this.Vb)[0]||null;n&&n!=this.c.c&&(Ia(this.f.a,n,!1),this.i.streaming.alwaysStreamText||this.Oc())&&(Wr(this.c,n),$a(this))}else{var i=gi(e);(n=this.hc().find((function(e){return gi(e.language)==i&&(!t||e.roles.includes(t))})))&&this.Od(n)}},i.Se=function(e){if(this.o&&this.v){for(var t=null,n=u(this.o.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.xb=new Vi(t.language,"",0,e),za(this))}},i.Oc=function(){var e=this.T;return this.G?this.G.h.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Fa(this).some((function(e){return"showing"==e.mode})):e},i.Ye=function(e){if(e=!!e,this.T!=e){if(this.T=e,this.g==Bo)this.G.h.setTextVisibility(e),this.i.streaming.alwaysStreamText||(e?this.c.c||0<(e=xi(this.o.textStreams,this.ca,this.Vb)).length&&(Wr(this.c,e[0]),$a(this)):function(e){var t=e.a.get("text");t&&(na(t),ia(t).catch((function(){})),e.a.delete("text")),e.c=null}(this.c));else if(this.a&&this.a.src&&this.a.textTracks)for(var t=Fa(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Xa(this)}},i.te=function(){if(!this.S())return null;var e=this.W.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.o?new Date(1e3*(this.o.presentationTimeline.f+t)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.zd=function(){if(!this.S())return null;if(this.o)return new Date(1e3*this.o.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},i.dc=function(){if(this.g==Bo)return this.G.dc();var e={total:[],audio:[],video:[],text:[]};return this.g==Fo&&(e.total=_n(this.a.buffered)),e},i.getStats=function(){if(this.g!=Bo&&this.g!=Fo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Ka(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.f,n=Number(e.totalVideoFrames);t.I=Number(e.droppedVideoFrames),t.H=n,this.f.G=Number(e.corruptedVideoFrames)}this.h?e=(e=this.h).G?e.G:NaN:e=NaN,this.f.C=e,this.g==Bo&&((e=this.c.b)&&(this.f.h=(this.w?this.w.b:1)*e.bandwidth),e&&e.video&&(t=this.f,n=e.video.height||NaN,t.M=e.video.width||NaN,t.j=n),this.S()&&(e=this.zd().valueOf()+1e3*this.ed().end,this.f.m=(Date.now()-e)/1e3),this.o&&this.o.presentationTimeline&&(this.f.w=this.o.presentationTimeline.a),e=this.j.getBandwidthEstimate(),this.f.g=e);var i=this.f;e=i.M,t=i.j,n=i.h;for(var r=i.H,a=i.I,o=i.G,s=i.g,l=i.f,c=i.v,d=i.c,h=Sa(i.b,"playing"),p=Sa(i.b,"paused"),f=Sa(i.b,"buffering"),g=i.C,v=i.m,y=i.w,m=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.b),b=[],E=(i=u(i.a.a)).next();!E.done;E=i.next())E=E.value,b.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:d,playTime:h,pauseTime:p,bufferingTime:f,licenseTime:g,liveLatency:v,maxSegmentDuration:y,stateHistory:m,switchHistory:b}},i.addTextTrack=function(e,t,n,i,r,a){if(this.g==Fo)throw Error("State error!");if(this.g!=Bo)throw Error("State error!");var o=this.o.presentationTimeline.getDuration();if(1/0==o)throw new fe(1,4,4033);return e={id:this.rd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:br(0,o,[e]),mimeType:i,codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},this.o.textStreams.push(e),Ya(this),_i(e)},i.jd=function(e,t){this.Hc.width=e,this.Hc.height=t},i.dd=function(){if(this.g==Bo){var e=this.c;if(e.D.a)e=!1;else if(e.g)e=!1;else{for(var t=u(e.a.values()),n=t.next();!n.done;n=t.next())(n=n.value).Fb&&(n.Fb=!1,ta(e,n,.1));e=!0}}else e=!1;return e},i.me=function(){return W("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.o},i.ne=function(){return this.Xb},i.Rd=function(e){this.Zb=e},i.fb=function(e){if(function(e,t,n){n.variants=n.variants.filter((function(n){if(e&&e.M&&!dn(e,n))return!1;var i=n.audio;return n=n.video,!(i&&!Zn(i)||n&&!Zn(n)||i&&t&&t.audio&&!ki(i,t.audio)||n&&t&&t.video&&!ki(n,t.video))})),n.textStreams=n.textStreams.filter((function(e){return Yn(Dt(e.mimeType,e.codecs))}))}(this.h,this.c?this.c.b:null,e),!e.variants.some(Ri))throw new fe(2,4,4032);for(var t=this.i.restrictions,n=this.Hc,i=!1,r=u(e.variants),a=r.next();!a.done;a=r.next()){var o=(a=a.value).allowedByApplication;a.allowedByApplication=Ai(a,t,n),o!=a.allowedByApplication&&(i=!0)}if(i&&this.c&&Ya(this),t=this.h?this.h.c:null)for(i=(n=u(e.variants)).next();!i.done;i=n.next())for(r=(i=u(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]))).next();!r.done;r=i.next())if((r=r.value).keySystem==t.keySystem)for(a=(r=u(r.initData||[])).next();!a.done;a=r.next())a=a.value,tn(this.h,a.initDataType,a.initData);io(this,e)},F("shaka.Player",Da),Da.prototype.setVideoContainer=Da.prototype.Rd,Da.prototype.getManifestParserFactory=Da.prototype.ne,Da.prototype.getManifest=Da.prototype.me,Da.prototype.retryStreaming=Da.prototype.dd,Da.prototype.setMaxHardwareResolution=Da.prototype.jd,Da.prototype.addTextTrack=Da.prototype.addTextTrack,Da.prototype.getStats=Da.prototype.getStats,Da.prototype.getBufferedInfo=Da.prototype.dc,Da.prototype.getPresentationStartTimeAsDate=Da.prototype.zd,Da.prototype.getPlayheadTimeAsDate=Da.prototype.te,Da.prototype.setTextTrackVisibility=Da.prototype.Ye,Da.prototype.isTextTrackVisible=Da.prototype.Oc,Da.prototype.selectVariantsByLabel=Da.prototype.Se,Da.prototype.selectTextLanguage=Da.prototype.gd,Da.prototype.selectAudioLanguage=Da.prototype.fd,Da.prototype.getTextLanguages=Da.prototype.ye,Da.prototype.getAudioLanguages=Da.prototype.ge,Da.prototype.getTextLanguagesAndRoles=Da.prototype.ze,Da.prototype.getAudioLanguagesAndRoles=Da.prototype.he,Da.prototype.selectVariantTrack=Da.prototype.Re,Da.prototype.selectTextTrack=Da.prototype.Od,Da.prototype.getTextTracks=Da.prototype.hc,Da.prototype.getVariantTracks=Da.prototype.Mc,Da.prototype.cancelTrickPlay=Da.prototype.ae,Da.prototype.trickPlay=Da.prototype.af,Da.prototype.getPlaybackRate=Da.prototype.re,Da.prototype.isBuffering=Da.prototype.Nc,Da.prototype.getExpiration=Da.prototype.Cb,Da.prototype.drmInfo=Da.prototype.drmInfo,Da.prototype.keySystem=Da.prototype.keySystem,Da.prototype.seekRange=Da.prototype.ed,Da.prototype.isAudioOnly=Da.prototype.Ce,Da.prototype.isInProgress=Da.prototype.Ta,Da.prototype.isLive=Da.prototype.S,Da.prototype.getAdManager=Da.prototype.yd,Da.prototype.getAssetUri=Da.prototype.Jc,Da.prototype.getNetworkingEngine=Da.prototype.Db,Da.prototype.getMediaElement=Da.prototype.pe,Da.prototype.getLoadMode=Da.prototype.le,Da.prototype.resetConfiguration=Da.prototype.Qe,Da.prototype.getConfiguration=Da.prototype.getConfiguration,Da.prototype.configure=Da.prototype.configure,Da.prototype.load=Da.prototype.load,Da.prototype.unload=Da.prototype.pd,Da.prototype.detach=Da.prototype.detach,Da.prototype.attach=Da.prototype.yb,Da.probeSupport=function(){var e,t,n,i,r;return O((function(a){if(1==a.a)return E(a,function(){var e,t,n,i,r,a;return O((function(o){return 1==o.a?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return O((function(o){switch(o.a){case 1:return k(o,2),E(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.b,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),Ft("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),E(o,t.createMediaKeys(),5);case 5:_(o,0);break;case 2:w(o),i.set(e,null),A(o)}}))},a=e.map((function(e){return r(e)})),E(o,Promise.all(a),2)):o.return(It(i))}))}(),2);e=a.b;var o={};if(Lt()){for(var s in qi)o[s]=!0;for(var l in $i)o[l]=!0}s={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var c=(l=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!c.done;c=l.next())o[c=c.value]=Lt()?!!qi[c]:Mt(c);for(var d in s)o[d]=Lt()?!!$i[d]:Mt(s[d]);for(t=o,o={},s=(d=u('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!s.done;s=d.next())o[s=s.value]=Lt()?!!Yn(s)||(MediaSource.isTypeSupported(s)||Sn(s)):Mt(s),o[l=s.split(";")[0]]=o[l]||o[s];for(r in n={manifest:t,media:o,drm:e},i=jo)n[r]=i[r]();return a.return(n)}))},Da.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=Bt();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Lt()||Mt("application/x-mpegurl"))},Da.setAdManagerFactory=function(e){Ko=e},Da.registerSupportPlugin=function(e,t){jo[e]=t},Da.prototype.destroy=Da.prototype.destroy;var ho="abrstatuschanged",po="adaptation",fo="buffering",go="drmsessionupdate",vo="emsg",yo="error",mo="expirationupdated",bo="loaded",Eo="loading",Ao="manifestparsed",ko="metadata",To="onstatechange",_o="onstateidle",wo="ratechange",So="streaming",Co="textchanged",Ro="texttrackvisibility",Io="timelineregionadded",xo="timelineregionenter",Do="timelineregionexit",Po="trackschanged",Oo="unloading",Lo="variantchanged",Mo={hf:ho,jf:po,kf:fo,lf:go,nf:vo,Error:yo,pf:mo,rf:"largegap",sf:bo,tf:Eo,uf:Ao,Metadata:ko,vf:To,wf:_o,xf:wo,yf:So,zf:Co,Af:Ro,Bf:Io,Cf:xo,Df:Do,Ef:Po,Ff:Oo,Gf:Lo},No=0,Uo=1,Bo=2,Fo=3;Da.LoadMode={DESTROYED:No,NOT_LOADED:Uo,MEDIA_SOURCE:Bo,SRC_EQUALS:Fo},Da.version="v3.0.5";var Vo=["3","0"];Et=new function(e){this.a=e,this.c=mt,this.b=bt}(new vt(Number(Vo[0]),Number(Vo[1])));var Ho=["output-restricted","internal-error"],jo={},Ko=null;function Go(){this.a=[],this.f=this.b=this.c=0}function zo(e,t){var n=this;this.c=e,this.a=t,this.f=!1,this.g=this.a.getVolume(),this.b=new tt,this.b.l(this.a,google.ima.AdEvent.Type.PAUSED,(function(){n.f=!0})),this.b.l(this.a,google.ima.AdEvent.Type.RESUMED,(function(){n.f=!1}))}function Wo(e,t,n,i){var r=this;this.j=e,this.a=t,this.m=NaN,this.f=i,this.h=null,this.b=new tt,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.j,this.a)).initialize(),this.g=new google.ima.AdsLoader(e),this.g.getSettings().setPlayerType("shaka-player"),this.g.getSettings().setPlayerVersion("v3.0.5"),this.c=null,this.b.ha(this.g,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){!function(e,t){e.f(new Oe("ads-loaded",{loadTime:Date.now()/1e3-e.m})),e.c=t.getAdsManager(e.a),e.f(new Oe("ima-ad-manager-loaded",{imaAdsManager:e.c}));var n=e.c.getCuePoints();if(n.length){for(var i=[],r=(n=u(n)).next();!r.done;r=n.next())i.push(new Jo(r.value));e.f(new Oe("ad-cue-points-changed",{cuepoints:i}))}!function(e){e.b.l(e.c,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Yo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.STARTED,(function(t){qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(t){e.f(new Oe("ad-first-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.MIDPOINT,(function(t){e.f(new Oe("ad-midpoint",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(t){e.f(new Oe("ad-third-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.COMPLETE,(function(t){e.f(new Oe("ad-complete",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){$o(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){$o(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPED,(function(t){e.f(new Oe("ad-skipped",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(t){e.f(new Oe("ad-volume-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_MUTED,(function(t){e.f(new Oe("ad-muted",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.PAUSED,(function(t){e.h.f=!0,e.f(new Oe("ad-paused",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.RESUMED,(function(t){e.h.f=!1,e.f(new Oe("ad-resumed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(t){e.f(new Oe("ad-skip-state-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CLICK,(function(){e.f(new Oe("ad-clicked"))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_PROGRESS,(function(t){e.f(new Oe("ad-progress",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BUFFERING,(function(t){e.f(new Oe("ad-buffering",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.IMPRESSION,(function(t){e.f(new Oe("ad-impression",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.DURATION_CHANGE,(function(t){e.f(new Oe("ad-duration-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.USER_CLOSE,(function(t){e.f(new Oe("ad-closed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOADED,(function(t){e.f(new Oe("ad-loaded",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){e.f(new Oe("all-ads-completed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(t){e.f(new Oe("ad-linear-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_METADATA,(function(t){e.f(new Oe("ad-metadata",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOG,(function(t){e.f(new Oe("ad-recoverable-error",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BREAK_READY,(function(t){e.f(new Oe("ad-break-ready",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.INTERACTION,(function(t){e.f(new Oe("ad-interaction",{originalEvent:t}))}))}(e);try{e.c.init(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.b.l(e.a,"loadeddata",(function(){e.c.resize(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),e.c.start()}catch(t){$o(e,null)}}(r,e)})),this.b.l(this.g,google.ima.AdEvent.Type.AD_ERROR,(function(e){Yo(r,e)})),this.a.onended=function(){r.g.contentComplete()}}function Yo(e,t){t.getError(),$o(e,null),e.f(new Oe("ad-cue-points-changed",{cuepoints:[]}))}function qo(e,t){var n=t.getAd();e.h=new zo(n,e.c),e.f(new Oe("ad-started",{ad:e.h,sdkAdObject:n,originalEvent:t})),e.j.setAttribute("ad-active","true"),e.a.pause()}function $o(e,t){e.f(new Oe("ad-stopped",{originalEvent:t})),e.j.removeAttribute("ad-active"),e.a.play()}function Xo(e,t){this.c=e,this.b=null,this.a=t}function Zo(e,t,n,i){var r=this;this.v=e,this.a=t,this.g=null,this.G=NaN,this.f=i,this.C=!1,this.w=this.h=this.j=null,this.m="",this.b=new tt,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.c=new google.ima.dai.api.StreamManager(this.a,this.v,e),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.f(new Oe("ads-loaded",{loadTime:Date.now()/1e3-e.G}));var n=t.getStreamData().url;e.g.resolve(n),e.g=null,e.C||e.b.l(e.a,"seeked",(function(){var t=e.a.currentTime;if(0!=t){e.c.streamTimeForContentTime(t);var n=e.c.previousCuePointForStreamTime(t);n&&!n.played&&(e.j=t,e.a.currentTime=n.start)}}))}(r,e)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.m.length?r.g.resolve(r.m):r.g.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.g=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.h=new Xo(e,r.a),r.w&&(r.h.b=r.w),r.f(new Oe("ad-started",{ad:r.h})),r.v.setAttribute("ad-active","true")})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.v.removeAttribute("ad-active");var e=r.a.currentTime;r.j&&r.j>e&&(r.a.currentTime=r.j,r.j=null)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.w=e.getStreamData().adProgressData,r.h&&(r.h.b=r.w)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.f(new Oe("ad-first-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.f(new Oe("ad-midpoint"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.f(new Oe("ad-third-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.f(new Oe("ad-complete")),r.f(new Oe("ad-stopped")),r.v.removeAttribute("ad-active"),r.h=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.f(new Oe("ad-skipped")),r.f(new Oe("ad-stopped"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push(new Jo(n.start,n.end));r.f(new Oe("ad-cue-points-changed",{cuepoints:e}))}))}function Qo(){Me.call(this),this.a=this.b=null,this.f=new Go,this.c=navigator.language}function Jo(e,t){this.start=e,this.end=void 0===t?null:t}function es(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Oe){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=u(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=u(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=u(_n(t))).next();!i.done;i=n.next()){var a=(i=i.value).end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function ts(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}(i=zo.prototype).getDuration=function(){return this.c.getDuration()},i.getRemainingTime=function(){return this.a.getRemainingTime()},i.isPaused=function(){return this.f},i.isSkippable=function(){return 0<=this.c.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.a.getAdSkippableState()},i.skip=function(){return this.a.skip()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.resume()},i.getVolume=function(){return this.a.getVolume()},i.setVolume=function(e){return this.a.setVolume(e)},i.isMuted=function(){return 0==this.a.getVolume()},i.resize=function(e,t){this.a.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.g=this.getVolume(),this.setVolume(0)):this.setVolume(this.g)},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.c=null},F("shaka.ads.ClientSideAd",zo),zo.prototype.release=zo.prototype.release,zo.prototype.getPositionInSequence=zo.prototype.getPositionInSequence,zo.prototype.getSequenceLength=zo.prototype.getSequenceLength,zo.prototype.setMuted=zo.prototype.setMuted,zo.prototype.resize=zo.prototype.resize,zo.prototype.isMuted=zo.prototype.isMuted,zo.prototype.setVolume=zo.prototype.setVolume,zo.prototype.getVolume=zo.prototype.getVolume,zo.prototype.play=zo.prototype.play,zo.prototype.pause=zo.prototype.pause,zo.prototype.skip=zo.prototype.skip,zo.prototype.canSkipNow=zo.prototype.canSkipNow,zo.prototype.getTimeUntilSkippable=zo.prototype.getTimeUntilSkippable,zo.prototype.isSkippable=zo.prototype.isSkippable,zo.prototype.isPaused=zo.prototype.isPaused,zo.prototype.getRemainingTime=zo.prototype.getRemainingTime,zo.prototype.getDuration=zo.prototype.getDuration,Wo.prototype.stop=function(){this.c.stop()},(i=Xo.prototype).getDuration=function(){return this.b?this.b.duration:-1},i.getRemainingTime=function(){return this.b?this.b.duration-this.b.currentTime:-1},i.isPaused=function(){return this.a.paused},i.isSkippable=function(){return this.c.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.a.currentTime+=this.getRemainingTime()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.play()},i.getVolume=function(){return this.a.volume},i.setVolume=function(e){this.a.volume=e},i.isMuted=function(){return this.a.muted},i.resize=function(){},i.setMuted=function(e){this.a.muted=e},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.b=this.c=null},F("shaka.ads.ServerSideAd",Xo),Xo.prototype.release=Xo.prototype.release,Xo.prototype.getPositionInSequence=Xo.prototype.getPositionInSequence,Xo.prototype.getSequenceLength=Xo.prototype.getSequenceLength,Xo.prototype.setMuted=Xo.prototype.setMuted,Xo.prototype.resize=Xo.prototype.resize,Xo.prototype.isMuted=Xo.prototype.isMuted,Xo.prototype.setVolume=Xo.prototype.setVolume,Xo.prototype.getVolume=Xo.prototype.getVolume,Xo.prototype.play=Xo.prototype.play,Xo.prototype.pause=Xo.prototype.pause,Xo.prototype.skip=Xo.prototype.skip,Xo.prototype.canSkipNow=Xo.prototype.canSkipNow,Xo.prototype.getTimeUntilSkippable=Xo.prototype.getTimeUntilSkippable,Xo.prototype.isSkippable=Xo.prototype.isSkippable,Xo.prototype.isPaused=Xo.prototype.isPaused,Xo.prototype.getRemainingTime=Xo.prototype.getRemainingTime,Xo.prototype.getDuration=Xo.prototype.getDuration,Zo.prototype.stop=function(){this.c.reset(),this.m="",this.j=null},Zo.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.c.onTimedMetadata(t)}},v(Qo,Me),(i=Qo.prototype).setLocale=function(e){this.c=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new fe(2,10,1e4);this.b=new Wo(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.onAssetUnload=function(){this.b&&this.b.stop(),this.dispatchEvent(new Oe("ad-stopped")),this.f=new Go},i.requestClientSideAds=function(e){if(!this.b)throw new fe(1,10,10001);var t=this.b;t.m=Date.now()/1e3,t.g.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new fe(2,10,10002);this.a=new Zo(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.a)throw new fe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="Shaka Player",e.adTagParameters.mpv="v3.0.5";var i=t;return(n=this.a).g?n=Promise.reject(new fe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.C=!0),n.g=new be,n.c.requestStream(e),n.m=i||"",n.G=Date.now()/1e3,n=n.g),n},i.replaceServerSideAdTagParameters=function(e){if(!this.a)throw new fe(1,10,10003);(e.mpt||e.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.0.5",this.a.c.replaceAdTagParameters(e)},i.getStats=function(){var e=this.f;return{loadTimes:e.a,started:e.c,playedCompletely:e.b,skipped:e.f}},i.onDashTimedMetadata=function(e){if(this.a&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.a.c.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.a&&this.a.c.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.a&&this.a.onCueMetadataChange(e)},F("shaka.ads.AdManager",Qo),Qo.prototype.onCueMetadataChange=Qo.prototype.onCueMetadataChange,Qo.prototype.onHlsTimedMetadata=Qo.prototype.onHlsTimedMetadata,Qo.prototype.onDashTimedMetadata=Qo.prototype.onDashTimedMetadata,Qo.prototype.getStats=Qo.prototype.getStats,Qo.prototype.replaceServerSideAdTagParameters=Qo.prototype.replaceServerSideAdTagParameters,Qo.prototype.requestServerSideStream=Qo.prototype.requestServerSideStream,Qo.prototype.initServerSide=Qo.prototype.initServerSide,Qo.prototype.requestClientSideAds=Qo.prototype.requestClientSideAds,Qo.prototype.onAssetUnload=Qo.prototype.onAssetUnload,Qo.prototype.initClientSide=Qo.prototype.initClientSide,Qo.prototype.setLocale=Qo.prototype.setLocale,Qo.ADS_LOADED="ads-loaded",Qo.AD_STARTED="ad-started",Qo.AD_FIRST_QUARTILE="ad-first-quartile",Qo.AD_MIDPOINT="ad-midpoint",Qo.AD_THIRD_QUARTILE="ad-third-quartile",Qo.AD_COMPLETE="ad-complete",Qo.AD_STOPPED="ad-stopped",Qo.AD_SKIPPED="ad-skipped",Qo.AD_VOLUME_CHANGED="ad-volume-changed",Qo.AD_MUTED="ad-muted",Qo.AD_PAUSED="ad-paused",Qo.AD_RESUMED="ad-resumed",Qo.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Qo.CUEPOINTS_CHANGED="ad-cue-points-changed",Qo.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Qo.AD_CLICKED="ad-clicked",Qo.AD_PROGRESS="ad-progress",Qo.AD_BUFFERING="ad-buffering",Qo.AD_IMPRESSION="ad-impression",Qo.AD_DURATION_CHANGED="ad-duration-changed",Qo.AD_CLOSED="ad-closed",Qo.AD_LOADED="ad-loaded",Qo.ALL_ADS_COMPLETED="all-ads-completed",Qo.AD_LINEAR_CHANGED="ad-linear-changed",Qo.AD_METADATA="ad-metadata",Qo.AD_RECOVERABLE_ERROR="ad-recoverable-error",Qo.AD_BREAK_READY="ad-break-ready",Qo.AD_INTERACTION="ad-interaction",Ko=function(){return new Qo};var ns="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),is="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),rs=["loop","playbackRate"],as=["pause","play"],os={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},ss={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ls=[["getConfiguration","configure"]],us=[["isTextTrackVisible","setTextTrackVisibility"]],cs="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),ds=["attach","detach","load","unload"];function hs(e,t,n,i,r,a){var o=this;this.T=e,this.f=new ve(t),this.W=n,this.m=!1,this.C=i,this.M=r,this.H=a,this.b=this.h=!1,this.I="",this.j=null,this.v=function(){return ys(o)},this.w=function(e,t){var n=ts(t);switch(n.type){case"event":var i=n.targetName;n=new Oe((n=n.event).type,n),o.C(i,n);break;case"update":for(var r in i=n.update)for(var a in n=o.a[r]||{},i[r])n[a]=i[r][a];o.m&&(o.W(),o.m=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=o.c[r],delete o.c[r],a)if(n){for(i in r=new fe(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},this.a={video:{},player:{}},this.G=0,this.c={},this.g=null,Ts.add(this)}function ps(e,t,n){ks=n,n.addUpdateListener(e.v),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.w),ys(e),bs(e,{type:"init",initState:t,appData:e.j}),e.g.resolve()}function fs(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.g.reject(new fe(2,8,n,t))}function gs(e,t){var n=e.H();e.g=new be,e.m=!0,ps(e,n,t)}function vs(e){var t=ks;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.w)}function ys(e){var t=!!ks&&"connected"==ks.status;if(e.b&&!t){for(var n in e.M(),e.a)e.a[n]={};ms(e)}e.b=t,e.I=t?ks.receiver.friendlyName:"",e.f.Ob()}function ms(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new fe(1,7,7e3))}}function bs(e,t){var n=es(t),i=ks;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),Y)}catch(t){throw i=new Oe("error",{detail:n=new fe(2,8,8005,t)}),e.C("player",i),e.gb(),n}}(i=hs.prototype).destroy=function(){return Ts.delete(this),ms(this),ks&&vs(this),this.f&&(this.f.stop(),this.f=null),this.M=this.C=null,this.b=this.h=!1,this.w=this.v=this.g=this.c=this.a=this.j=null,Promise.resolve()},i.fa=function(){return this.b},i.bd=function(){return this.I},i.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.T.length){this.h=!0,this.f.Ob();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(Ts),n=t.next();!n.done;n=t.next())gs(n.value,e)}),(function(e){for(var t=u(Ts),n=t.next();!n.done;n=t.next())n=n.value,As="available"==e,n.f.Ob()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),As&&this.f.R(Es),(t=ks)&&t.status!=chrome.cast.SessionStatus.STOPPED?gs(this,t):ks=null}},i.hd=function(e){this.j=e,this.b&&bs(this,{type:"appData",appData:this.j})},i.cast=function(e){var t=this;return O((function(n){if(!t.h)throw new fe(1,8,8e3);if(!As)throw new fe(1,8,8001);if(t.b)throw new fe(1,8,8002);return t.g=new be,chrome.cast.requestSession((function(n){return ps(t,e,n)}),(function(e){return fs(t,e)})),E(n,t.g,0)}))},i.gb=function(){if(this.b){if(ms(this),ks){vs(this);try{ks.stop((function(){}),(function(){}))}catch(e){}ks=null}ys(this)}},i.get=function(e,t){var n=this;if("video"==e){if(as.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Ld.apply(n,[e,t].concat(c(r)))}}else if("player"==e){if(ss[t]&&!this.get("player","isLive")())return function(){};if(cs.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Ld.apply(n,[e,t].concat(c(r)))};if(ds.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Ne.apply(n,[e,t].concat(c(r)))};if(os[t])return function(){return n.a[e][t]}}return this.a[e][t]},i.set=function(e,t,n){this.a[e][t]=n,bs(this,{type:"set",targetName:e,property:t,value:n})},i.Ld=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];bs(this,{type:"call",targetName:e,methodName:t,args:i})},i.Ne=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new be;var a=this.G.toString();this.G++,this.c[a]=r;try{bs(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r};var Es=.02,As=!1,ks=null,Ts=new Set;function _s(e,t,n){Me.call(this);var i=this;this.f=e,this.c=t,this.b=this.j=this.g=this.m=this.h=null,this.w=n,this.v=new Map,this.a=new hs(n,(function(){return Cs(i)}),(function(){return Rs(i)}),(function(e,t){return Ds(i,e,t)}),(function(){return Is(i)}),(function(){return Ss(i)})),function(e){e.a.init(),e.b=new tt;for(var t=u(ns),n=t.next();!n.done;n=t.next())e.b.l(e.f,n.value,(function(t){e.a.fa()||(t=new Oe(t.type,t),e.g.dispatchEvent(t))}));for(var i in Mo)e.b.l(e.c,Mo[i],(function(t){e.a.fa()||e.j.dispatchEvent(t)}));for(var r in e.h={},t={},e.f)t.sb=r,Object.defineProperty(e.h,t.sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return xs(e,t.sb)}}(t),set:function(t){return function(n){var i=t.sb;e.a.fa()?e.a.set("video",i,n):e.f[i]=n}}(t)}),t={sb:t.sb};e.m={},ws(e,(function(t){Object.defineProperty(e.m,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.v.has(t)&&(t=e.v.get(t)),"addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.h};if("getSharedConfiguration"==t)return e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.c.Db()};if("getAdManager"==t)return function(){return e.c.yd()};if("setVideoContainer"==t)return function(t){return e.c.Rd(t)};if(e.a.fa()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()}}return e.a.fa()&&0==Object.keys(e.a.a.video).length&&os[t]||!e.a.fa()?e.c[t].bind(e.c):e.a.get("player",t)}(e,t)}})})),function(e){var t=new Map;ws(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.v.set(n,r):e.v.set(r,n)}else t.set(i,n)}))}(e),e.g=new Me,e.g.Wb=e.h,e.j=new Me,e.j.Wb=e.m}(this)}function ws(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.c,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=u(Object.getOwnPropertyNames(a)),l=s.next();!l.done;l=s.next())n(l=l.value)&&(r.add(l),t(l,i[l]));a=Object.getPrototypeOf(a)}}function Ss(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.c.Jc(),startTime:null};e.f.pause();for(var n=u(rs),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.f[i];for(e.f.ended||(t.startTime=e.f.currentTime),i=(n=u(ls)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.c[r[0]](),t.player[i]=r}for(i=(n=u(us)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.c[r[0]](),t.playerAfterLoad[i]=r;return t}function Cs(e){var t=new Oe("caststatuschanged");e.dispatchEvent(t)}function Rs(e){var t=new Oe(e.h.paused?"pause":"play");e.g.dispatchEvent(t)}function Is(e){for(var t=u(ls),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}var r=e.a.get("player","getAssetUri")();n=e.a.get("video","ended"),t=Promise.resolve();var a=e.f.autoplay;i=null,n||(i=e.a.get("video","currentTime")),r&&(e.f.autoplay=!1,t=e.c.load(r,i));var o={};for(i=(n=u(rs)).next();!i.done;i=n.next())i=i.value,o[i]=e.a.get("video",i);t.then((function(){if(e.f){for(var t=u(rs),n=t.next();!n.done;n=t.next())n=n.value,e.f[n]=o[n];for(n=(t=u(us)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}e.f.autoplay=a,r&&e.f.play()}}),(function(t){t=new Oe(yo,{detail:t}),e.c.dispatchEvent(t)}))}function xs(e,t){if("addEventListener"==t)return function(t,n,i){return e.g.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.g.removeEventListener(t,n,i)};if(e.a.fa()&&0==Object.keys(e.a.a.video).length){var n=e.f[t];if("function"!=typeof n)return n}return e.a.fa()?e.a.get("video",t):("function"==typeof(n=e.f[t])&&(n=n.bind(e.f)),n)}function Ds(e,t,n){e.a.fa()&&("video"==t?e.g.dispatchEvent(n):"player"==t&&e.j.dispatchEvent(n))}function Ps(e,t,n,i){Me.call(this);var r=this;this.a=e,this.c=t,this.b=new tt,this.I={video:e,player:t},this.C=n||function(){},this.M=i||function(e){return e},this.f=null,this.G=!1,this.j=!0,this.h=0,this.w=!1,this.v=!0,this.m=this.g=null,this.H=new ve((function(){Ns(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Os(e)},t.onSenderDisconnected=function(){return Os(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Vs(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.g),Vs(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.g)},e.m=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.m.onMessage=function(t){return function(e,t){var n=ts(t.data);switch(n.type){case"PLAY":e.a.play(),Hs(e);break;case"PAUSE":e.a.pause(),Hs(e);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(e.a.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(e.a.play(),Hs(e)):r&&"PLAYBACK_PAUSE"==r&&(e.a.pause(),Hs(e));break;case"STOP":e.c.pd().then((function(){e.c&&Hs(e)}));break;case"GET_STATUS":Bs(e,Number(n.requestId));break;case"VOLUME":i=(r=n.volume).level,r=r.muted;var a=e.a.volume,o=e.a.muted;null!=i&&(e.a.volume=Number(i)),null!=r&&(e.a.muted=r),a==e.a.volume&&o==e.a.muted||Hs(e);break;case"LOAD":e.h=0,e.w=!1,e.v=!1,i=n.media,r=n.currentTime,a=e.M(i.contentId),o=n.autoplay||!0,e.C(i.customData),o&&(e.a.autoplay=!0),e.c.load(a,r).then((function(){e.c&&Bs(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Vs(e,{requestId:Number(n.requestId),type:i},e.m)}));break;default:Vs(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.m)}}(e,t)},e.g=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.g.onMessage=function(t){return function(e,t){var n=ts(t.data);switch(n.type){case"init":e.h=0,e.w=!1,e.v=!0,function(e,t,n){var i,r,a,o,s,l,u,c,d;O((function(h){switch(h.a){case 1:for(i in t.player)r=t.player[i],e.c[i](r);return e.C(n),a=e.a.autoplay,t.manifest?(e.a.autoplay=!1,k(h,5),E(h,e.c.load(t.manifest,t.startTime),7)):E(h,Promise.resolve(),3);case 7:_(h,3);break;case 5:return o=w(h),s=new Oe(yo,{detail:o}),e.c.dispatchEvent(s),h.return();case 3:if(!e.c)return h.return();for(l in t.video)u=t.video[l],e.a[l]=u;for(c in t.playerAfterLoad)d=t.playerAfterLoad[c],e.c[c](d);e.a.autoplay=a,t.manifest&&(e.a.play(),Hs(e)),A(h)}}))}(e,n.initState,n.appData),Ns(e);break;case"appData":e.C(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){var a=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){a.setSystemVolumeLevel(n);break}if("muted"==r){a.setSystemVolumeMuted(n);break}}e.I[i][r]=n;break;case"call":(i=e.I[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.h=0,e.w=!1);var o=n.id,s=t.senderId;n=(a=e.I[i])[r].apply(a,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.v=!0}))),n.then((function(){return Fs(e,s,o,null)}),(function(t){return Fs(e,s,o,t)}))}}(e,t)},t.start();for(var n=(t=u(ns)).next();!n.done;n=t.next())e.b.l(e.a,n.value,(function(t){return Ms(e,"video",t)}));for(var i in Mo)e.b.l(e.c,Mo[i],(function(t){return Ms(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.c.jd(3840,2160):e.c.jd(1920,1080),e.b.l(e.a,"loadeddata",(function(){e.w=!0})),e.b.l(e.c,"loading",(function(){e.j=!1,Ls(e)})),e.b.l(e.a,"playing",(function(){e.j=!1,Ls(e)})),e.b.l(e.a,"pause",(function(){Ls(e)})),e.b.l(e.c,"unloading",(function(){e.j=!0,Ls(e)})),e.b.l(e.a,"ended",(function(){new ve((function(){e.a&&e.a.ended&&(e.j=!0,Ls(e))})).R(Ks)}))}(this)}function Os(e){e.h=0,e.v=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ls(e)}function Ls(e){var t;O((function(n){return 1==n.a?E(n,Promise.resolve(),2):e.c?(t=new Oe("caststatuschanged"),e.dispatchEvent(t),Us(e)||Hs(e),void A(n)):n.return()}))}function Ms(e,t,n){e.c&&(Ns(e),Vs(e,{type:"event",targetName:t,event:n},e.g))}function Ns(e){e.H.R(js);for(var t={video:{},player:{}},n=u(is),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.a[i];if(e.c.S())for(var r in ss)0==e.h%ss[r]&&(t.player[r]=e.c[r]());for(var a in os)0==e.h%os[a]&&(t.player[a]=e.c[a]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.w&&(e.h+=1),Vs(e,{type:"update",update:t},e.g),Us(e)}function Us(e){return!(!e.v||!e.a.duration&&!e.c.S())&&(Bs(e),e.v=!1,!0)}function Bs(e,t){var n={contentId:e.c.Jc(),streamType:e.c.S()?"LIVE":"BUFFERED",contentType:""};e.c.S()||(n.duration=e.a.duration),e.f&&(n.metadata=e.f),Hs(e,void 0===t?0:t,n)}function Fs(e,t,n,i){e.c&&Vs(e,{type:"asyncComplete",id:n,error:i},e.g,t)}function Vs(e,t,n,i){e.G&&(e=es(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Hs(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.j?Gs:e.c.Nc()?Ws:e.a.paused?Ys:zs,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),Vs(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.m)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=u(Ts)).next();!t.done;t=e.next())t.value.init()},v(_s,Me),(i=_s.prototype).destroy=function(e){return e&&this.a.gb(),this.b&&(this.b.release(),this.b=null),e=[],this.c&&(e.push(this.c.destroy()),this.c=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.m=this.h=this.f=null,Promise.all(e)},i.Ae=function(){return this.h},i.se=function(){return this.m},i.$d=function(){return this.a.h&&As},i.fa=function(){return this.a.fa()},i.bd=function(){return this.a.bd()},i.cast=function(){var e,t=this;return O((function(n){return 1==n.a?(e=Ss(t),E(n,t.a.cast(e),2)):t.c?E(n,t.c.pd(),0):n.return()}))},i.hd=function(e){this.a.hd(e)},i.Ze=function(){!function(e){if(e.b){var t=e.H();chrome.cast.requestSession((function(n){return ps(e,t,n)}),(function(t){return fs(e,t)}))}}(this.a)},i.gb=function(){this.a.gb()},i.be=function(e){var t=this;return O((function(n){if(1==n.a)return e==t.w?n.return():(t.w=e,t.a.gb(),E(n,t.a.destroy(),2));t.a=null,t.a=new hs(e,(function(){return Cs(t)}),(function(){return Rs(t)}),(function(e,n){return Ds(t,e,n)}),(function(){return Is(t)}),(function(){return Ss(t)})),t.a.init(),A(n)}))},F("shaka.cast.CastProxy",_s),_s.prototype.changeReceiverId=_s.prototype.be,_s.prototype.forceDisconnect=_s.prototype.gb,_s.prototype.suggestDisconnect=_s.prototype.Ze,_s.prototype.setAppData=_s.prototype.hd,_s.prototype.cast=_s.prototype.cast,_s.prototype.receiverName=_s.prototype.bd,_s.prototype.isCasting=_s.prototype.fa,_s.prototype.canCast=_s.prototype.$d,_s.prototype.getPlayer=_s.prototype.se,_s.prototype.getVideo=_s.prototype.Ae,_s.prototype.destroy=_s.prototype.destroy,v(Ps,Me),(i=Ps.prototype).isConnected=function(){return this.G},i.De=function(){return this.j},i.Ve=function(e){this.f=e},i.ee=function(){this.f=null},i.We=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.title=e},i.Ue=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.images=[{url:e}]},i.Te=function(e){this.f||(this.f={}),this.f.artist=e,this.f.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return O((function(n){if(1==n.a)return t.b&&(t.b.release(),t.b=null),e=[],t.c&&(e.push(t.c.destroy()),t.c=null),t.H&&(t.H.stop(),t.H=null),t.a=null,t.I=null,t.C=null,t.G=!1,t.j=!0,t.g=null,t.m=null,E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),A(n)}))},F("shaka.cast.CastReceiver",Ps),Ps.prototype.destroy=Ps.prototype.destroy,Ps.prototype.setContentArtist=Ps.prototype.Te,Ps.prototype.setContentImage=Ps.prototype.Ue,Ps.prototype.setContentTitle=Ps.prototype.We,Ps.prototype.clearContentMetadata=Ps.prototype.ee,Ps.prototype.setContentMetadata=Ps.prototype.Ve,Ps.prototype.isIdle=Ps.prototype.De,Ps.prototype.isConnected=Ps.prototype.isConnected;var js=.5,Ks=5,Gs="IDLE",zs="PLAYING",Ws="BUFFERING",Ys="PAUSED";function qs(e){var t=this;this.a=[],this.b=[],this.data=[],(new Lr).L("moov",Mr).ea("pssh",(function(e){if(!(1<e.version)){var n=xe(e.reader.P,-12,e.size);if(t.data.push(n),t.a.push(qt(e.reader.Wa(16))),0<e.version){n=e.reader.J();for(var i=(n=u(Q(n))).next();!i.done;i=n.next())i=qt(e.reader.Wa(16)),t.b.push(i)}}})).parse(e)}function $s(e,t){var n=Zs(e,t);return 1!=n.length?null:n[0]}function Xs(e,t,n){return 1!=(e=Qs(e,t,n)).length?null:e[0]}function Zs(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function Qs(e,t,n){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))}function Js(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function el(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function tl(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function nl(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function il(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function rl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function al(e){return 0==(e=Number(e))%1?e:null}function ol(e){return 0==(e=Number(e))%1&&0<e?e:null}function sl(e){return 0==(e=Number(e))%1&&0<=e?e:null}function ll(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function ul(e,t){var n=new DOMParser,i=null,r=null;try{r=n.parseFromString(e,"text/xml")}catch(e){}return r&&r.documentElement.tagName==t&&(i=r.documentElement),i&&0<i.getElementsByTagName("parsererror").length?null:i}function cl(e,t){try{return ul(ot(e),t)}catch(e){return null}}function dl(e,t){var n=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=hl(n.value))&&t.push(n);return t}(e),i=null,r=[],a=[],o=new Set(n.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new fe(2,4,4010);if(t||(a=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Nd||(i=e.init||i,!1)}))).length&&(0==(r=function(e,t){for(var n=[],i=u(t),r=i.next();!r.done;r=i.next()){r=r.value;var a=pl.get(r.Nd);if(a){var o;if(o=Xs(r.node,"urn:microsoft:playready","pro")){o=Wt(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,c=s.length+16+l,d=new Uint8Array(c),h=De(d),p=0;h.setUint32(p,c),p+=4,h.setUint32(p,1886614376),p+=4,h.setUint32(p,0),p+=4,d.set(s,p),p+=s.length,h.setUint32(p,l),p+=4,d.set(o,p),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=St(a,r.init||e||o),(a=fl.get(a))&&(o.licenseServerUri=a(r)),n.push(o)}}return n}(i,a)).length&&(r=[St("",i)])),n.length&&(t||!a.length))for(r=[],a=(n=u(pl.values())).next();!a.done;a=n.next())"org.w3.clearkey"!=(a=a.value)&&r.push(St(a,i));if(o=Array.from(o)[0]||null)for(a=(n=u(r)).next();!a.done;a=n.next())for(var s=(a=u(a.value.initData)).next();!s.done;s=a.next())s.value.keyId=o;return{ud:o,Hf:i,drmInfos:r,xd:!0}}function hl(e){var t=e.getAttribute("schemeIdUri"),n=Js(e,"urn:mpeg:cenc:2013","default_KID"),i=Qs(e,"urn:mpeg:cenc:2013","pssh").map(el);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new fe(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:Wt(e),keyId:null}}))}catch(e){throw new fe(2,4,4007)}return{node:e,Nd:t,keyId:n,init:0<r.length?r:null}}var pl=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),fl=(new Map).set("com.widevine.alpha",(function(e){return(e=Xs(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Xs(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=De(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=xe(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=Wt(e.textContent)).filter((function(e){return 1===e.type}))[0])&&(e=ul(e=st(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}));function gl(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function vl(e,t){var n=yl(e,t,"timescale"),i=1;n&&(i=ol(n)||1),(n=ol((n=yl(e,t,"duration"))||""))&&(n/=i);var r=yl(e,t,"startNumber"),a=Number(yl(e,t,"presentationTimeOffset"))||0,o=sl(r||"");null!=r&&null!=o||(o=1);var s=ml(e,t,"SegmentTimeline");if(r=null,s){r=i;var l=e.O.duration||1/0,c=Zs(s,"S");s=[];for(var d=-a,h=(c=u(J(c))).next();!h.done;h=c.next()){var p=(h=h.value).item,f=h.next,g=tl(p,"t",sl);h=tl(p,"d",sl);var v=tl(p,"r",al);if(null!=g&&(g-=a),!h)break;if(p=null!=g?g:d,0>(g=v||0))if(f){if(null==(f=tl(f,"t",sl)))break;if(p>=f)break;g=Math.ceil((f-p)/h)-1}else{if(1/0==l)break;if(p/r>=l)break;g=Math.ceil((l*r-p)/h)-1}for(0<s.length&&p!=d&&(s[s.length-1].end=p/r),g=(f=u(Q(g+1))).next();!g.done;g=f.next())d=p+h,s.push({start:p/r,end:d/r,ef:p}),p=d}r=s}return{timescale:i,Z:n,qb:o,Ga:a/i||0,qd:a,timeline:r}}function yl(e,t,n){return[t(e.F),t(e.aa),t(e.ka)].filter(Tt).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function ml(e,t,n){return[t(e.F),t(e.aa),t(e.ka)].filter(Tt).map((function(e){return $s(e,n)})).reduce((function(e,t){return e||t}))}function bl(e,t,n,i,r,a){if(a=void 0===a?0:a,Js(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=Js(e,"http://www.w3.org/1999/xlink","href"),s=Js(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return Ae(new fe(2,4,4028));if("onLoad"!=s)return Ae(new fe(2,4,4027));var d=wt([i],[o]);return r.request(0,We(d,t)).U((function(i){if(!(i=cl(i.data,e.tagName)))return Ae(new fe(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=(i=u(Array.from(i.attributes))).next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return bl(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return bl(e,t,n,i,r,a)}))),o}o=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Js(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&o.push(bl(l,t,n,i,r,a)));return we(o).U((function(){return e}))}function El(e,t,n,i,r,a,o){var s,l=(new Lr).ea("sidx",(function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var l=o.reader.J();if(0==l)throw new fe(2,3,3005);if(0==o.version)var c=o.reader.J(),d=o.reader.J();else c=o.reader.pb(),d=o.reader.pb();o.reader.skip(2);var h=o.reader.Kb();for(e=e+o.size+d,h=u(Q(h)),d=h.next();!d.done;d=h.next()){var p=o.reader.J();d=(2147483648&p)>>>31,p&=2147483647;var f=o.reader.J();if(o.reader.skip(4),1==d)throw new fe(2,3,3006);s.push(new Zi(c/l+n,(c+f)/l+n,(function(){return a}),e,e+p-1,t,n,i,r)),c+=f,e+=p}return o.parser.stop(),s}(t,i,r,a,o,n,e)}));if(e&&l.parse(e),s)return s;throw new fe(2,3,3004)}function Al(e){this.b=De(e),this.a=new Dr(this.b,0)}function kl(e){var t=Tl(e);if(7<t.length)throw new fe(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=Tl(e);e:{for(var r=(i=u(_l)).next();!r.done;r=i.next())if(Ce(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.b.byteLength-e.a.B;else{if(8==t.length&&224&t[1])throw new fe(2,3,3001);i=0;for(var a=(r=u(J(t))).next();!a.done;a=r.next()){var o=(a=a.value).item;i=0==a.Y?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.a.B+t<=e.b.byteLength?t:e.b.byteLength-e.a.B,i=De(e.b,e.a.B,t),e.a.skip(t),new wl(n,i)}function Tl(e){var t=e.a.B,n=e.a.oa();if(0==n)throw new fe(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.a.skip(n-1),xe(e.b,t,n)}Al.prototype.ua=function(){return this.a.ua()};var _l=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function wl(e,t){this.id=e,this.a=t}function Sl(e){if(8<e.a.byteLength)throw new fe(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new fe(2,3,3001);for(var t=0,n=u(Q(e.a.byteLength)),i=n.next();!i.done;i=n.next())t=256*t+(i=e.a.getUint8(i.value));return t}function Cl(e){var t=new Al(e.a);if(179!=(e=kl(t)).id)throw new fe(2,3,3013);if(e=Sl(e),183!=(t=kl(t)).id)throw new fe(2,3,3012);t=new Al(t.a);for(var n=0;t.ua();){var i=kl(t);if(241==i.id){n=Sl(i);break}}return{ff:e,Me:n}}function Rl(e,t){var n=ml(e,t,"Initialization");if(!n)return null;var i=e.F.na,r=n.getAttribute("sourceURL");r&&(i=wt(e.F.na,[r])),r=0;var a=null;return(n=tl(n,"range",rl))&&(r=n.start,a=n.end),new Xi((function(){return i}),r,a)}function Il(e,t){var n=Number(yl(e,Dl,"presentationTimeOffset"))||0,i=yl(e,Dl,"timescale"),r=1;i&&(r=ol(i)||1);var a=n/r||0,o=Rl(e,Dl);!function(e,t){if(Ol(e,t),!Pl(e))throw new fe(2,4,4002)}(e,o);var s=Ue(e);return{hb:function(){var e=ml(s,Dl,"RepresentationIndex"),n=s.F.na;return e&&(e=e.getAttribute("sourceURL"))&&(n=wt(s.F.na,[e])),e=Pl(s),xl(s,t,o,n,e.start,e.end,a)}}}function xl(e,t,n,i,r,a,o){var s,l,u,c,d,h,p,f,g,v,y,m,b,A,k;return O((function(T){var _;if(1==T.a)return s=e.presentationTimeline,l=!e.Na||!e.O.Dd,u=e.O.start,c=e.O.duration,d=e.F.mimeType.split("/")[1],p=null,f=[(h=t)(i,r,a),"webm"==d?h(n.c(),n.b,n.a):null],h=null,E(T,Promise.all(f),2);if(g=T.b,v=g[0],y=g[1]||null,null,b=u-o,A=u,k=c?u+c:1/0,"mp4"==d)var w=El(v,r,i,n,b,A,k);else{if(440786851!=kl(w=new Al(y)).id)throw new fe(2,3,3008);var S=kl(w);if(408125543!=S.id)throw new fe(2,3,3009);for(w=S.a.byteOffset,S=new Al(S.a),_=null;S.ua();){var C=kl(S);if(357149030==C.id){_=C;break}}if(!_)throw new fe(2,3,3010);for(_=new Al(_.a),C=1e6,S=null;_.ua();){var R=kl(_);if(2807729==R.id)C=Sl(R);else if(17545==R.id)if(4==R.a.byteLength)S=R.a.getFloat32(0);else{if(8!=R.a.byteLength)throw new fe(2,3,3003);S=R.a.getFloat64(0)}}if(null==S)throw new fe(2,3,3011);if(S=(_={$e:_=C/1e9,duration:S*_}).$e,_=_.duration,475249515!=(C=kl(new Al(v))).id)throw new fe(2,3,3007);w=function(e,t,n,i,r,a,o,s,l){function u(){return r}var c=[];e=new Al(e.a);for(var d=null,h=null;e.ua();){var p=kl(e);if(187==p.id){var f=Cl(p);f&&(p=n*f.ff,f=t+f.Me,null!=d&&c.push(new Zi(d+o,p+o,u,h,f-1,a,o,s,l)),d=p,h=f)}}return null!=d&&c.push(new Zi(d+o,i+o,u,h,null,a,o,s,l)),c}(C,w,S,_,i,n,b,A,k)}return m=w,s.mb(m),p=new mr(m),l&&p.Ja(A,k),T.return(p)}))}function Dl(e){return e.Lb}function Pl(e){var t=ml(e,Dl,"RepresentationIndex");return e=rl((e=yl(e,Dl,"indexRange"))||""),t&&(e=tl(t,"range",rl,e)),e}function Ol(e,t){var n=e.F.mimeType.split("/")[1];if("text"!=e.F.contentType&&"mp4"!=n&&"webm"!=n)throw new fe(2,4,4006);if("webm"==n&&!t)throw new fe(2,4,4005)}function Ll(e,t){var n=Rl(e,Ml),i=function(e){var t=function(e){return[e.F.Ma,e.aa.Ma,e.ka.Ma].filter(Tt).map((function(e){return Zs(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Bd&&(e.Bd=!0),{Fe:t.getAttribute("media"),start:(t=tl(t,"mediaRange",rl,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=vl(e,Ml)).qb;0==n&&(n=1);var i=0;return e.Z?i=e.Z*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Z:e.Z,startTime:i,qb:n,Ga:e.Ga,timeline:e.timeline,jb:t}}(e);if(!i.Z&&!i.timeline&&1<i.jb.length)throw new fe(2,4,4002);if(!i.Z&&!e.O.duration&&!i.timeline&&1==i.jb.length)throw new fe(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new fe(2,4,4002);var r=null,a=null;return e.ka.id&&e.F.id&&(a=e.ka.id+","+e.F.id,r=t[a]),n=function(e,t,n,i,r){var a=i.jb.length;i.timeline&&i.timeline.length!=i.jb.length&&(a=Math.min(i.timeline.length,i.jb.length));for(var o=e-i.Ga,s=t?e+t:1/0,l=[],c=i.startTime,d={},h=(a=u(Q(a))).next();!h.done;d={vc:d.vc},h=a.next()){h=h.value;var p=i.jb[h];d.vc=wt(n,[p.Fe]);var f=void 0;f=null!=i.Z?c+i.Z:i.timeline?i.timeline[h].end:c+t,l.push(new Zi(e+c,e+f,function(e){return function(){return e.vc}}(d),p.start,p.end,r,o,e,s)),c=f}return l}(e.O.start,e.O.duration,e.F.na,i,n),r?(r.kb(n),r.Oa(e.presentationTimeline.Qa())):(e.presentationTimeline.mb(n),r=new mr(n),a&&e.Na&&(t[a]=r)),e.Na&&e.O.Dd||r.Ja(e.O.start,e.O.duration?e.O.start+e.O.duration:1/0),{hb:function(){return Promise.resolve(r)}}}function Ml(e){return e.Ma}function Nl(e,t,n,i,r){var a=function(e){var t=yl(e,Ul,"initialization");if(!t)return null;var n=e.F.id,i=e.bandwidth||null,r=e.F.na;return new Xi((function(){var e=gl(t,n,null,i,null);return wt(r,[e])}),0,null)}(e),o=function(e){var t=vl(e,Ul),n=yl(e,Ul,"media");return e=yl(e,Ul,"index"),{Z:t.Z,timescale:t.timescale,qb:t.qb,Ga:t.Ga,qd:t.qd,timeline:t.timeline,Tc:n,Gb:e}}(e);!function(e){var t=e.Gb?1:0;if(t+=e.timeline?1:0,0==(t+=e.Z?1:0))throw new fe(2,4,4002);if(1!=t&&(e.Gb&&(e.timeline=null),e.Z=null),!e.Gb&&!e.Tc)throw new fe(2,4,4002)}(o);var s=Ue(e);if(o.Gb)return Ol(e,a),{hb:function(){var e=gl(o.Gb,s.F.id,null,s.bandwidth||null,null);return e=wt(s.F.na,[e]),xl(s,t,a,e,0,null,o.Ga)}};if(o.Z)return i||(e.presentationTimeline.Uc(o.Z),e.presentationTimeline.Vc(e.O.start)),{hb:function(){return function(e,t,n,i){function r(e){var n=(e-h)*d,r=n+t.Ga;return new Zi(n+=s,Math.min(n+d,c),(function(){var t=gl(f,v,e,g,r*p);return wt(y,[t])}),0,null,i,m,s,c)}function a(){var e=[Math.max(o.Qa(),s),Math.min(o.Ka(),c)].map((function(e){return e-s}));return[Math.ceil(e[0]/d),Math.ceil(e[1]/d)-1].map((function(e){return e+h}))}var o=e.presentationTimeline,s=e.O.start,l=e.O.duration,c=l?s+l:1/0,d=t.Z,h=t.qb,p=t.timescale,f=t.Tc,g=e.bandwidth||null,v=e.F.id,y=e.F.na,m=s-t.Ga,b=a();l=b[1];var E=[];for(e=e.Na?Math.max(b[0],b[1]-n+1):b[0];e<=l;++e)n=r(e),E.push(n);var A=new mr(E);if(o.Ka()<c){var k=l+1;A.oc(d,(function(){A.Oa(o.Qa());var e=u(a());e.next(),e=e.next().value;for(var t=[];k<=e;){var n=r(k);t.push(n),k++}return t}))}return Promise.resolve(A)}(s,o,r,a)}};var l=null;i=null,e.ka.id&&e.F.id&&(i=e.ka.id+","+e.F.id,l=n[i]);var c=function(e,t,n){var i=e.O.start,r=e.O.duration,a=i-t.Ga;r=r?i+r:1/0;for(var o=[],s={},l=u(J(t.timeline)),c=l.next();!c.done;s={wc:s.wc,zc:s.zc,tc:s.tc,Ac:s.Ac},c=l.next()){var d=(c=c.value).item,h=d.start,p=d.ef;d=d.end,s.zc=c.Y+t.qb,s.Ac=p+t.qd,s.wc=e.F.id,s.tc=e.bandwidth||null,o.push(new Zi(i+h,i+d,function(n){return function(){var i=gl(t.Tc,n.wc,n.zc,n.tc||null,n.Ac);return wt(e.F.na,[i]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}(s,o,a),d=e.O.start,h=e.O.duration?e.O.start+e.O.duration:1/0,p=1/0!=h;return l?(p&&new mr(c).Ja(d,h),l.kb(c),l.Oa(e.presentationTimeline.Qa())):(e.presentationTimeline.mb(c),l=new mr(c),i&&e.Na&&(n[i]=l)),p&&l.Ja(d,h),{hb:function(){return Promise.resolve(l)}}}function Ul(e){return e.Mb}function Bl(){this.f=[],this.a=[],this.b=[],this.c=[],this.g=new Set}function Fl(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,k,T,_,w,S,C,R,I,x,D,P,L;return O((function(O){switch(O.a){case 1:if(i=Ct,function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).$b),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&Ve(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.$b=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).qc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&Ve(r.roles,s.roles)&&xt(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.qc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&Ve(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),!n&&1==t.length){r=t[0],e.a=r.$b,e.b=r.qc,e.c=r.textStreams,O.u(2);break}for(a=-1,o=u(J(t)),s=o.next();!s.done;s=o.next())l=s.value,c=l.Y,d=l.item,e.g.has(d.id)||(e.g.add(d.id),-1==a&&(a=c));if(-1==a)return O.return();for(h=t.map((function(e){return e.$b})),p=t.map((function(e){return e.qc})),f=t.map((function(e){return e.textStreams})),g=u(f),v=g.next();!v.done;v=g.next())v.value.push({id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new mr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(O,Hl(e.a,h,a,Kl,zl),3);case 3:return E(O,Hl(e.b,p,a,Kl,zl),4);case 4:return E(O,Hl(e.c,f,a,Kl,zl),2);case 2:if(y=0,m=[],e.b.length&&e.a.length)for(S=u(e.a),C=S.next();!C.done;C=S.next())for(R=C.value,I=u(e.b),x=I.next();!x.done;x=I.next())D=x.value,P=hn(R.drmInfos,D.drmInfos),R.drmInfos.length&&D.drmInfos.length&&!P.length||(L=y++,m.push({id:L,language:R.language,primary:R.primary,audio:R,video:D,bandwidth:(R.bandwidth||0)+(D.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0}));else for(b=e.b.concat(e.a),k=u(b),T=k.next();!T.done;T=k.next())_=T.value,w=y++,m.push({id:w,language:_.language,primary:_.primary,audio:_.type==i.eb?_:null,video:_.type==i.Ca?_:null,bandwidth:_.bandwidth||0,drmInfos:_.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});e.f=m,A(O)}}))}function Vl(e){var t,n,i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,k;return O((function(T){switch(T.a){case 1:if(t=Ct,1==e.length)return T.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.eb}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.Ca}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.$}))})),a=u(r),o=a.next();!o.done;o=a.next())o.value.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(T,Hl([],n,0,Gl,Wl),2);case 2:return s=T.b,E(T,Hl([],i,0,Gl,Wl),3);case 3:return l=T.b,E(T,Hl([],r,0,Gl,Wl),4);case 4:if(c=T.b,d=0,l.length&&s.length)for(g=u(s),v=g.next();!v.done;v=g.next())for(y=v.value,m=u(l),b=m.next();!b.done;b=m.next())A=b.value,k=d++,A.variantIds.push(k),y.variantIds.push(k);else for(h=l.concat(s),p=u(h),f=p.next();!f.done;f=p.next())f.value.variantIds=[d++];return T.return(l.concat(s,c))}}))}function Hl(e,t,n,i,r){var a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,k,T,_,w;return O((function(S){switch(S.a){case 1:for(a=Ct,o=[],s=u(J(t)),l=s.next();!l.done;l=s.next())c=l.value,d=c.Y,h=c.item,d>=n?o.push(new Set(h)):o.push(new Set);p=u(e),f=p.next();case 2:if(f.done){S.u(4);break}return E(S,function(e,t,n,i,r){var a;return O((function(o){return 1==o.a?(a=Yl(t,e))?E(o,Promise.all(a.map((function(e){return e.createSegmentIndex()}))),2):o.return(!1):(jl(e,a,n,i,r),o.return(!0))}))}(f.value,t,n,r,o),5);case 5:if(!S.b)throw new fe(2,4,4037);f=p.next(),S.u(2);break;case 4:g=u(o),v=g.next();case 6:if(v.done){S.u(8);break}y=v.value,m=u(y),b=m.next();case 9:if(b.done){v=g.next(),S.u(6);break}return E(S,function(e,t,n,i,r){var a,o;return O((function(s){return 1==s.a?(a=n(e),(o=Yl(t,a))?a.createSegmentIndex?E(s,Promise.all(o.map((function(e){return e.createSegmentIndex()}))),2):s.u(2):s.return(null)):(jl(a,o,0,i,r),s.return(a))}))}(b.value,t,i,r,o),12);case 12:(A=S.b)&&e.push(A),b=m.next(),S.u(9);break;case 8:for(k=u(o),v=k.next();!v.done;v=k.next())for(T=v.value,_={},w=u(T),b=w.next();!b.done;_={cb:_.cb},b=w.next())if(_.cb=b.value,(_.cb.type!=a.$||_.cb.language)&&e.some(function(e){return function(t){return t.mimeType==e.cb.mimeType&&Pt(t.codecs)[0]==Pt(e.cb.codecs)[0]}}(_)))throw new fe(2,4,4037);return S.return(e)}}))}function jl(e,t,n,i,r){for(var a=(t=u(J(t))).next();!a.done;a=t.next()){var o=a.value;if(a=o.Y,o=o.item,a>=n){i(e,o);var s=!0;"audio"==e.type&&0==vi(e.language,o.language)&&(s=!1),s&&r[a].delete(o)}}}function Kl(e){return(e=Object.assign({},e)).originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new Ar,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e}function Gl(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function zl(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),n=hn(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new fe(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}e.segmentIndex.f.push(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Kl(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),zl(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&zl(e.trickModeVideo,t)}function Wl(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,c(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}}function Yl(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){for(var a=t,o={audio:ql,video:ql,text:$l}[a.type],s={audio:Xl,video:Zl,text:Ql}[a.type],l=null,c=(r=u(r.value)).next();!c.done;c=r.next())!o(a,c=c.value)||l&&!s(a,l,c)||(l=c);if(!(a=l))return null;n.push(a)}return n}function ql(e,t){var n;if(!(n=t.mimeType!=e.mimeType||Pt(t.codecs)[0]!=Pt(e.codecs)[0])&&(n=e.drmInfos)){n=e.drmInfos;var i=t.drmInfos;n=!(!n.length||!i.length||0<hn(n,i).length)}return!n}function $l(e,t){return!!e.language&&(!t.language||0!=vi(e.language,t.language)&&t.kind==e.kind)}function Xl(e,t,n){if(e.id==n.id)return!0;var i=vi(e.language,t.language),r=vi(e.language,n.language);return r>i||!(r<i)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):(i=Jl(e.channelsCount,t.channelsCount,n.channelsCount))==tu||i!=iu&&((i=Jl(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==tu||i!=iu&&!(!e.bandwidth||eu(e.bandwidth,t.bandwidth,n.bandwidth)!=tu))))}function Zl(e,t,n){if(e.id==n.id)return!0;var i=Jl(e.width*e.height,t.width*t.height,n.width*n.height);if(i==tu)return!0;if(i==iu)return!1;if(e.frameRate){if((i=Jl(e.frameRate,t.frameRate,n.frameRate))==tu)return!0;if(i==iu)return!1}return!(!e.bandwidth||eu(e.bandwidth,t.bandwidth,n.bandwidth)!=tu)}function Ql(e,t,n){if(e.id==n.id)return!0;var i=vi(e.language,t.language),r=vi(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Jl(e,t,n){if(t==e&&e!=n)return iu;if(n==e&&e!=t)return tu;if(t>e){if(n<=e||n-e<t-e)return tu;if(n-e>t-e)return iu}else{if(n>e)return iu;if(e-n<e-t)return tu;if(e-n>e-t)return iu}return nu}function eu(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?tu:t<e?iu:nu}Bl.prototype.release=function(){for(var e=u(this.a.concat(this.b,this.c)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.a=[],this.b=[],this.c=[],this.f=[]};var tu=1,nu=0,iu=-1;function ru(){var e=this;this.s=this.i=null,this.b=[],this.o=null,this.m=1,this.f={},this.a=new Bl,this.h=0,this.j=new V(5),this.g=new ve((function(){e.Ib()})),this.c=new je}function au(e){var t,n,i,r,a,o,s;return O((function(l){return 1==l.a?(t=We(e.b,e.i.retryParameters),n=e.s.networkingEngine,i=Date.now(),r=n.request(0,t),Ke(e.c,r),E(l,r.promise,2)):3!=l.a?(a=l.b,e.s?(a.uri&&!e.b.includes(a.uri)&&e.b.unshift(a.uri),E(l,function(e,t,n){var i,r,a,o;return O((function(s){if(1==s.a){if(!(i=cl(t,"MPD")))throw new fe(2,4,4001,n);return r=e.i.dash.xlinkFailGracefully,a=bl(i,e.i.retryParameters,r,n,e.s.networkingEngine),Ke(e.c,a),E(s,a.promise,2)}return o=s.b,s.return(function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,T,S,C,R;return O((function(I){switch(I.a){case 1:i=[n],0<(r=Zs(t,"Location").map(el).filter(Tt)).length&&(a=wt(i,r),i=e.b=a),o=Zs(t,"BaseURL").map(el),s=wt(i,o),l=e.i.dash.ignoreMinBufferTime,c=0,l||(c=tl(t,"minBufferTime",il)||0),e.h=tl(t,"minimumUpdatePeriod",il,-1),d=tl(t,"availabilityStartTime",nl),h=tl(t,"timeShiftBufferDepth",il),p=e.i.dash.ignoreSuggestedPresentationDelay,f=null,p||(f=tl(t,"suggestedPresentationDelay",il)),g=tl(t,"maxSegmentDuration",il),v=t.getAttribute("type")||"static",e.o?y=e.o.presentationTimeline:(m=e.i.defaultPresentationDelay||1.5*c,y=new Qi(d,null!=f?f:m,e.i.dash.autoCorrectDrift)),b={Na:"static"!=v,presentationTimeline:y,ka:null,O:null,aa:null,F:null,bandwidth:0,Bd:!1};for(var x=tl(t,"mediaPresentationDuration",il),D=[],P=0,L=Zs(t,"Period"),M=(L=u(J(L))).next();!M.done;M=L.next()){var N=M.value;M=N.item,N=N.next,P=tl(M,"start",il,P);var U=tl(M,"duration",il),B=null;if(N){var F=tl(N,"start",il);null!=F&&(B=F-P)}else null!=x&&(B=x-P);if(null==B&&(B=U),M=ou(e,b,s,{start:P,duration:B,node:M,Dd:null==B||!N}),D.push(M),null==B){P=null;break}P+=B}return T=(A=null!=x?{periods:D,duration:x,vd:!1}:{periods:D,duration:P,vd:!0}).duration,S=A.periods,y.Nb("static"==v),"static"!=v&&A.vd||y.ya(T||1/0),y.S()&&!isNaN(e.i.availabilityWindowOverride)&&(h=e.i.availabilityWindowOverride),null==h&&(h=1/0),y.ld(h),y.Uc(g||1),E(I,Fl(e.a,S,b.Na),2);case 2:if(e.o){e.o.variants=e.a.f,e.o.textStreams=e.a.c,I.u(3);break}if(e.o={presentationTimeline:y,variants:e.a.f,textStreams:e.a.c,offlineSessionIds:[],minBufferTime:c||0},!y.Td()){I.u(3);break}return C=Zs(t,"UTCTiming"),E(I,function(e,t,n){var i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.i.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=u(i),o=a.next();case 2:if(o.done){h.u(4);break}switch(s=o.value,k(h,5),l=s.scheme,c=s.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":W("NTP UTCTiming scheme is not supported");break;default:W("Unrecognized scheme in UTCTiming element",l)}h.u(9);break;case 7:return E(h,cu(e,t,c,"HEAD"),10);case 10:return h.return(h.b);case 8:return E(h,cu(e,t,c,"GET"),11);case 11:return h.return(h.b);case 9:_(h,3);break;case 5:w(h);case 3:o=a.next(),h.u(2);break;case 4:return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,s,C),5);case 5:if(R=I.b,!e.s)return I.return();y.Pd(R);case 3:return e.s.makeTextStreamsForClosedCaptions(e.o),E(I,e.s.filter(e.o),0)}}))}(e,o,n))}))}(e,a.data,a.uri),3)):l.return(0)):(o=Date.now(),s=(o-i)/1e3,H(e.j,1,s),l.return(s))}))}function ou(e,t,n,i){t.ka=uu(i.node,null,n),t.O=i,t.ka.id||(t.ka.id="__shaka_period_"+i.start);for(var r=(n=u(n=Zs(i.node,"EventStream"))).next();!r.done;r=n.next())du(e,i.start,i.duration,r.value);if(n=Zs(i.node,"AdaptationSet").map((function(n){return function(e,t,n){if(t.aa=uu(n,t.ka,null),"image"==t.aa.contentType)return null;var i=!1,r=Zs(n,"Role"),a=r.map((function(e){return e.getAttribute("value")})).filter(Tt),o=void 0,s="text"==t.aa.contentType;s&&(o="subtitle");for(var l=(r=u(r)).next();!l.done;l=r.next()){var d=(l=l.value).getAttribute("schemeIdUri");if(null==d||"urn:mpeg:dash:role:2011"==d)switch(l=l.getAttribute("value"),l){case"main":i=!0;break;case"caption":case"subtitle":o=l}}d=Zs(n,"EssentialProperty"),r=null,l=!1;for(var h=(d=u(d)).next();!h.done;h=d.next())"http://dashif.org/guidelines/trickmode"==(h=h.value).getAttribute("schemeIdUri")?r=h.getAttribute("value"):l=!0;d=Zs(n,"Accessibility");var p=new Map;for(d=u(d),h=d.next();!h.done;h=d.next()){var f=h.value;if(h=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==h||"urn:scte:dash:cc:cea-708:2015"==h)if(h=1,null!=f)for(var g=(f=u(f.split(";"))).next();!g.done;g=f.next()){var v=g.value,y=g=void 0;v.includes("=")?(g=(v=v.split("="))[0].startsWith("CC")?v[0]:"CC"+v[0],y=v[1].split(",")[0].split(":").pop()):(g="CC"+h,h+=2,y=v),p.set(g,gi(y))}else p.set("CC1","und");else"urn:mpeg:dash:role:2011"==h&&null!=f&&(a.push(f),"captions"==f&&(o="caption"))}if(l)return null;var m=dl(l=Zs(n,"ContentProtection"),e.i.dash.ignoreDrmInfo),b=gi(n.getAttribute("lang")||"und"),k=n.getAttribute("label");if((l=Zs(n,"Label"))&&l.length&&((l=l[0]).textContent&&(k=l.textContent)),l=Zs(n,"Representation"),0==(n=l.map((function(n){return function(e,t,n,i,r,a,o,s,l,u){if(t.F=uu(u,t.aa,null),!function(e){var t=e.Lb?1:0;return t+=e.Ma?1:0,0==(t+=e.Mb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Lb&&(e.Ma=null),e.Mb=null),!0)}(t.F))return null;var c=t.O.start;t.bandwidth=tl(u,"bandwidth",ol)||0;var d=t.F.contentType;d="text"==d||"application"==d;try{var h=function(t,n,i){return function(e,t,n,i){var r,a,o,s,l;return O((function(u){return 1==u.a?(r=Xe,a=jr(t,n,i,e.i.retryParameters),o=e.s.networkingEngine,s=o.request(r,a),Ke(e.c,s),E(u,s.promise,2)):(l=u.b,u.return(l.data))}))}(e,t,n,i)};if(t.F.Lb)var p=Il(t,h);else if(t.F.Ma)p=Ll(t,e.f);else if(t.F.Mb)p=Nl(t,h,e.f,!!e.o,e.i.dash.initialSegmentLimit);else{var f=t.F.na,g=t.O.duration||0;p={hb:function(){return Promise.resolve(br(c,g,f))}}}}catch(e){if(d&&4002==e.code)return null;throw e}d=function(e,t,n){var i=dl(e,n);if(t.xd)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.xd=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new fe(2,4,4008);return i.ud||t.ud}(d=Zs(u,"ContentProtection"),n,e.i.dash.ignoreDrmInfo),d=new Set(d?[d]:[]),Zs(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(t.F.mimeType="audio/eac3-joc");var v={id:e.m++,originalId:t.F.id,createSegmentIndex:function(){var e;return O((function(t){if(1==t.a)return v.segmentIndex?t.u(0):(e=v,E(t,p.hb(),3));e.segmentIndex=t.b,A(t)}))},segmentIndex:null,mimeType:t.F.mimeType,codecs:t.F.codecs,frameRate:t.F.frameRate,pixelAspectRatio:t.F.pixelAspectRatio,bandwidth:t.bandwidth,width:t.F.width,height:t.F.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:d,language:r,label:a,type:t.aa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.F.emsgSchemeIdUris,roles:s,channelsCount:t.F.Wc,audioSamplingRate:t.F.audioSamplingRate,closedCaptions:l};return v}(e,t,m,o,b,k,i,a,p,n)})).filter((function(e){return!!e}))).length){if(e.i.dash.ignoreEmptyAdaptationSet||s)return null;throw new fe(2,4,4003)}if(!t.aa.contentType||"application"==t.aa.contentType)for(t.aa.contentType=hu(n[0].mimeType,n[0].codecs),s=u(n),d=s.next();!d.done;d=s.next())d.value.type=t.aa.contentType;for(s=u(n),d=s.next();!d.done;d=s.next())for(d=d.value,h=u(m.drmInfos),f=h.next();!f.done;f=h.next())(f=f.value).keyIds=f.keyIds&&d.keyIds?new Set(c(f.keyIds).concat(c(d.keyIds))):f.keyIds||d.keyIds;return s=l.map((function(e){return e.getAttribute("id")})).filter(Tt),{id:t.aa.id||"__fake__"+e.m++,contentType:t.aa.contentType,language:b,If:i,streams:n,drmInfos:m.drmInfos,od:r,Pe:s}}(e,t,n)})).filter(Tt),t.Na){i=[];for(var a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(a.value.Pe)).next();!o.done;o=a.next())i.push(o.value);if(i.length!=new Set(i).size)throw new fe(2,4,4018)}for(i=n.filter((function(e){return!e.od})),r=(n=u(n=n.filter((function(e){return e.od})))).next();!r.done;r=n.next()){r=(a=r.value).streams[0],a=a.od;for(var s=(o=u(i)).next();!s.done;s=o.next())if((s=s.value).id==a)for(var l=(s=u(s.streams)).next();!l.done;l=s.next())l.value.trickModeVideo=r}if(r=e.i.disableAudio?[]:su(i,"audio"),a=e.i.disableVideo?[]:su(i,"video"),n=e.i.disableText?[]:su(i,"text"),!a.length&&!r.length)throw new fe(2,4,4004);for(i=[],o=(r=u(r)).next();!o.done;o=r.next())i.push.apply(i,c(o.value.streams));for(r=[],o=(a=u(a)).next();!o.done;o=a.next())r.push.apply(r,c(o.value.streams));for(a=[],o=(n=u(n)).next();!o.done;o=n.next())a.push.apply(a,c(o.value.streams));return{id:t.ka.id,$b:i,qc:r,textStreams:a}}function su(e,t){return e.filter((function(e){return e.contentType==t}))}function lu(e,t){0>e.h||e.g.R(Math.max(3,e.h-t,j(e.j)))}function uu(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Wc:null,audioSamplingRate:null},n=n||t.na;for(var i=Zs(e,"BaseURL").map(el),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,s=tl(e,"frameRate",ll)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=Zs(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(c=u(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);return c=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16)){for(e=0;t;)1&t&&++e,t>>=1;return e}}}return null}(c=Zs(e,"AudioChannelConfiguration"))||t.Wc,h=tl(e,"audioSamplingRate",sl)||t.audioSamplingRate,r||(r=hu(a,o)),{na:wt(n,i),Lb:$s(e,"SegmentBase")||t.Lb,Ma:$s(e,"SegmentList")||t.Ma,Mb:$s(e,"SegmentTemplate")||t.Mb,width:tl(e,"width",sl)||t.width,height:tl(e,"height",sl)||t.height,contentType:r,mimeType:a,codecs:o,frameRate:s,pixelAspectRatio:l,emsgSchemeIdUris:d,id:e.getAttribute("id"),Wc:c,audioSamplingRate:h}}function cu(e,t,n,i){var r,a,o,s,l,u;return O((function(c){if(1==c.a)return r=wt(t,[n]),(a=We(r,e.i.retryParameters)).method=i,o=e.s.networkingEngine.request(4,a),Ke(e.c,o),E(c,o.promise,2);if(s=c.b,"HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);l=s.headers.date}else l=ot(s.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function du(e,t,n,i){for(var r=i.getAttribute("schemeIdUri")||"",a=i.getAttribute("value")||"",o=tl(i,"timescale",sl)||1,s=(i=u(Zs(i,"Event"))).next();!s.done;s=i.next()){var l=tl(s=s.value,"presentationTime",sl)||0,c=tl(s,"duration",sl)||0;c=(l=l/o+t)+c/o,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),s={schemeIdUri:r,value:a,startTime:l,endTime:c,id:s.getAttribute("id")||"",eventElement:s},e.s.onTimelineRegionAdded(s)}}function hu(e,t){return Yn(Dt(e,t))?"text":e.split("/")[0]}function pu(e,t,n,i){this.a=e,this.type=t,this.V=n,this.segments=i||null}function fu(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function gu(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function vu(e,t){var n=e.getAttribute(t);if(!n)throw new fe(2,4,4023,t);return n.value}function yu(e,t){this.V=t,this.a=e}function mu(e,t){this.name=e,this.value=t}function bu(e,t){return e.filter((function(e){return e.name==t}))}function Eu(e,t){return e.filter((function(e){return vu(e,"TYPE")==t}))}function Au(e,t){var n=bu(e,t);return n.length?n[0]:null}function ku(e,t,n){return n=void 0===n?0:n,(e=Au(e,t))?Number(e.value):n}function Tu(e){this.b=e,this.a=0}function _u(e){wu(e,/[ \t]+/gm)}function wu(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.results)}function Su(e){return e.a==e.b.length?null:(e=wu(e,/[^ \t\n]*/gm))?e[0]:null}function Cu(){this.a=0}function Ru(e,t,n){var i=(t=(t=ot(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new fe(2,4,4015);t=0;for(var r=!0,a=u(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Iu(e.a++,o),--e.a,xu.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}a=[],r=!0;for(var s=(o=u(J(i))).next();!s.done;s=o.next()){var l=s.value;s=l.Y;var c=l.item;if(l=l.next,/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=Iu(e.a++,c),Du.includes(c.name)){if(1!=t)throw new fe(2,4,4017);for(c=i.splice(s,i.length-s),i=n,r=[],o=[],s=null,l=(c=u(c)).next();!l.done;l=c.next())l=l.value,/^(#EXT)/.test(l)?(l=Iu(e.a++,l),xu.includes(l.name)?a.push(l):"EXT-X-MAP"==l.name?s=l:o.push(l)):/^#(?!EXT)/m.test(l)||(l=wt([i],[l.trim()])[0],s&&o.push(s),r.push(new yu(l,o)),o=[]);return new pu(n,t,a,r)}a.push(c),"EXT-X-STREAM-INF"==c.name&&(c.a.push(new mu("URI",l)),r=!0)}}return new pu(n,t,a)}function Iu(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new fe(2,4,4016,t);var i,r=n[1],a=n[2];if(n=[],a){var o;(o=wu(a=new Tu(a),/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=wu(a,s);)n.push(new mu(o[1],o[2]||o[3]))}return new fu(e,r,n,i)}(i=ru.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i=this;return O((function(r){if(1==r.a)return i.b=[e],i.s=t,E(r,au(i),2);if(n=r.b,i.s&&lu(i,n),!i.s)throw new fe(2,7,7001);return r.return(i.o)}))},i.stop=function(){for(var e=u(Object.values(this.f)),t=e.next();!t.done;t=e.next())t.value.release();return this.a&&this.a.release(),this.i=this.s=null,this.b=[],this.o=null,this.f={},this.a=null,null!=this.g&&(this.g.stop(),this.g=null),this.c.destroy()},i.update=function(){var e,t=this;return O((function(n){return 1==n.a?(k(n,2),E(n,au(t),4)):2!=n.a?_(n,0):(e=w(n),t.s&&e?(t.s.onError(e),void A(n)):n.return())}))},i.onExpirationUpdated=function(){},i.Ib=function(){var e,t,n=this;return O((function(i){switch(i.a){case 1:return e=0,k(i,2),E(i,au(n),4);case 4:e=i.b,_(i,3);break;case 2:t=w(i),n.s&&(t.severity=1,n.s.onError(t));case 3:if(!n.s)return i.return();lu(n,e),A(i)}}))},F("shaka.dash.DashParser",ru),$i.mpd=function(){return new ru},qi["application/dash+xml"]=function(){return new ru},qi["video/vnd.mpeg.dash.mpd"]=function(){return new ru},fu.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},fu.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var xu="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Du="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Pu(){}function Ou(e){try{var t=Lu(e);return Te({uri:e,Jd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Ae(e)}}function Lu(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new fe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new fe(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?Wt(t):ut(t),contentType:i}}function Mu(){var e=this;this.i=this.s=null,this.Ba=1,this.j=new Map,this.g=new Map,this.ra=new Set,this.a=new Map,this.b=null,this.I="",this.G=new Cu,this.ca=0,this.h=new ve((function(){e.Ib()})),this.c=rc,this.o=null,this.M=0,this.T=1/0,this.m=new je,this.W=[],this.w=new Map,this.Aa=!1,this.f=new Map,this.C=null,this.H=new Map,this.v=new Map}function Nu(e,t){var n,i,r,a,o,s,l,u,c;return O((function(d){if(1==d.a)return n=sc,i=t.Yd,E(d,Ju(e,We([i],e.i.retryParameters),0),2);if(3!=d.a){if(r=d.b,1!=(a=Ru(e.G,r.data,r.uri)).type)throw new fe(2,4,4017);return o=bu(a.V,"EXT-X-DEFINE"),s=Uu(e,o),l=t.stream,E(d,zu(e,t.pc,a,l.mimeType,t.Ed,s),3)}u=d.b,l.segmentIndex.kb(u),u.length&&l.segmentIndex.Oa(u[0].startTime),c=u[u.length-1],Au(a.V,"EXT-X-ENDLIST")&&(Qu(e,n.Wd),e.b.ya(c.endTime)),A(d)}))}function Uu(e,t){for(var n=new Map,i=u(t),r=i.next();!r.done;r=i.next()){var a=r.value;r=gu(a,"NAME");var o=gu(a,"VALUE");a=gu(a,"IMPORT"),r&&o&&n.set(r,o),a&&(r=e.j.get(a))&&n.set(a,r)}return n}function Bu(e,t){var n=[];e.i.disableVideo||n.push("avc1.42E01E"),e.i.disableAudio||n.push("mp4a.40.2");var i=gu(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var r=[],a=(i=u(i)).next();!a.done;a=i.next()){var o=Pt(a=a.value)[0];n.has(o)||(r.push(a),n.add(o))}return r}function Fu(e){return gi(e=gu(e,"LANGUAGE")||"und")}function Vu(e,t){var n,i,r,a,o,s,l,u,c,d,h;return O((function(p){if(1==p.a){n=vu(t,"GROUP-ID"),i="";var f=vu(t,"TYPE").toLowerCase();return"subtitles"==f&&(f="text"),"text"!=(r=f)&&n&&e.f.has(n)&&(i=e.f.get(n)),a=Xu(vu(t,"URI"),e.j),e.a.has(a)?p.return(e.a.get(a)):(o=Fu(t),s=gu(t,"NAME"),l=t.getAttribute("DEFAULT"),u="YES"==l,f="audio"==r&&(f=gu(t,"CHANNELS"))?parseInt(f.split("/")[0],10):null,c=f,d=gu(t,"CHARACTERISTICS"),E(p,Hu(e,a,i,r,o,u,s,c,null,d),2))}return h=p.b,e.g.has(n)?e.g.get(n).push(h):e.g.set(n,[h]),null==h?p.return(null):e.a.has(a)?p.return(e.a.get(a)):(e.a.set(a,h),p.return(h))}))}function Hu(e,t,n,i,r,a,o,s,l,d){var h,p,f,g,v,y,m,b,A,T,S,C,R,I,x,D,P,L,M,N,U,B,F,V,H,j,K,G,z,Y,q,$,X;return O((function(Z){switch(Z.a){case 1:return h=wt([e.I],[t])[0],E(Z,Ju(e,We([h],e.i.retryParameters),0),2);case 2:if(p=Z.b,h=p.uri,1!=(f=Ru(e.G,p.data,h)).type)throw new fe(2,4,4017);if(g=[],f.segments)for(v=u(f.segments),y=v.next();!y.done;y=v.next())m=y.value,b=bu(m.V,"EXT-X-KEY"),g.push.apply(g,c(b));for(A=!1,T=[],S=new Set,C=u(g),R=C.next();!R.done;R=C.next())if(I=R.value,"NONE"!=(x=vu(I,"METHOD"))){if(A=!0,"AES-128"==x)return e.Aa=!0,Z.return(null);if(D=vu(I,"KEYFORMAT"),L=(P=ic[D])?P(I):null){if(L.keyIds)for(M=u(L.keyIds),N=M.next();!N.done;N=M.next())U=N.value,S.add(U);T.push(L)}}if(A&&!T.length)throw new fe(2,4,4026);return B=bu(f.V,"EXT-X-DEFINE"),F=Uu(e,B),function(e,t){var n=Au(t.V,"EXT-X-PLAYLIST-TYPE"),i=Au(t.V,"EXT-X-ENDLIST");i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i?Qu(e,rc):(Qu(e,n?oc:ac),i=Zu(t.V,"EXT-X-TARGETDURATION"),i=Number(i.value),e.M=Math.max(i,e.M),e.T=Math.min(i,e.T))}(e,f),E(Z,function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f;return O((function(g){if(1==g.a)return a=Ct,o=Xe,s=Xu(i.segments[0].a,r),l=new te(s),u=l.ja.split(".").pop(),c=nc[t],(d=c[u])?g.return(d):t==a.$?n&&"vtt"!=n&&"wvtt"!=n?g.return("application/mp4"):g.return("text/vtt"):((h=We([s],e.i.retryParameters)).method="HEAD",E(g,Ju(e,h,o),2));if(p=g.b,!(f=p.headers["content-type"]))throw new fe(2,4,4021,u);return g.return(f.split(";")[0])}))}(e,i,n,f,F),3);case 3:return V=Z.b,tc.includes(V)&&(n=""),H=new Map,k(Z,4),E(Z,zu(e,t,f,V,H,F),6);case 6:j=Z.b,_(Z,5);break;case 4:if(4035==(K=w(Z)).code)return W("Skipping unsupported HLS stream",V,t),Z.return(null);throw K;case 5:return G=j[0].startTime,z=j[j.length-1].endTime,Y=new mr(j),q="text"==i?"subtitle":void 0,$=[],d&&$.push(d),X={id:e.Ba++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Y,mimeType:V,codecs:n,kind:q,encrypted:A,drmInfos:T,keyIds:S,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:$,channelsCount:s,audioSamplingRate:null,closedCaptions:l},Z.return({stream:X,pc:t,Yd:h,Fd:G,Ee:z,Ed:H})}}))}function ju(e,t,n,i){return(n=Au(n,"EXT-X-MAP"))?(t=[i=Xu(wt([t],[vu(n,"URI")])[0],i),gu(n,"BYTERANGE","")].join("-"),e.H.has(t)||(n=function(e,t){var n=0,i=null,r=gu(t,"BYTERANGE");return r&&(n=r.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1),new Xi((function(){return[e]}),n,i)}(i,n),e.H.set(t,n)),e.H.get(t)):null}function Ku(e,t,n,i,r,a){var o=n.V,s=Xu(n.a,a);n=Zu(o,"EXTINF").value.split(","),n=i+Number(n[0]),a=0;var l=null;return(o=Au(o,"EXT-X-BYTERANGE"))&&(a=o.value.split("@"),o=Number(a[0]),l=(a=a[1]?Number(a[1]):t.a+1)+o-1),new Zi(i,n,(function(){return[s]}),a,l,e,r,0,1/0)}function Gu(e){if(e.b){for(var t=u(e.W),n=t.next();!n.done;n=t.next())e.b.mb(n.value);e.W=[]}}function zu(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,v,y,m,b,A,k,T,_;return O((function(w){switch(w.a){case 1:if(o=n.segments,l=ku(n.V,"EXT-X-MEDIA-SEQUENCE",0),e.c!=rc&&r.has(l)){c=r.get(l),w.u(2);break}if(null!=e.C){w.u(3);break}return s=ju(e,n.a,o[0].V,a),d=e,E(w,Yu(e,t,s,i,l,!1,o[0],a),4);case 4:d.C=w.b;case 3:c=e.C;case 2:o[0].a.split("/").pop(),h=ku(n.V,"EXT-X-DISCONTINUITY-SEQUENCE"),p=e.v.get(h)||0,f=[],g=u(function(e){return J(e)}(o)),v=g.next();case 5:if(v.done){w.u(7);break}if(y=v.value,m=y.Y,b=y.item,A=f[f.length-1],k=0==m?c:A.endTime,T=l+m,r.set(T,k),s=ju(e,n.a,b.V,a),!Au(b.V,"EXT-X-DISCONTINUITY")){w.u(8);break}return h++,E(w,function(e,t,n,i,r,a,o,s,l){var u,c;return O((function(d){return 1==d.a?(u=0,e.v.has(t)?(u=e.v.get(t),d.u(2)):E(d,Yu(e,n,i,r,a,!0,o,s),3)):(2!=d.a&&(c=d.b,u=l-c,e.v.set(t,u)),d.return(u))}))}(e,h,t,s,i,T,b,a,k),9);case 9:p=w.b;case 8:_=Ku(s,A,b,k,p,a),f.push(_),v=g.next(),w.u(5);break;case 7:return e.W.push(f),Gu(e),w.return(f)}}))}function Wu(e,t){var n,i,r,a,o,s;return O((function(l){switch(l.a){case 1:return n=Xe,i=jr(t.c(),t.b,t.a,e.i.retryParameters),e.i.hls.useFullSegmentsForStartTime?l.return(Ju(e,i,n)):(r=jr(t.c(),t.b,t.b+2048-1,e.i.retryParameters),k(l,2),E(l,Ju(e,r,n),4));case 4:return a=l.b,l.return(a);case 2:if(7001==(o=w(l)).code)throw o;return W("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),E(l,Ju(e,i,n),5);case 5:return s=l.b,l.return(s)}}))}function Yu(e,t,n,i,r,a,o,s){var l,u,c,d,h,p,f,g;return O((function(v){switch(v.a){case 1:if(l=Ku(n,null,o,0,0,s),e.o&&!a&&(u=e.a.get(t),null!=(c=u.Ed.get(r))))return v.return(c);if(i=i.toLowerCase(),tc.includes(i))throw W("Raw formats are not yet supported.  Skipping "+i),new fe(1,4,4035);if("video/webm"==i)throw W("WebM in HLS is not yet supported.  Skipping."),new fe(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){v.u(2);break}return d=[Wu(e,l)],n&&d.push(Wu(e,n)),E(v,Promise.all(d),3);case 3:return h=v.b,p=h[0],f=h[1]||h[0],v.return(function(e,t,n,i){var r=0;if((new Lr).L("moov",Mr).L("trak",Mr).L("mdia",Mr).ea("mdhd",(function(e){e.reader.skip(0==e.version?8:16),r=e.reader.J(),e.parser.stop()})).parse(i,!0),!r)throw new fe(2,4,4030,e,t);var a=0,o=!1;if((new Lr).L("moof",Mr).L("traf",Mr).ea("tfdt",(function(e){a=(0==e.version?e.reader.J():e.reader.pb())/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new fe(2,4,4030,e,t);return a}(t,p.uri,p.data,f.data));case 2:if("video/mp2t"!=i){v.u(4);break}return E(v,Wu(e,l),5);case 5:return g=v.b,v.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.oa())&&(a.seek(o+192),s=a.oa()),71!=s&&(a.seek(o+204),s=a.oa()),71!=s&&r(),a.Md(1)}function r(){throw new fe(2,4,4030,e,t)}for(var a=new Dr(n,0),o=0,s=0;;)if(o=a.B,71!=(s=a.oa())&&r(),8191==(8191&(n=a.Kb())))i();else if(16384&n){if(0!=(n=(48&a.oa())>>4)&&2!=n||r(),3==n&&(n=a.oa(),a.skip(n)),1==a.J()>>8)return a.skip(3),0!=(n=a.oa()>>6)&&1!=n||r(),0==a.oa()&&r(),(1073741824*((14&(n=a.oa()))>>1)+((65534&a.Kb())<<14|(65534&a.Kb())>>1))/9e4;i()}else i()}(t,g.uri,g.data));case 4:throw new fe(2,4,4030,t)}}))}function qu(e,t){if(1==t.length)return t[0];var n=$u(e,t);if(null!=n)return n;throw new fe(2,4,4025,t)}function $u(e,t){for(var n=u(ec[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return"text"==e?"":null}function Xu(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=u(i)).next();!r.done;r=i.next()){var a=(r=r.value).slice(2,r.length-1),o=t.get(a);if(!o)throw new fe(2,4,4039,a);n=n.replace(r,o)}return n}function Zu(e,t){var n=Au(e,t);if(!n)throw new fe(2,4,4024,t);return n}function Qu(e,t){e.c=t,e.b&&e.b.Nb(e.c==rc),e.c!=rc||e.h.stop()}function Ju(e,t,n){if(!e.m)throw new fe(2,7,7001);return t=e.s.networkingEngine.request(n,t),Ke(e.m,t),t.promise}F("shaka.net.DataUriPlugin",Pu),Pu.parse=Ou,ze("data",Ou),(i=Mu.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i,r=this;return O((function(a){return 1==a.a?(r.s=t,E(a,Ju(r,We([e],r.i.retryParameters),0),2)):3!=a.a?(n=a.b,r.I=n.uri,E(a,function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:if(0!=(n=Ru(e.G,t,e.I)).type)throw new fe(2,4,4022);for(var m=u(bu(n.V,"EXT-X-DEFINE")),b=m.next();!b.done;b=m.next()){var A=b.value;b=gu(A,"NAME"),A=gu(A,"VALUE"),b&&A&&(e.j.has(b)||e.j.set(b,A))}for(i=bu(n.V,"EXT-X-MEDIA"),b=(m=u(r=bu(n.V,"EXT-X-STREAM-INF"))).next();!b.done;b=m.next()){var T=b.value;A=gu(T,"AUDIO"),b=gu(T,"VIDEO");var _=gu(T,"SUBTITLES");if(T=Bu(e,T),_){var S=$u("text",T);e.f.set(_,S),Fe(T,S)}A&&(_=qu("audio",T),e.f.set(A,_)),b&&(A=qu("video",T),e.f.set(b,A))}return E(y,function(e,t){var n;return O((function(i){return 1==i.a?(t=t.filter((function(e){var t=gu(e,"URI")||"";return"SUBTITLES"!=gu(e,"TYPE")&&""!=t}))).length?E(i,Vu(e,t[0]),2):i.u(2):(n=t.slice(1).map((function(t){return Vu(e,t)})),E(i,Promise.all(n),0))}))}(e,i),2);case 2:for(b=(m=u(m=Eu(i,"CLOSED-CAPTIONS"))).next();!b.done;b=m.next())b=Fu(_=b.value),A=vu(_,"GROUP-ID"),_=vu(_,"INSTREAM-ID"),e.w.get(A)||e.w.set(A,new Map),e.w.get(A).set(_,b);return E(y,function(e,t){var n,i,r;return O((function(a){return 1==a.a?(n=t.map((function(t){var n,i,r,a,o,s,l;return O((function(c){return 1==c.a?(n=gu(t,"FRAME-RATE"),i=Number(vu(t,"BANDWIDTH")),r=gu(t,"RESOLUTION"),a=u(r?r.split("x"):[null,null]),o=a.next().value,s=a.next().value,E(c,function(e,t,n,i){var r,a,o,s,l,c,d,h,p,f,g,v,y,m;return O((function(b){if(1==b.a)return r=Ct,a=Bu(e,t),o=gu(t,"AUDIO"),s=gu(t,"VIDEO"),c=(l=o||s)&&e.g.has(l)?e.g.get(l):[],d={audio:o?c:[],video:s?c:[]},p=!1,f=vu(t,"URI"),g=d.audio.find((function(e){return e&&e.pc==f})),v=$u(r.Ca,a),y=n||i||v,1!=a.length||y?!c.length&&1<a.length?(h=r.Ca,a=[a.join(",")]):d.audio.length&&g?(h=r.eb,p=!0):h=d.video.length?r.eb:r.Ca:h=r.eb,p?b.u(2):E(b,function(e,t,n,i){var r,a,o,s;return O((function(l){if(1==l.a){if(r=Xu(vu(t,"URI"),e.j),e.a.has(r))return l.return(e.a.get(r));var u=gu(t,"CLOSED-CAPTIONS");return a="video"==i&&u&&"NONE"!=u?e.w.get(u):null,o=qu(i,n),E(l,Hu(e,r,o,i,"und",!1,null,null,a,null),2)}return null==(s=l.b)?l.return(null):e.a.has(r)?l.return(e.a.get(r)):(e.a.set(r,s),l.return(s))}))}(e,t,a,h),3);if(2!=b.a&&(m=b.b),m)d[m.stream.type]=[m];else if(null===m)return b.return(null);return function(e){for(var t=(e=u(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}(d),b.return(d)}))}(e,t,r,n),2)):(l=c.b)?c.return(function(e,t,n,i,r,a,o){for(var s=u(n),l=s.next();!l.done;l=s.next()){var c=a,d=o;(l=l.value.stream)&&(l.width=Number(r)||void 0,l.height=Number(c)||void 0,l.frameRate=Number(d)||void 0)}r=e.i.disableAudio,(!t.length||r)&&(t=[null]);r=e.i.disableVideo,(!n.length||r)&&(n=[null]);for(r=[],t=u(t),a=t.next();!a.done;a=t.next())for(a=a.value,o=u(n),s=o.next();!s.done;s=o.next()){var h=s.value;s=a?a.stream:null,l=h?h.stream:null,c=a?a.stream.drmInfos:null,d=h?h.stream.drmInfos:null,h=(h?h.pc:"")+" - "+(a?a.pc:""),s&&l&&c.length&&d.length&&!(0<hn(c,d).length)||e.ra.has(h)||(s={id:e.Ba++,language:s?s.language:"und",primary:!!s&&s.primary||!!l&&l.primary,audio:s,video:l,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0},r.push(s),e.ra.add(h))}return r}(e,l.audio,l.video,i,o,s,n)):c.return([])}))})),E(a,Promise.all(n),2)):(i=a.b,r=(r=i.reduce(At,[])).filter((function(e){return null!=e})),a.return(r))}))}(e,r),3);case 3:return a=y.b,E(y,function(e,t){var n,i,r,a,o,s,l,c,d,h,p;return O((function(f){if(1==f.a)return n=Eu(t,"SUBTITLES"),i=n.map((function(t){var n,i;return O((function(r){if(1==r.a)return e.i.disableText?r.return(null):(k(r,2),E(r,Vu(e,t),4));if(2!=r.a)return n=r.b,r.return(n.stream);if(i=w(r),e.i.hls.ignoreTextStreamFailures)return r.return(null);throw i}))})),E(f,Promise.all(i),2);for(r=f.b,a=u(n),o=a.next();!o.done;o=a.next())if(s=o.value,l=vu(s,"GROUP-ID"),(c=e.f.get(l))&&(d=e.g.get(l)))for(h=u(d),p=h.next();!p.done;p=h.next())p.value.stream.codecs=c;return f.return(r.filter((function(e){return e})))}))}(e,i),4);case 4:if(o=y.b,!e.s)throw new fe(2,7,7001);if(e.Aa&&0==a.length)throw new fe(2,4,4034);for(l=s=1/0,c=u(e.a.values()),d=c.next();!d.done;d=c.next())h=d.value,s=Math.min(s,h.Fd),"text"!=h.stream.type&&(l=Math.min(l,h.Ee-h.Fd));if(e.c!=rc?(e.b=new Qi(0,e.i.defaultPresentationDelay||3*e.M),e.b.Nb(!1)):(e.b=new Qi(null,0),e.b.Nb(!0)),Gu(e),e.c!=rc)e.ca=e.T,p=sc,e.c==p.Vd&&(f=e.b.mc,isNaN(e.i.availabilityWindowOverride)||(f=e.i.availabilityWindowOverride),e.b.ld(f));else for(e.b.ya(l),e.b.offset(-s),g=u(e.a.values()),d=g.next();!d.done;d=g.next())(v=d.value).stream.segmentIndex.offset(-s),v.stream.segmentIndex.Ja(0,l);return e.o={presentationTimeline:e.b,variants:a,textStreams:o,offlineSessionIds:[],minBufferTime:0},e.s.makeTextStreamsForClosedCaptions(e.o),E(y,e.s.filter(e.o),0)}}))}(r,n.data),3)):(0<(i=r.ca)&&r.h.R(i),a.return(r.o))}))},i.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.m&&(e.push(this.m.destroy()),this.m=null),this.i=this.s=null,this.ra.clear(),this.o=null,this.a.clear(),this.g.clear(),this.f.clear(),this.j.clear(),Promise.all(e)},i.update=function(){var e,t,n,i=this;return O((function(r){if(1==r.a)return i.c==rc?r.return():(e=[],i.C=null,(t=Array.from(i.a.values())).length?E(r,Nu(i,t[0]),2):r.u(2));for(n=1;n<t.length;n++)e.push(Nu(i,t[n]));return E(r,Promise.all(e),0)}))},i.onExpirationUpdated=function(){},i.Ib=function(){var e,t,n=this;return O((function(i){return 1==i.a?n.s?(k(i,2),E(i,n.update(),4)):i.return():2!=i.a?(e=n.ca,n.h.R(e),_(i,0)):(t=w(i),n.s?(t.severity=1,n.s.onError(t),n.h.R(.1),void A(i)):i.return())}))},F("shaka.hls.HlsParser",Mu);var ec={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},tc=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],nc={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},ic={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=vu(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=St("com.widevine.alpha",[{initDataType:"cenc",initData:t=xe((t=Lu(t=vu(e,"URI"))).data)}]),(e=gu(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null}},rc="VOD",ac="EVENT",oc="LIVE",sc={Wd:rc,mf:ac,Vd:oc};function lc(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Jd:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=lt(t)}catch(e){}throw new fe(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function uc(){}function cc(e,t,n,i){var r=new gc;Rt(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new pc,o={sd:!1,Sd:!1};if(e=new Ee(e=function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:return a=hc,o=fc,c=u=0,d=Date.now(),k(y,2),E(y,a(e,n),4);case 4:return s=y.b,h=s.clone().body.getReader(),f=(p=s.headers.get("Content-Length"))?parseInt(p,10):0,new o({start:function(e){function t(){var n,i;return O((function(a){switch(a.a){case 1:return k(a,2),E(a,h.read(),4);case 4:n=a.b,_(a,3);break;case 2:return w(a),a.return();case 3:n.done||(u+=n.value.byteLength),(100<(i=Date.now())-d||n.done)&&(r(i-d,u-c,f-u),c=u,d=i),n.done?e.close():(e.enqueue(n.value),t()),A(a)}}))}t()}}),E(y,s.arrayBuffer(),5);case 5:l=y.b,_(y,3);break;case 2:if(g=w(y),i.sd)throw new fe(1,1,7001,e,t);if(i.Sd)throw new fe(1,1,1003,e,t);throw new fe(1,1,1002,e,g,t);case 3:return v={},s.headers.forEach((function(e,t){v[t.trim()]=e})),y.return(lc(v,l,s.status,e,s.url,t))}}))}(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.sd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new ve((function(){o.Sd=!0,a.abort()}));s.R(t/1e3),e.finally((function(){s.stop()}))}return e}function dc(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}$i.m3u8=function(){return new Mu},qi["application/x-mpegurl"]=function(){return new Mu},qi["application/vnd.apple.mpegurl"]=function(){return new Mu},F("shaka.net.HttpFetchPlugin",uc),uc.isSupported=dc,uc.parse=cc;var hc=e.fetch,pc=e.AbortController,fc=e.ReadableStream,gc=e.Headers;function vc(){}function yc(e,t,n,i){var r=new mc,a=Date.now(),o=0;return new Ee(new Promise((function(s,l){for(var c in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){l(new fe(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=u(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=lc(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){l(e)}},r.onerror=function(t){l(new fe(1,1,1002,e,t,n))},r.ontimeout=function(){l(new fe(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(c.toLowerCase(),t.headers[c]);r.send(t.body)})),(function(){return r.abort(),Promise.resolve()}))}dc()&&(ze("http",cc,2),ze("https",cc,2)),F("shaka.net.HttpXHRPlugin",vc),vc.parse=yc;var mc=e.XMLHttpRequest;function bc(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ec(e){var t=this;this.N=e,this.a=new Map,this.D=new Je((function(){var e=Array.from(t.a.values());return Promise.all(e.map((function(e){return e.catch((function(){}))})))})),this.b=[],this.Id=function(){},this.Hd=function(){},this.Bb=new bc}function Ac(e){var t=e.b.map((function(e){return e()}));return e.b=[],Promise.all(t)}function kc(e,t,n,i,r,a){et(e.D);var o=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.Bb,i);return i=(e.a.get(t)||Promise.resolve()).then((function(){var t,i,s,l,u,c,d;return O((function(h){if(1==h.a)return E(h,function(e,t){var n,i,r,a;return O((function(o){return 1==o.a?(n=Xe,i=e.N.request(n,t),r=function(){return i.abort()},e.b.push(r),E(o,i.promise,2)):(a=o.b,Fe(e.b,r),o.return(a.data))}))}(e,n),2);if(t=h.b,e.D.a)throw new fe(2,9,7001);if(r)for(l in i=xe(t),(s=new qs(i)).data)u=Number(l),c=s.data[u],d=s.a[u],e.Hd(c,d);e.Bb.close(o,t.byteLength);var p=e.Bb;return e.Id(0==p.b?0:p.f/p.b,e.Bb.a),h.return(a(t))}))})),e.a.set(t,i),i}function Tc(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new be,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function _c(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(){var e;return O((function(i){if(1==i.a)return null==r.result?(n(),i.return()):(e=r.result,E(i,t(e.key,e.value,e),2));e.continue(),A(i)}))}}))}function wc(e){this.b=e,this.a=[]}function Sc(e,t){return Cc(e,t,"readwrite")}function Cc(e,t,n){var i=new Tc(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){Fe(e.a,i)}),(function(){Fe(e.a,i)})),i}function Rc(e,t,n){this.b=new wc(e),this.c=t,this.a=n}function Ic(e){return Promise.reject(new fe(2,9,9011,"Cannot add new value to "+e))}function xc(e,t,n,i){t=(e=Sc(e.b,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Sb:r.Sb},a=n.next())r.Sb=a.value,t.delete(r.Sb).onsuccess=function(e){return function(){return i(e.Sb)}}(r);return e.promise()}function Dc(e,t,n){var i,r,a,o,s,l,c;return O((function(d){if(1==d.a){for(i=Cc(e.b,t,"readonly"),r=i.store(),a={},o=[],s={},l=u(n),c=l.next();!c.done;s={vb:s.vb,tb:s.tb},c=l.next())s.tb=c.value,s.vb=r.get(s.tb),s.vb.onsuccess=function(e){return function(){null==e.vb.result&&o.push(e.tb),a[e.tb]=e.vb.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new fe(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function Pc(e){this.a=new wc(e)}function Oc(){this.a=new Map}function Lc(e,t,n){if(!(e=e.a.get(t)))throw new fe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new fe(2,9,9013,"Could not find cell with name "+n);return t}function Mc(e,t){Nc.set(e,t)}ze("http",yc,1),ze("https",yc,1),bc.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Ec.prototype.destroy=function(){return this.D.destroy()},Tc.prototype.abort=function(){var e=this;return O((function(t){if(1==t.a){try{e.c.abort()}catch(e){}return k(t,2),E(t,e.a,4)}if(2!=t.a)return _(t,0);w(t),A(t)}))},Tc.prototype.store=function(){return this.b},Tc.prototype.promise=function(){return this.a},wc.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(i=Rc.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Ic(this.c)},i.removeSegments=function(e,t){return xc(this,this.c,e,t)},i.getSegments=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,Dc(n,n.c,e),2):(t=i.b,i.return(t.map((function(e){return n.td(e)}))))}))},i.addManifests=function(){return Ic(this.a)},i.updateManifestExpiration=function(e,t){var n=Sc(this.b,this.a),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return xc(this,this.a,e,t)},i.getManifests=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,Dc(n,n.a,e),2):(t=i.b,i.return(Promise.all(t.map((function(e){return n.Ab(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return O((function(i){return 1==i.a?(e=Cc(n.b,n.a,"readonly"),t=new Map,E(i,_c(e,(function(e,i){var r;return O((function(a){if(1==a.a)return E(a,n.Ab(i),2);r=a.b,t.set(e,r),A(a)}))})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},i.td=function(e){return e},i.Ab=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,l,c=this;return O((function(d){if(1==d.a){for(n=Sc(c.b,e),i=n.store(),r=[],a={},o=u(t),s=o.next();!s.done;a={Tb:a.Tb},s=o.next())l=s.value,a.Tb=i.add(l),a.Tb.onsuccess=function(e){return function(){r.push(e.Tb.result)}}(a);return E(d,n.promise(),2)}return d.return(r)}))},Pc.prototype.destroy=function(){return this.a.destroy()},Pc.prototype.getAll=function(){var e,t,n=this;return O((function(i){return 1==i.a?(e=Cc(n.a,"session-ids","readonly"),t=[],E(i,_c(e,(function(e,n){t.push(n)})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},Pc.prototype.add=function(e){for(var t=Sc(this.a,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Pc.prototype.remove=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,_c(t=Sc(n.a,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):E(i,t.promise(),0)}))},Oc.prototype.destroy=function(){for(var e=[],t=u(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Oc.prototype.init=function(){var e=this;Nc.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=u(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},F("shaka.offline.StorageMuxer",Oc),Oc.unregister=function(e){Nc.delete(e)},Oc.register=Mc,Oc.prototype.destroy=Oc.prototype.destroy;var Nc=new Map;function Uc(){Rc.apply(this,arguments)}function Bc(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?Fc(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=Fc(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}(n,e.startTime,t)}))}function Fc(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new fe(2,9,9004,"Could not parse uri "+e)}function Vc(){Rc.apply(this,arguments)}function Hc(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}function jc(){Rc.apply(this,arguments)}function Kc(){this.h=this.f=this.c=this.b=this.a=this.g=null}function Gc(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function zc(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new Gc(t,n,i,Number(e[4])):null}function Wc(e,t){this.b=e,this.a=t}function Yc(e,t){var n=new Qi(null,0);n.ya(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=u(t),o=a.next();!o.done;o=a.next()){var s=u(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=u(n),o=a.next();!o.done;o=a.next())for(s=u(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=u(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=qc(e,r,i),s=u(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=u(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=qc(e,r,i),o=u(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return"text"==e.type})).map((function(t){return qc(e,t,n)}));var a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=u(i.values()),s=o.next();!s.done;s=o.next())(s=s.value).audio&&s.audio.encrypted&&(s.audio.drmInfos=a),s.video&&s.video.encrypted&&(s.video.drmInfos=a);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r}}function qc(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new Gc("segment",e.b,e.a,t.dataKey);return new Zi(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Gc("segment",e.b,e.a,t);return new Xi((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd)}(e,t)}));return n.mb(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new mr(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,closedCaptions:t.closedCaptions}}function $c(){this.a=null}function Xc(){}function Zc(e){var t=zc(e);return t&&"manifest"==t.a?e=Te(e={uri:e,Jd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.a?function(e,t){var n=new Oc;return Te(void 0).U((function(){return n.init()})).U((function(){return Lc(n,t.wa(),t.ba())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):Ae(new fe(2,1,9004,e)),e}function Qc(e,t,n){var i,r,a,o,s,l;return O((function(c){switch(c.a){case 1:i=[];for(var d=[],h=u(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=u(d),v=g.next();!v.done;v=g.next())if(Jc((v=v.value).info,p)){v.sessionIds.push(p.sessionId),f=!0;break}f||d.push({info:p,sessionIds:[p.sessionId]})}r=u(d),a=r.next();case 2:if(a.done){c.u(4);break}return o=a.value,s=function(e,t,n){var i,r;return O((function(a){switch(a.a){case 1:return i=new Xt({lb:t,onError:function(){},jc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(a,2),i.configure(e),E(a,function(e,t,n,i,r,a){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}],o.set(t,r),an(e,o)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:_(a,3);break;case 2:return w(a),E(a,i.destroy(),5);case 5:return a.return([]);case 3:return k(a,6),E(a,Jt(i),8);case 8:_(a,7);break;case 6:return w(a),E(a,i.destroy(),9);case 9:return a.return([]);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return O((function(t){return 1==t.a?(k(t,2),E(t,function(e,t){var n,i,r;return O((function(a){return 1==a.a?E(a,on(e,t),2):(n=a.b)?(i=[],(r=e.f.get(n))&&(r.za=new be,i.push(r.za)),i.push(n.remove()),E(a,Promise.all(i),0)):a.return()}))}(i,e),4)):2!=t.a?(r.push(e),_(t,0)):(w(t),void A(t))}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,o),E(c,s,5);case 5:l=c.b,i=i.concat(l),a=r.next(),c.u(2);break;case 4:return c.return(i)}}))}function Jc(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ve(e.audioCapabilities,t.audioCapabilities,n)&&Ve(e.videoCapabilities,t.videoCapabilities,n)}function ed(e,t){var n=Yc(new Wc(e.wa(),e.ba()),t),i=t.appMetadata||{};return n=td(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function td(e){for(var t=[],n=function(e){return e.filter((function(e){return Ri(e)}))}(e.variants),i=(n=u(n)).next();!i.done;i=n.next())t.push(Ti(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(_i(n.value));return t}function nd(){this.a={}}function id(e,t){var n=e.a[t];return null==n&&(n=0),n}function rd(e){var t=this;if(e&&e.constructor!=Da)throw new fe(2,9,9008);this.N=this.i=null,e?(this.i=e.i,this.N=e.Db()):(this.i=ka(),this.N=new Ge),this.nc=[],this.Jb=[],this.Zc=[],this.a=new Map,this.a.set(null,Promise.resolve(null)),this.b=new Map;var n=!e;this.D=new Je((function(){var e,i,r,a,o;return O((function(s){switch(s.a){case 1:return E(s,Promise.all(t.Zc.map((function(e){return Ac(e)}))),2);case 2:for(e=function(){},i=[],r=u(t.Jb),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.u(4);break}return E(s,t.N.destroy(),4);case 4:t.i=null,t.N=null,A(s)}}))}))}function ad(){if(Lt())e:{for(var e=u(Nc.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function od(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Dt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Dt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function sd(e,t,n){return O((function(i){return E(i,function(e,t,n,i){var r,a,o;return O((function(s){return 1==s.a?i.drmInfo?(r=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new fe(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:od(i,!1),videoCapabilities:od(i,!0)}})),E(s,Qc(t,e,a),2)):s.return():3!=s.a?(o=s.b,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.N,e.i.drm,n,t),0)}))}function ld(e,t,n){function i(){}var r=function(e){for(var t=[],n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.push(i.initSegmentKey),t.push(i.dataKey);return t}(n);return ed(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function ud(e,t,n,i,r,a,o){var s={id:a.id,originalId:a.originalId,primary:a.primary,type:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,encrypted:a.encrypted,keyIds:a.keyIds,segments:[],variantIds:[],roles:a.roles,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,closedCaptions:a.closedCaptions},l=a.id;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(a,r.presentationTimeline.Qa(),(function(r){var u=function(e,t,n,i,r,a,o,s){return e.a.has(o)?e.a.get(o):(s=jr(o.c(),o.b,o.a,s.streaming.retryParameters),t=kc(t,n,s,.5*id(a,i),!0,(function(t){var n;return O((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.nc.push(n[0]),i.return(n[0]))}))})),e.a.set(o,t),t)}(e,t,l,a.id,n,i,r.f,o),c=function(e,t,n,i,r,a,o,s){var l=[o.c()[0],o.b,o.a].join("-");return e.b.has(l)?e.b.get(l):(s=jr(o.c(),o.b,o.a,s.streaming.retryParameters),t=kc(t,n,s,function(e,t,n){return n=n.endTime-n.startTime,id(e,t)*n}(a,i,o),!1,(function(t){var n;return O((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.nc.push(n[0]),i.return(n[0]))}))})),e.b.set(l,t),t)}(e,t,l,a.id,n,i,r,o);!function(e,t,n){et(e.D);var i=(e.a.get(t)||Promise.resolve()).then((function(){return O((function(e){return E(e,n(),0)}))}));e.a.set(t,i)}(t,l,(function(){var e,t;return O((function(n){return 1==n.a?E(n,u,2):3!=n.a?(e=n.b,E(n,c,3)):(t=n.b,s.segments.push({initSegmentKey:e,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,dataKey:t}),void A(n))}))}))})),s}function cd(e){if(e.D.a)throw new fe(2,9,7001)}function dd(){if(!ad())throw new fe(2,9,9e3)}function hd(e,t){return O((function(n){return 1==n.a?(e.Jb.push(t),T(n),E(n,t,4)):2!=n.a?n.return(n.b):(S(n),Fe(e.Jb,t),C(n,0))}))}function pd(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(Uc,Rc),Uc.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return O((function(o){return n=Sc(a.b,a.a),i=n.store(),r=new be,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new fe(2,9,9012,"Could not find values for "+e))},E(o,Promise.all([n.promise(),r]),0)}))},Uc.prototype.Ab=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=Bc(e.periods[n],r),t.push(a);return E(s,Vl(t),2)}return o=s.b,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},Uc.prototype.td=function(e){return{data:e.data}},v(Vc,Rc),Vc.prototype.Ab=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=u(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(Hc(h,l.startTime,l.startTime+r));a=c,t.push(a)}return E(s,Vl(t),2)}return o=s.b,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o})}))},v(jc,Rc),jc.prototype.hasFixedKeySpace=function(){return!1},jc.prototype.addSegments=function(e){return this.add(this.c,e)},jc.prototype.addManifests=function(e){return this.add(this.a,e)},jc.prototype.Ab=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Kc.prototype).init=function(){var t=this,n=new be,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result;t.g=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new Uc(e,"segment","manifest"):null,t.a=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new Vc(e,"segment-v2","manifest-v2"):null,t.b=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new Vc(e,"segment-v3","manifest-v3"):null,t.c=r,r=(r=e.objectStoreNames).contains("manifest-v5")&&r.contains("segment-v5")?new jc(e,"segment-v5","manifest-v5"):null,t.f=r,e=e.objectStoreNames.contains("session-ids")?new Pc(e):null,t.h=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new fe(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return O((function(t){switch(t.a){case 1:if(!e.a){t.u(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.u(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.u(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.f){t.u(8);break}return E(t,e.f.destroy(),8);case 8:if(!e.h){t.u(10);break}return E(t,e.h.destroy(),10);case 10:e.g&&e.g.close(),A(t)}}))},i.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),this.f&&e.set("v5",this.f),e},i.getEmeSessionCell=function(){return this.h},i.erase=function(){var t=this;return O((function(n){switch(n.a){case 1:if(!t.a){n.u(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.u(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.u(6);break}return E(n,t.c.destroy(),6);case 6:if(!t.f){n.u(8);break}return E(n,t.f.destroy(),8);case 8:return t.g&&t.g.close(),E(n,function(){var t=new be,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new fe(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.g=null,t.a=null,t.b=null,t.c=null,t.f=null,E(n,t.init(),0)}}))},Mc("idb",(function(){return Ft("CrKey")||!e.indexedDB?null:new Kc})),Gc.prototype.wa=function(){return this.g},Gc.prototype.ba=function(){return this.f},Gc.prototype.key=function(){return this.c},Gc.prototype.toString=function(){return this.b},(i=$c.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,l=this;return O((function(u){switch(u.a){case 1:if(n=zc(e),l.a=n,null==n||"manifest"!=n.a)throw new fe(2,1,9004,e);return i=new Oc,T(u),E(u,i.init(),4);case 4:return E(u,Lc(i,n.wa(),n.ba()),5);case 5:return E(u,u.b.getManifests([n.key()]),6);case 6:return r=u.b,a=r[0],o=new Wc(n.wa(),n.ba()),s=Yc(o,a),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return S(u),E(u,i.destroy(),7);case 7:C(u,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,l,u=this;return O((function(c){switch(c.a){case 1:return n=u.a,i=new Oc,k(c,2,3),E(c,i.init(),5);case 5:return E(c,Lc(i,n.wa(),n.ba()),6);case 6:return E(c,(r=c.b).getManifests([n.key()]),7);case 7:if(a=c.b,o=a[0],s=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!s||!l){c.u(3);break}return E(c,r.updateManifestExpiration(n.key(),t),3);case 3:return S(c),E(c,i.destroy(),10);case 10:C(c,0);break;case 2:w(c),c.u(3)}}))},qi["application/x-offline-manifest"]=function(){return new $c},F("shaka.offline.OfflineScheme",Xc),Xc.plugin=Zc,ze("offline",Zc),(i=rd.prototype).destroy=function(){return this.D.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ea(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(yt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Ta(this.i,e)},i.getConfiguration=function(){var e=ka();return Ta(e,this.i,ka()),e},i.Db=function(){return this.N},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Ec(this.N);this.Zc.push(a);var o=new Ee(t=function(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:return dd(),s=o=null,l=new Oc,d=c=null,k(y,2,3),E(y,i(),5);case 5:return o=y.b,E(y,function(e,t,n,i){var r,a,o,s,l;return O((function(u){if(1==u.a)return r=null,a=e.N,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},n.configure(i.manifest),cd(e),E(u,n.start(t,o),2);if(3!=u.a)return s=u.b,cd(e),l=pd(s),E(u,Promise.all(Z(l,(function(e){return e.createSegmentIndex()}))),3);if(cd(e),r)throw r;return u.return(s)}))}(e,t,o,r),6);case 6:if(h=y.b,cd(e),!(!h.presentationTimeline.S()&&!h.presentationTimeline.Ta()))throw new fe(2,9,9005,t);return E(y,function(e,t,n,i){var r;return O((function(a){switch(a.a){case 1:return(r=new Xt({lb:e.N,onError:n,jc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),E(a,function(e,t,n){return e.v=[],e.w=n,Qt(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,Jt(r),3);case 3:return E(a,en(r),4);case 4:return a.return(r)}}))}(e,h,(function(e){d=d||e}),r),7);case 7:if(s=y.b,cd(e),d)throw d;return E(y,e.fb(h,s,r),8);case 8:return E(y,l.init(),9);case 9:return cd(e),E(y,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{wa:n,ba:i},ba:e})}))})),t)return t;throw new fe(2,9,9013,"Could not find a cell that supports add-operations")}(l),10);case 10:return c=y.b,cd(e),E(y,function(e,t,n,i,r,a,o,s){var l,c,d,h,p,f,g,v,y,m;return O((function(b){switch(b.a){case 1:return l=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=td(t),appMetadata:n}}(r,i,a),c=o.offline.progressCallback,function(e,t,n){e.Id=t,e.Hd=n}(s,(function(e,t){l.size=t,c(l,e)}),(function(e,t){p&&o.offline.usePersistentLicense&&f==t&&tn(n,"cenc",e)})),d=i.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),h=i.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),f=null,(p=d&&!h)&&(g=n.c,f=fd.get(g.keySystem)),T(b),y=v=function(e,t,n,i,r,a,o,s){for(var l=new nd,c=u(r.variants),d=c.next();!d.done;d=c.next()){var h=l,p=(d=d.value).audio,f=d.video;if(p&&!f&&(h.a[p.id]=p.bandwidth||d.bandwidth),!p&&f&&(h.a[f.id]=f.bandwidth||d.bandwidth),p&&f){var g=p.bandwidth||393216,v=f.bandwidth||d.bandwidth-g;0>=v&&(v=d.bandwidth),h.a[p.id]=g,h.a[f.id]=v}}for(c=u(r.textStreams),h=c.next();!h.done;h=c.next())l.a[h.value.id]=52;for(h=pd(r),c=new Map,h=u(h),d=h.next();!d.done;d=h.next())d=d.value,p=ud(e,t,n,l,r,d,s),c.set(d.id,p);for(e=u(r.variants),d=e.next();!d.done;d=e.next())(t=d.value).audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return e=Array.from(c.values()),s=s.offline.usePersistentLicense,(t=i.c)&&s&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:a,duration:r.presentationTimeline.getDuration(),size:0,expiration:i.Cb(),streams:e,sessionIds:s?rn(i):[],drmInfo:t,appMetadata:o}}(e,s,t,n,i,r,a,o),E(b,function(e){return O((function(t){return 1==t.a?E(t,Promise.all(e.a.values()),2):t.return(e.Bb.a)}))}(s),4);case 4:if(y.size=b.b,v.expiration=n.Cb(),m=rn(n),v.sessionIds=o.offline.usePersistentLicense?m:[],d&&o.offline.usePersistentLicense&&!m.length)throw new fe(2,9,9007);return b.return(v);case 2:return S(b),E(b,s.destroy(),5);case 5:C(b,0)}}))}(e,c.ba,s,h,t,n,r,a),11);case 11:if(p=y.b,cd(e),d)throw d;return E(y,c.ba.addManifests([p]),12);case 12:return f=y.b,cd(e),g=new Gc("manifest",c.path.wa,c.path.ba,f[0]),y.return(ed(g,p));case 3:return S(y),e.nc=[],E(y,l.destroy(),13);case 13:if(!o){y.u(14);break}return E(y,o.stop(),14);case 14:if(!s){y.u(16);break}return E(y,s.destroy(),16);case 16:C(y,0);break;case 2:if(v=w(y),!c){y.u(18);break}return E(y,c.ba.removeSegments(e.nc,(function(){})),18);case 18:throw d||v}}))}(this,e,t||{},(function(){var t;return O((function(a){return 1==a.a?E(a,Wi(e,i.N,r.manifest.retryParameters,n||null),2):(t=a.b,a.return(_t(t)))}))}),r,a),(function(){return Ac(a)}));return o.finally((function(){Fe(i.Zc,a)})),o.then=function(e){return yt("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},function(e,t){var n=t.promise;return e.Jb.push(n),t.finally((function(){Fe(e.Jb,n)}))}(this,o)},i.xe=function(){return yt("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},i.fb=function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m;return O((function(b){if(1==b.a){for(i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return Ai(e,t,n)}))}(e,n.restrictions,i),function(e){e.variants=e.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&Zn(e.audio)),e.video&&(t=t&&Zn(e.video)),t}))}(e),function(e,t){e.variants=e.variants.filter((function(e){return dn(t,e)}))}(e,t),r=[],a=n.preferredAudioChannelCount,Ei(e,a),o=u(e.variants),s=o.next();!s.done;s=o.next())l=s.value,r.push(Ti(l));for(c=u(e.textStreams),d=c.next();!d.done;d=c.next())h=d.value,r.push(_i(h));return E(b,n.offline.trackSelectionCallback(r),2)}for(p=b.b,f=new Set,g=new Set,v=u(p),y=v.next();!y.done;y=v.next())"variant"==(m=y.value).type&&f.add(m.id),"text"==m.type&&g.add(m.id);e.variants=e.variants.filter((function(e){return f.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return g.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),i=n.next();!i.done;i=n.next())for(var r=(i=u(t)).next();!r.done;r=i.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),i=n.next();!i.done;i=n.next());}(e),A(b)}))},i.remove=function(e){return hd(this,function(e,t){var n,i,r,a,o,s;return O((function(l){switch(l.a){case 1:if(dd(),null==(n=zc(t))||"manifest"!=n.a)throw new fe(2,9,9004,t);return i=n,r=new Oc,T(l),E(l,r.init(),4);case 4:return E(l,Lc(r,i.wa(),i.ba()),5);case 5:return E(l,(a=l.b).getManifests([i.key()]),6);case 6:return o=l.b,s=o[0],E(l,Promise.all([sd(e,s,r),ld(a,i,s)]),2);case 2:return S(l),E(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.Oe=function(){return hd(this,function(e){var t,n,i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:return dd(),t=e.N,n=e.i.drm,i=new Oc,r=!1,T(h),E(h,i.init(),4);case 4:a=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),o=u(a),s=o.next();case 5:if(s.done){h.u(2);break}return E(h,(l=s.value).getAll(),8);case 8:return c=h.b,E(h,Qc(n,t,c),9);case 9:return d=h.b,E(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),s=o.next(),h.u(5);break;case 2:return S(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}(this))},i.list=function(){return hd(this,O((function(i){switch(i.a){case 1:return dd(),e=[],t=new Oc,T(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({wa:n,ba:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return O((function(n){if(1==n.a)return E(n,i.getAllManifests(),2);n.b.forEach((function(n,i){var r=ed(new Gc("manifest",t.wa,t.ba,i),n);e.push(r)})),A(n)}))}))})),E(i,n,2);case 2:return S(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},F("shaka.offline.Storage",rd),rd.deleteAll=function(){var e;return O((function(t){return 1==t.a?(e=new Oc,T(t),E(t,function(e){var t,n;return O((function(i){return 1==i.a?(t=Array.from(e.a.values()),(n=0<t.length)||Nc.forEach((function(e){(e=e())&&t.push(e)})),E(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.u(0):E(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.a?(S(t),E(t,e.destroy(),5)):C(t,0)}))},rd.prototype.list=rd.prototype.list,rd.prototype.removeEmeSessions=rd.prototype.Oe,rd.prototype.remove=rd.prototype.remove,rd.prototype.getStoreInProgress=rd.prototype.xe,rd.prototype.store=rd.prototype.store,rd.prototype.getNetworkingEngine=rd.prototype.Db,rd.prototype.getConfiguration=rd.prototype.getConfiguration,rd.prototype.configure=rd.prototype.configure,rd.prototype.destroy=rd.prototype.destroy,rd.support=ad;var fd=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function gd(){}function vd(e,t){for(var n={priority:t||0,Zd:e},i=u(J(yd)),r=i.next();!r.done;r=i.next()){var a=(r=r.value).Y;if(r.item.priority<n.priority)return void yd.splice(a,0,n)}yd.push(n)}jo.offline=ad,F("shaka.polyfill",gd),gd.register=vd,gd.installAll=function(){for(var e=u(yd),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Zd()}catch(e){W("Error installing polyfill!",e)}}};var yd=[];function md(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function bd(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function Ed(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function Ad(e,t){try{var n=new _d(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function kd(e){var t=this.mediaKeys;return t&&t!=e&&Sd(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Sd(e,this):Promise.resolve()}function Td(e){if(De(e=xe(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ut(e=st(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ie(e),this.dispatchEvent(t)}function _d(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=u(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(i.audioCapabilities.push(l),o=!0));if(r.videoCapabilities)for(l=(r=u(r.videoCapabilities)).next();!l.done;l=r.next())(s=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function wd(e){this.a=new WebKitMediaKeys(e),this.b=new tt}function Sd(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"webkitneedkey",Td);try{return rr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.webkitSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Cd(e){Me.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new tt,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new Id}function Rd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new Oe("keystatuseschange"),e.dispatchEvent(n)}function Id(){this.size=0,this.a=void 0}function xd(e,t){try{var n=new Pd(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Dd(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=Ie(function(e){if(!e)return e;var t=new qs(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=u(t.data)).next();!i.done;n={Qb:n.Qb},i=t.next())n.Qb=i.value,e.some(function(e){return function(t){return Ce(t,e.Qb)}}(n))||e.push(n.Qb);return $t.apply(Kt,c(e))}(e.initData)),this.dispatchEvent(t)}}function Pd(e,t){this.keySystem=e;for(var n=!1,i=u(t),r=i.next();!r.done;r=i.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.audioCapabilities.push(l),n=!0));if(r.videoCapabilities)for(l=(s=u(r.videoCapabilities)).next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Od(e){var t=this.mediaKeys;return t&&t!=e&&Md(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Md(e,this):Promise.resolve()}function Ld(e){this.a=new MSMediaKeys(e),this.b=new tt}function Md(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"msneedkey",Dd);try{return rr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.msSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Nd(e){Me.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new tt,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new Bd}function Ud(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new Oe("keystatuseschange"),e.dispatchEvent(n)}function Bd(){this.size=0,this.a=void 0}function Fd(){return Promise.reject(Error("The key system specified is not supported."))}function Vd(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Hd(){throw new TypeError("Illegal constructor.")}function jd(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Kd(e){return th?th+e.charAt(0).toUpperCase()+e.slice(1):e}function Gd(e,t){try{var n=new Wd(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function zd(e){var t=this.mediaKeys;return t&&t!=e&&qd(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&qd(e,this),Promise.resolve()}function Wd(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=u(t),o=a.next();!o.done;o=a.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var c=u(o.audioCapabilities),d=c.next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType.split(";")[0],this.a)&&(s.audioCapabilities.push(d),i=!0));if(o.videoCapabilities)for(d=(c=u(o.videoCapabilities)).next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),i=!0));if(l||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Yd(e){this.g=e,this.a=null,this.b=new tt,this.c=[],this.f=new Map}function qd(e,t){e.a=t,e.b.Xa();var n=th;t&&(e.b.l(t,n+"needkey",(function(t){var n=document.createEvent("CustomEvent");n.initCustomEvent("encrypted",!1,!1,null),n.initDataType="cenc",n.initData=Ie(t.initData),e.a.dispatchEvent(n)})),e.b.l(t,n+"keymessage",(function(t){var n=$d(e,t.sessionId);n&&(t=new Oe("message",{messageType:null==n.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),n.b&&(n.b.resolve(),n.b=null),n.dispatchEvent(t))})),e.b.l(t,n+"keyadded",(function(t){(t=$d(e,t.sessionId))&&(Jd(t,"usable"),t.a&&t.a.resolve(),t.a=null)})),e.b.l(t,n+"keyerror",(function(t){var n=$d(e,t.sessionId);n&&n.handleError(t)})))}function $d(e,t){var n=e.f.get(t);return n||((n=e.c.shift())?(n.sessionId=t,e.f.set(t,n),n):null)}function Xd(e,t,n){Me.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new be,this.keyStatuses=new eh}function Zd(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=xe(ut("LOAD_SESSION|"+n));else{var r=ut("PERSISTENT|");i=$t(r,t)}else i=xe(t)}catch(e){return Promise.reject(e)}e.b=new be;var a=Kd("generateKeyRequest");try{e.f[a](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new ve((function(){try{e.f[a](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).R(.01)}return e.b}function Qd(e,t,n){if(e.a)e.a.then((function(){return Qd(e,t,n)})).catch((function(){return Qd(e,t,n)}));else{if(e.a=t,"webkit-org.w3.clearkey"==e.c){var i=ot(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.a.reject(Error("Response is not a valid JSON Web Key Set.")),e.a=null),i=Wt(r.keys[0].k),r=Wt(r.keys[0].kid)}else i=xe(n),r=null;var a=Kd("addKey");try{e.f[a](e.c,i,r,e.sessionId)}catch(t){e.a.reject(t),e.a=null}}}function Jd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new Oe("keystatuseschange"),e.dispatchEvent(n)}function eh(){this.size=0,this.a=void 0}vd((function(){ip()}),-1),vd((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",md),document.addEventListener("webkitfullscreenerror",md),document.addEventListener("mozfullscreenchange",md),document.addEventListener("mozfullscreenerror",md),document.addEventListener("MSFullscreenChange",md),document.addEventListener("MSFullscreenError",md)}})),vd((function(){Ft("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=bd)})),vd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),vd((function(){})),vd((function(){var t=Bt();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(Ed(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):Ed()):(Ft("Tizen 2")||Ft("Tizen 3")||Ft("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Pt(t)[0]&&e(t)}}())})),_d.prototype.createMediaKeys=function(){var e=new wd(this.keySystem);return Promise.resolve(e)},_d.prototype.getConfiguration=function(){return this.a},wd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Cd(this.a,e)},wd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Cd,Me),(i=Cd.prototype).generateRequest=function(e,t){var n=this;this.a=new be;try{var i=this.g.createSession("video/mp4",xe(t));this.f=i,this.sessionId=i.sessionId||"",this.b.l(this.f,"webkitkeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new Oe("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:Ie(e.message)}),n.dispatchEvent(e)})),this.b.l(i,"webkitkeyadded",(function(){n.c&&(Rd(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rd(n,"output-not-allowed");break;default:Rd(n,"internal-error")}})),Rd(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new be;try{this.f.update(xe(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Id.prototype).forEach=function(e){this.a&&e(this.a,mn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=mn.value();return!(!this.a||!Ce(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},vd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kd,e.MediaKeys=wd,e.MediaKeySystemAccess=_d,navigator.requestMediaKeySystemAccess=Ad)})),Pd.prototype.createMediaKeys=function(){var e=new Ld(this.keySystem);return Promise.resolve(e)},Pd.prototype.getConfiguration=function(){return this.a},Ld.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Nd(this.a,e)},Ld.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Nd,Me),(i=Nd.prototype).generateRequest=function(e,t){var n=this;this.a=new be;try{this.f=this.g.createSession("video/mp4",xe(t),null),this.b.l(this.f,"mskeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new Oe("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:Ie(e.message)}),n.dispatchEvent(e)})),this.b.l(this.f,"mskeyadded",(function(){n.a?(Ud(n,"usable"),n.a.resolve(),n.a=null):n.c&&(Ud(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(this.f,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Ud(n,"output-not-allowed");break;default:Ud(n,"internal-error")}})),Ud(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new be;try{this.f.update(xe(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Bd.prototype).forEach=function(e){this.a&&e(this.a,mn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=mn.value();return!(!this.a||!Ce(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},vd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=Ld,e.MediaKeySystemAccess=Pd,navigator.requestMediaKeySystemAccess=xd,HTMLMediaElement.prototype.setMediaKeys=Od)})),Hd.prototype.createSession=function(){},Hd.prototype.setServerCertificate=function(){},jd.prototype.getConfiguration=function(){},jd.prototype.createMediaKeys=function(){},vd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Fd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vd,e.MediaKeys=Hd,e.MediaKeySystemAccess=jd)}),-10),Wd.prototype.createMediaKeys=function(){var e=new Yd(this.a);return Promise.resolve(e)},Wd.prototype.getConfiguration=function(){return this.b},Yd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.a||document.createElement("video");return t.src||(t.src="about:blank"),e=new Xd(t,this.g,e),this.c.push(e),e},Yd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Xd,Me),(i=Xd.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Jd(this,"output-restricted"):Jd(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return Zd(this,t,null)},i.load=function(e){return"persistent-license"==this.g?Zd(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new be;return Qd(this,t,e),t},i.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Kd("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=eh.prototype).forEach=function(e){this.a&&e(this.a,mn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=mn.value();return!(!this.a||!Ce(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var th="";function nh(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function ih(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function rh(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function ah(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function oh(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function sh(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function lh(t,n,i){return new e.TextTrackCue(t,n,i)}function uh(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function ch(){}function dh(e){var t=[];if(!e)return t;for(var n=u(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=dh(i),t=t.concat(i));return t.length||t.push(e),t}function hh(e){if(!e)return[];for(var t=[],n=(e=u(e.childNodes)).next();!n.done;n=e.next())(n=n.value)instanceof Element&&(n.hasAttribute("begin")?t.push(n):t=t.concat(hh(n)));return t}function ph(e,t){for(var n="",i=u(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=ph(r,t):t?n+=r=(r=r.textContent.trim()).replace(/\s+/g," "):n+=r.textContent;return n}function fh(e,t,n,i,r,a,o,s,l,c){if(l&&"br"==e.nodeName)return(e=new Rn(0,0,"")).spacer=!0,e;var d=/^[\s\n]*$/.test(e.textContent),h=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||h&&d||h&&!l)return null;d=Ah(e.getAttribute("begin"),n),h=Ah(e.getAttribute("end"),n);var p=Ah(e.getAttribute("dur"),n);if(null==h&&null!=p&&(h=d+p),!l&&(null==d||null==h))throw new fe(2,2,2001);if(d=l&&null==d?0:d+t,h=l&&null==h?0:h+t,p="",l=[],Array.from(e.childNodes).some((function(e){return e.nodeType==Node.TEXT_NODE&&/\S+/.test(e.textContent)})))p=ph(e,s);else for(var f=u(e.childNodes),g=f.next();!g.done;g=f.next())(g=fh(g.value,t,n,i,r,a,o,s,!0,c))&&(g.startTime=g.startTime||d,g.endTime=g.endTime||h,l.push(g));if((t=new Rn(d,h,p)).nestedCues=l,c&&(t.cellResolution=c),(a=Eh(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var v=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==v}))[0]}return function(e,t,n,i,r){"rtl"==vh(t,n,r,"direction")&&(e.direction="rtl");var a=vh(t,n,r,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Mn),(a=vh(t,n,r,"textAlign"))?(e.positionAlign=Uh[a],e.lineAlign=Nh[a],e.textAlign=Pn[a.toUpperCase()]):e.textAlign="start",(a=vh(t,n,r,"displayAlign"))&&(e.displayAlign=Ln[a.toUpperCase()]);(a=vh(t,n,r,"color"))&&(e.color=a);(a=vh(t,n,r,"backgroundColor"))&&(e.backgroundColor=a);(a=vh(t,n,r,"border"))&&(e.border=a);(a=vh(t,n,r,"fontFamily"))&&(e.fontFamily=a);(a=vh(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=vh(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=vh(t,n,r,"lineHeight"))&&a.match(Rh)&&(e.lineHeight=a),(a=vh(t,n,r,"fontSize"))&&(a.match(Rh)||a.match(Ch))&&(e.fontSize=a),(a=vh(t,n,r,"fontStyle"))&&(e.fontStyle=jn[a.toUpperCase()]);if(i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=vh(t,n,r,"letterSpacing"))&&i.match(Rh)&&(e.letterSpacing=i),(i=vh(t,n,r,"linePadding"))&&i.match(Rh)&&(e.linePadding=i),(i=vh(t,n,r,"opacity"))&&(e.opacity=parseFloat(i));(n=yh(n,r,"textDecoration"))&&gh(e,n),(t=mh(t,r,"textDecoration"))&&gh(e,t)}(t,e,a,i=Eh(e,"smpte:backgroundImage",i,"#")[0],r),t}function gh(e,t){for(var n=u(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Fe(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Fe(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Fe(e.textDecoration,"overline")}}function vh(e,t,n,i){return(e=mh(e,n,i))?e:yh(t,n,i)}function yh(e,t,n){if(!e)return null;for(var i=dh(e),r=(i=u(i)).next();!r.done;r=i.next())if(r=Js(r.value,"http://www.w3.org/ns/ttml#styling",n))return r;return bh(e,t,n)}function mh(e,t,n){var i=Js(e,"http://www.w3.org/ns/ttml#styling",n);return i||bh(e,t,n)}function bh(e,t,n){e=Eh(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=Js(e[r],"urn:ebu:tt:style",n);a||(a=Js(e[r],"http://www.w3.org/ns/ttml#styling",n)),a||(a=mh(e[r],t,n)),a&&(i=a)}return i}function Eh(e,t,n,i){var r=[];if(!e||1>n.length)return r;var a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=(t=u(t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var o=(a=u(n)).next();!o.done;o=a.next())if(i+(o=o.value).getAttribute("xml:id")==e){r.push(o);break}}return r}function Ah(e,t){var n=null;if(xh.test(e)){n=xh.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else Dh.test(e)?n=kh(Dh,e):Ph.test(e)?n=kh(Ph,e):Oh.test(e)?(n=Oh.exec(e),n=Number(n[1])/t.frameRate):Lh.test(e)?(n=Lh.exec(e),n=Number(n[1])/t.a):Mh.test(e)&&(n=kh(Mh,e));return n}function kh(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function Th(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}vd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)th="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Gd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=zd,e.MediaKeys=Yd,e.MediaKeySystemAccess=Wd}})),vd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=ih,Object.defineProperty(t,"disablePictureInPicture",{get:ah,set:oh,enumerable:!0,configurable:!0}),document.exitPictureInPicture=rh,document.addEventListener("webkitpresentationmodechanged",nh,!0))}})),vd((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),vd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=sh)}})),vd((function(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=lh;else if(6==n)t=uh;else{try{var i=!!lh(1,2,"")}catch(e){i=!1}i&&(t=lh)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}})),ch.prototype.parseInit=function(){},ch.prototype.parseMedia=function(e,t){var n=ot(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new fe(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new fe(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new fe(2,2,2005,"TTML does not contain <tt> tag.");var o=Js(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Js(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=Js(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Js(r,"http://www.w3.org/ns/ttml#parameter","tickRate"),d=Js(r,"http://www.w3.org/ns/ttml#parameter","cellResolution");if(a=r.getAttribute("xml:space")||"default",n=Js(r,"http://www.w3.org/ns/ttml#styling","extent"),"default"!=a&&"preserve"!=a)throw new fe(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new Th(o,s,l,c),d=d&&(d=/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,s=dh(r.getElementsByTagName("metadata")[0]),l=dh(r.getElementsByTagName("styling")[0]);for(var h=[],p=u(c=dh(r.getElementsByTagName("layout")[0])),f=p.next();!f.done;f=p.next()){var g=f.value,v=n;f=new Kn;var y,m,b=g.getAttribute("xml:id");if(b)f.id=b,b=null,v&&(b=Sh.exec(v)||Ih.exec(v)),v=b?Number(b[1]):null,b=b?Number(b[2]):null,(y=yh(g,l,"extent"))&&(null!=(y=(m=Sh.exec(y))||Ih.exec(y))&&(f.width=null!=v?100*Number(y[1])/v:Number(y[1]),f.height=null!=b?100*Number(y[2])/b:Number(y[2]),f.widthUnits=m||null!=v?Gn:0,f.heightUnits=m||null!=b?Gn:0)),(g=yh(g,l,"origin"))&&(null!=(y=(m=Sh.exec(g))||Ih.exec(g))&&(f.viewportAnchorX=null!=b?100*Number(y[1])/b:Number(y[1]),f.viewportAnchorY=null!=v?100*Number(y[2])/v:Number(y[2]),f.viewportAnchorUnits=m||null!=v?Gn:0));else f=null;f&&h.push(f)}for(n=hh(r.getElementsByTagName("body")[0]),r=(n=u(n)).next();!r.done;r=n.next())(r=fh(r.value,t.periodStart,o,s,l,c,h,a,!1,d))&&i.push(r)}return i},F("shaka.text.TtmlTextParser",ch),ch.prototype.parseMedia=ch.prototype.parseMedia,ch.prototype.parseInit=ch.prototype.parseInit;var _h,wh,Sh=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Ch=/^(\d{1,2}(?:\.\d+)?|100)%$/,Rh=/^(\d+px|\d+em|\d*\.?\d+c)$/,Ih=/^(\d+)px (\d+)px$/,xh=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Dh=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ph=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Oh=/^(\d*(?:\.\d*)?)f$/,Lh=/^(\d*(?:\.\d*)?)t$/,Mh=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Nh={left:Bn,center:"center",right:"end",start:Bn,end:"end"},Uh={left:"line-left",center:"center",right:"line-right"};function Bh(){this.m=new ch}function Fh(){}function Vh(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Dn:Pn[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Fn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Un,e.line=Number(n[1]),n[2]&&(e.lineAlign=Fn[n[2].toUpperCase()]))}function Hh(e){if(null==(e=wu(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function jh(){this.a=null}function Kh(e,t,n){var i,r,a;return(new Lr).L("payl",Ur((function(e){i=ot(e)}))).L("iden",Ur((function(e){r=ot(e)}))).L("sttg",Ur((function(e){a=ot(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Rn(i,r,e),t&&(e.id=t),n)for(t=new Tu(n),n=Su(t);n;)Vh(e,n,[]),_u(t),n=Su(t);return e}(i,r,a,t,n):null}
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function Gh(){}function zh(){_h?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(_h=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Wh):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Wh(e,t){var n,i=this;return O((function(r){return 1==r.a?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,_h.call(i,e,t),2)):tp(n=r.b)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=_h,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Yh,r.return(Yh.call(i,e,t)))}))}function Yh(e,t){var n,i,r,a,o,s,l,c,d,h,p=this;return O((function(f){if(1==f.a){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=ep(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())o=a.value,s=qh(o.videoCapabilities,n),l=qh(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=l,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(f,_h.call(p,e,i),2)}return h=f.b,f.return(new Jh(h,n))}))}function qh(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function $h(){}function Xh(){navigator.mediaCapabilities?(wh=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Zh):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Zh(e){var t,n=this;return O((function(i){return 1==i.a?(console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(i,wh.call(n,e),2)):(t=i.b,e.keySystemConfiguration?tp(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=wh,i.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Qh,i.return(Qh.call(n,e))):i.return(t))}))}function Qh(e){var t,n,i,r,a,o,s,l=this;return O((function(u){return 1==u.a?(console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=ep(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?u.return(o):E(u,wh.call(l,e),2)):((s=u.b).keySystemAccess&&(s.keySystemAccess=new Jh(s.keySystemAccess,t)),u.return(s))}))}function Jh(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function ep(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function tp(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function np(){}function ip(){zh(),Xh()}$n["application/ttml+xml"]=function(){return new ch},Bh.prototype.parseInit=function(e){var t=!1;if((new Lr).L("moov",Mr).L("trak",Mr).L("mdia",Mr).L("minf",Mr).L("stbl",Mr).ea("stsd",Nr).L("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new fe(2,2,2007)},Bh.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Lr).L("mdat",Ur((function(e){i=!0,r=r.concat(n.m.parseMedia(e,t))}))).parse(e,!1),!i)throw new fe(2,2,2007);return r},F("shaka.text.Mp4TtmlParser",Bh),Bh.prototype.parseMedia=Bh.prototype.parseMedia,Bh.prototype.parseInit=Bh.prototype.parseInit,$n['application/mp4; codecs="stpp"']=function(){return new Bh},$n['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Bh},$n['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Bh},Fh.prototype.parseInit=function(){},Fh.prototype.parseMedia=function(e,t){var n=ot(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new fe(2,2,2e3);if(n=t.periodStart,i[0].includes("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(n=Hh(new Tu(r[1]))))throw new fe(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}a=[];for(var o=(r=u(i[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new Tu(o);var s=new Kn;Su(o),_u(o);for(var l=Su(o);l;){var c=s,d=l;(l=/^id=(.*)$/.exec(d))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),_u(o),l=Su(o)}a.push(s)}for(r=[],o=(i=u(i.slice(1))).next();!o.done;o=i.next()){if(l=n,1==(c=o.value.split("\n")).length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{o=null,c[0].includes("--\x3e")||(o=c[0],c.splice(0,1)),d=Hh(s=new Tu(c[0]));var h=wu(s,/[ \t]+--\x3e[ \t]+/g),p=Hh(s);if(null==d||null==h||null==p)throw new fe(2,2,2001);for(c=new Rn(d+l,p+l,c.slice(1).join("\n").trim()),_u(s),l=Su(s);l;)Vh(c,l,a),_u(s),l=Su(s);null!=o&&(c.id=o),o=c}o&&r.push(o)}return r},F("shaka.text.VttTextParser",Fh),Fh.prototype.parseMedia=Fh.prototype.parseMedia,Fh.prototype.parseInit=Fh.prototype.parseInit,$n["text/vtt"]=function(){return new Fh},$n['text/vtt; codecs="vtt"']=function(){return new Fh},$n['text/vtt; codecs="wvtt"']=function(){return new Fh},jh.prototype.parseInit=function(e){var t=this,n=!1;if((new Lr).L("moov",Mr).L("trak",Mr).L("mdia",Mr).ea("mdhd",(function(e){0==e.version?(e.reader.skip(4),e.reader.skip(4),t.a=e.reader.J(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),t.a=e.reader.J(),e.reader.skip(8)),e.reader.skip(4)})).L("minf",Mr).L("stbl",Mr).ea("stsd",Nr).L("wvtt",(function(){n=!0})).parse(e),!this.a)throw new fe(2,2,2008);if(!n)throw new fe(2,2,2008)},jh.prototype.parseMedia=function(e,t){if(!this.a)throw new fe(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,l=!1,c=null;if((new Lr).L("moof",Mr).L("traf",Mr).ea("tfdt",(function(e){o=!0,i=0==e.version?e.reader.J():e.reader.pb()})).ea("tfhd",(function(e){var t=e.flags;(e=e.reader).skip(4),1&t&&e.skip(8),2&t&&e.skip(4),c=8&t?e.J():null})).ea("trun",(function(e){s=!0;var t=e.version,n=e.flags,i=(e=e.reader).J();1&n&&e.skip(4),4&n&&e.skip(4);for(var a=[],o=(i=u(Q(i))).next();!o.done;o=i.next())o={duration:null,sampleSize:null,nd:null},256&n&&(o.duration=e.J()),512&n&&(o.sampleSize=e.J()),1024&n&&e.skip(4),2048&n&&(o.nd=0==t?e.J():e.Kd()),a.push(o);r=a})).L("mdat",Ur((function(e){l=!0,n=e}))).parse(e,!1),!l&&!o&&!s)throw new fe(2,2,2008);for(var d=i,h=new Dr(n,0),p=u(r),f=p.next();!f.done;f=p.next()){var g=(f=f.value).duration||c,v=f.nd?i+f.nd:d;d=v+(g||0);var y=0;do{var m=h.J();y+=m;var b=null;"vttc"==Fr(h.J())?8<m&&(b=h.Wa(m-8)):h.skip(m-8),g&&b&&(m=Kh(b,t.periodStart+v/this.a,t.periodStart+d/this.a),a.push(m))}while(f.sampleSize&&y<f.sampleSize)}return a.filter(Tt)},F("shaka.text.Mp4VttParser",jh),jh.prototype.parseMedia=jh.prototype.parseMedia,jh.prototype.parseInit=jh.prototype.parseInit,$n['application/mp4; codecs="wvtt"']=function(){return new jh},F("EmeEncryptionSchemePolyfill",Gh),Gh.install=zh,F("McEncryptionSchemePolyfill",$h),$h.install=Xh,Jh.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Jh.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},F("EncryptionSchemePolyfills",np),np.install=ip,void 0!==n&&n.exports&&(n.exports=np)}.call(n,e,e,void 0),n.shaka)t[i]=n.shaka[i]}()})),vt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function yt(){throw new Error("setTimeout has not been defined")}function mt(){throw new Error("clearTimeout has not been defined")}var bt=yt,Et=mt;function At(e){if(bt===setTimeout)return setTimeout(e,0);if((bt===yt||!bt)&&setTimeout)return bt=setTimeout,setTimeout(e,0);try{return bt(e,0)}catch(t){try{return bt.call(null,e,0)}catch(t){return bt.call(this,e,0)}}}"function"==typeof vt.setTimeout&&(bt=setTimeout),"function"==typeof vt.clearTimeout&&(Et=clearTimeout);var kt,Tt=[],_t=!1,wt=-1;function St(){_t&&kt&&(_t=!1,kt.length?Tt=kt.concat(Tt):wt=-1,Tt.length&&Ct())}function Ct(){if(!_t){var e=At(St);_t=!0;for(var t=Tt.length;t;){for(kt=Tt,Tt=[];++wt<t;)kt&&kt[wt].run();wt=-1,t=Tt.length}kt=null,_t=!1,function(e){if(Et===clearTimeout)return clearTimeout(e);if((Et===mt||!Et)&&clearTimeout)return Et=clearTimeout,clearTimeout(e);try{Et(e)}catch(t){try{return Et.call(null,e)}catch(t){return Et.call(this,e)}}}(e)}}function Rt(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Tt.push(new It(e,t)),1!==Tt.length||_t||At(Ct)}function It(e,t){this.fun=e,this.array=t}It.prototype.run=function(){this.fun.apply(null,this.array)};var xt=vt.performance||{};xt.now||xt.mozNow||xt.msNow||xt.oNow||xt.webkitNow;function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Lt(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ht(e):t}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ft(e);if(t){var r=Ft(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return jt(this,n)}}function Gt(e,t,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ft(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||Yt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(n[a]===e)return!0;a++}return!1}}),Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var $t=function(){function e(){Pt(this,e)}return Lt(e,null,[{key:"s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"generate",value:function(){return"".concat(this.s4()+this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4()).concat(this.s4()).concat(this.s4())}}]),e}(),Xt=function(e){return e&&"function"==typeof e.getTime?Math.trunc(e.getTime()/1e3):NaN},Zt=!V.isChrome&&!V.isChromecast&&!V.isSmartTvEnvironment,Qt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pt(this,e),this.httpOnly=t,this.protocol="http".concat(t?"":"s"),this.customEnv=n}return Lt(e,null,[{key:"isInternal",get:function(){return/(ef(-.*)?|publish\.api\.video|player)(\.qa01|\.local|\.dev)?\.globoi\.com$/.test(location.hostname)}},{key:"isLocalhost",get:function(){return["localhost","127.0.0.1"].includes(location.hostname)}},{key:"isGloboiDomain",get:function(){return/\.globoi\.com$/.test(location.hostname)}},{key:"isGloboDomain",get:function(){return!this.isInternal&&/\.globo\.com$/.test(location.hostname)}},{key:"playerId",get:function(){return this._playerId||(this._playerId=$t.generate()),this._playerId}},{key:"hashQueryString",get:function(){var e="&version=".concat("1.24.0"),t="hash?".concat("resource_id=<%= resourceId %>").concat("<%= callback ? '&callback=' + callback : '' %>").concat(e).concat("&player=<%= player %>").concat("&tz=<%= tz %>").concat("&cdn=<%= cdn %>").concat("&profile=<%= profile %>").concat("<% if (flatUrl) { %>&flat_url=true<% } %>");return Zt&&(t+="&ts=<%= ts %>"),t}}]),Lt(e,[{key:"blackVideoUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mp4")}},{key:"blackVideoStreamingUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.m3u8")}},{key:"blackDashUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mpd")}}],[{key:"get",value:function(t,n,i){return"qa1"===t&&(t="dev"),new e[t=e.isInternal?"dev"===t?"internalDev":"internal":t||"prod"](n,i)}}]),e}();Qt.local=le.extend(Qt,{get name(){return"local"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")},get hashTemplate(){return xe("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Qt.hashQueryString))},get playlistTemplate(){return xe("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return xe("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Qt.dev=le.extend(Qt,{get name(){return"dev"},get securityHost(){return"".concat(this.protocol,"://security.video.dev.globoi.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.dev.globoi.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback.video.dev.globoi.com/v3/video-session")},get hashTemplate(){return xe("".concat(this.protocol,"://security.video.dev.globoi.com/videos/<%= videoId %>/").concat(Qt.hashQueryString))},get playlistTemplate(){return xe("".concat(this.protocol,"://api.globovideos.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return xe("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Qt.internalDev=le.extend(Qt,{get name(){return"internalDev"},get securityHost(){return"".concat(this.protocol,"://api.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://internal-playback.backstage.dev.globoi.com/internal/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://internal-playback.backstage.dev.globoi.com/internal/v3/video-session")},get hashTemplate(){return xe("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(Qt.hashQueryString))},get playlistTemplate(){return xe("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return xe("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Qt.internal=le.extend(Qt,{get name(){return"internal"},get securityHost(){return"".concat(this.protocol,"://api.video.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://internal-playback.backstage.globoi.com/internal/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://internal-playback.backstage.globoi.com/internal/v3/video-session")},get hashTemplate(){return xe("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(Qt.hashQueryString))},get playlistTemplate(){return xe("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return xe("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Qt.prod=le.extend(Qt,{get name(){return"prod"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")},get hashTemplate(){return xe("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Qt.hashQueryString))},get playlistTemplate(){return xe("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return xe("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Qt.custom=le.extend(Qt.prod,{get name(){return"custom"},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")}});var Jt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pt(this,e),this.options=n,this.id=t.id,this.title=t.title,this.kind=t.kind,this.program=t.program,this.channel=t.channel,this.category=t.category,this.createdAt=t.created_at,this.exhibitedAt=t.exhibited_at,this.programId=t.program_id,this.channelId=t.channel_id,this.duration=t.duration,this.serviceId=t.service_id,this.providerId=t.provider_id,this.providerUrl=t.provider_url,this.type=t.type,this.affiliate=t.affiliate,this.geofencing=!!t.geofencing,this.isSubscriberOnly=!!t.subscriber_only,this.encrypted=!!t.encrypted,this.isArchived=t.archived,this.urlForConsumption=t.url_for_consumption,this.adult=t.adult,this.contentRating=t.content_rating,this.contentRatingCriteria=t.content_rating_criteria,this.isSelfRated=t.self_rated,this.adUnit=t.ad_unit,this.adCustomData=t.ad_custom_data,this.adAccountId=t.ad_account_id,this.adCmsId=t.ad_cms_id,this.cuepoints=t.cuepoints,this.rawData=t,this.rawData.videos=[t],this.selectedLevel=n.selectedLevel,this.preferredLevel=n.preferredLevel,this.preferredCDN=n.preferredCDN,this.posterImageUrls=this.createPosterImageUrl(),this.drm=e.getDRMProtocol()}return Lt(e,[{key:"isLive",get:function(){return"Live"===this.type}},{key:"posterTemplate",get:function(){var e;return null===(e=this.options.env)||void 0===e?void 0:e.posterTemplate}}]),Lt(e,[{key:"createPosterImageUrl",value:function(){var e=this,t=this.posterTemplate;if(t){var n=Number(this.id)%4+1,i={};return[240,360,720].forEach((function(r){i[r]=t({domainNumber:n,size:"x".concat(r),videoId:e.id})})),i}}}],[{key:"getDRMProtocol",value:function(){var t=(e.overrides||{}).getDRMProtocol;return"function"==typeof t?t():V.isSmartTvEnvironment?"playready":e.getDesktopDRMProtocol()}},{key:"getDesktopDRMProtocol",value:function(){return V.isSafari||V.isiOS?"fairplay":V.isChrome||V.isFirefox||V.isChromecast?"widevine":"playready"}},{key:"getPlayerType",value:function(){var t=(e.overrides||{}).getPlayerType;return"function"==typeof t?t():V.isMobile?V.isAndroid?V.preventUsingCookies?"android_flat":"android":V.isiOS?"safari_mobile":V.isWindowsPhone?"windows_phone":"html5":V.isChromecast?"chromecast":V.isSafari?"safari":V.preventUsingCookies?"desktop_flat":"desktop"}}]),e}(),en=function(e,t){var n=t+1-e.toString().length;return new Array(Math.max(0,n)).join("0")+e},tn="0123456789abcdef",nn=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=tn.charAt(i>>>4&15)+tn.charAt(15&i)}return t},rn=function(){return new Date},an=function(){return rn().getTime()},on=function(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(t){return!(t&&void 0===(e=e[t]))}))?e:n},sn=function(){var e=-rn().getTimezoneOffset(),t=Math.abs(e)/60,n=Math.abs(e)%60;return"".concat(0===e?"":e>0?"+":"-").concat(en(t,2),":").concat(en(n,2))},ln=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?window.unescape(t[2]):null},un=function(e){var t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},n=function(e,n,i,r,a,o){return t((s=t(t(n,e),t(r,o)))<<(l=a)|s>>>32-l,i);var s,l},i=function(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)},r=function(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)},a=function(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)},o=function(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)};return function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var s=1732584193,l=-271733879,u=-1732584194,c=271733878,d=0;d<e.length;d+=16){var h=s,p=l,f=u,g=c;s=i(s,l,u,c,e[d+0],7,-680876936),c=i(c,s,l,u,e[d+1],12,-389564586),u=i(u,c,s,l,e[d+2],17,606105819),l=i(l,u,c,s,e[d+3],22,-1044525330),s=i(s,l,u,c,e[d+4],7,-176418897),c=i(c,s,l,u,e[d+5],12,1200080426),u=i(u,c,s,l,e[d+6],17,-1473231341),l=i(l,u,c,s,e[d+7],22,-45705983),s=i(s,l,u,c,e[d+8],7,1770035416),c=i(c,s,l,u,e[d+9],12,-1958414417),u=i(u,c,s,l,e[d+10],17,-42063),l=i(l,u,c,s,e[d+11],22,-1990404162),s=i(s,l,u,c,e[d+12],7,1804603682),c=i(c,s,l,u,e[d+13],12,-40341101),u=i(u,c,s,l,e[d+14],17,-1502002290),l=i(l,u,c,s,e[d+15],22,1236535329),s=r(s,l,u,c,e[d+1],5,-165796510),c=r(c,s,l,u,e[d+6],9,-1069501632),u=r(u,c,s,l,e[d+11],14,643717713),l=r(l,u,c,s,e[d+0],20,-373897302),s=r(s,l,u,c,e[d+5],5,-701558691),c=r(c,s,l,u,e[d+10],9,38016083),u=r(u,c,s,l,e[d+15],14,-660478335),l=r(l,u,c,s,e[d+4],20,-405537848),s=r(s,l,u,c,e[d+9],5,568446438),c=r(c,s,l,u,e[d+14],9,-1019803690),u=r(u,c,s,l,e[d+3],14,-187363961),l=r(l,u,c,s,e[d+8],20,1163531501),s=r(s,l,u,c,e[d+13],5,-1444681467),c=r(c,s,l,u,e[d+2],9,-51403784),u=r(u,c,s,l,e[d+7],14,1735328473),l=r(l,u,c,s,e[d+12],20,-1926607734),s=a(s,l,u,c,e[d+5],4,-378558),c=a(c,s,l,u,e[d+8],11,-2022574463),u=a(u,c,s,l,e[d+11],16,1839030562),l=a(l,u,c,s,e[d+14],23,-35309556),s=a(s,l,u,c,e[d+1],4,-1530992060),c=a(c,s,l,u,e[d+4],11,1272893353),u=a(u,c,s,l,e[d+7],16,-155497632),l=a(l,u,c,s,e[d+10],23,-1094730640),s=a(s,l,u,c,e[d+13],4,681279174),c=a(c,s,l,u,e[d+0],11,-358537222),u=a(u,c,s,l,e[d+3],16,-722521979),l=a(l,u,c,s,e[d+6],23,76029189),s=a(s,l,u,c,e[d+9],4,-640364487),c=a(c,s,l,u,e[d+12],11,-421815835),u=a(u,c,s,l,e[d+15],16,530742520),l=a(l,u,c,s,e[d+2],23,-995338651),s=o(s,l,u,c,e[d+0],6,-198630844),c=o(c,s,l,u,e[d+7],10,1126891415),u=o(u,c,s,l,e[d+14],15,-1416354905),l=o(l,u,c,s,e[d+5],21,-57434055),s=o(s,l,u,c,e[d+12],6,1700485571),c=o(c,s,l,u,e[d+3],10,-1894986606),u=o(u,c,s,l,e[d+10],15,-1051523),l=o(l,u,c,s,e[d+1],21,-2054922799),s=o(s,l,u,c,e[d+8],6,1873313359),c=o(c,s,l,u,e[d+15],10,-30611744),u=o(u,c,s,l,e[d+6],15,-1560198380),l=o(l,u,c,s,e[d+13],21,1309151649),s=o(s,l,u,c,e[d+4],6,-145523070),c=o(c,s,l,u,e[d+11],10,-1120210379),u=o(u,c,s,l,e[d+2],15,718787259),l=o(l,u,c,s,e[d+9],21,-343485551),s=t(s,h),l=t(l,p),u=t(u,f),c=t(c,g)}return[s,l,u,c]}(function(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}(function(e,t){var n,i,r="",a=-1;for(e+=t.substr(1,8);++a<e.length;)n=e.charCodeAt(a),i=a+1<e.length?e.charCodeAt(a+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((1023&n)<<10)+(1023&i),a++),n<=127?r+=String.fromCharCode(n):n<=2047?r+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r}(e,"=0xAC10FD"))},cn={applySizeClass:function(e,t){t&&"number"==typeof t&&(e.removeClass("w960 w640 w540 w480 w360"),t<=360?e.addClass("w360"):t<=480?e.addClass("w480"):t<540?e.addClass("w540"):t<=640?e.addClass("w640"):e.addClass("w960"))},toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},embedScript:function(e){var t=U.Deferred(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){t.resolve()},n.onerror=function(e){t.reject(e)},document.head.appendChild(n),t.promise()},get:on,getCookie:ln,getCurrentDate:rn,getCurrentTime:an,getExpiresDateInGMT:function(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},getHostname:function(){return location.hostname},getHostAndPathName:function(){var e=(location.pathname||"").split("/")||[];return location.hostname+(e.length>0?"/".concat(e[1]):"")},isNaN:function(e){return e!=e},iso8601TimezoneOffset:sn,loadUrlAsImage:function(e){var t=new Image;return t.src=e,t},now:function(){return window.performance&&window.performance.now&&performance.now()||Date.now()},percent:function(e,t){return 0===e?e:e/t*100},toDurationString:function(e){var t,n=e/6e4,i=[0,1,2,3,4,5,7,10];for(t=0;t<i.length&&!(n<i[t]);t++);return t<i.length?"".concat(en(i[t-1],2),":0").concat(0===t?0:1," - ").concat(en(i[t],2),":00"):"10:01 +"},secondsToMillis:function(e){return 1e3*e>>0},copyToClipboard:function(e,t){if(t){var n=U('<textarea style="opacity:0" class="copytextarea"/>');n.text(e),t.append(n[0]);var i=t.find(".copytextarea")[0],r=document.activeElement;i.focus(),i.select();var a=document.execCommand("copy");return n.remove(),r.focus(),a}},mergePlugins:function(e,t){var n=[];return e.concat(t).filter((function(e){if(!e)return!1;var t=e.prototype.name,i=-1===n.indexOf(t);return i&&n.push(t),i}))},hexGrf:function(e){return nn(un(e))}},dn={jsonp:function(e){var t=new U.Deferred;e.callbackName=e.callbackName||"json_callback",e.timeout=e.timeout||15e3,window[e.callbackName]=function(e){dn.isErrorObject(e)?t.reject(e):t.resolve(e)};var n=U("head")[0],i=document.createElement("script");return i.setAttribute("src",e.url),i.setAttribute("async","async"),i.onload=i.onreadystatechange=function(t){i.readyState&&!/loaded|complete/.test(i.readyState)||(e.timeoutId&&window.clearTimeout(e.timeoutId),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=void 0)},i.onerror=function(){t.reject({error:!0,message:"jsonp load error"})},n.insertBefore(i,n.firstChild),e.error&&(e.timeoutId=window.setTimeout(e.error,e.timeout)),t.promise()},isErrorObject:function(e){return e&&e.http_status_code&&200!==e.http_status_code}},hn={isFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.webkitDisplayingFullscreen},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}},pn=V.isSmartTvEnvironment?["google","$YB"]:["google","google.ima.settings","google.ima.dai","$YB"],fn=function(){function e(){Pt(this,e),this.loadScriptsIntervalId=null,this.loadScriptsAttempts=5}return Lt(e,[{key:"ready",value:function(){return!pn.filter((function(e){return void 0===on(window,e,void 0)})).length}},{key:"isAvailable",value:function(){var e=this,t=new U.Deferred;return this.loadScriptsIntervalId=setInterval((function(){e.ready()?(clearInterval(e.loadScriptsIntervalId),t.resolve()):e.loadScriptsAttempts--,e.loadScriptsAttempts||(clearInterval(e.loadScriptsIntervalId),t.reject())}),200),t.promise()}}]),e}(),gn=window.WM&&window.WM.version||"legacy_api",vn=function(e){return"object"===Dt(e.playerExperiments)},yn=function(e,t){return e.playerExperiments&&e.playerExperiments[t]},mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!vn(e))return"";var n=yn(e,t);return n&&n.alternative||""},bn=function(){function e(){Pt(this,e)}return Lt(e,null,[{key:"keyspaceFor",value:function(e){return"wm.player.".concat(e)}},{key:"load",value:function(e,t){return this.loadRaw(this.keyspaceFor(e),t)}},{key:"loadRaw",value:function(e,t){if(V.hasLocalstorage&&localStorage[e])return t?t(localStorage[e]):localStorage[e]}},{key:"store",value:function(e,t){return this.storeRaw(this.keyspaceFor(e),t)}},{key:"storeRaw",value:function(e,t){if(V.hasLocalstorage)try{return localStorage[e]=t,!0}catch(e){return!1}return!1}}]),e}(),En={code:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0},An={DEFAULT_ERROR:En,AUTH_REQUIRED:Ut(Ut({},En),{},{code:"login-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_AUTHORIZED:Ut(Ut({},En),{},{code:"device-not-registered",description:"Device needs register to play content.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:Ut(Ut({},En),{},{code:"player-type-not-supported",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:Ut(Ut({},En),{},{code:"geo-fencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:Ut(Ut({},En),{},{code:"geo-block",description:"This video cannot be played in the current region.",reportAs:"INFO"}),HASH_LOAD_ERROR:Ut(Ut({},En),{},{code:"security-load-error",description:"Error loading hash."}),PLAYER_NOT_RECOGNIZED:Ut(Ut({},En),{},{code:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:Ut(Ut({},En),{},{code:"resource-load-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:Ut(Ut({},En),{},{code:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:Ut(Ut({},En),{},{code:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:Ut(Ut({},En),{},{code:"video-not-found",description:"Content not available.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:Ut(Ut({},En),{},{code:"playlist-load-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:Ut(Ut({},En),{},{code:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:Ut(Ut({},En),{},{code:"simultaneous-access-exceeded",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:Ut(Ut({},En),{},{code:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:Ut(Ut({},En),{},{code:"user-not-authorized",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:Ut(Ut({},En),{},{code:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:Ut(Ut({},En),{},{code:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:Ut(Ut({},En),{},{code:"timestamp-error",description:"Timestamp error.",reportAs:"INFO"})},kn=function(){function e(){Pt(this,e)}return Lt(e,null,[{key:"getLocation",value:function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(Ut({error:e},An.LOCATION_UNAVAILABLE))})):t(An.LOCATION_UNAVAILABLE)}))}}]),e}(),Tn=function(){function e(){Pt(this,e)}return Lt(e,null,[{key:"params",get:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1),a={};e=n.exec(r);)a[i(e[1]).toLowerCase()]=i(e[2]);return a}}]),e}(),_n=function(){var e=0,t=Tn.params.s||"",n=t.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else t&&(e=parseInt(t,10));return e},wn=function(){function e(){Pt(this,e)}return Lt(e,null,[{key:"getProviderCookieName",value:function(e){return e?"WMPTOKEN_".concat(e):"GLBID"}},{key:"hasGlbId",value:function(){var e=ln("GLBID");return"string"==typeof e&&e.length>10}},{key:"hasTokenForProvider",value:function(e){if(!e)return this.hasGlbId();var t=this.getProviderCookieName(e);return!!t&&"string"==typeof ln(t)}},{key:"isExperimentEnabled",value:function(e,t){var n="experiment.".concat(e),i=bn.load(n,parseFloat);return i||(i=Math.random(),bn.store(n,i)),i<=t}},{key:"uid",get:function(){var e="user.uid",t=bn.load(e);return t||(t=$t.generate(),bn.store(e,t)),t}}]),e}(),Sn={hasPlayerElement:function(e){if(e&&e.childNodes.length>0){var t=Array.prototype.slice.call(e.childNodes).find((function(e){return"DIV"===e.tagName&&-1!==e.id.indexOf("wp3-player-")}));return t&&!!document.getElementById(t.id)}return!1},hasChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=e.id||"function"==typeof e.attr&&e.attr("id"),i="#".concat(n," ").concat(t),r=!!document.querySelectorAll(i).length;return r}},isIframe:function(){return window.top!==window}},Cn=new(function(){function e(){Pt(this,e),this.sessions={}}return Lt(e,[{key:"startSession",value:function(e){if(e){var t=this.sessions[e]||{};this.sessions[e]=Ut(Ut({},t),{},{sessionId:$t.generate()})}}},{key:"getVideoSessionId",value:function(e){if(this.sessions[e])return this.sessions[e].sessionId}},{key:"storeLockId",value:function(e,t){this.sessions[e]&&t&&(this.sessions[e].lockId=t)}},{key:"getLockId",value:function(e){if(this.sessions[e])return this.sessions[e].lockId}}]),e}()),Rn="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO=document.createElement("video"),window.WM_PLAYER_VIDEO_TAG_TEST_MUTE=document.createElement("video");var In=new(function(){function e(){Pt(this,e),this._deferred=new U.Deferred,this.playerHasConsent=!1,this._setBrowserFlags()}return Lt(e,[{key:"isAutoPlayMutedAllowed",value:function(e){return this.isAvailable(!0)&&e.autoPlay}},{key:"allowAutoplay",value:function(e){return e.autoPlay&&this.canAutoPlayMuted||V.isSmartTvEnvironment&&e.autoPlay||V.isChromecast}},{key:"onAutoplayAvailable",value:function(e,t,n){var i=this;return this._deferred.then((function(){i.allowAutoplay(t)?e():null==n||n()}))}},{key:"isAvailable",value:function(e){return V.isSmartTvEnvironment||this.playerHasConsent||this.isAllowedWithAudio||e&&this.isAllowedWithoutAudio}},{key:"consent",value:function(){this.playerHasConsent=!0}},{key:"_setBrowserFlags",value:function(){var e=this;if(V.isSmartTvEnvironment||V.isChromecast)this._deferred.resolve();else{var t=this._createVideoElement(Rn,!1),n=this._createVideoElement(Rn,!0);V.isMobile?this.isAllowedWithAudio=!1:this._setFlag(t,"isAllowedWithAudio"),this._setFlag(n,"isAllowedWithoutAudio"),setTimeout((function(){return e._deferred.resolve()}),5e3)}}},{key:"_setFlag",value:function(e,t){var n=this,i=e.play();i?i.then((function(){n[t]=!0}),(function(){n[t]=!1})).then((function(){return n._resolve()})):(this[t]=!V.isMobile,this._resolve())}},{key:"_resolve",value:function(){"isAllowedWithAudio"in this&&"isAllowedWithoutAudio"in this&&this._deferred.resolve()}},{key:"_createVideoElement",value:function(e,t){var n=t?window.WM_PLAYER_VIDEO_TAG_TEST_MUTE:window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO;return n.src=e,n.muted=t,n.playsInline=!0,n}},{key:"canAutoPlayMuted",get:function(){return this.isAvailable(!0)}},{key:"canAutoPlayUnmuted",get:function(){return this.isAvailable(!1)}}]),e}()),xn=function(e){try{if("object"===Dt(e))return JSON.stringify(e)}catch(e){}return e},Dn={html5_video:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls_fairplay_playback:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls:function(e){switch(e.raw.type){case ft.ErrorTypes.NETWORK_ERROR:switch(e.raw.details){case ft.ErrorDetails.MANIFEST_LOAD_ERROR:case ft.ErrorDetails.LEVEL_LOAD_ERROR:case ft.ErrorDetails.FRAG_LOAD_ERROR:case ft.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:var t=e.raw.response;return!(t.code>=400&&t.code<500);case ft.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case ft.ErrorDetails.LEVEL_LOAD_TIMEOUT:case ft.ErrorDetails.FRAG_LOAD_TIMEOUT:case ft.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:return!0;default:return!1}default:return!1}},dash_shaka_playback:function(e){var t=e.raw.code||e.raw.detail&&e.raw.detail.code,n=e.raw.data||e.raw.detail&&e.raw.detail.data;switch(t){case gt.util.Error.Code.BAD_HTTP_STATUS:var i=zt(n,2)[1];return!(i>=400&&i<500);case gt.util.Error.Code.HTTP_ERROR:case gt.util.Error.Code.TIMEOUT:return!0;default:return!1}}},Pn=function(e,t){return Dn[e]&&Dn[e](t)},On=function(e,t){return t&&"function"==typeof t.getTime?Math.trunc(t.getTime()/1e3+e):NaN},Ln=function(e){var t=e.getCurrentTime(),n=e.getProgramDateTime?new Date(e.getProgramDateTime()):null;return On(t,n)},Mn=function(e,t){return Ln(e)-t},Nn=function(e,t){return e.getCurrentTime()-Mn(e,t)},Un=Ut(Ut({},cn),{},{Ajax:dn,getExperimentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!vn(e))return[];var t=Object.keys(e.playerExperiments)||[],n=t.map((function(t){var n=e.playerExperiments[t];return n&&n.alternative||""}))||[];return n=n.filter((function(e){return""!==e}))},getExperimentAlternative:mn,Fullscreen:hn,getDeviceType:function(){return V.isChromecast?"cast":V.isSmartTvEnvironment?"tv":V.isMobile?"mobile":"desktop"},getPlatformName:function(e){return"web-".concat(e)},isNaN:isNaN,LocalStorage:bn,Location:kn,QueryString:Tn,toQueryString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return e[t]||""===e[t]||0===e[t]},n=encodeURIComponent,i=Object.keys(e);return i.filter(t).map((function(t){return"".concat(n(t),"=").concat(n(e[t]))})).join("&")},seekStringToSeconds:_n,rstr2hex:nn,rstr2b64:function(e){for(var t="",n=e.length,i=0;i<n;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),a=0;a<4;a++)8*i+6*a>8*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-a)&63);return t},zeroPad:en,User:wn,Uid:$t,registerGlobal:function(e){pn.push(e)},GlobalsManager:fn,getUnixTimestamp:Xt,truncateTimeSeconds:function(e){var t=new Date(1e3*e);return t.setSeconds(0,0),Xt(t)},isTimestampOnHashNeeded:Zt,DOM:Sn,API_VERSION:gn,convertToString:xn,autoplayManager:In,session:Cn,checkRecoverableError:Pn,getTimeFromPosition:On,getCurrentTime:Ln,getLiveDifferenceFromTime:Mn,getPositionFromTime:Nn}),Bn={getStyleFrom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""},n=t||{},i=xe(e.toString())(n);return n.playerId&&(i=i.replace(/\#wp3-player-0/g,"#wp3-player-".concat(n.playerId))),U('<style class="clappr-style"></style>').html(i)}},Fn=function e(){Pt(this,e)};Fn.WM_PLAY_REQUESTED="wm:play:requested",Fn.WM_USER_PLAY_REQUESTED="wm:user:play:requested",Fn.WM_PLAY_REQUESTED_READY="wm:play:requested:ready",Fn.CHROMECAST_SCRIPT_ERROR="chromecast:script:error",Fn.CHROMECAST_SCRIPT_LOADED="chromecast:script:loaded",Fn.CHROMECAST_API_ERROR="chromecast:api:error",Fn.CHROMECAST_API_READY="chromecast:api:ready",Fn.CHROMECAST_INITIALIZE_ERROR="chromecast:initialize:error",Fn.CHROMECAST_INITIALIZE_SUCCESS="chromecast:initialize:success",Fn.CHROMECAST_AVAILABLE="chromecast:available",Fn.CHROMECAST_UNAVAILABLE="chromecast:unavailable",Fn.CHROMECAST_LAUNCH_REQUEST="chromecast:launch:request",Fn.CHROMECAST_LAUNCH_ERROR="chromecast:launch:error",Fn.CHROMECAST_LAUNCH_SUCCESS="chromecast:launch:success",Fn.CHROMECAST_MEDIA_LOAD_ERROR="chromecast:mediaload:error",Fn.CHROMECAST_MEDIA_LOAD_SUCCESS="chromecast:mediaload:success",Fn.CHROMECAST_MEDIA_WATCHING="chromecast:media:watching",Fn.CHROMECAST_MEDIA_STOP_WATCHING="chromecast:mediastop:watching",Fn.ADS_REQUEST_READY="ads:request:ready",Fn.DFP_MANAGER_LOADED="dfp:manager:loaded",Fn.DFP_ENABLE="dfp:enable",Fn.DFP_DISABLE="dfp:disable",Fn.DFP_AD_LOADED="dfp:ad:loaded",Fn.DFP_AD_CLOSED="dfp:ad:closed",Fn.DFP_AD_STARTED="dfp:ad:started",Fn.DFP_AD_RESUME="dfp:playback:resume",Fn.DFP_AD_PAUSE="dfp:playback:pause",Fn.DFP_AD_CLICKED="dfp:ad:clicked",Fn.DFP_AD_COMPLETED="dfp:ad:completed",Fn.DFP_AD_SKIPPED="dfp:ad:skipped",Fn.DFP_AD_NOTSERVED="dfp:ad:notserved",Fn.DFP_AD_ERROR="dfp:ad:error",Fn.DFP_AD_METADATA="dfp:metadata",Fn.DFP_ALL_ADS_COMPLETED="dfp:allads:completed",Fn.DFP_CONTENT_PAUSE="dfp:content:pause",Fn.DFP_CONTENT_RESUME="dfp:content:resume",Fn.DFP_CONTENT_STARTED="dfp:content:started",Fn.DFP_CONTENT_ENDED="dfp:content:ended",Fn.DFP_FINISHED="dfp:finished",Fn.DFP_AD_BREAK_READY="dfp:adbreak:ready",Fn.DFP_INVALID_AD="dfp:invalid:ad",Fn.YOUBORA_TIMEMARK="youbora:timemark",Fn.DID_LOAD_CUEPOINTS="wm:didloadcuepoints",Fn.DID_REACH_CUEPOINT="wm:didreachcuepoint",Fn.DID_LOAD_EPG="wm:didloadepg",Fn.DID_CHANGE_CURRENT_PROGRAM="wm:didchangecurrentprogram",Fn.WM_STREAMING_DATA_LOADED="wm:streamingdata:loaded",Fn.WM_VIDEO_METADATA_REQUEST_COMPLETE="wm:videometadata:request:complete",Fn.WM_VIDEO_METADATA_LOADED="wm:videometadata:loaded",Fn.WM_VIDEO_METADATA_ERROR="wm:videometadata:error",Fn.WM_RESOURCE_LOADED="wm:resource:loaded",Fn.WM_RESOURCE_SELECTED="wm:resource:selected",Fn.WM_RESOURCE_REQUEST_STATS="wm:resource:request:stats",Fn.WM_AUTOPLAY_BLOCKED="wm:autoplay:blocked",Fn.WM_REQUEST_HASH="wm:request:hash",Fn.WM_HASH_RECEIVED="wm:hash:received",Fn.WM_RESOURCE_READY="wm:resource:ready",Fn.WM_RESOURCE_ERROR="wm:resource:error",Fn.WM_SETTINGS_SHOW="wm:settings:show",Fn.WM_VOLUME_SHOW="wm:volume:show",Fn.WM_VOLUME_HIDE="wm:volume:hide",Fn.WM_MUTED="wm:muted",Fn.WM_UNMUTED="wm:unmuted",Fn.WM_SHARE_SHOW="wm:share:show",Fn.WM_SHARE_HIDE="wm:share:hide",Fn.WM_SPINNER_START="wm:spinner:start",Fn.WM_SPINNER_STOP="wm:spinner:stop",Fn.WM_SETTINGS_HIDE="wm:settings:hide",Fn.WM_SETTINGS_OPTIONS_CHANGED="wm:settings:options:changed",Fn.WM_SETTINGS_LEVEL_SELECTED="wm:settings:level:selected",Fn.WM_LEVELSELECTOR_READY="wm:levelselector:ready",Fn.WM_AUDIOSELECTOR_READY="wm:audioselector:ready",Fn.STREAMSENSE_READY="streamsense:ready",Fn.WM_SUBTITLE_CHANGED="wm:subtitle:changed",Fn.WM_SUBTITLE_CONTENT_CHANGED="wm:subtitle:content:changed",Fn.WM_SUBTITLE_AVAILABLE="wm:subtitle:available",Fn.WM_AUDIO_CHANGED="wm:audio:changed",Fn.WM_AUDIO_AVAILABLE="wm:audio:available",Fn.WM_WROOM_WAITING="wm:waiting:wroom",Fn.WM_PLAYBACK_CAN_PLAY="wm:playback:canplay",Fn.WM_PLAYBACK_WILL_PLAY="wm:playback:willplay",Fn.WM_PLAYBACK_BUILT="wm:playback:built",Fn.WM_PIP_ADDED="wm:pip:added",Fn.WM_PIP_DISCARDED="wm:pip:discarded",Fn.WM_MASTER_ADDED="wm:master:added",Fn.WM_MASTER_CHANGED="wm:master:changed",Fn.WM_PIPTOMASTER="wm:piptomaster",Fn.WM_MASTERTOPIP="wm:mastertopip",Fn.WM_STATS_REPORTED="wm:stats:reported",Fn.WM_LOCATION_AVAILABLE="wm:location:available",Fn.WM_GA_UNTRACKED_EVENT="wm:ga:untracked:event",Fn.WILL_CHANGE_SOURCE="willChangeSource",Fn.WILL_SELECT_FALLBACK_SOURCE="will:select:fallback:source",Fn.FALLBACK_SOURCE_SELECTED="fallback:source:selected",Fn.WILL_RENEW_RESOURCE="willRenewResource",Fn.WM_BITRATE_CAP="wm:bitrate:cap",Fn.PLAYER_PIP_ADDED="player:pip:added",Fn.PLAYER_PIP_DISCARDED="player:pip:discarded",Fn.PLAYER_MASTER_ADDED="player:master:added",Fn.PLAYER_MASTER_CHANGED="player:master:changed",Fn.PLAYER_PIPTOMASTER="player:piptomaster",Fn.PLAYER_CAN_PLAY="player:canplay",Fn.WILL_SHOW_MODAL_ELEMENT="will:show:mediacontrol:element:modal",Fn.DID_HIDE_MODAL_ELEMENT="did:hide:mediacontrol:element:modal",Fn.MEDIACONTROL_MODAL_SHOW="mediacontrol:showmodal",Fn.MEDIACONTROL_MODAL_HIDE="mediacontrol:hidemodal",Fn.MEDIACONTROL_KEEPVISIBLE="mediacontrol:keepvisible",Fn.MEDIACONTROL_ITEMCLICKED="mediacontrol:itemclicked",Fn.MEDIACONTROL_DOUBLE_TAP="mediacontrol:doubletap",Fn.WILL_QUICK_SEEK="will:quickseek",Fn.WILL_SHOW_QUICK_SEEK_HINT="will:show:quick:seek:hint",Fn.WILL_HIDE_QUICK_SEEK_HINT="will:hide:quick:seek:hint",Fn.PLAYER_MEDIACONTROL_SHOW="player:mediacontrol:show",Fn.PLAYER_MEDIACONTROL_HIDE="player:mediacontrol:hide",Fn.SKIP_BUTTON_SHOW="skip:button:show",Fn.SKIP_BUTTON_HIDE="skip:button:hide",Fn.SKIP_BUTTON_CLICKED="skip:button:clicked",Fn.BACK_BUTTON_CLICKED="back:button:clicked",Fn.TAP_TO_UNMUTE_CLICKED="taptounmute:clicked",Fn.TAP_TO_UNMUTE_SHOW="taptounmute:show",Fn.WILL_AUTO_SKIP_RECAP="will:auto:skip:recap",Fn.START_DRAGGING_SEEKBAR="start:dragging:seekbar",Fn.STOP_DRAGGING_SEEKBAR="stop:dragging:seekbar",Fn.SIMULCAST_PING="simulcastPing",Fn.SHOW_HEADER_REQUESTED="show:header:requested",Fn.WILL_SHOW_HEADER="will:show:header",Fn.DID_SHOW_HEADER="did:show:header",Fn.CLOSE_HEADER_REQUESTED="close:header:requested",Fn.WILL_CLOSE_HEADER="will:close:header",Fn.DID_CLOSE_HEADER="did:close:header",Fn.WILL_SHOW_DRAWER="will:show:drawer",Fn.DID_SHOW_DRAWER="did:show:drawer",Fn.DID_SHOW_DRAWER_HINT="did:show:drawer:hint",Fn.WILL_HIDE_DRAWER="will:hide:drawer",Fn.DID_HIDE_DRAWER="did:hide:drawer",Fn.DID_HIDE_DRAWER_HINT="did:hide:drawer:hint",Fn.HIDE_DRAWER_REQUESTED="hide:drawer:requested",Fn.SHOW_DRAWER_REQUESTED="show:drawer:requested",Fn.DRAWER_HAS_PLACEHOLDER="drawer:has:placeholder",Fn.SHOW_HEADER_REQUESTED="show:header:requested",Fn.SYNC_DRAWER_STATE_REQUEST="sync:drawer:state:request",Fn.SYNC_DRAWER_STATE_RESPONSE="sync:drawer:state:response",Fn.DID_SHOW_OVERLAY="did:show:overlay",Fn.DID_HIDE_OVERLAY="did:hide:overlay",Fn.WILL_RESTART_PLAYBACK="will:restart:playback",Fn.DID_RESTART_PLAYBACK="did:restart:playback",Fn.WATCH_SESSION_START="watchsession:start",Fn.WATCH_SESSION_END="watchsession:end",Fn.LANGUAGE_MENU_WILL_OPEN="language:menu:will:open",Fn.LANGUAGE_MENU_WILL_CLOSE="language:menu:will:close";var Vn={hlsMinimumDvrSize:120,playback:{controls:!0,preload:"none",playInline:!0,recycleVideo:V.isMobile},allowLocation:!1,disableVideoTagContextMenu:!0,maxQualityLevel:"max",skipWaitingRoom:!1},Hn=function(e){Bt(n,e);var t=Kt(n);function n(){return Pt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"_addContainerEventListeners",value:function(){Gt(Ft(n.prototype),"_addContainerEventListeners",this).call(this);var e=this.core.getCurrentPlayback();this.listenToOnce(e,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(e,Fn.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onCanPlay",value:function(){this.trigger(Fn.PLAYER_CAN_PLAY)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}},{key:"resize",value:function(e){U(this.element).css({width:e.width,height:e.height}),this.core&&Gt(Ft(n.prototype),"resize",this).call(this,e)}},{key:"eventsMapping",get:function(){return Object.assign(Gt(Ft(n.prototype),"eventsMapping",this),{onCanPlay:Fn.PLAYER_CAN_PLAY})}},{key:"defaultOptions",get:function(){return Vn}}],[{key:"version",get:function(){return"1.24.0"}},{key:"allVersions",get:function(){return{Player:n.version,Clappr:ct.version}}}]),n}(ct.Player);if(!window.console){window.console={log:function(){}}}ct.Log.setLevel(ct.Log.LEVEL_WARN);var jn=window.WM&&window.WM.Settings||{},Kn=jn&&jn.Domains||[],Gn=Un.DOM.isIframe,zn=function(e){Bt(n,e);var t=Kt(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pt(this,n);var i=Ut(Ut({},Vn),e);i.env=Qt.get(i.env,i.httpOnly,i.customEnv),Jt.overrides=i.overrides||{};var r=!1,a=Qt.isLocalhost&&r,o=!Qt.isGloboDomain,s=V.isSafari||V.isiOS||V.isSmartTvEnvironment,l=V.isMobile&&(Gn()||i.isIFrame),u=window.location&&"https:"!==window.location.protocol;return V.preventUsingCookies=(o||s||l||u)&&!a,t.call(this,i)}return Lt(n,[{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}}]),Lt(n,[{key:"attachTo",value:function(e){U(e).html(""),this.element=e,this.options.parentElement=e,this.options.customStyle&&this._renderCustomStyles(e,this.options.customStyle),this.core&&this.core.destroy(),Gt(Ft(n.prototype),"attachTo",this).call(this,e),this.core.$el.attr("id","wp3-player-".concat(this.core.options.playerId)),this.core.$el.addClass("clappr-player")}},{key:"_renderCustomStyles",value:function(e,t){var n=this;Object.values(t).forEach((function(t){var i=Bn.getStyleFrom(t,{playerId:n.options.playerId});U(e).append(i)}))}}]),n}(Hn);V.supportsFakeLocation=/puffin/i.test(navigator.userAgent),zn.isAllowedDomain=function(e){return!jn.Domains||Kn.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||ct;var Wn=/^\d+$/,Yn=Object.freeze({VIDEO_ID:"application/vnd.globo.videoid"}),qn=function(e,t){return Wn.test(e)||t===Yn.VIDEO_ID};be.register("PLAYBACK_METADATA_TRACK_CUE_CHANGE");var $n=function(e){Bt(n,e);var t=Kt(n);function n(){var e;Pt(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60,e.onAddTrack=e.onAddTrack.bind(Ht(e)),e}return Lt(n,[{key:"name",get:function(){return"html5"}},{key:"isLive",get:function(){return this.getPlaybackType()===Be.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}}]),Lt(n,[{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"_updateDvr",value:function(e){this.trigger(be.PLAYBACK_DVR,e),this.trigger(be.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){var t=e;e<0&&(fe.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(be.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"onAddTrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(){var e,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Yt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(n.activeCues);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=Mt({},r.value.key,r.value.data);t.trigger(be.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,a)}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"destroy",value:function(){this.el.textTracks.removeEventListener("addtrack",this.onAddTrack),Gt(Ft(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return Gt(Ft(n.prototype),"render",this).call(this),this.el.textTracks.addEventListener("addtrack",this.onAddTrack),this}}]),n}(it),Xn=/{{deviceId}}/g,Zn=function(e,t){return(t?e.replace("https://","http://"):e).replace(Xn,"ZDY4NDM5MDgtMzQ4Mi0zZGU5LThlZDQtYjRiNWM5ZjBmOWU5")},Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.drm||{},i=e.selectedResource.contentProtection,r={};return r[n]=Zn(i.server,t),{shakaConfiguration:{drm:{servers:{"com.microsoft.playready":r.playready||"","com.widevine.alpha":r.widevine||""}}},fairplay:{server:r.fairplay||"",certificate:i&&i.cert},licenseServer:r}},Jn=function(e,t,n){return t.loader.playbackPlugins.find((function(t){return t.canPlay(e.toString(),"",n)}))},ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=this,r=!V.isChromecast&&t&&t.url,a=e||r||n,o=this.video&&this.video.encrypted,s=V.isiOS&&!o&&$n.canPlay(a.toString(),"",o),l=s?$n:Jn(a,i.options,o),u=t&&t.contentProtection,c=o&&u?Qn(this.video,i.options.httpOnly):{},d=c.shakaConfiguration&&c.shakaConfiguration.drm||{},h=i.options.shakaConfiguration&&i.options.shakaConfiguration.drm||{},p={drm:Ut(Ut({},d),h)},f=Ut(Ut(Ut({},i.options),c),{},{shakaConfiguration:Ut(Ut(Ut({},i.options.shakaConfiguration||{}),c.shakaConfiguration||{}),p),autoPlay:!1,isLivePlayback:"live"===i.getPlaybackType(),src:a});return new l(f,i.i18n,i.playerError)},ti=function(e,t,n){var i=t.customErrors?t.customErrors:An,r=i.DEFAULT_ERROR;return e.code===i.NOT_FOUND.code||"Not found"===e.message?r=i.NOT_FOUND:e.code===i.SUBSCRIBERS_ONLY.code?("function"==typeof t.onUnauthorized&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r=i.SUBSCRIBERS_ONLY):e.code===i.AUTH_REQUIRED.code?("function"==typeof t.onUnauthorized&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),r=i.AUTH_REQUIRED):e.code===i.GEO_BLOCKED.code?r=i.GEO_BLOCKED:e.code===i.DEVICE_NOT_AUTHORIZED.code?r=i.DEVICE_NOT_AUTHORIZED:e.code===i.SIMULTANEOUS_ACCESS.code?r=i.SIMULTANEOUS_ACCESS:e.code===i.DEVICE_NOT_SUPPORTED.code?r=i.DEVICE_NOT_SUPPORTED:e.code===i.GEOFENCING.code||400===e.http_status_code&&"SRF"===e.code?r=i.GEOFENCING:e.code===i.TIMESTAMP_ERROR.code?r=Ut(Ut({},i.TIMESTAMP_ERROR),{},{description:"".concat(i.TIMESTAMP_ERROR.description,", ts: ").concat(Math.trunc(an()/1e3))}):e.code===i.LOCATION_UNAVAILABLE.code?r=i.LOCATION_UNAVAILABLE:e.code===i.RESTRICTED_CONTENT.code?r=i.RESTRICTED_CONTENT:e.code===i.NOT_ALLOWED_DOMAIN.code?r=i.NOT_ALLOWED_DOMAIN:e.code===i.UNSUPPORTED_BROWSER.code?r=i.UNSUPPORTED_BROWSER:e.code===i.PLAYER_NOT_RECOGNIZED.code&&(r=i.PLAYER_NOT_RECOGNIZED),r},ni=function(){function e(t){Pt(this,e),this.pLoader=new window.peer5.HlsJsPlaylistLoader(t)}return Lt(e,[{key:"load",value:function(e,t,n){this.pLoader.load(e,t,n)}},{key:"destroy",value:function(){this.pLoader.destroy()}},{key:"abort",value:function(){this.pLoader.abort()}}]),e}(),ii=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ft){var n=t?ni:ft.DefaultConfig.loader,i=function(t){Bt(i,t);var n=Kt(i);function i(){return Pt(this,i),n.apply(this,arguments)}return Lt(i,[{key:"load",value:function(t,n,r){if("manifest"===t.type){var a=r.onSuccess;r.onSuccess=function(t,n,i,r){var o={pop:r.getResponseHeader("x-pop"),host:r.getResponseHeader("x-host")};e.trigger(Fn.WM_STREAMING_DATA_LOADED,o),a(t,n,i)}}Gt(Ft(i.prototype),"load",this).call(this,t,n,r)}}]),i}(n);return e.video.isLive?i:void 0}},ri=function(e,t){var n=t?window.peer5.HlsJsFragmentLoader:void 0;return e.video.isLive?n:void 0},ai={enableWorker:!1,liveSyncDurationCount:2,capLevelToPlayerSize:!0,enableWebVTT:!1,xhrSetup:function(e){e.withCredentials=!0}},oi=function(e){e.getNetworkingEngine().registerRequestFilter((function(e,t){e!==gt.net.NetworkingEngine.RequestType.LICENSE&&(t.allowCrossSiteCredentials=!0)}))},si=function(e){e.shakaConfiguration=e.shakaConfiguration||{};var t=function(e){return{maxAttempts:"manifest"===e?4:8}};["drm","manifest","streaming"].forEach((function(n){return e.shakaConfiguration[n]=function(n){return Ut(Ut({},e.shakaConfiguration[n]||{}),{},{retryParameters:t(n)})}(n)}))},li=function(e){e.shakaConfiguration=e.shakaConfiguration||{},e.shakaConfiguration.streaming=Ut(Ut({},e.shakaConfiguration.streaming||{}),{bufferingGoal:120,rebufferingGoal:2,bufferBehind:30})},ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=mn(e,"player-isolated-experiment-01"),i=window.WM&&window.WM.Settings||{},r=i.ShakaConfig||{},a=r["shaka-config-set-control"]||{},o=t?a:r[n]||a;e.shakaConfiguration=Ut(Ut({},e.shakaConfiguration),{},{streaming:Ut(Ut({},e.shakaConfiguration.streaming||{}),o.streaming),abr:Ut(Ut({},e.shakaConfiguration.abr||{}),o.abr)})},ci=function(e){e.shakaConfiguration=Ut(Ut({},e.shakaConfiguration),{},{manifest:Ut(Ut({},e.shakaConfiguration.manifest||{}),{},{dash:Ut(Ut({},e.shakaConfiguration.manifest&&e.shakaConfiguration.manifest.dash||{}),{},{ignoreMinBufferTime:!0})})})},di=function(e){var t;e.shakaConfiguration=Ut(Ut({},e.shakaConfiguration),{},{preferredAudioLanguage:(null===(t=e.defaultAudio)||void 0===t?void 0:t.language)||"por"})};var hi=".clappr-player#wp3-player-0 .id-playback.cover-viewport video {\n  -o-object-fit: cover;\n     object-fit: cover; }\n";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(hi);var pi=ct.Log.getInstance();be.register("PLAYBACK_AUTHORIZED");var fi=function(e){Bt(n,e);var t=Kt(n);function n(){var e;Pt(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReady=!1,e.bindEvents(),e.$el.css("height","100%"),e.settings=e.defaultSettings,e.options.swfBasePath=e.options.baseUrl,e.options.startFromBitrate=4e5,e.currentVolume=null,e.currentTime=0,e.duration=0,e.isRenewingResource=!1,e.skipWaitingGlobals=!1,e.actionsMetadata={},e.globalsManager=new fn,e.setupSession(),e}return Lt(n,[{key:"name",get:function(){return"id_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"attributes",get:function(){return{class:"id-playback","data-id-playback":""}}},{key:"srcUrl",get:function(){var e=this.playback&&this.playback.options&&this.playback.options.src,t=this.playback&&this.playback._src;return e||t||this.options.src}},{key:"blackResourceUrl",get:function(){return V.isChromecast?this.options.env.blackVideoUrl:V.isiOS||V.isSafari||!this.video.encrypted?this.options.env.blackVideoStreamingUrl:this.options.env.blackDashUrl}},{key:"src",get:function(){return this.options.src}},{key:"selectedResource",get:function(){return this.video&&this.video.selectedResource}},{key:"isEncrypted",get:function(){return this.video&&this.video.encrypted}},{key:"isReady",get:function(){return this._isReady}},{key:"defaultSettings",get:function(){return{seekEnabled:!0}}},{key:"dvrEnabled",get:function(){return!!this.playback&&!!this.playback.dvrEnabled}},{key:"levels",get:function(){return this.playback.levels}},{key:"buffering",get:function(){return this.playback&&this.playback.buffering}},{key:"videoEl",get:function(){return this.playback&&this.playback.el}},{key:"innerPlaybackName",get:function(){return this.playback&&this.playback.name||""}},{key:"isLive",get:function(){return this.getPlaybackType()===Be.LIVE}},{key:"liveInitialPosition",get:function(){return Nn(this.playback,this.options.liveStartTime)}},{key:"useSingleAudioUrls",get:function(){return V.isSmartTvEnvironment}},{key:"audioTracks",get:function(){return this.useSingleAudioUrls?this.selectedResource&&this.selectedResource.audioTracksForSingleAudioUrls||[]:this.playback&&this.playback.audioTracks||[]}},{key:"currentAudioTrack",get:function(){return this.currentAudio}},{key:"bandwidthEstimate",get:function(){return this.playback&&this.playback.bandwidthEstimate}}]),Lt(n,[{key:"bindEvents",value:function(){this.on(Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.on(Fn.WM_VIDEO_METADATA_ERROR,this.onVideoMetadataError),this.on(Fn.WM_RESOURCE_READY,this.onResourceReady),this.on(Fn.WM_RESOURCE_ERROR,this.onResourceLoadError),this.on(Fn.WM_PLAYBACK_WILL_PLAY,this.onBeforePlay),this.on(Fn.DID_RESTART_PLAYBACK,this.onPlaybackRestarted),this.on(Fn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onPlaybackRestarted",value:function(){this.isRestarting=!1}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(Fn.WM_PLAY_REQUESTED),this.actionsMetadata.playEvent=e,this.isRestarting&&this.trigger(Fn.DID_RESTART_PLAYBACK),this.canRequestPlay()?(this.loadingResource=!0,this.trigger(Fn.WM_PLAY_REQUESTED_READY,this.video)):this.checkingAutoplayPermission?this.isPaused?this.playWhenReady():pi.debug(this.name,"Call to play was ignored"):this.startAutoPlayCheck({autoPlay:!0})}},{key:"canRequestPlay",value:function(){var e=this.waitToPlay()||this.playbackError||this.isPlaying(),t=this.video&&!this._resourceReady&&!this.loadingResource,n=In.isAvailable(this.options.mute)||this.mutedAutoplay||V.isSmartTvEnvironment;return!e&&t&&n}},{key:"playWhenReady",value:function(){var e=this;this.isReady?setTimeout((function(){return e.playback.play()})):(this.listenToOnce(this,Fn.WM_PLAYBACK_WILL_PLAY,this.playWhenReady),this.prepareInnerPlaybackToPlay())}},{key:"onBeforePlay",value:function(){!this.isRestarting&&this.disablePlayWhenReady||this.playWhenReady()}},{key:"consent",value:function(){this.playback.consent(),In.consent(),this.mutedAutoplay=!1}},{key:"waitToPlay",value:function(){var e=this,t=!0,n=!this.globalsManager.ready(),i=!(V.isSmartTvEnvironment||this.video&&this.playback);return n&&!this.skipWaitingGlobals?(this.globalsManager.isAvailable().then((function(){return e.play()}),(function(){return e.play()})),this.skipWaitingGlobals=!0):i?this.listenToOnce(this,Fn.WM_VIDEO_METADATA_LOADED,this.play):t=!1,t}},{key:"isPlaying",value:function(){return!!this.playback&&this.playback.isPlaying()}},{key:"setInitialTime",value:function(e){var t=this;V.isChromecast||V.isiOS||!this.isPlaying()?this.listenToOnce(this.playback,be.PLAYBACK_PLAY,(function(){return t.seek(e)})):this.seek(e)}},{key:"getDuration",value:function(){return this.playback&&this.playback.getDuration()}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.stopAndClearPlayback(),this.playback&&this.trigger(be.PLAYBACK_STOP,this.name,this.actionsMetadata.stopEvent)}},{key:"stopAndClearPlayback",value:function(){this.playback&&(this.playback.stop(),this.currentTime=0)}},{key:"mute",value:function(){this.playback&&this.playback.mute()}},{key:"unmute",value:function(){this.playback&&this.playback.unmute()}},{key:"volume",value:function(e){var t=this;this.playback&&(this.playback.isReady?(this.playback.volume(e),this.currentVolume=e):this.listenToOnce(this.playback,be.PLAYBACK_READY,(function(){return t.volume(e)})))}},{key:"getVolume",value:function(){return this.currentVolume}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.isPaused=!0,this.playback&&this.playback.pause()}},{key:"switchAudioTrack",value:function(e){if(this.useSingleAudioUrls){var t=this.audioTracks.find((function(t){return t.id===e}));if(!t||!this.currentAudioTrack||t.id===this.currentAudioTrack.id)return;this.currentAudio=t,this.load(this.selectedResource.getSingleAudioUrl(t)),this.trigger(be.PLAYBACK_AUDIO_CHANGED,t)}else this.playback&&this.playback.switchAudioTrack(e)}},{key:"getInitialAudioTrack",value:function(){var e=this.options.defaultAudio||{},t=e.language,n=e.role,i=this.findAudioTrack(t,n),r=this.findAudioTrack(t),a=this.findAudioTrack("por"),o=zt(this.audioTracks,1)[0];return i||r||a||o}},{key:"findAudioTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.audioTracks.find((function(n){return n.language===e&&n.role===t}))}},{key:"seek",value:function(e){var t=this.playback&&this.playback.getCurrentTime(),n=Math.round(t)!==Math.round(e);this.playback&&n&&this.playback.seek(e)}},{key:"getLastProgramDate",value:function(){return"hls"===this.playback.name?this.playback.getLastProgramDate():-1}},{key:"getStartTimeOffset",value:function(){return this.playback&&"function"==typeof this.playback.getStartTimeOffset?this.playback.getStartTimeOffset():0}},{key:"isPip",value:function(e){this.onPip=e}},{key:"destroy",value:function(){this.playback&&(this.stopListening(this.playback),this.playback.stop(),this.playback.destroy(),this.playback=null),this.reportID&&clearInterval(this.reportID),this.$el.remove()}},{key:"onMetadataLoaded",value:function(e){if(this.video=e,this.validateRestrictedContent(),V.isSmartTvEnvironment)return this.options.autoPlay&&this.startAutoPlayCheck();this.setPlaybackConfig(),this.initInnerPlayback()}},{key:"setPlaybackConfig",value:function(){var e,t,n,i;e=this.options,t=this,n=Ut({p2pEnabled:!1},e),i=function(e){return e.hlsRecoverAttempts=1,{manifestLoadingMaxRetry:3,fragLoadingMaxRetry:7,levelLoadingMaxRetry:7}}(e),e.playback.hlsjsConfig=Ut(Ut(Ut(Ut({},ai),i),e.HLSJSConfiguration||{}),{},{fLoader:ri(t,n.p2pEnabled),pLoader:ii(t,n.p2pEnabled)}),function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forceDefaultConfigFromSettings,n=void 0!==t&&t;e.shakaOnBeforeLoad=oi,e.shakaMinimumDvrSize=180,e.shakaConfiguration=e.shakaConfiguration||{},si(e),li(e),ui(e,n),ci(e),di(e)}(this.options,{forceDefaultConfigFromSettings:this.getPlaybackType()===Be.LIVE})}},{key:"validateRestrictedContent",value:function(){this.video.adult&&!this.options.allowRestrictedContent&&this.onError(An.RESTRICTED_CONTENT)}},{key:"onPlaybackReady",value:function(){var e=this;this.playback.isReady?this.ready():this.playback.once(be.PLAYBACK_READY,(function(){return e.ready()}))}},{key:"onVideoMetadataError",value:function(e){this.onError(e,An.PLAYLIST_LOAD_ERROR)}},{key:"onResourceLoadError",value:function(e){var t=Ut(Ut({},An.RESOURCE_LOAD_ERROR),{},{description:"".concat(An.RESOURCE_LOAD_ERROR.description," ").concat(e.message||xn(e)),raw:e});this.onError(e,t)}},{key:"onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;pi.warn(this.name,"id playback error:",e),this.playbackError=ti(e,this.options,this.video);var n=this.playbackError.code===An.DEFAULT_ERROR.code,i=n&&t;i&&(this.playbackError=t);var r={useCodePrefix:!1};this.trigger(be.PLAYBACK_ERROR,this.createError(this.playbackError,r))}},{key:"onResourceReady",value:function(e){this.video=e,this._resourceReady=!0,this.loadingResource=!1,V.isSmartTvEnvironment&&(this.initInnerPlayback(),this.configureSmartTvResourceParams()),this.useSingleAudioUrls&&(this.currentAudio=this.getInitialAudioTrack(),this.trigger(be.PLAYBACK_AUDIO_AVAILABLE,this.audioTracks)),this.setupAuthorized()}},{key:"setupAuthorized",value:function(){this.trigger(be.Custom.PLAYBACK_AUTHORIZED)}},{key:"setupVideoResource",value:function(e){this.setupPlayback(e),this.onPlaybackReady()}},{key:"configureSmartTvResourceParams",value:function(){var e=this.video&&this.video.encrypted,t=this.selectedResource&&this.selectedResource.contentProtection,n=e&&t?Qn(this.video,this.options.httpOnly):{};this.playback&&this.playback.configure(Ut(Ut({contentProtection:t},n),{},{shakaConfiguration:Ut(Ut({},this.options.shakaConfiguration),n.shakaConfiguration)}))}},{key:"getPlaybackType",value:function(){if(this.video)return"Live"===this.video.type||this.video.isLive?"live":"vod"}},{key:"initInnerPlayback",value:function(e){if(this.playback=ei.call(this,e,this.selectedResource,this.blackResourceUrl),"no_op"===this.playback.name)return this.onError(An.DEVICE_NOT_SUPPORTED);this.bindPlaybackEvents(),this.renderInnerPlayback(),this.onInnerPlaybackReady(),this.options.autoPlay&&this.startAutoPlayCheck()}},{key:"startAutoPlayCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,n=void 0===t?this.options.autoPlay:t;this.checkingAutoplayPermission=!0,In.onAutoplayAvailable(this.onAutoplaySuccess.bind(this),Ut(Ut({},this.options),{},{autoPlay:n}),this.onAutoplayFail.bind(this))}},{key:"onAutoplaySuccess",value:function(){var e=this;In.canAutoPlayUnmuted?Rt((function(){return e.play()})):this.playMuted()}},{key:"onAutoplayFail",value:function(){this.trigger(Fn.WM_AUTOPLAY_BLOCKED)}},{key:"playMuted",value:function(){var e=this;this.mutedAutoplay=!0,this.playback&&(this.playback.volume(0),this.currentVolume=0),Rt((function(){return e.play()}))}},{key:"setupPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedResource.url,t=this.useSingleAudioUrls&&this.selectedResource.getSingleAudioUrl(this.currentAudioTrack),n=t||e;if(this.trigger(be.PLAYBACK_STATS_ADD,{midia:this.options.src,url:n}),this.updateSrc(n),this._playbackWasBuilt=!0,this.trigger(Fn.WM_PLAYBACK_BUILT),this.options.selectedLevel)try{this.play()}catch(e){pi.warn(this.name,"play()",e)}else this.onPip&&this.playWhenReady()}},{key:"updateSrc",value:function(e){"function"==typeof this.playback.load&&this.playback.load(e),"object"===Dt(this.playback.options)&&(this.playback.options.src=e),"function"==typeof this.playback._setupSrc&&this.playback._setupSrc(e),"function"==typeof this.playback.setupSrc&&this.playback.setupSrc(e),this.prepareInnerPlaybackToPlay()}},{key:"prepareInnerPlaybackToPlay",value:function(){var e=this;this.playback&&"function"==typeof this.playback._setup&&!this._innerPlaybackSetupDone&&(this._playbackWasBuilt?this.playback._setup():this.listenToOnce(this,Fn.WM_PLAYBACK_BUILT,(function(){e.configureInnerPlaybackDRM(),e.playback._setup()})),this._innerPlaybackSetupDone=!0)}},{key:"configureInnerPlaybackDRM",value:function(){if(this.isEncrypted){var e=Qn(this.video,this.options.httpOnly);this.playback.options.fairplay=e.fairplay,"dash_shaka_playback"===this.playback.name&&(this.playback._options.shakaConfiguration.drm=Ut(Ut({},e.shakaConfiguration.drm),this.playback._options.shakaConfiguration.drm))}}},{key:"recreatePlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.playback)return this.initInnerPlayback(e),!0;var n=this.playback.constructor.canPlay(e,"",this.isEncrypted),i="flashls"===this.playback.name||"hls_fairplay_playback"===this.playback.name;return t||!n||i?(this.stopListening(this.playback),this.playback.destroy(),this.initInnerPlayback(e),!0):void 0}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,be.PLAYBACK_SETTINGSUPDATE,this.settingsupdate),this.listenTo(this.playback,be.PLAYBACK_LOADEDMETADATA,this.loadedmetadata),this.listenTo(this.playback,be.PLAYBACK_PLAYBACKSTATE,this.playbackstate),this.listenTo(this.playback,be.PLAYBACK_ERROR,this.onInnerPlaybackError),this.listenTo(this.playback,be.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this.timeupdate),this.listenTo(this.playback,be.PLAYBACK_PLAY_INTENT,this.playintent),this.listenTo(this.playback,be.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,be.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,be.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,be.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,be.PLAYBACK_STATS_ADD,this.statsAdd),this.listenTo(this.playback,be.PLAYBACK_DVR,this.onDvr),this.listenTo(this.playback,be.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,be.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,be.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,be.PLAYBACK_ENDED,this.ended),this.listenTo(this.playback,be.PLAYBACK_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.playback,be.PLAYBACK_AUDIO_AVAILABLE,this.onAudioAvailable)}},{key:"playbackstate",value:function(e){this.trigger(be.PLAYBACK_PLAYBACKSTATE,e)}},{key:"updateBitrate",value:function(e){this.trigger(be.PLAYBACK_BITRATE,e)}},{key:"progress",value:function(e){this.trigger(be.PLAYBACK_PROGRESS,e)}},{key:"statsAdd",value:function(e){this.trigger(be.PLAYBACK_STATS_ADD,e)}},{key:"onDvr",value:function(e){this.trigger(be.PLAYBACK_DVR,e)}},{key:"timeupdate",value:function(e){e.current&&(this.currentTime=e.current,this.duration=e.total,this.trigger(be.PLAYBACK_TIMEUPDATE,Ut(Ut({},e),{},{playbackType:this.getPlaybackType()})))}},{key:"ready",value:function(){this._isReady=!0,this.settingsupdate(),this.trigger(Fn.WM_PLAYBACK_WILL_PLAY,this.name)}},{key:"onSeek",value:function(){this.trigger(be.PLAYBACK_SEEK,this.name)}},{key:"onSeeked",value:function(){this.trigger(be.PLAYBACK_SEEKED,this.name),this.isPaused&&this.trigger(be.PLAYBACK_PAUSE,this.name)}},{key:"onBuffering",value:function(){this.trigger(be.PLAYBACK_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(be.PLAYBACK_BUFFERFULL,this.name)}},{key:"settingsupdate",value:function(){var e=this.getPlaybackType();e&&("ad"===e?this.settings=this.playback.settings:(this.settings=Ut({},this.defaultSettings),"vod"!==e&&this.playback&&!this.playback.dvrEnabled&&(this.settings.seekEnabled=!1)),this.trigger(be.PLAYBACK_SETTINGSUPDATE))}},{key:"loadedmetadata",value:function(e){this.trigger(be.PLAYBACK_LOADEDMETADATA,e),this.checkInitialSeek()}},{key:"checkInitialSeek",value:function(){var e=this.isLive?this.options.liveStartTime&&this.liveInitialPosition:this.options.resumeAt||_n();e&&e>0&&this.setInitialTime(e)}},{key:"setupSession",value:function(){Cn.startSession(this.options.playerId)}},{key:"ended",value:function(){var e=this;this.stopAndClearPlayback(),this.trigger(be.PLAYBACK_ENDED,this.name),Rt((function(){return e.setupSession()}))}},{key:"onAudioChanged",value:function(e){this.useSingleAudioUrls||(this.currentAudio=e,this.trigger(be.PLAYBACK_AUDIO_CHANGED,e))}},{key:"onAudioAvailable",value:function(e){if(!this.useSingleAudioUrls){this.currentAudio=this.playback.currentAudioTrack,this.trigger(be.PLAYBACK_AUDIO_AVAILABLE,e);var t=this.getInitialAudioTrack();t&&this.playback.switchAudioTrack(t.id)}}},{key:"playintent",value:function(){this.trigger(be.PLAYBACK_PLAY_INTENT,this.name)}},{key:"playing",value:function(){this.isPaused=!1,this.trigger(be.PLAYBACK_PLAY,this.name,this.actionsMetadata.playEvent)}},{key:"paused",value:function(){this.isPaused=!0,this.trigger(be.PLAYBACK_PAUSE,this.name,this.actionsMetadata.pauseEvent)}},{key:"onInnerPlaybackError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.selectedResource.hasFallbackSource(),n=Pn(this.playback.name,e);if(!this.isRenewingResource)return n&&t?this.useFallbackSource(e):this.renewResource(e);this.trigger(be.PLAYBACK_ERROR,e)}},{key:"useFallbackSource",value:function(e){var t=e.code,n=e.description;pi.info(this.name,"Will select fallback source, previous: ".concat(this.srcUrl)),this.trigger(Fn.WILL_SELECT_FALLBACK_SOURCE,{recoveredError:JSON.stringify({code:t,description:n}),currentSrc:this.srcUrl}),this.selectedResource.nextFallbackSource(),this.trigger(Fn.WILL_CHANGE_SOURCE,{source:this.selectedResource.url,errorCode:t,errorMessage:n}),this.trigger(Fn.FALLBACK_SOURCE_SELECTED,{currentSrc:this.selectedResource.url}),pi.info(this.name,"Fallback source selected: ".concat(this.srcUrl))}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.load(t)}},{key:"renewResource",value:function(e){var t=e.code;this.initPlaybackRestart(),this.isRenewingResource=!0,this.trigger(Fn.WILL_RENEW_RESOURCE,{renewReason:t}),this.listenToOnce(this,be.PLAYBACK_PLAY,this.onResourceRenewed)}},{key:"onResourceRenewed",value:function(){this.isRenewingResource=!1}},{key:"onInnerPlaybackReady",value:function(){var e=this;this.trigger(be.PLAYBACK_READY,this.name),Rt((function(){return e.trigger(Fn.WM_PLAYBACK_CAN_PLAY,e.name)}))}},{key:"load",value:function(e){this.initPlaybackRestart(),this.setupVideoResource(e)}},{key:"initPlaybackRestart",value:function(){this._isReady=!1,this._innerPlaybackSetupDone=!1,this._playbackWasBuilt=!1,this.resetOptions(),this.isRestarting=!0}},{key:"resetOptions",value:function(){var e={resumeAt:this.currentTime};this.currentAudio&&(e.defaultAudio={language:this.currentAudio.language,role:this.currentAudio.role}),this.currentSubtitle&&(e.defaultSubtitle={language:this.currentSubtitle.language,role:this.currentSubtitle.role}),this.playback&&this.playback.configure($.extend(this.options,e))}},{key:"renderInnerPlayback",value:function(){this.playback.render(),this.playback.el.id=this.cid,this.playback.el.controlsList="nodownload noremoteplayback",this.playback.el.removeAttribute("src"),this.$el.html(this.playback.el);var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Bn.getStyleFrom(hi.toString(),e);this.$el.append(t[0]);var n="cover-viewport";this.options.preventBlackBars?this.$el.addClass(n):this.$el.removeClass(n)}}]),n}(Be);fi.canPlay=function(e){return qn(e.toString())};var gi=fe.getInstance(),vi=function(e){Bt(n,e);var t=Kt(n);function n(e){var i;return Pt(this,n),(i=t.call(this,e)).options.src&&qn(i.options.src)?(In.onAutoplayAvailable(i.onAutoPlayAvailable.bind(Ht(i)),i.options,i.onAutoPlayDisabled.bind(Ht(i))),i):jt(i)}return Lt(n,[{key:"name",get:function(){return"video_metadata"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"callbackPrefix",get:function(){return"wmPlayerPlaylistLoaded"}},{key:"playback",get:function(){return this.container.playback}},{key:"metadataOptions",get:function(){return{selectedLevel:this.options.selectedLevel,preferredLevel:this.options.preferredLevel,preferredCDN:this.options.cdn,env:this.options.env,profile:this.options.maxQualityLevel,getPlayerType:this.options.overrides&&this.options.overrides.getPlayerType}}}]),Lt(n,[{key:"onAutoPlayAvailable",value:function(){this.listenToOnce(this.playback,Fn.WM_VIDEO_METADATA_REQUEST_COMPLETE,this.parseMetadataRequest)}},{key:"onAutoPlayDisabled",value:function(){var e=this;this.setRequestData(),this.load().then((function(t){return e.playback.trigger(Fn.WM_VIDEO_METADATA_LOADED,t)}),(function(t){return e.playback.trigger(Fn.WM_VIDEO_METADATA_ERROR,t)}))}},{key:"setRequestData",value:function(){var e=this.options.src,t=this.options.env;this.callback=this.callbackPrefix+this.options.playerId+e,this.url=t.playlistTemplate({videoId:e,callback:this.callback})}},{key:"load",value:function(){var e=this;return gi.info(this.name,"loading playlist from:",this.url),dn.jsonp({callbackName:this.callback,url:this.url}).then((function(t){return e.parsePlaylist(t)}))}},{key:"parsePlaylist",value:function(e){var t=new U.Deferred;if(this.isValidPlaylist(e)){var n=this.getMetadataModel(e.videos[0],this.metadataOptions);t.resolve(n)}else gi.warn(this.name,"error on playlist: ",e),t.reject(e);return t}},{key:"isValidPlaylist",value:function(e){return!!e&&!!e.videos&&e.videos.length>0}},{key:"getMetadataModel",value:function(e,t){var n=new Jt(e,t);return gi.info(this.name,"video:",n),n}},{key:"parseMetadataRequest",value:function(e){var t=e.metadata,n=this.getMetadataModel(t,this.metadataOptions);this.playback.trigger(Fn.WM_VIDEO_METADATA_LOADED,n)}}]),n}(Xe),yi={d:function(e,t){for(var n in t)yi.o(t,n)&&!yi.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},mi={};yi.d(mi,{U:function(){return bi}});var bi=function(e){var t=e.action,n=e.maxAttempts,i=void 0===n?3:n,r=e.baseDelay,a=void 0===r?100:r,o=e.backOffFactor,s=void 0===o?2:o,l=e.retryableErrors,u=void 0===l?null:l,c=0,d=[];return function e(){return t&&"function"==typeof t?t().then((function(e){return{retryResponse:e,retryHistory:d}})).catch((function(t){if(u&&!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.includes(t)}(u,t.statusCode))return Promise.reject({retryError:t,retryHistory:d});var n,r,o;if(d.push((n={},o=t,(r="attempt_".concat(c))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)),c===i)return Promise.reject({retryError:t,retryHistory:d});c++;var l=Math.pow(s,c-1)*a,h=l*function(e){return!e||Number.isNaN(e)?1:Math.random()+e}(.5);return console.log("Retrying...\nIf the retries fail we delay the next attempt in ".concat(l/1e3," seconds\n Fuzz factor for retry: ").concat(h)),new Promise((function(t){setTimeout((function(){t(e())}),h)}))})):Promise.reject({retryError:"Action must be defined and a function",retryHistory:d})}()},Ei=mi.U,Ai=function(e){Bt(n,e);var t=Kt(n);function n(e){var i;return Pt(this,n),i=t.call(this,e),In.onAutoplayAvailable(i.onAutoPlayAvailable.bind(Ht(i)),i.options,i.onAutoPlayDisabled.bind(Ht(i))),i}return Lt(n,[{key:"name",get:function(){return"cdn_router"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"retryableErrors",get:function(){return[0,500,501,502,503,504]}},{key:"retrySettings",get:function(){var e=window.WM&&window.WM.Settings||{};return{maxAttempts:e.maxAttempts,baseDelay:e.baseDelay,backOffFactor:e.backOffFactor}}}]),Lt(n,[{key:"onAutoPlayAvailable",value:function(){this.loadMetadataFromRequest=!0,this.loadResource()}},{key:"onAutoPlayDisabled",value:function(){this.loadMetadataFromRequest=!1,this.listenToOnce(this.playback,Fn.WM_PLAY_REQUESTED_READY,this.loadResource)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.playback,Fn.WILL_RENEW_RESOURCE,this.loadResource),this.listenToOnce(this.playback,Fn.WM_PLAY_REQUESTED_READY,(function(){return e.playRequestedReady=!0}))}},{key:"loadResource",value:function(){var e=this;return this.createPayload().then((function(t){return e.getResource(t)})).then((function(t){return e.onResourceLoaded(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mountAjaxErrorBody(t);try{n=Ut(Ut({},n),JSON.parse(t.xhr.response))}catch(e){}e.onResourceError(n)}))}},{key:"createPayload",value:function(){var e=this;return new Promise((function(t){var n={player_type:Jt.getPlayerType(),video_id:"".concat(e.options.src),quality:e.options.maxQualityLevel||"max",content_protection:Jt.getDRMProtocol(),vsid:Cn.getVideoSessionId(e.options.playerId),tz:sn()};"boolean"==typeof e.options.httpOnly&&(n.ho=e.options.httpOnly),Zt&&(n.ts=Math.trunc(an())),e.options.allowLocation?e.getLocation().then((function(e){t(Ut(Ut({},n),{},{lat:"".concat(e.latitude),long:"".concat(e.longitude)}))})).catch((function(){return t(n)})):t(n)}))}},{key:"getLocation",value:function(){var e=this;if(Qt.isGloboiDomain&&this.options.lat&&this.options.long){var t={latitude:this.options.lat,longitude:this.options.long};return this.container.trigger(Fn.WM_LOCATION_AVAILABLE,t),new Promise((function(e){return e(t)}))}return new Promise((function(t,n){kn.getLocation().then((function(n){var i={latitude:n.coords.latitude,longitude:n.coords.longitude};e.container.trigger(Fn.WM_LOCATION_AVAILABLE,i),t(i)})).catch((function(t){fe.warn(e.name,"Failed to get location. We make the request to /cdn without passing lat/long params",t),n(t)}))}))}},{key:"getResource",value:function(e){var t=this;return this.sendRequestWithRetry(this.options.env.CDNRouterHost,e).then((function(e){var n=e.retryResponse,i=e.retryHistory;return t.onResourceRequestFinished(i,i.length+1,!1),n})).catch((function(n){var i=n.retryError,r=n.retryHistory;return t.retryableErrors.includes(i.statusCode)?t.sendRequest(t.options.env.CDNRouterFallbackHost,e).then((function(e){return t.onResourceRequestFinished(r,r.length+1,!0),e})).catch((function(e){return t.onResourceRequestFinished([].concat(Wt(r),[i]),r.length+1,!0),Promise.reject(e)})):(t.onResourceRequestFinished(r,Math.max(r.length,1),!1),Promise.reject(i))}))}},{key:"sendRequest",value:function(e,t){var n=Cn.getLockId(this.options.playerId),i={url:e,type:"POST",contentType:"application/json",xhrFields:{withCredentials:!0},data:JSON.stringify(t)},r=this.options.token||ln("GLBID");return r&&(i.headers={Authorization:"Bearer ".concat(r)}),n&&(i.headers=Ut(Ut({},i.headers),{},{"X-Session-ID":n})),this.executeAjaxRequest(i)}},{key:"sendRequestWithRetry",value:function(e,t){var n=this,i=this.retrySettings,r={action:function(){return n.sendRequest(e,t)},maxAttempts:i.maxAttempts,baseDelay:i.baseDelay,backOffFactor:i.backOffFactor,retryableErrors:this.retryableErrors};return Ei(r)}},{key:"executeAjaxRequest",value:function(e){return new Promise((function(t,n){U.ajax(e).then((function(e){t({resource:e})}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Ut({},t),a=r[0],o=r[1],s=r[2],l=a.status;n({xhr:a,status:o,error:s,statusCode:l})}))}))}},{key:"mountAjaxErrorBody",value:function(e){var t=e.xhr,n=e.status,i=e.error;return{status:n,error:t&&t.statusText||i,url:t&&t.responseURL||this.options.env.CDNRouterHost,http_status_code:t&&t.status}}},{key:"onResourceLoaded",value:function(e){var t,n=this,i=e.resource,r=void 0===i?{}:i,a=r.session||(null===(t=r.sources)||void 0===t?void 0:t[0].token);a&&Cn.storeLockId(this.options.playerId,a);var o=function(){return setTimeout((function(){return n.playback.trigger(Fn.WM_RESOURCE_LOADED,r)}))};this.loadMetadataFromRequest&&!this.playRequestedReady?(this.listenToOnce(this.playback,Fn.WM_PLAY_REQUESTED_READY,o),this.playback.trigger(Fn.WM_VIDEO_METADATA_REQUEST_COMPLETE,r)):o()}},{key:"onResourceError",value:function(e){if("CDN not available"===e.message)return this.playback.trigger(Fn.WM_WROOM_WAITING,e);this.playback.trigger(Fn.WM_RESOURCE_ERROR,e)}},{key:"onResourceRequestFinished",value:function(e,t,n){this.container.trigger(Fn.WM_RESOURCE_REQUEST_STATS,{retries:e,totalAttempts:t,usedFallback:n})}}]),n}(Xe),ki=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pt(this,e),t&&t.sources&&t.resource&&(this.options=n,this.sources=t.sources,this.contentProtection=t.resource.content_protection||{},this.signal=t.resource.signal,this.thumbUrl=t.thumbs_preview_base_url,this.session=t.session,this.rawData=t,this.daiEnabled=!1,this.options.forceDRMServer&&this.forceDRMServer(),this.setExpirationTime(),this.useSource(this.sources[0]))}return Lt(e,[{key:"cdn",get:function(){return this.resourceCDN}},{key:"isGloboCDN",get:function(){return"globo"===this.cdn}},{key:"url",get:function(){return this.shouldPlayWithDAI?this.signDAIUrl(this.daiURL):this.originalURL}},{key:"shouldPlayWithDAI",get:function(){return!!(this.dai&&this.daiURL&&this.daiEnabled)}},{key:"forceGloboCDN",get:function(){return V.isiOS&&!V.isSafari||V.isSmartTvEnvironment}},{key:"useFlatURL",get:function(){return V.preventUsingCookies&&this.isGloboCDN||this.dai}},{key:"subtitles",get:function(){return this._buildSubtitles("srt",this.source.text||{})}},{key:"subtitlesWebVTT",get:function(){return this._buildSubtitles("webvtt",this.source.text||{})}},{key:"sourceIndex",get:function(){return this.sources.indexOf(this.source)}},{key:"fallbackSourceIndex",get:function(){return this.sourceIndex+1}}]),Lt(e,[{key:"setExpirationTime",value:function(){var e=(new Date).getTime();this.sources.forEach((function(t){t.expirationDate=t.expiration_time&&e+t.expiration_time}))}},{key:"hasFallbackSource",value:function(){if(this.fallbackSourceIndex>=this.sources.length)return!1;var e=(new Date).getTime(),t=this.sources[this.fallbackSourceIndex];return e<(null==t?void 0:t.expirationDate)}},{key:"nextFallbackSource",value:function(){var e=this.sources[this.fallbackSourceIndex];this.hasFallbackSource()&&this.useSource(e)}},{key:"useSource",value:function(e){this.source=e,this.singleAudioUrls=e.audio.original,this.singleAudioUrlsDescription=e.audio.description||{},this.originalURL=e.url,this.resourceCDN=e.cdn,this.resourcePOP=e.pop,this.dai=e.dai,this.assetKey=e.asset_key,this.token=e.token;var t=[].concat(Wt(this.formatSingleAudioTracks(this.singleAudioUrls)),Wt(this.formatSingleAudioTracks(this.singleAudioUrlsDescription,!0)));this.audioTracksForSingleAudioUrls=this.getSingleAudioTracks(t)}},{key:"formatSingleAudioTracks",value:function(e,t){if(e)return Object.keys(e).map((function(e){return{language:e,role:t?"description":""}}))}},{key:"getSingleAudioTracks",value:function(e){return e.map((function(e,t){var n=e.language,i=e.role;return{id:String(t),language:n,label:n,role:i,kind:i?"description":"main"}}))}},{key:"getSingleAudioUrl",value:function(e){return"description"===e.role?this.singleAudioUrlsDescription[e.language]:this.singleAudioUrls[e.language]}},{key:"_buildSubtitles",value:function(e,t){var n=Object.keys(t).reduce((function(n,i){var r,a=null===(r=t[i].subtitle)||void 0===r?void 0:r[e];return a&&(n[i]=a),n}),{}),i=Object.keys(t).reduce((function(n,i){var r,a=null===(r=t[i].caption)||void 0===r?void 0:r[e];return a&&(n[i]=a),n}),{});return[].concat(Wt(this.formatSubtitles(n,"subtitle")),Wt(this.formatSubtitles(i,"caption"))).map((function(t,n){return Ut(Ut({id:String(n)},t),{},{type:e})}))}},{key:"formatSubtitles",value:function(e,t){return Object.keys(e).map((function(n){return{role:t,language:n,label:n,url:e[n]}}))}},{key:"setDAIURL",value:function(e){this.daiURL=e}},{key:"enableDAI",value:function(){this.daiEnabled=!0}},{key:"disableDAI",value:function(){this.daiEnabled=!1}},{key:"signDAIUrl",value:function(e){var t=xe.settings.interpolate;xe.settings.interpolate=/\{\{(.+?)\}\}/g;var n=xe("".concat(this.originalURL,"{{ queryString }}"))({queryString:{queryString:e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/)[6]||""}.queryString});return xe.settings.interpolate=t,n}},{key:"forceDRMServer",value:function(){this.contentProtection.server=this.options.forceDRMServer}}]),e}(),Ti=function e(t){Pt(this,e),this.id=t.transmission_id,this.affiliate={code:t.affiliate_code},this.signal=t.signal},_i={VideoMetadata:vi,CDNRouter:Ai,Resource:function(e){Bt(n,e);var t=Kt(n);function n(){return Pt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"bindEvents",value:function(){this.idPlayback=this.playback,this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,Fn.WM_RESOURCE_LOADED,this.onResourceLoaded),this.listenTo(this.playback,Fn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenTo(this.playback,be.Custom.PLAYBACK_AUTHORIZED,this.onPlaybackAuthorized),this.listenToOnce(this.container,be.Custom.DAI_RESOURCE_LOADED,this.onDAIResourceLoaded)}},{key:"onPlaybackAuthorized",value:function(){if(!this.idPlayback.isRestarting&&this.isDAIAvailable)return this.setupDAIResource();this.setupVideoResource()}},{key:"setupDAIResource",value:function(){if(fe.info(this.name,"Setting up DAI resource. Is DAI resource ready? ".concat(this.DAIResourceReady)),!this.DAIResourceReady)return this.listenToOnce(this.container,be.Custom.DAI_RESOURCE_LOADED,this.setupDAIResource),void this.listenToOnce(this.container,be.Custom.DAI_ERROR,this.onDAIError);this.video.selectedResource.setDAIURL(this.DAIUrlTemplate),this.video.selectedResource.enableDAI(),this.setupVideoResource()}},{key:"onDAIResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;this.DAIResourceReady=!0,this.DAIUrlTemplate=t}},{key:"onDAIError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fe.warn(this.name,"Skipping DAI. Loading original resource. DAI Error: ",e),this.video.selectedResource.disableDAI(),this.setupVideoResource()}},{key:"setupVideoResource",value:function(){this.idPlayback.setupVideoResource(this.video.selectedResource.url)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onResourceLoaded",value:function(e){this.resource=new ki(e,this.options),this.selectResource()}},{key:"selectResource",value:function(){this.video.selectedResource=this.resource,this.video.isLive&&(this.video.transmission=new Ti(this.video.selectedResource.rawData.resource)),this.playback.trigger(Fn.WM_RESOURCE_SELECTED,this.video,this.resource)}},{key:"onResourceSelected",value:function(e){this.video=e,this.resource&&this.resource.cdn&&(this.video.cdn=this.resource.cdn),this.isResourceValid()&&this.playback.trigger(Fn.WM_RESOURCE_READY,this.video)}},{key:"isResourceValid",value:function(){return!Array.isArray(this.resource)||(this.trigger(be.PLAYBACK_ERROR,An.PLAYLIST_LOAD_ERROR),!1)}},{key:"name",get:function(){return"resource"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isDAIAvailable",get:function(){return this.options.enableDAIResourceLoader}}]),n}(Xe)};Ye.registerPlayback(fi),Object.values(_i).forEach((function(e){return Ye.registerPlugin(e)}));var wi={Video:Jt};function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ii(e,t,n){return t&&Ri(e.prototype,t),n&&Ri(e,n),e}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){xi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ui(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ni(e):t}function Bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Li(e);if(t){var r=Li(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ui(this,n)}}function Fi(e,t,n){return(Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Li(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||ji(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e){return function(e){if(Array.isArray(e))return Ki(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ji(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){if(e){if("string"==typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ki(e,t):void 0}}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Gi=function(e){Oi(n,e);var t=Bi(n);function n(e,i){var r;Ci(this,n);var a=(r=t.call(this,e)).core.options.adUnit,o=r.core.options.adCompanion;if(o&&i&&a){var s=("object"===Si(o)&&Object.keys(o)||[])[0];r.unitcode="/".concat(i,"/").concat(a),r.companionWidth=+s.split("x")[0],r.companionHeight=+s.split("x")[1],r.companionDiv=o[s],r.embedScript(),r.setup(),r.show()}else r.disable();return r}return Ii(n,[{key:"name",get:function(){return"dfp_companion"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Fn.DFP_CONTENT_RESUME,this.hide),this.listenTo(this.core.options.dfp,Fn.DFP_AD_ERROR,this.hide),this.listenTo(this.core.options.dfp,Fn.DFP_CONTENT_ENDED,this.hide)}},{key:"embedScript",value:function(){var e="//www.googletagservices.com/tag/js/gpt.js";if(0===U('script[src="'.concat(e,'"]')).length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",e),document.head.appendChild(t)}}},{key:"setup",value:function(){var e=this;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){googletag.defineSlot(e.unitcode,[e.companionWidth,e.companionHeight],e.companionDiv).addService(googletag.companionAds()).addService(googletag.pubads()).addService(googletag.content()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()}))}},{key:"show",value:function(){var e=this;googletag.cmd.push((function(){googletag.display(e.companionDiv)}))}},{key:"hide",value:function(){U("#".concat(this.companionDiv)).hide()}}]),n}(Ze),zi="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Wi(){throw new Error("setTimeout has not been defined")}function Yi(){throw new Error("clearTimeout has not been defined")}var qi=Wi,$i=Yi;function Xi(e){if(qi===setTimeout)return setTimeout(e,0);if((qi===Wi||!qi)&&setTimeout)return qi=setTimeout,setTimeout(e,0);try{return qi(e,0)}catch(t){try{return qi.call(null,e,0)}catch(t){return qi.call(this,e,0)}}}"function"==typeof zi.setTimeout&&(qi=setTimeout),"function"==typeof zi.clearTimeout&&($i=clearTimeout);var Zi,Qi=[],Ji=!1,er=-1;function tr(){Ji&&Zi&&(Ji=!1,Zi.length?Qi=Zi.concat(Qi):er=-1,Qi.length&&nr())}function nr(){if(!Ji){var e=Xi(tr);Ji=!0;for(var t=Qi.length;t;){for(Zi=Qi,Qi=[];++er<t;)Zi&&Zi[er].run();er=-1,t=Qi.length}Zi=null,Ji=!1,function(e){if($i===clearTimeout)return clearTimeout(e);if(($i===Yi||!$i)&&clearTimeout)return $i=clearTimeout,clearTimeout(e);try{$i(e)}catch(t){try{return $i.call(null,e)}catch(t){return $i.call(this,e)}}}(e)}}function ir(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Qi.push(new rr(e,t)),1!==Qi.length||Ji||Xi(nr)}function rr(e,t){this.fun=e,this.array=t}rr.prototype.run=function(){this.fun.apply(null,this.array)};var ar=zi.performance||{};ar.now||ar.mozNow||ar.msNow||ar.oNow||ar.webkitNow;function or(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var sr=".clappr-player#wp3-player-0 .dfp-ad-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 994;\n  transform: translateY(0);\n  transition: transform 0.3s ease; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--notransition {\n    transition: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mode {\n    visibility: hidden !important;\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mobile-mode {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--overlay-mode {\n    transform: translateY(-20px);\n    height: 80px; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--over-media-control {\n    z-index: 998; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--media-control-show {\n    transform: translateY(-80px); }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay video {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; }\n";or(sr);var lr=function(){function e(){Ci(this,e)}return Ii(e,null,[{key:"Full",get:function(){return""}},{key:"Overlay",get:function(){return"dfp-ad-overlay--overlay-mode dfp-ad-overlay--over-media-control"}},{key:"Hidden",get:function(){return"dfp-ad-overlay--poster-mode"}},{key:"HiddenMobile",get:function(){return"dfp-ad-overlay--poster-mobile-mode"}}]),e}(),ur=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).setHiddenMode(),i.dfp||i.disable(),i}return Ii(n,[{key:"name",get:function(){return"dfp_ad_overlay"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"attributes",get:function(){return{class:"dfp-ad-overlay"}}}],[{key:"Mode",get:function(){return lr}}]),Ii(n,[{key:"bindEvents",value:function(){this.dfp=this.core.options.dfp,this.listenTo(this.dfp,Fn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.dfp,Fn.DFP_AD_CLOSED,this.setHiddenMode),this.listenTo(this.dfp,Fn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.dfp,Fn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.dfp,Fn.DFP_ALL_ADS_COMPLETED,this.adEnded),this.listenTo(this.dfp,Fn.DFP_CONTENT_STARTED,this.setHiddenMode),this.listenTo(this.dfp,Fn.DFP_CONTENT_ENDED,this.setHiddenMode),this.listenTo(this.core,be.CORE_RESIZE,this.updateSize),this.listenToOnce(this.core,be.CORE_READY,this.bindMediaControlPluginsEvents),this.bindMediaControlEvents()}},{key:"bindMediaControlEvents",value:function(){this.unbindMediaControlEvents(),this.listenTo(this.core,be.MEDIACONTROL_SHOW,this.mediaControlShow),this.listenTo(this.core,be.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.removeClass("dfp-ad-overlay--notransition")}},{key:"unbindMediaControlEvents",value:function(){this.stopListening(this.core,be.MEDIACONTROL_SHOW,this.mediaControlShow),this.stopListening(this.core,be.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.addClass("dfp-ad-overlay--notransition")}},{key:"bindMediaControlPluginsEvents",value:function(){this.listenTo(this.core.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.mediaControlInteractionEnd),this.listenTo(this.core.mediaControl,Fn.MEDIACONTROL_MODAL_SHOW,this.mediaControlModalShow),this.listenTo(this.core.mediaControl,Fn.MEDIACONTROL_MODAL_HIDE,this.mediaControlModalHide),this.listenTo(this.core.mediaControl,Fn.WM_VOLUME_SHOW,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,Fn.WM_VOLUME_HIDE,this.mediaControlInteractionEnd)}},{key:"adStarted",value:function(e){var t=e.isLinear();this.setMode(t?lr.Full:lr.Overlay),t&&(this.unbindMediaControlEvents(),this.mediaControlHide()),V.isMobile&&!t&&this.mediaControlShow()}},{key:"adEnded",value:function(e){this.setHiddenMode(),e&&this.bindMediaControlEvents()}},{key:"setHiddenMode",value:function(){this.setMode(V.isMobile?lr.HiddenMobile:lr.Hidden)}},{key:"mediaControlShow",value:function(){this.$el.addClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlHide",value:function(){this.$el.removeClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlModalShow",value:function(){this._modalVisible=!0,this.mediaControlInteractionStart()}},{key:"mediaControlModalHide",value:function(){this._modalVisible=!1,this.mediaControlInteractionEnd()}},{key:"mediaControlInteractionStart",value:function(){this._mode==lr.Overlay&&this.$el.removeClass("dfp-ad-overlay--over-media-control")}},{key:"mediaControlInteractionEnd",value:function(){this._modalVisible||this._mode==lr.Overlay&&this.$el.addClass("dfp-ad-overlay--over-media-control")}},{key:"setMode",value:function(e){var t=this;this._mode=e,this.$el.removeClass(lr.Overlay),this.$el.removeClass(lr.Hidden),this.$el.removeClass(lr.HiddenMobile),e&&(this.$el.addClass(e),ir((function(){return t.updateSize()})))}},{key:"updateSize",value:function(){var e=this.$el.width(),t=this.$el.height();this.dfp.adsManager&&e&&t&&this.dfp.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"render",value:function(){return this.$el.append(Bn.getStyleFrom(sr,{playerId:this.core.options.playerId})[0]),this}}]),n}(Ne),cr=function(e){Oi(n,e);var t=Bi(n);function n(e,i){var r;return Ci(this,n),(r=t.call(this,e)).dfp=i,r.settings=r.defaultSettings,r.bindEvents(),r}return Ii(n,[{key:"name",get:function(){return"dfp_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"tagName",get:function(){return"video"}},{key:"attributes",get:function(){return{"data-dfp-playback":""}}},{key:"adsManager",get:function(){return this.dfp&&this.dfp.adsManager}},{key:"defaultSettings",get:function(){return{seekEnabled:!1}}}]),Ii(n,[{key:"ready",value:function(){this.trigger(be.PLAYBACK_READY,this.name)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.dfp,Fn.DFP_AD_LOADED,(function(t){return e.duration=t&&t.getDuration()})),this.listenTo(this,be.PLAYBACK_PLAY,(function(){return e.playing=!0})),this.listenTo(this,be.PLAYBACK_PAUSE,(function(){return e.playing=!1}))}},{key:"render",value:function(){return this}},{key:"getPlaybackType",value:function(){return"ad"}},{key:"getDuration",value:function(){return this.duration}},{key:"getRemainingTime",value:function(){return this.adsManager?this.adsManager.getRemainingTime():0}},{key:"play",value:function(){this.adsManager&&(this.adsManager.resume(),!this.updateTimer&&this.startUpdateTimer())}},{key:"pause",value:function(){this.adsManager&&(this.adsManager.pause(),this.stopUpdateTimer())}},{key:"stop",value:function(){this.stopUpdateTimer(),Fi(Li(n.prototype),"stop",this).call(this)}},{key:"startUpdateTimer",value:function(){var e=this;this.stopUpdateTimer(),this.updateTimer=setInterval((function(){var t=e.getRemainingTime();e.trigger(be.PLAYBACK_TIMEUPDATE,{current:e.duration-t,total:e.duration,playbackType:e.getPlaybackType()})}),100)}},{key:"stopUpdateTimer",value:function(){clearInterval(this.updateTimer),delete this.updateTimer}},{key:"isPlaying",value:function(){return this.playing}},{key:"destroy",value:function(){this.stopUpdateTimer(),this.stopListening(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"volume",value:function(e){this.adsManager&&this.adsManager.setVolume(e/100)}},{key:"getVolume",value:function(){return this.adsManager?this.adsManager.getVolume():this.dfp.container.playback.getVolume()/100}}]),n}(Be),dr=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).isServedAd=!1,i.isFirstPlay=!0,i}return Ii(n,[{key:"name",get:function(){return"dfp_video_ad"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"videoElement",get:function(){var e=this.container.playback,t=e&&e.playback;return t&&t.el}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Fn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,be.CONTAINER_ENDED,this.containerEnded),this.listenTo(this.container,be.CONTAINER_STOP,this.containerEnded),this.listenTo(this.container,be.CONTAINER_ERROR,this.containerError),this.listenTo(this.options.dfp,Fn.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.options.dfp,Fn.DFP_CONTENT_PAUSE,this.adBreakStarted),this.listenTo(this.container,Fn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,Fn.DFP_AD_RESUME,this.onDFPAdResume),this.listenTo(this.options.dfp,Fn.DFP_CONTENT_RESUME,this.adBreakEnded),this.listenTo(this.options.dfp,Fn.DFP_AD_ERROR,this.adError),this.listenTo(this.container,Fn.WM_MASTERTOPIP,this.onPip)}},{key:"onPlayRequestedReady",value:function(){this.container.playback.disablePlayWhenReady=!this.options.dfp.shouldSkipAd}},{key:"onPip",value:function(){this.stopListening(),this.listenTo(this.container,Fn.WM_PIPTOMASTER,this.bindEvents)}},{key:"onResourceSelected",value:function(){this.hasError=!1}},{key:"onResourceReady",value:function(){var e=this.container.playback.options;e.onPip||(this.adPlayback=new cr(e,this.options.dfp)),this.containerPlay(),this.options.dfp.contentStarted()}},{key:"containerPlay",value:function(){var e=this;this.containerPlaying=!0,this.hasError&&ir((function(){return e.adBreakEnded()}))}},{key:"containerEnded",value:function(){this.options.dfp.contentEnded(),this.stopListening(),this.bindEvents(),this.containerPlaying=!1,this.hasError&&this.adPlayback&&this.adPlayback.stop()}},{key:"containerError",value:function(){this.hasError=!0}},{key:"adError",value:function(){this.hasError=!0,this.adBreakEnded()}},{key:"adLoaded",value:function(e){var t=this,n=e.isLinear();this.options.dfp.podIndex=e.getAdPodInfo().getPodIndex();var i={"-1":function(){fe.info(t.name,"Post-roll loaded"),t.adPlayback&&(t.adPlayback.duration=e.getDuration()),t.postroll=!0},0:function(){return fe.info(t.name,"Pre-roll loaded")},midroll:function(){t.adPlayback&&(t.adPlayback.duration=e.getDuration()),fe.info(t.name,"Mid-roll loaded")}};n?(i[this.options.dfp.podIndex]||i.midroll)():fe.info(this.name,"Overlay loaded")}},{key:"onDFPAdResume",value:function(){this.isFirstPlay&&(this.syncVolumeWithIdPlayback(),this.isFirstPlay=!1)}},{key:"adBreakStarted",value:function(e){this.isServedAd=!0,this.onBreak=!0,this.hasError?this.adBreakEnded():this.container.playback.isPlaying()?this.pauseMainContent(e):this.initAdPlayback(e)}},{key:"onAdStarted",value:function(){this.container.getPlugin("click_to_pause").disable(),this.adPlayback&&this.adPlayback.play(),this.container.settingsUpdate()}},{key:"pauseMainContent",value:function(e){this.listenToOnce(this.container.playback,be.PLAYBACK_PAUSE,this.initAdPlayback.bind(this,e)),this.container.pause()}},{key:"initAdPlayback",value:function(e){var t=this.container.playback.options;this.playback=this.container.playback,this.playback.stopListening(),this.container.stopListening(),this.adPlayback||(this.adPlayback=new cr(t,this.options.dfp),this.adPlayback.duration=e.getDuration()),this.syncVolumeWithIdPlayback(),this.container.playback=this.adPlayback,this.container.bindEvents(),this.adPlayback.ready()}},{key:"adBreakEnded",value:function(){var e=this;this.onBreak&&(this.container.stopListening(),this.playback.bindPlaybackEvents(),this.playback._options=Pi({},this.adPlayback._options),this.container.playback=this.playback,this.container.playback.volume(100*this.adPlayback.getVolume()),this.container.currentTime=this.playback.currentTime,0===this.options.dfp.podIndex&&this.playback.checkInitialSeek(),this.container.bindEvents()),this.adPlayback&&(this.adPlayback.stop(),this.adPlayback.destroy(),this.adPlayback=null),this.listenToOnce(this.container,be.CONTAINER_PLAY,(function(){return e.container.settingsUpdate()})),this.containerPlaying||this.hasError||this.options.dfp.shouldSkipAd?(!V.supportsTouchEvents&&this.container.getPlugin("click_to_pause").enable(),ir((function(){return e.container.playback.playWhenReady()}))):this.container.getPlugin("poster").show(),this.onBreak=!1,this.hasError=!1,this.isServedAd=!1}},{key:"syncVolumeWithIdPlayback",value:function(){var e=this.playback.getVolume();null!==e&&this.adPlayback.volume(e)}},{key:"containerTimeUpdate",value:function(e){}}]),n}(Xe),hr=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).core=e,i.$el.on("click",(function(e){e.stopPropagation(),i.mediaControl.trigger(Fn.MEDIACONTROL_ITEMCLICKED)})),i.$el.addClass("media-control-element"),i}return Ii(n,[{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return"center"}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"kibo",get:function(){return this.mediaControl.kibo}},{key:"isSticky",get:function(){return this.el.classList.contains("media-control-element--sticky")}}]),Ii(n,[{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&$(e).find("svg path").css("fill",this.buttonsColor)}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.mediaControl.show(),t()}))}},{key:"triggerWillShowModalElement",value:function(){this.core.trigger(Fn.WILL_SHOW_MODAL_ELEMENT,{name:this.name})}},{key:"triggerDidHideModalElement",value:function(){this.core.trigger(Fn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"setSticky",value:function(){this.el.classList.add("media-control-element--sticky")}},{key:"resetSticky",value:function(){this.el.classList.remove("media-control-element--sticky")}},{key:"destroy",value:function(){this._mediaControl=null,Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(Ne),pr='.clappr-player#wp3-player-0 .dfp-countdown {\n  display: none;\n  position: relative;\n  z-index: 998;\n  pointer-events: none;\n  font-size: 13px;\n  line-height: 13px;\n  color: #e5e886;\n  transition: transform 0.3s ease-out; }\n  .clappr-player#wp3-player-0 .dfp-countdown.media-control-element {\n    padding-left: 0;\n    padding-right: 0; }\n  .clappr-player#wp3-player-0 .dfp-countdown__text {\n    display: inline-block;\n    font-family: "opensans-regular", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown__time {\n    display: inline-block;\n    font-family: "opensans-bold", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown--hidden {\n    display: none; }\n';or(pr);var fr=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).core=e,i.message={"-1":"Este anncio encerra em",0:"O seu vdeo comea em",midroll:"O seu vdeo continua em"},i}return Ii(n,[{key:"name",get:function(){return"dfp_countdown"}},{key:"template",get:function(){return xe('<div class="dfp-countdown__text"><%= message %></div>\n<div class="dfp-countdown__time"><%= remainingTime %></div>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"attributes",get:function(){return{class:"dfp-countdown"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Fn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.core.options.dfp,Fn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.core.options.dfp,Fn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.core.options.dfp,Fn.DFP_AD_ERROR,this.adEnded),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.adEnded),this.mediaControl&&this.listenTo(this.mediaControl,be.MEDIACONTROL_RENDERED,this.appendToMediaControl)}},{key:"adStarted",value:function(e){e.isLinear()&&(this.playback=this.core.activePlayback,this.renderCountdown(),this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this.updateCountdown),this.$el.removeClass("dfp-countdown--hidden"))}},{key:"adEnded",value:function(){this.stopListening(this.playback,be.PLAYBACK_TIMEUPDATE),this.$el.addClass("dfp-countdown--hidden")}},{key:"renderCountdown",value:function(){var e=Bn.getStyleFrom(pr,{playerId:this.container.options.playerId}),t="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$el.html(this.template({message:this.message[this.core.options.dfp.podIndex]||this.message.midroll,remainingTime:le.formatTime(t)})),this.$el.append(e[0]),this.$duration=this.$el.find(".dfp-countdown__time"),this.$message=this.$el.find(".dfp-countdown__text"),this.appendToMediaControl()}},{key:"appendToMediaControl",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__left");e[0]&&!this.isRendered&&(e.append(this.el),this.isRendered=!0)}},{key:"updateCountdown",value:function(){var e="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$duration.text(le.formatTime(e)),this.$message.text(this.message[this.core.options.dfp.podIndex]||this.message.midroll)}},{key:"destroy",value:function(){this.stopListening(),Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(hr);var gr,vr,yr=Function.prototype,mr=Object.prototype,br=yr.toString,Er=mr.hasOwnProperty,Ar=br.call(Object),kr=mr.toString,Tr=(gr=Object.getPrototypeOf,vr=Object,function(e){return gr(vr(e))});var _r=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=kr.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Tr(e);if(null===t)return!0;var n=Er.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&br.call(n)==Ar},wr=1/0,Sr=NaN,Cr=4294967295,Rr=/^\s+|\s+$/g,Ir=/^[-+]0x[0-9a-f]+$/i,xr=/^0b[01]+$/i,Dr=/^0o[0-7]+$/i,Pr=parseInt;var Or=Object.prototype.toString,Lr=Math.min;function Mr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Nr(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Or.call(e)}(e))return Sr;if(Mr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Mr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Rr,"");var n=xr.test(e);return n||Dr.test(e)?Pr(e.slice(2),n?2:8):Ir.test(e)?Sr:+e}(e))===wr||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ur(e){return e}var Br=function(e,t){if((e=function(e){var t=Nr(e),n=t%1;return t==t?n?t-n:t:0}(e))<1||e>9007199254740991)return[];var n=Cr,i=Lr(e,Cr);e-=Cr;for(var r=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(i,t="function"==typeof t?t:Ur);++n<e;)t(n);return r};const Fr={_call:e=>{if(window.dmp&&window.dmp.api)try{return window.dmp.api[e]()}catch(t){return console.error(`dmp-api@${e}: `,t.message),null}return null},getSegments:()=>{const e=Fr._call("getSegments");return e||""},getDmpId:()=>{const e=Fr._call("getDmpId");return e||""}};var Vr=Fr,Hr=Un.LocalStorage,jr=Un.embedScript,Kr=Un.DOM,Gr=fe.getInstance(),zr=["video/mp4","video/webm","video/x-msvideo","video/x-motion-jpeg","video/mpeg2","video/x-ms-wmv","application/x-mpegURL","application/vnd.apple.mpegurl","video/MP2T"],Wr=new Promise((function(e,t){var n,i;!V.isSmartTvEnvironment&&!(null===(n=window.google)||void 0===n||null===(i=n.ima)||void 0===i?void 0:i.settings)?jr("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(e,t):e()})),Yr=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).isBootstrapReady=!1,i.isAllAdsCompleted=!1,i.isContainerEnded=!1,i.core.options.skipDFP&&Gr.info(i.name,"Ad Skipping is Enabled."),i.attachCorePlugins(),i}return Ii(n,[{key:"name",get:function(){return"dfp"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"attributes",get:function(){return{class:"dfp"}}},{key:"imaScript",get:function(){return Wr}},{key:"dfpAdTagTemplate",get:function(){var e="".concat(this.options.env.protocol,"://pubads.g.doubleclick.net/gampad/ads?sz=1280x720&iu=/<%= adAccountId %>/<%= adUnit %>&cmsid=<%= adCmsId %>&vid=<%= videoId %>&cust_params=<%= customParams %>&ciu_szs=940x360&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url=<%= descriptionUrl %>&correlator=[timestamp]");return this.adCreativeProfile&&(e+="&pp=<%= adCreativeProfile %>"),xe(e)}},{key:"sizes",get:function(){return{playerWidth:this.core.el&&this.core.el.offsetWidth,defaultWidth:640,linearHeight:400,nonLinearHeight:150}}},{key:"shouldSkipAd",get:function(){var e,t,n=this.core.options.skipDFP,i=!(null===(e=window.google)||void 0===e||null===(t=e.ima)||void 0===t?void 0:t.settings),r=Kr.hasChildElement(this.core.el,".dfp-ad-overlay");return n||i||!this.adUnit||!r}}],[{key:"DEFAULT_ACCOUNT_ID",get:function(){return 95377733}},{key:"DEFAULT_CMS_ID",get:function(){return 11413}},{key:"DEFAULT_DESCRIPTION_URL",get:function(){return"https://redeglobo.globo.com/"}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,be.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,Fn.DFP_DISABLE,this.disable),this.listenTo(this,Fn.DFP_FINISHED,this.destroyIMA),this.listenTo(this.core,Fn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"onTapToUnmuteClicked",value:function(){if(this.adsManager){var e=this.adsManager.getVolume();this.adsManager.setVolume(1),this.adsManager.setVolume(e)}}},{key:"enable",value:function(){this.enabled||(this.dfpAdOverlay&&this.dfpAdOverlay.enable(),this.dfpCountdown&&this.dfpCountdown.enable(),this.dfpVideoAd&&this.dfpVideoAd.enable(),this.adCompanion&&this.adCompanion.enable(),Fi(Li(n.prototype),"enable",this).call(this),this.bindContainerEvents())}},{key:"disable",value:function(){this.enabled&&(this.dfpAdOverlay&&this.dfpAdOverlay.disable(),this.dfpCountdown&&this.dfpCountdown.disable(),this.dfpVideoAd&&this.dfpVideoAd.disable(),this.adCompanion&&this.adCompanion.disable(),Fi(Li(n.prototype),"disable",this).call(this),this.listenToOnce(this.core,Fn.DFP_ENABLE,this.enable))}},{key:"attachCorePlugins",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0,this.core._options=Object.assign(this.core.options,{dfp:this}),this.dfpAdOverlay=new ur(this.core),!V.isChromecast&&(this.dfpCountdown=new fr(this.core)),this.core.$el.append(this.dfpAdOverlay.el),this.core.addPlugin(this.dfpAdOverlay)}},{key:"attachContainerPlugins",value:function(){this.container&&(this.container._options=Object.assign(this.container.options,{dfp:this}),this.dfpVideoAd=new dr(this.container),this.container.addPlugin(this.dfpVideoAd))}},{key:"configure",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0;var e=this.core.getCurrentContainer().options;this.videoId=e&&e.src||e.sources&&e.sources[0],!1!==this.core.options.useStyledNonLinearAds&&(this.core.options.useStyledNonLinearAds=!0),this.container&&(this.stopListening(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED),this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this.init))}},{key:"parseCustomData",value:function(e){return _r(e)?Object.keys(e).reduce((function(t,n){var i=e[n],r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),""):e}},{key:"init",value:function(e){var t=this,i=this.core.getCurrentContainer().options;this.adAccountId=i.adAccountId||e.adAccountId||n.DEFAULT_ACCOUNT_ID,this.adCmsId=i.adCmsId||e.adCmsId||n.DEFAULT_CMS_ID,this.descriptionUrl=e.urlForConsumption||n.DEFAULT_DESCRIPTION_URL,this.adCreativeProfile=i.adCreativeProfile,this.error=!1,this.adUnit=i.adUnit||e.adUnit,this.adUnit&&(this.adCustomData=this.getAdCustomData(i,e),this.setupCompanion(),this.imaScript.then((function(){return t.bootstrapApi()}),(function(){return t.onAdError({type:"imaLoadError",message:"google.ima not available"})})))}},{key:"getAdCustomData",value:function(e,t){var n=t.adCustomData,i=this.parseCustomData(e.adCustomData),r="";r=e.adUnit?i:n&&i?"".concat(n,"&").concat(i):n||i;var a=Vr.getDmpId(),o=Vr.getSegments(),s=Hr.loadRaw("nvgpersona13574",JSON.parse),l=Hr.loadRaw("permutive-id"),u=Hr.loadRaw("_pdfps",JSON.parse),c={};return c.video_subscription=t.isSubscriberOnly||!1,s&&(c.nvg_gender=s.gender,c.nvg_age=s.age,c.nvg_income=s.income),a&&o&&(c.ognCluster=o,c.kuid=a),l&&u&&(c["permutive-id"]=l,c.permutive=u),0!==Object.keys(c).length?(r?r+"&":"")+this.parseCustomData(c):r}},{key:"triggerContentResume",value:function(){this.trigger(Fn.DFP_CONTENT_RESUME),this.container.trigger(Fn.DFP_CONTENT_RESUME)}},{key:"bootstrapApi",value:function(){this.error=!1,this.destroyIMA(),this.shouldSkipAd||(this.setupIMA(),this.requestAd(),this.isAllAdsCompleted=!1,this.isBootstrapReady=!0)}},{key:"setupIMA",value:function(){if(google.ima.settings.setLocale("pt-br"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.options.adPublisherProvidedID&&google.ima.settings.setPpid(this.options.adPublisherProvidedID),this.adDisplayContainer||(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dfpAdOverlay.el,this.dfpVideoAd.videoElement)),this.adsLoader||(this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)),this.adsRenderingSettings||(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!V.isChromecast,V.isChrome&&V.isMobile&&(this.adsRenderingSettings.mimeTypes=zr)),!this.adRequest){var e=Math.min(this.sizes.defaultWidth,this.sizes.playerWidth);this.adsRequest=new google.ima.AdsRequest,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=this.sizes.linearHeight,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=this.sizes.nonLinearHeight}}},{key:"setupCompanion",value:function(){Object.assign({},this.core.options,{adUnit:this.adUnit,adCustomData:this.adCustomData}),this.adCompanion&&this.adCompanion.stopListening(),this.adCompanion=new Gi(this.core,this.adAccountId)}},{key:"destroyIMA",value:function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.adsManager=null,this.adsLoader=null,this.isBootstrapReady=!1}},{key:"destroyVideoAd",value:function(){this.dfpVideoAd&&(this.dfpVideoAd.stopListening(),this.dfpVideoAd.destroy(),this.dfpVideoAd=null)}},{key:"onAdError",value:function(e){if(!this.error){var t=e&&this.getErrorData(e);Gr.warn(this.name,"dfp encountered an error, skipping -",t,e),this.error=!0,this.trigger(Fn.DFP_AD_ERROR,t),this.container.trigger(Fn.DFP_AD_ERROR,t)}}},{key:"getErrorData",value:function(e){var t="function"==typeof e.getError?e.getError():e;return t?{type:"function"==typeof t.getType?t.getType():t.type||t.o||t,message:t.message||t.l||t}:{}}},{key:"onAdsManagerLoaded",value:function(e){var t=this;this.adsRenderingSettings.useStyledNonLinearAds=this.core.options.useStyledNonLinearAds,this.adsManager=e.getAdsManager(this.dfpVideoAd.videoElement,this.adsRenderingSettings),this.discardWatchedAds(this.watchedAds),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,(function(e){return t.onAdLog(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,(function(e){return t.onAdMetadata(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){return t.onContentPauseRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){return t.onContentResumeRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){return t.onAdStarted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){return t.onAdResumed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){return t.onAdPaused(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){return t.onAdSkipped(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){return t.onAdLoaded(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,(function(e){return t.onAdClosed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){return t.onAdCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){return t.onAllAdsCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){return t.onAdClicked(e)})),this.trigger(Fn.DFP_MANAGER_LOADED),this.container.trigger(Fn.DFP_MANAGER_LOADED)}},{key:"onResourceReady",value:function(){this.isContainerEnded=!1,this.shouldSkipAd?this.triggerContentResume():this.startAd()}},{key:"startAd",value:function(){if(this.adsManager)try{this.adsManager.init(this.dfpAdOverlay.$el.width(),this.dfpAdOverlay.$el.height(),google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){this.onAdError({type:"adError",message:e&&e.message})}else this.listenToOnce(this,Fn.DFP_MANAGER_LOADED,this.startAd)}},{key:"discardWatchedAds",value:function(e){var t=this;Br(e,(function(e){setTimeout((function(){return t.adsManager.discardAdBreak()}),500*e)}))}},{key:"onAdLog",value:function(e){var t=(e.getAdData()||{}).adError;t.getErrorCode()===google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE&&this.onAdError(t)}},{key:"onAdClicked",value:function(e){var t=e.getAd();this.container.trigger(Fn.DFP_AD_CLICKED,t)}},{key:"onAdMetadata",value:function(){this.container.trigger(Fn.DFP_AD_METADATA)}},{key:"onAdLoaded",value:function(e){this.error=!1;var t=e.getAd();this.trigger(Fn.DFP_AD_LOADED,t),this.container.trigger(Fn.DFP_AD_LOADED,t)}},{key:"onAdStarted",value:function(e){var t=e.getAd();this.watchedAds+=1,this.container.playback.trigger(be.PLAYBACK_PLAY),this.trigger(Fn.DFP_AD_STARTED,t),this.container.trigger(Fn.DFP_AD_STARTED,t)}},{key:"onAdResumed",value:function(e){var t=e.getAd();this.container.playback.trigger(be.PLAYBACK_PLAY),this.container.trigger(Fn.DFP_AD_RESUME,t.isLinear())}},{key:"onAdPaused",value:function(e){var t=e.getAd();this.container.playback.trigger(be.PLAYBACK_PAUSE),this.container.trigger(Fn.DFP_AD_PAUSE,t.isLinear())}},{key:"onAdClosed",value:function(e){var t=e.getAd();this.trigger(Fn.DFP_AD_CLOSED,t.isLinear()),this.container.trigger(Fn.DFP_AD_CLOSED,t.isLinear())}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(Fn.DFP_AD_SKIPPED,t.isLinear()),this.container.trigger(Fn.DFP_AD_SKIPPED,t.isLinear())}},{key:"onAdCompleted",value:function(e){var t=e.getAd();this.trigger(Fn.DFP_AD_COMPLETED,t.isLinear()),this.container.trigger(Fn.DFP_AD_COMPLETED,t.isLinear())}},{key:"onAllAdsCompleted",value:function(e){this.isAllAdsCompleted=!0;var t=e.getAd();this.trigger(Fn.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.container.trigger(Fn.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.watchedAds=0,this.triggerDfpFinished()}},{key:"onContentPauseRequested",value:function(e){var t=e.getAd();this.container.trigger(Fn.DFP_CONTENT_PAUSE,t),this.trigger(Fn.DFP_CONTENT_PAUSE,t),this.core.getCurrentContainer()||this.adsManager.stop()}},{key:"onContentResumeRequested",value:function(){this.error||(!this.dfpVideoAd.isServedAd&&this.container.trigger(Fn.DFP_AD_NOTSERVED),this.triggerContentResume())}},{key:"containerChanged",value:function(){this.destroyVideoAd(),this.container=this.core.activeContainer;var e=this.container.playback;e.options.onPip?this.listenToOnce(this.core.getCurrentContainer().playback,Fn.WM_RESOURCE_READY,(function(){return e.play()})):(this.attachContainerPlugins(),this.configure(),this.bindContainerEvents(),this.trigger(Fn.DFP_CONTENT_ENDED),this.container.trigger(Fn.DFP_CONTENT_ENDED)),this.listenTo(this.container,be.CONTAINER_ENDED,this.onContainerEnded),this.listenTo(this.container,be.CONTAINER_STOP,this.onContainerEnded)}},{key:"triggerDfpFinished",value:function(){var e=this.isContainerEnded&&this.isAllAdsCompleted,t=this.isContainerEnded&&this.error;(e||t)&&(this.trigger(Fn.DFP_FINISHED),this.container.trigger(Fn.DFP_FINISHED))}},{key:"onContainerEnded",value:function(){this.isContainerEnded=!0,this.bindContainerEvents(),this.triggerDfpFinished()}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container.playback,Fn.WM_PLAY_REQUESTED_READY,this.onUserGesture),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"contentEnded",value:function(){this.trigger(Fn.DFP_CONTENT_ENDED),this.container.trigger(Fn.DFP_CONTENT_ENDED),this.adsLoader&&this.adsLoader.contentComplete()}},{key:"contentStarted",value:function(){this.trigger(Fn.DFP_CONTENT_STARTED),this.container.trigger(Fn.DFP_CONTENT_STARTED)}},{key:"onUserGesture",value:function(){!this.isBootstrapReady&&this.bootstrapApi(),this.adDisplayContainer&&this.adDisplayContainer.initialize()}},{key:"requestAd",value:function(){var e=this.unescapeHtml(this.adUnit),t=encodeURIComponent(this.descriptionUrl),n=encodeURIComponent(this.unescapeHtml(this.adCustomData)),i={adUnit:e,adAccountId:this.adAccountId,adCmsId:this.adCmsId,videoId:this.videoId,descriptionUrl:t,customParams:n};this.adCreativeProfile&&(i.adCreativeProfile=this.adCreativeProfile),this.adsRequest.adTagUrl=this.dfpAdTagTemplate(i),this.adsLoader&&this.adsLoader.requestAds(this.adsRequest)}},{key:"unescapeHtml",value:function(e){return U("<div/>").html(e).text()}}]),n}(Ze),qr=".clappr-player#wp3-player-0 .dai-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 448; }\n  .clappr-player#wp3-player-0 .dai-ad-container--hidden {\n    display: none; }\n";or(qr);var $r=Un.embedScript,Xr=new Promise((function(e,t){return $r("//imasdk.googleapis.com/js/sdkloader/ima3_dai.js").then(e,t)}));be.register("DAI_RESOURCE_LOADED"),be.register("DAI_ERROR"),be.register("DAI_AD_BREAK_STARTED"),be.register("DAI_AD_BREAK_ENDED");var Zr="script-not-available",Qr="not-live-streaming",Jr="not-dai-resource",ea="playback-not-supported",ta="dai-error",na=["hls","html5"],ia=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).options.enableDAIResourceLoader=!0,i.onStreamEvent=i.onStreamEvent.bind(Ni(i)),i.render(),i}return Ii(n,[{key:"name",get:function(){return"dai"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"videoElement",get:function(){return this.playback.videoEl}},{key:"isPlaybackSupported",get:function(){return na.includes(this.playback.innerPlaybackName)}},{key:"DAIScriptPromise",get:function(){return Xr}},{key:"attributes",get:function(){return{class:"dai-ad-container dai-ad-container--hidden"}}},{key:"adUiElement",get:function(){return this.el}}]),Ii(n,[{key:"render",value:function(){var e=Bn.getStyleFrom(qr,{playerId:this.options.playerId});this.el.appendChild(e[0]),this.container.el.appendChild(this.el)}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Fn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenToOnce(this.playback,be.PLAYBACK_READY,this.onPlaybackReady),this.listenToOnce(this.playback,Fn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onMetadataLoaded",value:function(e){if(!e.isLive)return this.onError({errorCode:Qr})}},{key:"onFallbackSourceSelected",value:function(){this.resource&&!this.resource.shouldPlayWithDAI&&this.resetStreamManager()}},{key:"onPlaybackReady",value:function(){if(!this.isPlaybackSupported)return this.onError({errorCode:ea});switch(this.playback.innerPlaybackName){case"hls":this.listenTo(this.innerPlayback,be.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,this.onHLSFragParsingMetadata);break;case"html5":this.listenTo(this.innerPlayback,be.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,this.onHTML5MetadataCueChance)}}},{key:"onHTML5MetadataCueChance",value:function(e){this.streamManager&&e&&this.streamManager.onTimedMetadata(e)}},{key:"onHLSFragParsingMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;this.streamManager&&n&&n.samples.forEach((function(t){return e.streamManager.processMetadata("ID3",t.data,t.pts)}))}},{key:"onResourceReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.selectedResource;if(!n.dai)return this.onError({errorCode:Jr});this.resource=n,this.DAIScriptPromise.then((function(){return e.onDAIScriptLoaded()}),(function(){return e.onError({errorCode:Zr})}))}},{key:"onDAIScriptLoaded",value:function(){this.initStreamManager()}},{key:"initStreamManager",value:function(){this.streamManager=new google.ima.dai.api.StreamManager(this.videoElement,this.adUiElement),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent,!1),this.requestLiveStream(this.resource.assetKey)}},{key:"getAdTagParameters",value:function(){var e=this.options,t=e.daiCustomData,n=e.adPublisherProvidedID;if(t||n){var i={};return t&&(i.cust_params=this.parseCustomData(t)),n&&(i.ppid=n),i}}},{key:"requestLiveStream",value:function(e){this.streamRequest=new google.ima.dai.api.LiveStreamRequest,this.streamRequest.assetKey=e;var t=this.getAdTagParameters();t&&(this.streamRequest.adTagParameters=t),this.streamManager.requestStream(this.streamRequest)}},{key:"onStreamEvent",value:function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.onDaiLoaded(e);break;case google.ima.dai.api.StreamEvent.Type.ERROR:this.onDaiError(e);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.onAdBreakStarted(e);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.onAdBreakEnded(e);break;default:this.onDaiEvent(e)}}},{key:"onDaiLoaded",value:function(e){var t=e.getStreamData(),n=t.streamId,i=t.url;this.streamId=n,fe.info(this.name,"DAI loaded, streamId: ".concat(n)),this.onDAIResourceLoaded(i)}},{key:"onAdBreakStarted",value:function(){this.el.classList.remove("dai-ad-container--hidden"),this.container.trigger(be.Custom.DAI_AD_BREAK_STARTED)}},{key:"onAdBreakEnded",value:function(){this.el.classList.add("dai-ad-container--hidden"),this.container.trigger(be.Custom.DAI_AD_BREAK_ENDED)}},{key:"onDaiError",value:function(e){var t=e.getStreamData().errorMessage;fe.warn(this.name,"DAI Error. Error Message: ",t),this.onError({errorCode:ta,errorMessage:t,event:e,notifiable:!0})}},{key:"onDaiEvent",value:function(e){var t=e.type;try{var n=e.getStreamData(),i=e.getAd();fe.info(this.name,"DAI event type: ".concat(t,", data: "),{streamData:n,ad:i})}catch(e){fe.warn(this.name,"Error getting DAI event data. DAI event type: ".concat(t,". Error: "),e)}}},{key:"onDAIResourceLoaded",value:function(e){this.container.trigger(be.Custom.DAI_RESOURCE_LOADED,{url:e,streamId:this.streamId})}},{key:"parseCustomData",value:function(e){return Object.keys(e).reduce((function(t,n){var i=encodeURIComponent(e[n]),r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.enableDAIResourceLoader=!1,this.container.trigger(be.Custom.DAI_ERROR,e),this.resetStreamManager(),this.stopListening()}},{key:"resetStreamManager",value:function(){this.streamManager&&this.streamManager.reset()}},{key:"destroy",value:function(){this.resetStreamManager(),Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(Qe);function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oa(e,t,n){return t&&aa(e.prototype,t),n&&aa(e,n),e}function sa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ca(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=la(e);if(t){var r=la(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ca(this,n)}}var ha=function(e){sa(n,e);var t=da(n);function n(e){return ra(this,n),t.call(this,e)}return oa(n,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,be.CONTAINER_CLICK,this.click),this.listenTo(this.container,be.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var e=this.config.onClickPayload;(this.container.getPlaybackType()!==Be.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==Be.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}]),n}(Xe),pa=(U('link[rel="shortcut icon"]'),function(e){this.element=e||window.document,this.initialize()});pa.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},pa.KEY_CODES_BY_NAME={},function(){for(var e in pa.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(pa.KEY_NAMES_BY_CODE,e)&&(pa.KEY_CODES_BY_NAME[pa.KEY_NAMES_BY_CODE[e]]=+e)}(),pa.MODIFIERS=["shift","ctrl","alt"],pa.registerEvent=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,pa.unregisterEvent=document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,pa.stringContains=function(e,t){return-1!==e.indexOf(t)},pa.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},pa.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},pa.isString=function(e){return pa.stringContains(Object.prototype.toString.call(e),"String")},pa.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},pa.extractModifiers=function(e){var t,n;for(t=[],n=0;n<pa.MODIFIERS.length;n++)pa.stringContains(e,pa.MODIFIERS[n])&&t.push(pa.MODIFIERS[n]);return t},pa.extractKey=function(e){var t,n;for(t=pa.neatString(e).split(" "),n=0;n<t.length;n++)if(!pa.arrayIncludes(pa.MODIFIERS,t[n]))return t[n]},pa.modifiersAndKey=function(e){var t,n;return pa.stringContains(e,"any")?pa.neatString(e).split(" ").slice(0,2).join(" "):(t=pa.extractModifiers(e),(n=pa.extractKey(e))&&!pa.arrayIncludes(pa.MODIFIERS,n)&&t.push(n),t.join(" "))},pa.keyName=function(e){return pa.KEY_NAMES_BY_CODE[e+""]},pa.keyCode=function(e){return+pa.KEY_CODES_BY_NAME[e]},pa.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<pa.MODIFIERS.length;e++)this.lastModifiers[pa.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),pa.registerEvent(this.element,"keydown",this.downHandler),pa.registerEvent(this.element,"keyup",this.upHandler),pa.registerEvent(window,"unload",(function e(){pa.unregisterEvent(t.element,"keydown",t.downHandler),pa.unregisterEvent(t.element,"keyup",t.upHandler),pa.unregisterEvent(window,"unload",e)}))},pa.prototype.handler=function(e){var t=this;return function(n){var i,r,a;for(n=n||window.event,t.lastKeyCode=n.keyCode,i=0;i<pa.MODIFIERS.length;i++)t.lastModifiers[pa.MODIFIERS[i]]=n[pa.MODIFIERS[i]+"Key"];for(pa.arrayIncludes(pa.MODIFIERS,pa.keyName(t.lastKeyCode))&&(t.lastModifiers[pa.keyName(t.lastKeyCode)]=!0),r=t["keys"+pa.capitalize(e)],i=0;i<r.any.length;i++)!1===r.any[i](n)&&n.preventDefault&&n.preventDefault();if(r[a=t.lastModifiersAndKey()])for(i=0;i<r[a].length;i++)!1===r[a][i](n)&&n.preventDefault&&n.preventDefault()}},pa.prototype.registerKeys=function(e,t,n){var i,r,a=this["keys"+pa.capitalize(e)];for(pa.isString(t)&&(t=[t]),i=0;i<t.length;i++)r=t[i],a[r=pa.modifiersAndKey(r+"")]?a[r].push(n):a[r]=[n];return this},pa.prototype.unregisterKeys=function(e,t,n){var i,r,a,o=this["keys"+pa.capitalize(e)];for(pa.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(a=t[i],a=pa.modifiersAndKey(a+""),null===n)delete o[a];else if(o[a])for(r=0;r<o[a].length;r++)if(String(o[a][r])===String(n)){o[a].splice(r,1);break}return this},pa.prototype.off=function(e){return this.unregisterKeys("down",e,null)},pa.prototype.delegate=function(e,t,n){return null!==n||void 0!==n?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},pa.prototype.down=function(e,t){return this.delegate("down",e,t)},pa.prototype.up=function(e,t){return this.delegate("up",e,t)},pa.prototype.lastKey=function(e){return e?this.lastModifiers[e]:pa.keyName(this.lastKeyCode)},pa.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<pa.MODIFIERS.length;t++)this.lastKey(pa.MODIFIERS[t])&&e.push(pa.MODIFIERS[t]);return pa.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var fa=pa,va=le.formatTime,ya=function(e){sa(n,e);var t=da(n);function n(e){var i;return ra(this,n),(i=t.call(this,e)).hoveringOverSeekBar=!1,i.hoverPosition=null,i.duration=null,i.firstFragDateTime=null,i.actualLiveTime=!!i.mediaControl.options.actualLiveTime,i.actualLiveTime&&(i.mediaControl.options.actualLiveServerTime?i.actualLiveServerTimeDiff=(new Date).getTime()-new Date(i.mediaControl.options.actualLiveServerTime).getTime():i.actualLiveServerTimeDiff=0),i}return oa(n,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"template",get:function(){return xe("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===Be.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,be.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,be.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,be.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,be.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),t=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),t=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(e=t-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=va(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var n=va(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),r=this.$el.width(),a=this.hoverPosition*i;a-=r/2,a=Math.max(0,Math.min(a,i-r)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){var e=De.getStyleFor('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),n}(Ne),ma=Un.getHostname,ba=Un.applySizeClass,Ea=window.WM&&window.WM.Settings||{},Aa=fa,ka=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).core._mediaControl=Ni(i),i.keepVisible=!1,i.userDisabled=!1,i.userKeepVisible=!1,i.isRendered=!1,i.focusElement=i.core.el,i.lastChromelessValue=!!i.options.chromeless,i.lastChromelessValue&&i.updateChromelessState(),i.kibo=new Aa(i.focusElement),i}return Ii(n,[{key:"getTapSide",value:function(e){var t=this.$el.width();return e-this.$el.offset().left<t/2?"left":"right"}},{key:"onTap",value:function(e){this.resetDoubleTapTimeout(),this.checkDoubleTap(e)?this.onDoubleTap(e):this.waitForDoubleTap()}},{key:"waitForDoubleTap",value:function(){var e=this;this.doubleTapWaitingTimeout=setTimeout((function(){e.onSingleTap()}),250)}},{key:"onSingleTap",value:function(){this.toggleMediaControl()}},{key:"onDoubleTap",value:function(e){var t=this.getTapSide(e.pageX);e.preventDefault(),this.core.trigger(Fn.MEDIACONTROL_DOUBLE_TAP,{event:e,tapSide:t})}},{key:"checkDoubleTap",value:function(e){var t=this.getTapSide(e.pageX),n=(new Date).getTime(),i=n-this.lastTapTime,r=i<250&&i>0&&this.lastTapPosition===t;return this.lastTapTime=n,this.lastTapPosition=t,r}},{key:"resetDoubleTapTimeout",value:function(){this.doubleTapWaitingTimeout&&clearTimeout(this.doubleTapWaitingTimeout),this.doubleTapWaitingTimeout=null}},{key:"toggleMediaControl",value:function(){this.isVisible()?this.hideDelayed(0,!0):this.show()}},{key:"getPanel",value:function(e){return this.$el.find(".media-control-panel__".concat(e))}},{key:"name",get:function(){return"globo_media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===Be.NO_OP}},{key:"hasPlaceholder",get:function(){return this._hasPlaceholder},set:function(e){this._hasPlaceholder=e}},{key:"attributes",get:function(){return{class:"media-control".concat(V.isMobile?" mobile":"").concat(V.supportsTouchEvents?" touch":"")}}},{key:"styles",get:function(){return""}},{key:"events",get:function(){var e={click:"onTap"},t={"mouseenter [data-controls]":"setUserKeepVisible","mouseleave [data-controls]":"resetUserKeepVisible",focusin:"show"},n=Pi(Pi(Pi({},e),t),{},{touchend:this.resetUserKeepVisible});return V.isHybridDevice?n:V.isMobile?e:t}},{key:"template",get:function(){return xe('<div class="media-control-panel">\n  <div class="media-control-panel__back-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__upper">\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n    <div class="media-control-position__center"></div>\n  </div>\n  <div class="media-control-panel__middle">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__between">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__lower" data-controls>\n    <div class="media-control-position__center"></div>\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__between"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__front-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__modal"></div>\n</div>\n')}}]),Ii(n,[{key:"getExternalInterface",value:function(){return{showMediaControlPanel:this.showPanel,hideMediaControlPanel:this.hidePanel}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,be.CORE_RESIZE,this.playerResize),this.listenTo(this.core,be.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,be.CORE_MOUSE_LEAVE,this.hideDelayed),this.listenTo(this,Fn.MEDIACONTROL_MODAL_SHOW,this.showModal),this.listenTo(this,Fn.MEDIACONTROL_MODAL_HIDE,this.hideModal),this.listenTo(this,Fn.MEDIACONTROL_KEEPVISIBLE,(function(t){return t?e.setUserKeepVisible():e.resetUserKeepVisible()})),this.listenTo(this,Fn.MEDIACONTROL_ITEMCLICKED,this.show),this.listenTo(this.core,Fn.WILL_SHOW_MODAL_ELEMENT,this.onModalElementShow),this.listenTo(this.core,Fn.DID_HIDE_MODAL_ELEMENT,this.onModalElementHide),this.listenTo(this.core,be.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,Fn.WILL_SHOW_DRAWER,this.onStartExpandDrawer),this.listenTo(this.core,Fn.WILL_HIDE_DRAWER,this.onStartShrinkDrawer),this.listenTo(this.core,Fn.DRAWER_HAS_PLACEHOLDER,this.onPlaceholderRequested),this.listenTo(this.core,Fn.SYNC_DRAWER_STATE_RESPONSE,this.syncWithDrawerIsShownResponse)}},{key:"onStartExpandDrawer",value:function(){this.updatePanelsVisibility({hide:!0,opaque:!0}),this.$modal.addClass("modal--hide")}},{key:"onStartShrinkDrawer",value:function(){this.$modal&&0==this.$modal.contents().length?(this.updatePanelsVisibility({hide:!1,opaque:!1}),V.isMobile&&this.show()):this.$modal.removeClass("modal--hide")}},{key:"bindContainerEvents",value:function(){this.container&&(this.container.trigger(be.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.listenTo(this.container,be.CONTAINER_PLAY,this.updatePlaybackTypeClass),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERING,this.updatePlaybackTypeClass),this.listenTo(this.container,be.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,be.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,Fn.DFP_AD_SKIPPED,this.resetFocus),this.listenTo(this.container,Fn.DFP_AD_CLICKED,this.resetFocus),this.listenTo(this.container,be.Custom.DAI_AD_BREAK_STARTED,this.onDAIAdBreakStarted),this.listenTo(this.container,be.Custom.DAI_AD_BREAK_ENDED,this.onDAIAdBreakEnded),V.isMobile&&this.listenTo(this.container,Fn.WILL_QUICK_SEEK,this.hide),this.render(),this.container.mediaControlDisabled&&this.disable())}},{key:"onDAIAdBreakStarted",value:function(){this.$el.addClass("media-control--dai")}},{key:"onDAIAdBreakEnded",value:function(){this.$el.removeClass("media-control--dai")}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.lastChromelessValue=this.options.chromeless,this.options.chromeless?(this.options.allowUserInteraction=!1,this.disable(),this.$el.hide()):(this.options.allowUserInteraction=!0,this.enable(),this.$el.show())}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,(this.container&&this.container.mediaControlDisabled||this.core.options.chromeless)&&this.disable(),this.bindContainerEvents(),this.updatePlaybackTypeClass(),this.trigger(be.MEDIACONTROL_CONTAINERCHANGED)}},{key:"createCachedElements",value:function(){this.$modal=this.$el.find(".media-control-panel__modal"),this.$lowerPanel=this.$el.find(".media-control-panel__lower"),this.$upperPanel=this.$el.find(".media-control-panel__upper")}},{key:"initMediaControlPlugins",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof hr})).forEach((function(t){return e.renderMediaControlPlugin(t)}))}},{key:"renderMediaControlPlugin",value:function(){throw new Error("renderMediaControlPlugin is not implemented")}},{key:"updatePlaybackTypeClass",value:function(){if(this.container){var e=this.container.getPlaybackType();this.$el.removeClass("vod live dvr ad dvr-disabled"),e&&this.$el.addClass(e),this.addDVRClass(e),"ad"===e&&this.core.$el.removeClass("nocursor")}}},{key:"addDVRClass",value:function(e){"live"===e&&(this.container.isDvrEnabled()?this.container.isDvrInUse()&&this.$el.addClass("dvr"):this.$el.addClass("dvr-disabled"))}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0,this.trigger(Fn.MEDIACONTROL_KEEPVISIBLE,!0))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1,this.trigger(Fn.MEDIACONTROL_KEEPVISIBLE,!1))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Pi({hide:!0},e),this.keepVisible=!1,this.userDisabled=!0,this.userKeepVisible=!1,e.hide&&this.hide(),this.updatePlaybackTypeClass()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isRendered&&this.render();var t=this.container.getPlaybackType(),n=Ea&&Ea.MediaControl||{},i=n.ShowOnStartList,r=(i||[]).find((function(e){return e.test(ma())})),a=r||"ad"===t;e=Pi({show:a},e),this.options.chromeless||(this.userDisabled=!1,e.show&&this.show())}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!V.isMobile||!e||"mousemove"!==e.type){clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),3e3),this.disabled||this.isVisible()||(this.trigger(be.MEDIACONTROL_SHOW),this.core.trigger(be.MEDIACONTROL_SHOW),this.container.trigger(be.CONTAINER_MEDIACONTROL_SHOW),this.$el.removeClass("media-control-hide"),this.updateCursorStyle(!0))}}},{key:"hideDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.container&&(this.isVisible()&&(!V.supportsTouchEvents||this.container.isPlaying())||n)){var i=t||3e3;clearTimeout(this.hideId),(this.disabled||!1!==this.options.hideMediaControl)&&(!this.disabled&&(t||this.userKeepVisible||this.keepVisible)?this.hideId=setTimeout((function(){return e.hideDelayed()}),i):this.hide())}}},{key:"hide",value:function(){!this.container||this.keepVisible||this.userKeepVisible||(this.core.trigger(be.MEDIACONTROL_HIDE),this.trigger(be.MEDIACONTROL_HIDE),this.container.trigger(be.CONTAINER_MEDIACONTROL_HIDE),this.$el.addClass("media-control-hide"),this.hideModal(),this.updateCursorStyle(!1))}},{key:"updateCursorStyle",value:function(e){"ad"!==this.container.getPlaybackType()&&(e||this.disabled?this.core.$el.removeClass("nocursor"):this.core.$el.addClass("nocursor"))}},{key:"showPanel",value:function(e){var t=e.panel;this.getPanel(t).removeClass("panel--hide")}},{key:"hidePanel",value:function(e){var t=e.panel;this.getPanel(t).addClass("panel--hide")}},{key:"showModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$modal.html(e),this.$modal.show().off("transitionend"),this.$modal.removeClass("modal--hide"),t.hidePanels&&this.updatePanelsVisibility({hide:!0}),this.updateClickToPausePlugin({enable:!1}),this.updateCastInfoVisibility({hidden:!0})}},{key:"hideModal",value:function(){var e=this,t=this.$modal&&this.$modal.contents();!t||t&&!t.length||(this.$modal.addClass("modal--hide").on("transitionend",(function(){e.$modal.hide().off("transitionend"),e.$modal.html("")})),this.syncWithDrawerIsShownRequest(),this.updatePanelsVisibility({hide:this.drawerOverModal}),this.updateClickToPausePlugin({enable:!0}),this.updateCastInfoVisibility({hidden:!1}))}},{key:"syncWithDrawerIsShownRequest",value:function(){this.core.trigger(Fn.SYNC_DRAWER_STATE_REQUEST)}},{key:"syncWithDrawerIsShownResponse",value:function(e){this.drawerOverModal=e}},{key:"onModalElementShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.addClass("".concat(t,"-modal--visible"))}},{key:"onModalElementHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.removeClass("".concat(t,"-modal--visible"))}},{key:"updateCastInfoVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hidden?"addClass":"removeClass";if(this.container&&this.container.$el[t]("chromecast-playback-overlay--hidden"),"boolean"==typeof e.opaque){var n=e.opaque?"addClass":"removeClass";this.$el[n]("media-control--panels-opaque")}}},{key:"onPlaceholderRequested",value:function(){this.hasPlaceholder=!0}},{key:"updateClickToPausePlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable?"enable":"disable",n=this.container.getPlugin("click_to_pause");!V.isMobile&&n&&n[t]()}},{key:"updatePanelsVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hide?"addClass":"removeClass";this.$el[t]("media-control--panels-hide")}},{key:"updateBackgroundType",value:function(){if(this.hasPlaceholder)this.$el.addClass("media-control--has-placeholder");else if(!V.isMobile&&!this.disabled){var e=this.$lowerPanel.position().top,t=this.$lowerPanel.height(),n=this.$lowerPanel.offsetParent().height(),i=Math.trunc(n-(e+t)),r=i>4;i!=this._bottomPanelPosition&&(this._bottomPanelPosition=i,r?this.$el.addClass("mobile"):this.$el.removeClass("mobile"));var a=this.$upperPanel.height();a!=this._upperPanelHeight&&(this._upperPanelHeight=a,r||0!=a?this.$el.removeClass("hide-top-background"):this.$el.addClass("hide-top-background"))}}},{key:"addResizeObserver",value:function(){var e=this;this.removeResizeObserver(),this._resizeInterval=setInterval((function(){return e.updateBackgroundType()}),500)}},{key:"removeResizeObserver",value:function(){this._resizeInterval&&clearInterval(this._resizeInterval)}},{key:"destroy",value:function(){this.removeResizeObserver(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"playerResize",value:function(e){var t=this.currentWidth!==e.width;!this.disabled&&t&&(ba(this.$el,e.width),this.currentWidth=e.width)}},{key:"resetFocus",value:function(){this.focusElement.focus()}},{key:"render",value:function(){if(!this.container||this.isRendered)return this;var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=Bn.getStyleFrom(this.styles.toString(),e);return this.$el.html(this.template()),this.$el.append(t[0]),this.core.$el.append(this.el),this.createCachedElements(),this.initMediaControlPlugins(),this.updatePlaybackTypeClass(),this.updateBackgroundType(),this.addResizeObserver(),this.disabled&&this.hide(),this.isRendered=!0,this.trigger(be.MEDIACONTROL_RENDERED),this}}]),n}(Ne),Ta='.media-control-notransition {\n  transition: none !important; }\n\n.clappr-player#wp3-player-0 .media-control {\n  position: absolute;\n  border-radius: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 997;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control::before, .clappr-player#wp3-player-0 .media-control::after {\n    content: "";\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 88px;\n    background: none;\n    z-index: -1;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control::before {\n    top: 0;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control::after {\n    bottom: 0;\n    background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.hide-top-background::after {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.mobile::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0.6;\n    background: #000;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    height: 88px;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control.mobile::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important; }\n    .clappr-player#wp3-player-0 .media-control-dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important; }\n  .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-button {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer {\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-panel__modal {\n    opacity: 1;\n    will-change: opacity;\n    visibility: visible;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control-panel__modal.modal--hide {\n      opacity: 0;\n      visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control-hide {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide.touch .media-control-button {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-element, .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-button {\n      pointer-events: none;\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide::before, .clappr-player#wp3-player-0 .media-control.media-control-hide::after {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-panel__front-layer {\n      opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.media-control--no-background::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide:before {\n    transition: none; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__lower {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control--has-placeholder::after {\n    height: 112px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__between {\n  pointer-events: auto; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle {\n  width: 100%;\n  height: 100%; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__between {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .modal-element {\n    z-index: 1000; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    position: relative; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container .media-control-position__between {\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__right {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    z-index: 300; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__center {\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper .media-control-position__center {\n    flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between, .clappr-player#wp3-player-0 .media-control .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .media-control-position__center {\n    flex-flow: column-reverse nowrap;\n    position: relative;\n    z-index: 200; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    display: flex;\n    flex: 1;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      flex-grow: 1; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__center, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    padding: 0 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-top: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-bottom: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper,\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle > *, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__modal {\n    pointer-events: auto; }\n\n.clappr-player#wp3-player-0 {\n  /*\n  * Utility class to hide content visually while keeping it screen reader-accessible.\n  * Source: https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html\n  */ }\n  .clappr-player#wp3-player-0 .media-control.touch .media-control-button[data-playpause] {\n    width: 48px;\n    height: 48px; }\n  .clappr-player#wp3-player-0 .media-control-panel__lower .media-control-element {\n    padding-top: 4px; }\n  .clappr-player#wp3-player-0 .media-control-element {\n    padding: 12px;\n    will-change: opacity;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control-element--sticky {\n      opacity: 1 !important;\n      pointer-events: auto !important; }\n    .clappr-player#wp3-player-0 .media-control-element--hidden {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control-button {\n    display: inline-block;\n    margin: 0;\n    border: 0;\n    cursor: pointer;\n    background-color: transparent;\n    text-align: center;\n    width: 24px;\n    height: 24px;\n    box-sizing: content-box;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control-button svg {\n      width: 100%;\n      height: 100%; }\n    .clappr-player#wp3-player-0 .media-control-button:active, .clappr-player#wp3-player-0 .media-control-button:focus {\n      outline: 1; }\n    .clappr-player#wp3-player-0 .media-control-button--hidden {\n      display: none; }\n    .clappr-player#wp3-player-0 .media-control-button[data-chromecast] svg.player-cast-loading {\n      width: 24px;\n      height: 24px; }\n  .clappr-player#wp3-player-0 .visually-hidden:not(:focus):not(:active) {\n    clip: rect(0 0 0 0);\n    -webkit-clip-path: inset(100%);\n            clip-path: inset(100%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px; }\n\n.clappr-player#wp3-player-0 .media-control.ad {\n  background: none;\n  visibility: visible;\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.touch {\n    visibility: hidden !important;\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-button {\n      visibility: hidden !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__lower {\n      opacity: 1 !important;\n      visibility: visible !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__modal {\n      pointer-events: auto !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel > * {\n      pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .dfp-countdown {\n      visibility: hidden;\n      pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control.ad:after, .clappr-player#wp3-player-0 .media-control.ad:before {\n    content: \'\';\n    left: 0;\n    height: 48px;\n    background: none;\n    opacity: 1;\n    position: absolute;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    width: 100%;\n    will-change: opacity;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.ad:before {\n    top: 0;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.ad:after {\n    bottom: 0;\n    background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__lower .opposites-container {\n    opacity: 1;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper {\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:before, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:after {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__lower .opposites-container {\n    opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide {\n  pointer-events: auto; }\n  .clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide .media-control-panel__upper {\n    pointer-events: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    transform: scale(1); }\n\n.clappr-player#wp3-player-0 .media-control.ad .dfp-countdown {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button svg path[fill], .clappr-player#wp3-player-0 .media-control.ad .media-control-element svg path[fill] {\n  fill: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-share], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-share] {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .time-indicator,\n.clappr-player#wp3-player-0 .media-control.ad .live-button,\n.clappr-player#wp3-player-0 .media-control.ad .chromecast-button {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container {\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-seekbar] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar] {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n    background-color: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container__placeholder {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] {\n  position: fixed;\n  width: 100%;\n  left: 50%;\n  transform: translate(-50%);\n  top: calc(100% - 4px);\n  height: 4px;\n  margin-bottom: 0;\n  overflow: hidden;\n  cursor: default;\n  opacity: 1;\n  transition: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    margin: 0;\n    height: 100%;\n    border-radius: 0;\n    background-color: rgba(255, 255, 255, 0.4);\n    box-shadow: none;\n    transform: scaleY(1);\n    left: 0; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      display: none; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      border-radius: 0; }\n\n.clappr-player#wp3-player-0 .media-control.live {\n  min-height: auto; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    background-color: #fff;\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    display: block; }\n  .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .time-indicator {\n    display: none; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #ff0000; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block; }\n';or(Ta);var _a=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){Fi(Li(n.prototype),"bindEvents",this).call(this),this.listenTo(this.core,Fn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Fn.STOP_DRAGGING_SEEKBAR,this.onStopDragginSeekbar)}},{key:"renderMediaControlPlugin",value:function(e){var t=e.panel,n=e.position,i=e.el,r=".media-control-panel__".concat(t," ").concat(n?".media-control-position__".concat(n):"");this.$el.find(r).append(i),e.render()}},{key:"onStartDraggingSeekbar",value:function(){this.hidePanel({panel:"upper"}),this.hidePanel({panel:"between"})}},{key:"onStopDragginSeekbar",value:function(){this.showPanel({panel:"upper"}),this.showPanel({panel:"between"})}},{key:"styles",get:function(){return Ta}}]),n}(ka),wa=function(e){Oi(n,e);var t=Bi(n);function n(e){return Ci(this,n),t.call(this,e)}return Ii(n,[{key:"name",get:function(){return"play_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return V.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return V.supportsTouchEvents?"center":"left"}},{key:"attributes",get:function(){return{class:"media-control-button","data-playpause":""}}},{key:"events",get:function(){return{click:this.togglePlayPause}}},{key:"isPauseDisabled",get:function(){var e=this.container&&this.container.getPlaybackType()===Be.LIVE,t=this.container.playback&&!this.container.playback.dvrEnabled;return e&&t}}]),Ii(n,[{key:"destroy",value:function(){this.unbindKeyEvents()}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,be.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,be.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,be.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,be.CONTAINER_ENDED,this.changeTogglePlay),this.listenTo(this.container,Fn.WM_SPINNER_START,this.hidePlayButton),this.listenTo(this.container,Fn.WM_SPINNER_STOP,this.showPlayButton))}},{key:"hidePlayButton",value:function(){V.supportsTouchEvents&&this.$el.hide()}},{key:"showPlayButton",value:function(){V.supportsTouchEvents&&this.$el.show()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("space")}},{key:"onContainerChanged",value:function(){this.bindContainerEvents(),this.changeTogglePlay()}},{key:"changeTogglePlay",value:function(){this.$el.html(""),this.container&&this.container.isPlaying()?(this.isPauseDisabled?this.$el.hide():(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Pausar</span>'),this.$el.removeClass("play"),this.$el.addClass("pause"),this.$el.show()),this.trigger(be.MEDIACONTROL_PLAYING)):(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8 5v14l11-7z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir</span>'),this.$el.removeClass("stop pause"),this.$el.addClass("play"),this.$el.show(),this.trigger(be.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$el)}},{key:"togglePlayPause",value:function(){if(!this.isPauseDisabled)return this.container.isPlaying()?this.container.pause({userInvoked:!0}):this.container.play({userInvoked:!0}),!1;!this.container.isPlaying()&&this.container.play({userInvoked:!0})}},{key:"render",value:function(){return this.bindKeyEvents(),this.changeTogglePlay(),this}}]),n}(hr),Sa='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path fill="#FFF" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/>\n  </g>\n</svg>',Ca=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onClick",value:function(){this.backButtonEnabled&&this.core.trigger(Fn.BACK_BUTTON_CLICKED)}},{key:"onOptionsChange",value:function(){this.lastBackButtonValue!==!!this.backButtonEnabled&&this.updateBackButtonState()}},{key:"updateBackButtonState",value:function(){this.backButtonEnabled?this.show():this.hide(),this.lastBackButtonValue=this.backButtonEnabled}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){var e=U("<span/>").addClass("visually-hidden").text("Sair do vdeo");return this.$el.html(""),this.$el.append(Sa),this.$el.append(e),this.updateBackButtonState(),this}},{key:"name",get:function(){return"back_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"backButtonEnabled",get:function(){return this.options.events&&"function"==typeof this.options.events.onBackButtonClicked}},{key:"attributes",get:function(){return{class:"media-control-button","data-controls":""}}},{key:"events",get:function(){return{click:this.onClick}}}]),n}(hr),Ra=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).fullScreenOnVideoTagSupported=null,i}return Ii(n,[{key:"getExternalInterface",value:function(){return{toggleFullscreen:this.toggleFullscreen}}},{key:"name",get:function(){return"fullscreen_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"screenOrientationAvailable",get:function(){var e;return null===(e=screen)||void 0===e?void 0:e.orientation}},{key:"isIdle",get:function(){var e=this.container.getPlugin("poster");return e&&!e.$el.hasClass("poster--hidden")}},{key:"attributes",get:function(){return{class:"media-control-button","data-fullscreen":""}}},{key:"events",get:function(){return{click:this.onClick}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_RESIZE,this.changeToggleFullscreen),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e,t;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.fullScreenOnVideoTagSupported=null,this.container&&(this.bindKeyEvents(),this.listenTo(this.container,be.CONTAINER_DBLCLICK,this.toggleFullscreen),V.isiOS&&this.listenTo(this.container,Fn.DFP_CONTENT_PAUSE,this.toggleFullscreenForiOSAdPlayback),"video"===(null===(e=this.playback)||void 0===e||null===(t=e.videoEl)||void 0===t?void 0:t.nodeName.toLowerCase())&&this.listenToOnce(this.container,be.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag),(V.isIE&&!V.isIE11||V.supportsTouchEvents)&&this.stopListening(this.container,be.CONTAINER_DBLCLICK))}},{key:"toggleFullscreenForiOSAdPlayback",value:function(){this.core.isFullscreen()&&this.toggleFullscreen()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("f",(function(){return e.toggleFullscreen()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("f")}},{key:"onLoadedMetadataOnVideoTag",value:function(){!le.Fullscreen.fullscreenEnabled()&&this.playback.videoEl.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.render())}},{key:"changeToggleFullscreen",value:function(){this.$el.html(""),le.Fullscreen.fullscreenElement()?this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M7 15h2v6H7v-4H3v-2h4zm10-8h4v2h-6V3h2v4zM7 9H3V7h4V3h2v6H7zm10 6h4v2h-4v4h-2v-6h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Sair do modo tela cheia</span>'):this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19 21h-4v-2h4v-4h2v6h-2zm0-18h2v6h-2V5h-4V3h4zM5 19h4v2H3v-6h2v4zM5 3h4v2H5v4H3V3h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Tela cheia</span>'),this.applyButtonStyle(this.$el)}},{key:"onClick",value:function(){this.toggleFullscreen()}},{key:"toggleFullscreen",value:function(){this.container.fullscreen(),this.core.toggleFullscreen(),this.mediaControl.resetUserKeepVisible()}},{key:"render",value:function(){if(this.fullScreenOnVideoTagSupported||le.Fullscreen.fullscreenEnabled())return this.changeToggleFullscreen(),this}}]),n}(hr),Ia='.clappr-player#wp3-player-0 .time-indicator {\n  display: flex;\n  height: 24px;\n  box-sizing: content-box;\n  align-items: center;\n  cursor: default;\n  position: relative;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  line-height: 16px;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .time-indicator .separator {\n    display: inline;\n    margin: 0 5px;\n    opacity: 0.5; }\n  .clappr-player#wp3-player-0 .time-indicator--collapse {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .time-indicator--collapse .separator, .clappr-player#wp3-player-0 .time-indicator--collapse [data-duration] {\n      display: none; }\n\n.clappr-player#wp3-player-0 .media-control:not(.mobile) .time-indicator {\n  padding-left: 0; }\n\n.clappr-player#wp3-player-0 [data-position],\n.clappr-player#wp3-player-0 [data-duration] {\n  display: inline; }\n';or(Ia);var xa=function(e){Oi(n,e);var t=Bi(n);function n(e){return Ci(this,n),t.call(this,e)}return Ii(n,[{key:"name",get:function(){return"time_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"hasSizeChanged",get:function(){return this.lastSize===this.actualSize}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"events",get:function(){return{click:this.toggleTimeIndicator}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.setDuration))}},{key:"setDuration",value:function(e){var t=le.formatTime(e.duration/1e3);this.$duration.text(t),this.$rightContainer=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__right")}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&this.$rightContainer&&(this.actualSize=e,this.shouldCollapse=this.actualSize.width-this.$rightContainer.width()<130,this.shouldCollapse?(this.$el.addClass("time-indicator--collapse"),this.$duration.hide()):(this.$el.removeClass("time-indicator--collapse"),this.$duration.show()),this.$position.show(),this.updateTimeIndicator(),this.lastSize=this.actualSize)}},{key:"onTimeUpdate",value:function(e){"ad"!==e.playbackType&&(this.currentPositionValue=e.current<0?e.total:e.current,this.currentDurationValue=e.total,null!==this.currentPositionValue&&null!==this.currentDurationValue&&this.updateTimeIndicator())}},{key:"updateTimeIndicator",value:function(){this.updatePosition(),this.shouldCollapse?this.updateRemainingTime():this.updateDuration()}},{key:"updatePosition",value:function(){if(!this.hasSizeChanged||parseInt(this.currentPositionValue)!==parseInt(this.lastPositionValue)){var e=le.formatTime(this.currentPositionValue);this.$position.text(e),this.lastPositionValue=this.currentPositionValue}}},{key:"updateRemainingTime",value:function(){var e=-1*(this.currentPositionValue-this.currentDurationValue);if(!this.hasSizeChanged||parseInt(e)!==parseInt(this.lastRemainingTime)){var t=e>1,n="";n=(t?"-":"")+(n=le.formatTime(t?e:0)),this.lastRemainingTime=e,this.$duration.text(n)}}},{key:"updateDuration",value:function(){if(!this.hasSizeChanged||parseInt(this.currentDurationValue)!==parseInt(this.lastDurationValue)){var e=le.formatTime(this.currentDurationValue);this.$duration.text(e),this.lastDurationValue=this.currentDurationValue}}},{key:"toggleTimeIndicator",value:function(e){e&&e.stopPropagation(),this.shouldCollapse&&(this.$position.is(":visible")?this.$position.hide():this.$position.show(),this.$duration.is(":visible")?this.$duration.hide():this.$duration.show())}},{key:"render",value:function(){this.$position=$("<span/>").attr("data-position","").html("00:00"),this.$separator=$("<span/>").addClass("separator").html("/"),this.$duration=$("<span/>").attr("data-duration","").html("00:00"),this.$el.empty();var e=Bn.getStyleFrom(Ia,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$position[0]),this.$el.append(this.$separator[0]),this.$el.append(this.$duration[0]),this}}]),n}(hr),Da='<span class="skip-button__label"><%= label %></span>\n',Pa='.clappr-player#wp3-player-0 .media-control .skip-button {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: -8px;\n  right: 0;\n  width: auto;\n  height: auto;\n  border-radius: 4px;\n  background-color: #333;\n  margin: 0 12px;\n  pointer-events: auto;\n  z-index: 400;\n  will-change: opacity, transform;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control .skip-button__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    font-style: normal;\n    font-stretch: normal;\n    line-height: 1.14;\n    letter-spacing: normal;\n    color: #eeeeee; }\n  .clappr-player#wp3-player-0 .media-control .skip-button:hover, .clappr-player#wp3-player-0 .media-control .skip-button:focus {\n    background-color: #eeeeee;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button:focus .skip-button__label {\n      color: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button:focus svg path[fill] {\n      fill: #111111 !important; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--left {\n    right: auto;\n    left: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button svg {\n    width: 24px;\n    height: 24px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button, .clappr-player#wp3-player-0 .media-control .skip-button--start_over {\n    padding: 6px 12px;\n    background-color: #eee; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg, .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n      margin-top: 2px; }\n      .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg path[fill] {\n        fill: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button--start_over .skip-button__label {\n      color: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button:hover, .clappr-player#wp3-player-0 .media-control .skip-button--live_button:focus, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:hover, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:focus {\n      background-color: #cecece; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg {\n    transform: rotate(180deg);\n    margin-left: 5px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n    margin-right: 5px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--sticky {\n  transform: translateY(0px); }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--force-transform-animation {\n  transition: transform 0.3s ease; }\n\n.clappr-player#wp3-player-0 .media-control-hide .skip-button--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important; }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch .skip-button--sticky {\n  transform: translateY(52px); }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch.w360 .skip-button--sticky {\n  transform: translateY(60px); }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible.touch .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible.touch .skip-button {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible .skip-button {\n  opacity: 0.5;\n  z-index: 100; }\n\n.clappr-player#wp3-player-0 .media-control.settings-modal--visible .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n';or(Pa);var Oa=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"onClick",value:function(){this.disableButton(),this.container.trigger(Fn.SKIP_BUTTON_CLICKED,{name:this.name}),this.seekToEndCuepoint()}},{key:"seekToEndCuepoint",value:function(){this.container.seek(this.endCuepoint.time),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,Fn.DID_LOAD_CUEPOINTS,this.onCuepointsLoaded),this.listenTo(this.container,Fn.DFP_AD_STARTED,this.onAdStarted))}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onCuepointsLoaded",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.startCuepoint=t.find((function(t){return t.type===e.startCuepointType})),this.endCuepoint=t.find((function(t){return t.type===e.endCuepointType})),this.startCuepoint&&this.endCuepoint&&this.shouldActive&&this.listenTo(this.container.playback,be.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.current,n=t>=this.startCuepoint.time&&t<this.endCuepoint.time,i=t>=this.startCuepoint.time&&t<this.startCuepoint.time+5;n!==this.isActive&&(n?this.enableButton():this.disableButton()),i!==this.isSticky&&(i?this.setSticky():this.resetSticky())}},{key:"enableButton",value:function(){this.container.trigger(Fn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden"),this.bindKeyEvents(),this.isActive=!0}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden").removeClass("skip-button--sticky").off("transitionend"),this.isActive=!1}},{key:"setSticky",value:function(){var e=this;if(this.mediaControl.isVisible())return this.$el.addClass("skip-button--sticky skip-button--force-transform-animation");this.$el.addClass("skip-button--sticky").on("transitionend",(function(){e.$el.addClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetSticky",value:function(){var e=this;this.$el.removeClass("skip-button--sticky").on("transitionend",(function(){e.$el.removeClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetState",value:function(){this.isActive=!1}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("enter",(function(){e.isSticky&&e.onClick()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("enter")}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Bn.getStyleFrom(Pa,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.append(t[0]),this}},{key:"destroy",value:function(){this.unbindKeyEvents(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"skip_button"}},{key:"type",get:function(){return""}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return xe(Da)}},{key:"label",get:function(){return""}},{key:"startCuepointType",get:function(){return""}},{key:"endCuepointType",get:function(){return""}},{key:"shouldActive",get:function(){return this.endCuepoint.time-this.startCuepoint.time>=10}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.type," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"isSticky",get:function(){return this.$el.hasClass("skip-button--sticky")}}]),n}(hr),La=Un.seekStringToSeconds,Ma=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"onCuepointsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Fi(Li(n.prototype),"onCuepointsLoaded",this).call(this,e),this.autoSkipEnabled){var t=this.endCuepoint.time;t&&(this.container.trigger(Fn.WILL_AUTO_SKIP_RECAP),this.container.playback.setInitialTime(t))}}},{key:"name",get:function(){return"skip_recap"}},{key:"type",get:function(){return"recap"}},{key:"label",get:function(){return"Pular Resumo"}},{key:"startCuepointType",get:function(){return"recap_start"}},{key:"endCuepointType",get:function(){return"recap_end"}},{key:"autoSkipEnabled",get:function(){var e=this.options.resumeAt||La();return this.options.skipRecap&&this.endCuepoint&&!e}}]),n}(Oa),Na=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"name",get:function(){return"skip_intro"}},{key:"type",get:function(){return"intro"}},{key:"label",get:function(){return"Pular Abertura"}},{key:"startCuepointType",get:function(){return"opening_start"}},{key:"endCuepointType",get:function(){return"opening_end"}}]),n}(Oa),Ua="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ba(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fa(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var Va="Expected a function",Ha=/^\s+|\s+$/g,ja=/^[-+]0x[0-9a-f]+$/i,Ka=/^0b[01]+$/i,Ga=/^0o[0-7]+$/i,za=parseInt,Wa="object"==typeof Ua&&Ua&&Ua.Object===Object&&Ua,Ya="object"==typeof self&&self&&self.Object===Object&&self,qa=Wa||Ya||Function("return this")(),$a=Object.prototype.toString,Xa=Math.max,Za=Math.min,Qa=function(){return qa.Date.now()};function Ja(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Va);function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(v,t),c?p(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=Qa();if(g(e))return y(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?Za(n,a-(e-u)):n}(e))}function y(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function m(){var e=Qa(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return s=setTimeout(v,t),p(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=to(t)||0,eo(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Xa(to(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},m.flush=function(){return void 0===s?o:y(Qa())},m}function eo(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function to(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==$a.call(e)}(e))return NaN;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ha,"");var n=Ka.test(e);return n||Ga.test(e)?za(e.slice(2),n?2:8):ja.test(e)?NaN:+e}var no=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(Va);return eo(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ja(e,t,{leading:i,maxWait:t,trailing:r})},io='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n     <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11.5 18V6L3 12l8.5 6zm.5-6l8.5 6V6L12 12z" fill="#FFF"/>\n    </g>\n</svg>',ro=Un.getHostname,ao=Un.getCurrentTime,oo=Un.getTimeFromPosition,so=window.WM&&window.WM.Settings||{},lo=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e))._throttledPositionUpdate=no((function(){var e;return(e=i).updateButtonState.apply(e,arguments)}),5e3,{trailing:!1}),i.currentProgram={},((so&&so.StartOver||{}).Blacklist||[]).find((function(e){return e.test(ro())}))&&i.destroy(),i}return Ii(n,[{key:"name",get:function(){return"start_over"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return xe(Da)}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"programStartPositionOffset",get:function(){return ao(this.innerPlayback)-this.currentProgram.startTime}},{key:"programStartPosition",get:function(){return this.innerPlayback.getCurrentTime()-this.programStartPositionOffset}},{key:"label",get:function(){var e="Incio",t="Assistir do ".concat(e.toLowerCase());return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--left skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"canSeekToProgramStart",get:function(){var e=this.innerPlayback.getCurrentTime()-this.programStartPositionOffset>=0;return this.programStartPositionOffset>5&&e}}]),Ii(n,[{key:"onClick",value:function(){this.container.trigger(Fn.SKIP_BUTTON_CLICKED,{name:this.name}),this.canSeekToProgramStart&&(this.seekToProgramStart(),this.updateButtonState())}},{key:"seekToProgramStart",value:function(){this.container.seek(this.programStartPosition),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.listenToOnce(this.container,Fn.DID_LOAD_EPG,this.onEPGLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onEPGLoaded",value:function(){this.listenTo(this.container,Fn.DID_CHANGE_CURRENT_PROGRAM,this.onProgramChange),this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate)}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"getCurrentPositionTime",value:function(){var e=this.innerPlayback.getCurrentTime(),t=this.innerPlayback.getProgramDateTime(),n=new Date(t);return oo(e,n)}},{key:"onProgramChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=void 0===t?{}:t;this.currentProgram=n||{},this.updateButtonState()}},{key:"updateButtonState",value:function(){this.isActive!==this.canSeekToProgramStart&&(this.isActive=this.canSeekToProgramStart,this.isActive?this.enableButton():this.disableButton())}},{key:"enableButton",value:function(){this.container.trigger(Fn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetState",value:function(){this.isActive=!1}},{key:"render",value:function(){var e=this.template({label:this.label}),t=Bn.getStyleFrom(Pa,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.prepend(io),this.$el.append(t[0]),this}}]),n}(hr),uo=Un.getHostname,co=window.WM&&window.WM.Settings||{},ho=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),i=t.call(this,e),((co&&co.StartOver||{}).Blacklist||[]).find((function(e){return e.test(uo())}))&&i.destroy(),i}return Ii(n,[{key:"name",get:function(){return"live_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return xe(Da)}},{key:"events",get:function(){return{click:this.onClick}}},{key:"label",get:function(){var e=this.options&&this.options.isLiveContent?"ao vivo":"agora",t="Assistir ".concat(e);return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,be.CONTAINER_PLAYBACKDVRSTATECHANGED,this.toggleButton),this.listenTo(this.container,be.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,be.CONTAINER_PAUSE,this.updateState)}},{key:"toggleButton",value:function(e){this.dvrInUse=e,this.dvrInUse?this.enableButton():this.disableButton()}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"onClick",value:function(){this.core.mediaControl.container.isPlaying()||this.core.mediaControl.container.play(),this.dvrInUse&&this.core.mediaControl.container.seek(this.core.mediaControl.container.getDuration())}},{key:"updateState",value:function(){this.dvrInUse?this.enableButton():this.disableButton()}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"enableButton",value:function(){this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"render",value:function(){var e=Bn.getStyleFrom(Pa,{playerId:this.core.options.playerId});return this.$el.html(this.template({label:this.label})),this.$el.append(io),this.$el.append(e[0]),this}}]),n}(hr),po='.clappr-player#wp3-player-0 .drawer-container[data-volume] {\n  z-index: 300;\n  position: relative;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume] .media-control-button {\n    padding: 0; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide {\n    z-index: auto; }\n    .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide .bar-container[data-volume] {\n      opacity: 0;\n      visibility: hidden; }\n\n.clappr-player#wp3-player-0 .drawer-icon-container {\n  width: 24px;\n  height: 24px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-volume] {\n  will-change: visibility, opacity;\n  position: absolute;\n  bottom: 42px;\n  width: 30px;\n  height: 115px;\n  left: 8px;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.85);\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume]:after {\n    content: "";\n    width: 100%;\n    position: absolute;\n    height: 10px;\n    bottom: -10px;\n    left: 0; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] {\n    position: relative;\n    top: 15px;\n    width: 2px;\n    margin-left: 14px;\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 10px;\n    height: calc(100% - 30px);\n    overflow: hidden;\n    box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n      position: absolute;\n      bottom: 0;\n      background: #fff;\n      width: 100%;\n      height: 0;\n      transition: height .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] {\n    position: absolute;\n    left: 9px;\n    width: 12px;\n    height: 12px;\n    bottom: 40%;\n    transition: bottom .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n      width: 100%;\n      height: 100%;\n      border-radius: 6px;\n      background-color: #fff;\n      box-shadow: 0 0 1px black; }\n';or(po);var fo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Silenciar som</span>',go='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Ativar som</span>',vo=Un.autoplayManager,yo=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).persistConfig=i.core.options.persistConfig,i.isUserGesture=!1,i.stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},$(document).bind("mouseup",i.stopDragHandler),$(document).bind("mousemove",i.updateDragHandler),i}return Ii(n,[{key:"name",get:function(){return"volume"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return xe('<div class="drawer-icon-container" data-volume>\n  <button class="drawer-icon media-control-button media-control-element" data-volume></button>\n</div>\n\n<div class="bar-container" data-volume>\n  <div class="bar-background" data-volume>\n    <div class="bar-fill-1" data-volume></div>\n    <div class="bar-hover" data-volume></div>\n  </div>\n  <div class="bar-scrubber" data-volume>\n    <div class="bar-scrubber-icon" data-volume></div>\n  </div>\n</div>\n')}},{key:"volume",get:function(){return this.container.volume}},{key:"muted",get:function(){return 0===this.volume}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"attributes",get:function(){return{class:"drawer-container volume-hide","data-volume":""}}},{key:"events",get:function(){return{mouseenter:this.showVolumeBar,mouseleave:this.hideVolumeBar,"click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mousedown .bar-container[data-volume]":"startVolumeDrag"}}},{key:"mutedAutoplay",get:function(){return this.idPlayback.mutedAutoplay}}]),Ii(n,[{key:"destroy",value:function(){Fi(Li(n.prototype),"destroy",this).call(this),$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Fn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"updateContainer",value:function(){this.unbindContainerEvents(),this.container=this.core.activeContainer,this.idPlayback=this.container&&this.container.playback,this.container&&this.bindContainerEvents()}},{key:"onContainerChanged",value:function(){this.updateContainer(),this.setInitialVolume()}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,be.CONTAINER_VOLUME,this.onContainerVolumeUpdate),this.listenTo(this.idPlayback,Fn.WM_USER_PLAY_REQUESTED,this.setInitialVolume)}},{key:"unbindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback)}},{key:"getInitialVolume",value:function(){var e=this.persistConfig?le.Config.restore("volume"):100;return this.lastVolume=e,(this.core.options.mute||this.mutedAutoplay)&&(e=0),this.currentVolume=e,e}},{key:"setInitialVolume",value:function(){this.setVolume(this.getInitialVolume(),{initial:!0})}},{key:"onTapToUnmuteClicked",value:function(){this.isUserGesture=!0,this.setVolume(this.lastVolume||100),this.isAd&&this.idPlayback.volume(this.lastVolume||100),vo.consent()}},{key:"toggleMute",value:function(e){e&&e.stopPropagation(),this.isUserGesture=!0,this.setVolume(this.muted?this.lastVolume||100:0)}},{key:"onContainerVolumeUpdate",value:function(e){e=void 0!==e&&e>=0?e:this.volume,this.updateVolumeUI(e),this.draggingVolumeBar||(this.currentVolume>0&&this.muted?this.container.trigger(Fn.WM_MUTED,this.lastVolume,this.isUserGesture):this.currentVolume<=0&&!this.muted&&this.container.trigger(Fn.WM_UNMUTED,this.lastVolume,this.isUserGesture),this.isUserGesture=!1,this.lastVolume=this.currentVolume!==e?this.currentVolume:this.lastVolume,this.currentVolume=e)}},{key:"updateVolumeUI",value:function(e){var t=this;this.container.isReady?this.$volumeBarContainer&&(this.updateVolumeBar(e),this.updateVolumeIcon(e)):this.listenToOnce(this.container,be.CONTAINER_READY,(function(){return t.updateVolumeUI(e)}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initial;e=Math.min(100,Math.max(e,0)),this.persistConfig&&!i&&le.Config.persist("volume",e);var r=function(){t.stopListening(t.idPlayback,Fn.WM_PLAYBACK_WILL_PLAY),t.container.isReady?t.container.setVolume(e):t.listenToOnce(t.idPlayback,Fn.WM_PLAYBACK_WILL_PLAY,(function(){t.container.setVolume(t.getInitialVolume())}))};this.container?r():this.listenToOnce(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,(function(){r()}))}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"getVolumeFromUIEvent",value:function(e){var t=100*(1-(e.pageY-this.$volumeBarContainer.offset().top)/this.$volumeBarContainer.height());return Math.min(100,Math.max(t,0))}},{key:"updateVolumeBar",value:function(e){var t=this.$volumeBarContainer.height(),n=this.$volumeBarBackground.height(),i=(t-n)/2,r=n*e/100-this.$volumeBarScrubber.height()/2+i;this.$volumeBarFill.css({height:e+"%"}),this.$volumeBarScrubber.css({bottom:r})}},{key:"updateVolumeIcon",value:function(e){this.$volumeIcon.html(""),e>0?this.$volumeIcon.append(fo):this.$volumeIcon.append(go)}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.mediaControl.$el.addClass("media-control-dragging"),this.mediaControl.setKeepVisible(),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingVolumeBar&&(this.mediaControl.resetKeepVisible(),this.mediaControl.$el.removeClass("media-control-dragging"),this.draggingVolumeBar=!1,this.isUserGesture=!0,this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"updateDrag",value:function(e){this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"showVolumeBar",value:function(){V.supportsTouchEvents||(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.triggerWillShowModalElement(),this.$el.removeClass("volume-hide"),this.mediaControl&&this.mediaControl.trigger(Fn.WM_VOLUME_SHOW),this.isVolumeBarVisible=!0)}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isVolumeBarVisible&&this.$volumeBarContainer&&("number"!=typeof t.timeout&&(t.timeout=150),this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar(t)}),t.timeout):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){e.$el.addClass("volume-hide"),e.mediaControl&&e.mediaControl.trigger(Fn.WM_VOLUME_HIDE),e.isVolumeBarVisible=!1,e.triggerDidHideModalElement()}),t.timeout)))}},{key:"createCachedElements",value:function(){this.hasCachedElements=!0,this.$volumeBarContainer=this.$el.find(".bar-container"),this.$volumeIcon=this.$el.find(".drawer-icon"),this.$volumeBarBackground=this.$el.find(".bar-background"),this.$volumeBarFill=this.$el.find(".bar-fill-1"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber")}},{key:"render",value:function(){if(!this.hasCachedElements){this.$el.html(this.template());var e=Bn.getStyleFrom(po,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.createCachedElements(),this.$volumeIcon.html(fo),this}}}]),n}(hr);function mo(e,t){return"".concat(e).concat(t>1?"s":"")}var bo=".clappr-player#wp3-player-0 .media-control.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .thumb-preview {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control-panel__lower .bar-container[data-seekbar] {\n  padding: 12px 0; }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: translate(-50%, -50%); }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: none; }\n\n.clappr-player#wp3-player-0 .media-control-dragging .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: scale(2) !important; }\n\n.clappr-player#wp3-player-0 .bar-container__placeholder {\n  height: 36px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 24px);\n  height: 24px;\n  cursor: pointer;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  touch-action: manipulation;\n  top: calc(50% + 6px);\n  left: 50%;\n  transform: translate(-50%, -50%); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    position: absolute;\n    display: flex;\n    align-self: center;\n    width: 100%;\n    height: 2px;\n    background-color: rgba(255, 255, 255, 0.2);\n    overflow: hidden;\n    top: 50%;\n    left: 50%;\n    will-change: transform;\n    transform-origin: top;\n    transform: scaleY(1) translate(-50%, -50%);\n    transition: transform .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 0;\n      height: 100%; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      background-color: rgba(255, 255, 255, 0.3);\n      transition: width .1s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      background-color: #ffffff; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none;\n      position: absolute;\n      width: 5px;\n      height: 100%;\n      background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n    transform: scaleY(2) translate(-50%, -50%); }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: block; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover-disable[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    transform: scale(1.5); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar].seek-disabled {\n    cursor: default; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    position: relative;\n    display: flex;\n    align-self: center;\n    left: 0;\n    width: 8px;\n    height: 8px;\n    text-align: center;\n    z-index: 200; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n      display: inline-block;\n      position: absolute;\n      left: 0;\n      background-color: #fff;\n      border-radius: 50%;\n      height: 100%;\n      width: 100%;\n      will-change: transform;\n      transform: scale(1);\n      transition: transform .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber-mobile[data-seekbar] {\n    transition: unset; }\n";or(bo);var Eo=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},V.supportsTouchEvents&&(U(document).bind("touchend",i.stopDragHandler),U(document).bind("touchmove",i.updateDragHandler)),V.supportsTouchEvents&&!V.isHybridDevice||(U(document).bind("mouseup",i.stopDragHandler),U(document).bind("mousemove",i.updateDragHandler)),i}return Ii(n,[{key:"name",get:function(){return"seekbar"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"center"}},{key:"template",get:function(){return xe('<div class="seekbar">\n  <div class="bar-background" data-seekbar tabindex="0">\n    <div class="bar-fill-1" data-seekbar></div>\n    <div class="bar-fill-2" data-seekbar></div>\n    <div class="bar-hover" data-seekbar></div>\n  </div>\n  <div class="bar-scrubber" data-seekbar role="slider" aria-valuemin="0" aria-valuemax="0" tabindex="-1" aria-valuenow="0" aria-valuetext="Ponto do vdeo, 0 minuto e 0 segundo.">\n    <div class="bar-scrubber-icon" data-seekbar></div>\n  </div>\n</div>\n<div id="seek-feedback" aria-live="polite" class="visually-hidden"></div>\n')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"isLivePlayback",get:function(){return this.container&&this.container.getPlaybackType()===Be.LIVE}},{key:"attributes",get:function(){return{class:"bar-container","data-seekbar":""}}},{key:"events",get:function(){var e={click:this.seek,touchmove:this.startActionOnSeekBar,touchend:this.leaveActionOnSeekBar,touchstart:this.startSeekDrag},t={click:this.seek,mousemove:this.startActionOnSeekBar,mouseleave:this.leaveActionOnSeekBar,"mousedown .bar-scrubber[data-seekbar]":"startSeekDrag"},n=Pi(Pi({},e),t);return V.isHybridDevice?n:V.supportsTouchEvents?e:t}}]),Ii(n,[{key:"destroy",value:function(){Fi(Li(n.prototype),"destroy",this).call(this),U(document).unbind("mouseup",this.stopDragHandler),U(document).unbind("touchend",this.stopDragHandler),U(document).unbind("mousemove",this.updateDragHandler),U(document).unbind("touchmove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,be.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,be.CONTAINER_SEEKED,this.updateAriaLiveText),this.setSeekPercentage(0))}},{key:"createCachedElements",value:function(){this.$seekBarContainer=this.$el,this.$seekBarHover=this.$el.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=this.$el.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=this.$el.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=this.$el.find(".bar-scrubber[data-seekbar]"),this.$seekBarScrubberIcon=this.$el.find(".bar-scrubber-icon[data-seekbar]"),this.$seekBarFeedback=this.$el.find("#seek-feedback"),V.isMobile&&(this.$seekBarHover.addClass("bar-hover-disable"),this.$seekBarScrubber.addClass("bar-scrubber-mobile")),this.mediaControl.$seekBarContainer=this.$seekBarContainer}},{key:"onPlayerResize",value:function(){this.setSeekPercentage(this.currentSeekPercentage)}},{key:"setSeekPercentage",value:function(e){e=Math.min(e,100);var t=this.$seekBarContainer.width()*e/100-this.$seekBarScrubber.width()/2;t=Math.max(t,-(this.$seekBarScrubber.width()-this.$seekBarScrubberIcon.width())/2),t=Math.min(t,this.$seekBarContainer.width()-this.$seekBarScrubber.width()/2-this.$seekBarScrubberIcon.width()/2),this.currentSeekPercentage=e;var n=this.$seekBarScrubberIcon.width()/4;isNaN(n)||isNaN(e)||isNaN(t)||(this.$seekBarPosition.css({width:"calc(".concat(e,"% + ").concat(n,"px)")}),this.$seekBarScrubber.css({transform:"translateX(".concat(t,"px)")}))}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&(this.draggingSeekBar&&this.seek(e),this.mediaControl.$el.removeClass("media-control-dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition media-control-dragging"),this.core.trigger(Fn.STOP_DRAGGING_SEEKBAR),this.draggingSeekBar=!1,this.mediaControl.resetKeepVisible())}},{key:"lastTouchEvent",value:function(e){var t=e.originalEvent?e.originalEvent:e;return t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[t.changedTouches.length-1]:{}}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=((e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.core.trigger(Fn.START_DRAGGING_SEEKBAR),this.draggingSeekBar=!0,this.mediaControl.setKeepVisible(),this.mediaControl.$el.addClass("media-control-dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),V.isHybridDevice&&e&&e.preventDefault())}},{key:"startActionOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.mediaControl.trigger(be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"leaveActionOnSeekBar",value:function(e){this.mediaControl.trigger(be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX||this.lastTouchEvent(e).pageX||0,n=Math.max(0,t-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,.01)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"updateAriaLiveText",value:function(){var e=this.container.playback.currentTime,t=this.getTimeValues(e),n=this.getVideoPositionText.apply(this,Hi(t));this.$seekBarFeedback.text(n)}},{key:"getTimeValues",value:function(e){return le.formatTime(e,!0).split(":").map(Number)}},{key:"updateAriaValues",value:function(e){var t=e.current,n=e.total,i=Vi(this.getTimeValues(t),3),r=i[0],a=i[1],o=i[2],s=this.getVideoPositionText(r,a,o);this.$seekBarScrubber.attr("aria-valuenow",Math.round(t)),this.$seekBarScrubber.attr("aria-valuemax",Math.round(n)),this.$seekBarScrubber.attr("aria-valuetext",s)}},{key:"getVideoPositionText",value:function(e,t,n){var i=e>0?" ".concat(e," ").concat(mo("hora",e),","):"",r="".concat(t," ").concat(mo("minuto",t)),a="".concat(n," ").concat(mo("segundo",n));return this.container.isDvrInUse()?"H".concat(i," ").concat(r," e ").concat(a," da transmisso."):this.isLivePlayback?"Reproduzindo Agora na TV / Ao Vivo.":"Ponto do vdeo,".concat(i," ").concat(r," e ").concat(a,".")}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){this.draggingSeekBar||(this.currentPositionValue=e.current<0?0:e.current,this.currentDurationValue=e.total,this.renderSeekBar(),this.updateAriaValues(e))}},{key:"renderSeekBar",value:function(){null!==this.currentPositionValue&&null!==this.currentDurationValue&&(this.currentSeekBarPercentage=this.isLivePlayback?100:0,this.isLivePlayback&&!this.container.isDvrInUse()||(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage))}},{key:"render",value:function(){this.$el.html(this.template());var e=Bn.getStyleFrom(bo,{playerId:this.core.options.playerId}),t=U("<div>").addClass("bar-container__placeholder");return this.$el.append(e[0]),this.$el.parent().append(t),this.createCachedElements(),this}}]),n}(hr),Ao='.clappr-player#wp3-player-0 .media-control .quick-seek {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-container {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-label {\n    display: inline-block;\n    position: absolute;\n    font-weight: bold;\n    font-family: "opensans-regular";\n    font-weight: 700;\n    letter-spacing: 0px;\n    font-size: 12px;\n    color: #eee;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    margin-bottom: 8px;\n    top: 40%;\n    left: 36%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.triple-digit {\n      font-size: 10px;\n      left: calc(50% - 9px); }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.visible {\n      opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow-placeholder {\n    position: relative;\n    display: flex; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow {\n    display: inline-block;\n    justify-content: center;\n    opacity: 0;\n    transform-origin: 24px 26px;\n    transition: transform 0.6s ease, opacity 0.3s ease;\n    margin: 0; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow.visible {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow svg {\n      width: 48px;\n      height: 48px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    color: #eee;\n    width: 45%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      z-index: -1;\n      right: -50%;\n      bottom: 0px;\n      border-radius: 50%;\n      background: rgba(0, 0, 0, 0.3);\n      transform: scaleX(0.9) scaleY(1.4);\n      transform-origin: center center;\n      opacity: 0;\n      will-change: opacity, transform; }\n      .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background--left {\n        left: -50%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder--left .quick-seek-arrow-placeholder {\n      flex-direction: row-reverse; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-show {\n      opacity: 1;\n      transition: transform 0.6s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.media-control-element {\n    padding: 0;\n    opacity: 1 !important; }\n';or(Ao);var ko=10,To=["1","2","3","4","5","6","7","8","9","0"],_o={left:-10,right:10,"shift left":-15,"shift right":15,"shift ctrl left":-20,"shift ctrl right":20},wo=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,Fn.MEDIACONTROL_DOUBLE_TAP,this.onMediaControlDoubleTap),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.updateContainer),this.listenTo(this.mediaControl,be.MEDIACONTROL_SHOW,this.onMediaControlShow)}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container,be.CONTAINER_PLAY,this.bindKeyEvents),this.listenTo(this.container,be.CONTAINER_ENDED,this.onContainerEnd)}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),Object.keys(_o).forEach((function(t){e.bindKeyAndShow(t,(function(){return e.onKeyPress(t)}))})),To.forEach((function(t){e.bindKeyAndShow(t,(function(){return e.canSeek&&e.container.seekPercentage(10*t+.1)}))})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off(Object.keys(_o)),this.kibo.off(To))}},{key:"updateContainer",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onContainerEnd",value:function(){this.unbindKeyEvents(),this.listenToOnce(this.container,be.CONTAINER_PLAY,this.bindKeyEvents)}},{key:"onKeyPress",value:function(e){this.canSeek&&(this.container.trigger(Fn.WILL_QUICK_SEEK),this.seekRelative(_o[e]))}},{key:"seekRelative",value:function(e){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n+.01,100),this.container.seekPercentage(i)}},{key:"onMediaControlDoubleTap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide;!this.canSeek||"left"===t&&this.willBackwardToVideoEnd||"right"===t&&this.willForwardToVideoEnd||(this.container.trigger(Fn.WILL_QUICK_SEEK),"vibrate"in navigator&&window.navigator.vibrate(15),this.feedBackInProgress?this.lastTapSide===t?this.updateQuickSeekFeedback():(this.hideQuickSeekFeedback(),this.showQuickSeekFeedback(t)):this.showQuickSeekFeedback(t),this.container.seek(this.targetSeekValue(t)))}},{key:"targetSeekValue",value:function(e){var t="right"===e?ko:-10;return Math.min(this.container.getDuration()-1,Math.max(.1,this.container.currentTime+t))}},{key:"cacheAnimatedElements",value:function(e){this.background=this.$el.find(".quick-seek-placeholder-background--".concat(e)),this.arrow=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-arrow-placeholder .quick-seek-arrow")),this.label=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-label"))}},{key:"showQuickSeekFeedback",value:function(e){var t=this;this.lastTapSide=e,this.feedBackInProgress=!0,this.showPlugin(),this.cacheAnimatedElements(e),this.resetLabelClasses(),this.background[0].addEventListener("transitionend",(function(e){return t.onBackgroundShow(e)}),{once:!0}),setTimeout((function(){return t.background.addClass("background-show")})),this.displayArrow()}},{key:"onBackgroundShow",value:function(e){e.stopPropagation(),"opacity"!==e.propertyName&&this.background.addClass("opacity-transition")}},{key:"displayArrow",value:function(){var e=this;this.arrow[0].addEventListener("transitionend",(function(t){return e.onArrowShow(t)}),{once:!0}),setTimeout((function(){return e.arrow.addClass("visible")})),this.spinArrow()}},{key:"onArrowShow",value:function(e){e.stopPropagation(),this.displayLabel()}},{key:"spinArrow",value:function(){var e=this;"left"===this.lastTapSide?(!this.leftArrowDegrees&&(this.leftArrowDegrees=0),this.leftArrowDegrees-=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.leftArrowDegrees,"deg);")}))):(!this.rightArrowDegrees&&(this.rightArrowDegrees=0),this.rightArrowDegrees+=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.rightArrowDegrees,"deg);")})))}},{key:"displayLabel",value:function(){var e=this;this.currentSeekTime>=100&&this.label.addClass("triple-digit"),this.label.text(this.currentSeekTime),this.label[0].addEventListener("transitionend",(function(t){return e.onLabelShow(t)}),{once:!0}),setTimeout((function(){return e.label.addClass("visible")}))}},{key:"onLabelShow",value:function(e){var t=this;e.stopPropagation(),this.timeoutId=setTimeout((function(){t.hideQuickSeekFeedback()}),400)}},{key:"updateQuickSeekFeedback",value:function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.spinArrow(),this.currentSeekTime+=ko,this.hideLabel(),990!==this.currentSeekTime&&setTimeout((function(){e.displayLabel()}),350)}},{key:"hideQuickSeekFeedback",value:function(){this.feedBackInProgress&&(clearTimeout(this.timeoutId),this.hideLabel(),this.hideArrow(),this.hideBackground(),this.currentSeekTime=ko,this.feedBackInProgress=!1,this.hidePlugin())}},{key:"onMediaControlShow",value:function(){this.hideQuickSeekFeedback()}},{key:"hideLabel",value:function(){this.label.removeClass("visible")}},{key:"resetLabelClasses",value:function(){this.label.removeClass("triple-digit")}},{key:"hideArrow",value:function(){this.arrow.removeClass("visible")}},{key:"hideBackground",value:function(){this.background.removeClass("background-show")}},{key:"showPlugin",value:function(){this.$el.removeClass("hidden")}},{key:"hidePlugin",value:function(){this.$el.addClass("hidden")}},{key:"destroy",value:function(){Fi(Li(n.prototype),"destroy",this).call(this),this.unbindKeyEvents()}},{key:"render",value:function(){var e=Bn.getStyleFrom(Ao,{playerId:this.core.options.playerId});return this.$el.html(this.template({backwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2L14 12l10 10v-8c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"/>\n    </g>\n</svg>',forwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2l10 10-10 10v-8c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12h4c0 8.84-7.16 16-16 16S8 34.84 8 26s7.16-16 16-16z"/>\n    </g>\n</svg>',currentSeekTime:this.currentSeekTime})),this.$el.append(e[0]),this}},{key:"name",get:function(){return"quick_seek"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return xe('<div class="quick-seek-container">\n  <div class="quick-seek-placeholder quick-seek-placeholder--left">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--left"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= backwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label left"><%= currentSeekTime %></span>\n    </div>\n  </div>\n  <div class="quick-seek-placeholder quick-seek-placeholder--right">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--right"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= forwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label"><%= currentSeekTime %></span>\n    </div>\n  </div>\n</div>')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"willBackwardToVideoEnd",get:function(){return this.container.currentTime-3<0}},{key:"willForwardToVideoEnd",get:function(){return this.container.currentTime+ko>this.container.getDuration()}},{key:"currentSeekTime",get:function(){return this._currentSeekTime||ko},set:function(e){e<=990&&(this._currentSeekTime=e)}},{key:"attributes",get:function(){return{class:"quick-seek hidden"}}}]),n}(hr),So='.clappr-player#wp3-player-0 .media-control.ad .quick-seek-hint {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  width: 100%;\n  padding-right: 0;\n  padding-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__label {\n    margin: 0 auto; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow {\n    width: 24px;\n    height: 24px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--left {\n      margin-left: 0;\n      margin-right: 8px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--right {\n      margin-right: 0;\n      margin-left: 8px;\n      transform: rotate(0); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint--disabled {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint.hidden {\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__container {\n  display: flex; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow {\n  display: inline-block;\n  width: 20px;\n  height: 20px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--left {\n    margin-left: 8px;\n    margin-right: 4px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--right {\n    margin-right: 8px;\n    transform: rotate(180deg); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__label {\n  display: flex;\n  align-items: center;\n  opacity: 0.8;\n  font-family: "opensans-regular";\n  font-size: 14px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee; }\n';or(So);var Co=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).mouseOverSeekbar=!1,i.draggingSeekbar=!1,i.isVisible=!1,i.waitingTimeoutToShow=!1,i.waitingTimeoutToHide=!1,i}return Ii(n,[{key:"name",get:function(){return"quick_seek_hint"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return V.isMobile?"upper":"lower"}},{key:"position",get:function(){return V.isMobile?"":"between"}},{key:"template",get:function(){return xe('<span class="quick-seek-hint__label">\n  <% if (isMobile) { %>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= backward10 %></span>\n    Toque duplo para avanar\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= forward10 %></span>\n  <% } else { %>\n    Use as teclas\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= arrow %></span>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= arrow %></span>\n  para avanar\n  <% } %>\n</span>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"shouldDisable",get:function(){return this.currentWidth<=(V.isMobile?361:600)}},{key:"attributes",get:function(){return{class:"quick-seek-hint hidden"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.bindSeekbarEvents()}},{key:"bindSeekbarEvents",value:function(){this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.listenTo(this.core,Fn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Fn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!0}},{key:"unbindSeekbarEvents",value:function(){this.stopListening(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.stopListening(this.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.stopListening(this.core,Fn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.stopListening(this.core,Fn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!1}},{key:"onStartDraggingSeekbar",value:function(){this.draggingSeekbar=!0}},{key:"onStopDraggingSeekbar",value:function(){this.draggingSeekbar=!1,this.waitingTimeoutToShow&&this.resetTimeoutToShow(),!this.waitingTimeoutToHide||!V.isMobile&&this.mouseOverSeekbar||(this.resetTimeoutToHide(),this.hide())}},{key:"onMousemoveSeekbar",value:function(){var e=this;if(this.mouseOverSeekbar=!0,!(this.isVisible||this.waitingTimeoutToShow||this.draggingSeekbar&&!V.isMobile||this.waitingMouseLeaveSeekbarAfterHide)){if(V.isMobile)return this.show();this.waitingTimeoutToShow=!0,this.showTimeoutId=setTimeout((function(){e.showTimeoutId=null,e.waitingTimeoutToShow=!1,e.show()}),1e3)}}},{key:"onMouseLeaveSeekbar",value:function(){this.mouseOverSeekbar=!1,this.waitingMouseLeaveSeekbarAfterHide=!1,this.draggingSeekbar||(this.waitingTimeoutToHide&&this.resetTimeoutToHide(),this.waitingTimeoutToShow&&this.resetTimeoutToShow(),this.hide())}},{key:"resetTimeoutToHide",value:function(){clearTimeout(this.hideTimeoutId),this.waitingTimeoutToHide=!1,this.hideTimeoutId=null}},{key:"resetTimeoutToShow",value:function(){clearTimeout(this.showTimeoutId),this.waitingTimeoutToShow=!1,this.showTimeoutId=null}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?(this.unbindSeekbarEvents(),this.$el.addClass("quick-seek-hint--disabled")):(!this.seekbarEventsActive&&this.bindSeekbarEvents(),this.$el.removeClass("quick-seek-hint--disabled"))}},{key:"show",value:function(){this.isVisible||(this.isVisible=!0,this.core.trigger(Fn.WILL_SHOW_QUICK_SEEK_HINT),this.$el.removeClass("hidden"),V.isMobile&&this.$el.addClass("media-control-element--sticky"),this.hideDelayed())}},{key:"hideDelayed",value:function(){var e=this;this.waitingTimeoutToHide=!0,this.hideTimeoutId=setTimeout((function(){e.hideTimeoutId=null,e.waitingTimeoutToHide=!1,e.hide()}),4e3)}},{key:"hide",value:function(){this.mouseOverSeekbar&&(this.waitingMouseLeaveSeekbarAfterHide=!0),this.isVisible&&(this.core.trigger(Fn.WILL_HIDE_QUICK_SEEK_HINT),this.$el.addClass("hidden"),V.isMobile&&this.$el.removeClass("media-control-element--sticky"),this.isVisible=!1)}},{key:"render",value:function(){var e=Bn.getStyleFrom(So,{playerId:this.core.options.playerId});return this.$el.html(this.template({isMobile:V.isMobile,arrow:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><rect stroke="#EEE" opacity=".3" x=".5" y=".5" width="19" height="19" rx="2"/><path d="M8 9h8v2H8v3l-4-4 4-4v3z" fill="#EEE"/></g></svg>',backward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>',forward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16h-.1zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'})),this.$el.append(e[0]),this}}]),n}(hr);function Ro(e,t){return encodeURIComponent(e+"?utm_source=".concat(t,"&utm_medium=share-player-desktop"))}function Io(e,t){var n=500,i=window.screen.width/2-260,r=window.screen.height/2-300,a="height=".concat(n,",width=").concat(n,",left=").concat(i,",top=").concat(r,",screenX=").concat(i,",screenY=").concat(r,",\n               resizable=yes,status=no,toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");window.open(e,t,a)}var xo=".clappr-player#wp3-player-0 .media-control.w360 .share__box--link-copied .share__button[data-share-item='link'] {\n  transform: translate(-286%, 0px); }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__button {\n  width: 40px;\n  height: 40px;\n  padding: 4px;\n  margin-left: 32px; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__close {\n  box-sizing: content-box;\n  padding: 12px;\n  top: 0;\n  right: 0; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__close:active, .clappr-player#wp3-player-0 .media-control.w360 .share__close:focus {\n    outline: 1; }\n\n.clappr-player#wp3-player-0 .share__box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button[data-share-item='link'] {\n    visibility: visible;\n    transition: transform 0.3s ease;\n    transform: translate(-344%, 0px);\n    opacity: 1;\n    cursor: default; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__item-copied-box,\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__title {\n    transition: visibility 0.7s ease, opacity 0.7s ease;\n    visibility: visible;\n    opacity: 1; }\n\n.clappr-player#wp3-player-0 .share__button {\n  padding: 0px;\n  background-color: transparent;\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n  width: 48px;\n  height: 48px;\n  margin-left: 56px;\n  box-sizing: content-box; }\n  .clappr-player#wp3-player-0 .share__button:active, .clappr-player#wp3-player-0 .share__button:focus {\n    outline: 1; }\n  .clappr-player#wp3-player-0 .share__button:hover, .clappr-player#wp3-player-0 .share__button:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__button svg {\n    width: 100%; }\n  .clappr-player#wp3-player-0 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .share__item-copied-box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  position: absolute;\n  top: calc(50% + 22px);\n  left: 0;\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .share__title {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  position: absolute;\n  font-family: 'opensans-regular', sans-serif;\n  font-size: 16px;\n  color: #ffffff;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  cursor: default;\n  visibility: hidden;\n  top: calc(50% - 13px);\n  left: calc(50% - 22px); }\n\n.clappr-player#wp3-player-0 .share__subtitle {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  padding: 0 35px;\n  max-width: 100%;\n  word-wrap: break-word;\n  font-family: 'opensans-regular', sans-serif;\n  font-size: 12px;\n  letter-spacing: -0.5px;\n  color: #ffffff;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  margin: 0; }\n\n.clappr-player#wp3-player-0 .share__close {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  transition: opacity 0.3s ease;\n  opacity: 0.6;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .share__close:hover, .clappr-player#wp3-player-0 .share__close:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__close svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .share__close:active, .clappr-player#wp3-player-0 .share__close:focus {\n    outline: 1; }\n";or(xo);var Do='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Fechar</span>',Po=Un.copyToClipboard,Oo=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).core=e,i.shouldRender=!1,i.$el.on("click",(function(){i.showShareBox()})),i.keyDownHandler=function(e){"Escape"===e.key&&(e.preventDefault(),i.hideModal())},i.options.share&&!1===i.options.share.enabled&&i.disable(),i}return Ii(n,[{key:"name",get:function(){return"share"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return xe('<div class="share__box" role="dialog" aria-modal="true">\n  <button class="share__close"></button>\n  <% for (var i = 0; i < shareItems.length; i++) { %>\n  <button class="share__button" data-share-item="<%= shareItems[i].name %>">\n    <%= shareItems[i].element %>\n  </button>\n  <% } %>\n  <h1 class="share__title">Link Copiado</h1>\n  <div class="share__item-copied-box">\n    <h2 class="share__subtitle"><%= videoUrl %></h2>\n  </div>\n</div>\n')}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"attributes",get:function(){return{class:"media-control-button","data-share":"","data-controls":""}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,Fn.WM_SHARE_SHOW,this.start),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"start",value:function(){var e=this,t=this.modal.find(".share__box"),n=this.modal.find(".share__close");t&&t.on("click",(function(t){t&&t.stopPropagation(),e.hideModal()})),n&&n.append(Do),U(document).on("keydown",this.keyDownHandler)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Fn.WM_RESOURCE_SELECTED,this.checkUrl),this.listenTo(this.container,be.CONTAINER_SETTINGSUPDATE,this.shouldHideModal)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.shareUrl=this.video.urlForConsumption.replace(/(^\w+:|^)\/\//,"");var t=this.core.options.share&&this.core.options.share.socialList;this.loadSocialList(t||[])}},{key:"checkUrl",value:function(){this.shouldRender=!0,this.render()}},{key:"shouldHideModal",value:function(){var e=this.playback&&this.playback.getPlaybackType();"vod"!==e&&"live"!==e&&this.hideModal()}},{key:"loadSocialList",value:function(e){e&&e.length>0?this.socialList=this.verifySocialList(e):this.socialList=this.getDefaultSocialList()}},{key:"verifySocialList",value:function(e){var t=this,n=[];return e.forEach((function(e){t.getDefaultSocialList().forEach((function(t){t.name===e&&n.push(t)}))})),n}},{key:"getDefaultSocialList",value:function(){var e=this;return[{name:"facebook",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M15.04 20v-6.196h2.08l.31-2.415h-2.39V9.848c0-.7.194-1.176 1.196-1.176h1.28v-2.16c-.222-.03-.981-.095-1.864-.095-1.844 0-3.106 1.125-3.106 3.192v1.78h-2.085v2.415h2.085V20H4.883C4.395 20 4 19.605 4 19.117V4.883C4 4.395 4.395 4 4.883 4h14.234c.488 0 .883.395.883.883v14.234c0 .488-.395.883-.883.883H15.04z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Facebook</span>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,i=Ro(t,"facebook"),r="?app_id=".concat("289255557788943","&display=popup&href=").concat(i),-1!=t.search("globoplay")&&(r+="&hashtag=".concat(encodeURIComponent("#GloboPlay"))),Io("".concat("https://www.facebook.com/dialog/share").concat(r),n)}},{name:"twitter",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8.66 19.617c6.794 0 10.508-5.623 10.508-10.499 0-.16-.003-.319-.01-.477.72-.52 1.348-1.17 1.842-1.91-.662.293-1.374.491-2.12.58.762-.457 1.347-1.18 1.623-2.04-.713.422-1.504.729-2.345.895C17.484 5.449 16.525 5 15.462 5c-2.039 0-3.693 1.653-3.693 3.69 0 .29.033.57.096.841-3.07-.154-5.79-1.623-7.612-3.855-.318.545-.5 1.178-.5 1.854 0 1.28.652 2.41 1.643 3.072-.606-.019-1.175-.185-1.673-.462v.048c0 1.787 1.273 3.279 2.963 3.617-.31.084-.637.13-.974.13-.238 0-.47-.024-.694-.067.47 1.466 1.833 2.533 3.45 2.563-1.264.99-2.857 1.58-4.587 1.58-.298 0-.592-.017-.881-.051 1.634 1.046 3.575 1.657 5.661 1.657" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Twitter</span>',onClickAction:function(){var t,n,i,r,a,o,s,l;t=e.video.urlForConsumption,n=e.video.title,i=e.video.program,r=function(e){return e?"#".concat(e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("").replace(/[-:]/g,"")):""}(i),a=-1!=t.search("globoplay")?" pelo #GloboPlay":"",o=r&&a?"Assista ".concat(r):"".concat(n),s=Ro(t,"twitter"),l=encodeURIComponent("".concat(o).concat(a)),Io("https://twitter.com/intent/tweet"+"?text=".concat(l,"&url=").concat(s),n)}},{name:"link",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Copiar link do vdeo</span>',onClickAction:function(t){t.stopPropagation(),e.showLinkCopiedBox(),Po(e.video.urlForConsumption,e.modal)}}]}},{key:"hideModal",value:function(){var e=this.modal&&this.modal.find(".share__box"),t=e&&e.contents();!t||t&&!t.length||(e.off("click"),this.mediaControl.trigger(Fn.WM_SHARE_HIDE),this.core.trigger(Fn.WM_SHARE_HIDE),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.triggerDidHideModalElement(),this.hasPlayingBeforeModal&&this.playback.play(),U(document).off("keydown",this.keyDownHandler))}},{key:"render",value:function(){if(this.shouldRender){this.shouldRender=!1,this.$el.html("");var e=Bn.getStyleFrom(xo,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M17 16.08c-.76 0-1.44.3-1.96.77L7.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.04 9.81C6.5 9.31 5.79 9 5 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar vdeo</span>'),this}}},{key:"bindShareEvents",value:function(){var e=this;this.socialList.forEach((function(t){var n=e.modal.find(".share__button[data-share-item=".concat(t.name,"]"));"function"==typeof t.onClickAction&&n.on("click",t.onClickAction)}))}},{key:"showShareBox",value:function(e){var t=this;e&&e.stopPropagation(),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause();var n=this.template({shareItems:this.socialList,videoUrl:this.shareUrl});this.triggerWillShowModalElement(),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_SHOW,n,{hidePanels:!0}),this.mediaControl.trigger(Fn.WM_SHARE_SHOW),this.core.trigger(Fn.WM_SHARE_SHOW),this.mediaControl.setKeepVisible(),this.bindShareEvents();var i=this.modal.find(".share__button, .share__item-copied-box, .share__title");i&&i.on("click",(function(e){return e.stopPropagation()})),setTimeout((function(){t.modal.find(".share__close").focus()}),500)}},{key:"showLinkCopiedBox",value:function(){var e=this.modal.find(".share__box");e&&e.addClass("share__box--link-copied")}}]),n}(hr),Lo='<div class="unmute-modal">\n  <div class="unmute-modal__button-box">\n    <button class="unmute-modal__button unmute-modal__button--on unmute-modal__button--hide" tabindex="0"><%= volumeOnIcon %></button>\n    <button class="unmute-modal__button unmute-modal__button--off" tabindex="0"><%= volumeOffIcon %></button>\n    <span class="unmute-modal__label">Ativar som</span>\n  </div>\n</div>\n',Mo='.clappr-player#wp3-player-0 .unmute-modal {\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  position: absolute;\n  pointer-events: auto;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .unmute-modal__button-box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 32px;\n    background-color: rgba(0, 0, 0, 0.8);\n    width: 118px;\n    transition: width .5s ease;\n    box-sizing: border-box;\n    margin: 12px;\n    border-radius: 8px; }\n    .clappr-player#wp3-player-0 .unmute-modal__button-box--no-label {\n      width: 40px; }\n  .clappr-player#wp3-player-0 .unmute-modal__button {\n    background-color: transparent;\n    border: 0;\n    opacity: 1;\n    cursor: pointer;\n    margin: 0;\n    padding: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .unmute-modal__button--hide {\n      display: none; }\n    .clappr-player#wp3-player-0 .unmute-modal__button:hover, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .unmute-modal__button:active, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n      outline: 1; }\n    .clappr-player#wp3-player-0 .unmute-modal__button svg {\n      height: 24px;\n      width: 24px; }\n  .clappr-player#wp3-player-0 .unmute-modal__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    line-height: 1.14;\n    color: #ffffff;\n    width: 77px;\n    padding-left: 7px;\n    opacity: 1;\n    transition: width .5s ease;\n    margin-top: -2px; }\n    .clappr-player#wp3-player-0 .unmute-modal__label--hide {\n      width: 0;\n      opacity: 0;\n      padding: 0; }\n';or(Mo);var No=Un.autoplayManager,Uo=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.idPlayback=this.core.activePlayback,this.listenToOnce(this.container,be.CONTAINER_PLAY,this.showUnmuteModal),this.listenToOnce(this.container,Fn.WM_UNMUTED,this.hideUnmuteModal)}},{key:"bindUnmuteModalEvents",value:function(){this.modal&&this.modal.on("click",this.onUnmuteModalClick.bind(this))}},{key:"showUnmuteModal",value:function(){var e=this,t=this.options.chromeless&&!V.isMobile,n=this.options.mute||this.mutedAutoplay&&!No.playerHasConsent;!t&&n&&(this.renderUnmuteModal(),this.isVisible=!0,setTimeout((function(){e.hideLabel()}),5e3))}},{key:"renderUnmuteModal",value:function(){var e=xe(Lo)({volumeOffIcon:go,volumeOnIcon:fo}),t=Bn.getStyleFrom(Mo,{playerId:this.core.options.playerId});this.mediaControl&&this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_SHOW,e,{hidePanels:!0}),this.core.trigger(Fn.TAP_TO_UNMUTE_SHOW),this.modal&&this.modal.find(".unmute-modal").append(t[0]),this.mediaControl&&this.mediaControl.setKeepVisible(),this.bindUnmuteModalEvents(),this.mediaControl&&this.mediaControl.$el.addClass("media-control--no-background")}},{key:"onUnmuteModalClick",value:function(e){var t=this;e&&e.stopPropagation(),this.core.trigger(Fn.TAP_TO_UNMUTE_CLICKED),this.hideLabel(),this.toggleUnmuteButton(),setTimeout((function(){t.hideUnmuteModal()}),1e3)}},{key:"hideUnmuteModal",value:function(){this.isVisible&&(this.modal.off("click"),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_HIDE),this.isVisible=!1,this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--no-background"))}},{key:"toggleUnmuteButton",value:function(){this.modal&&(this.modal.find(".unmute-modal__button--off").addClass("unmute-modal__button--hide"),this.modal.find(".unmute-modal__button--on").removeClass("unmute-modal__button--hide"))}},{key:"hideLabel",value:function(){this.modal&&(this.modal.find(".unmute-modal__label").addClass("unmute-modal__label--hide"),this.modal.find(".unmute-modal__button-box").addClass("unmute-modal__button-box--no-label"))}},{key:"render",value:function(){return this.$el.html(""),this}},{key:"destroy",value:function(){this._mediaControl=null,Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"tap_to_unmute"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"template",get:function(){return xe(Lo)}},{key:"modal",get:function(){return this.mediaControl&&this.mediaControl.$modal}},{key:"mutedAutoplay",get:function(){return this.idPlayback&&this.idPlayback.mutedAutoplay}}]),n}(Ne);or('.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .cuepoint:before {\n  transform: scale(1.35, 1.35); }\n\n.clappr-player#wp3-player-0 .cuepoint {\n  position: absolute;\n  height: 100%;\n  width: 2px;\n  bottom: 0px;\n  z-index: 200; }\n  .clappr-player#wp3-player-0 .cuepoint:before {\n    position: absolute;\n    display: inline-block;\n    width: 100%;\n    height: 2px;\n    content: \'\';\n    left: -2px;\n    top: 21px;\n    background-color: #000;\n    border-radius: 50%;\n    border: solid 2px #fff;\n    will-change: transform;\n    transition: transform 0.3s ease; }\n  .clappr-player#wp3-player-0 .cuepoint:hover:before {\n    transform: scale(2, 2) !important; }\n  .clappr-player#wp3-player-0 .cuepoint__details {\n    width: 100%;\n    height: 100%;\n    line-height: 16px;\n    color: #fff;\n    display: flex;\n    justify-content: center;\n    z-index: 100; }\n    .clappr-player#wp3-player-0 .cuepoint__details-title {\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      padding: 4px 9px;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      text-align: left;\n      overflow: hidden;\n      position: absolute;\n      left: 0; }\n    .clappr-player#wp3-player-0 .cuepoint__details-time {\n      padding: 3px 8px 2px;\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      color: #fff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      border-radius: 2px;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      background-color: rgba(0, 0, 0, 0.5);\n      display: flex;\n      z-index: 100;\n      align-self: flex-end; }\n');var Bo='.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator {\n  display: flex;\n  align-self: flex-start;\n  margin-top: 5px;\n  border-radius: 2px;\n  background-color: red;\n  padding: 3px 6px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--hide {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--first-element {\n    margin-left: 12px; }\n\n.clappr-player#wp3-player-0 [data-live-indicator] {\n  color: #ffffff;\n  font-family: "opensans-bold", sans-serif;\n  font-size: 11px;\n  line-height: 1.45;\n  letter-spacing: -0.5px; }\n';or(Bo);var Fo=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,be.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVRUpdated),this.listenTo(this.container,be.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,be.CONTAINER_PAUSE,this.updateState)}},{key:"onDVRUpdated",value:function(e){this.dvrInUse=e,this.updateState()}},{key:"updateState",value:function(){if(!this.isLive)return this.hide();this.dvrInUse?this.hide():this.show(),this.$el["".concat(this.container.isDvrEnabled()?"remove":"add","Class")]("live-indicator--first-element"),V.supportsTouchEvents&&this.$el.addClass("live-indicator--first-element")}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"show",value:function(){this.$el.removeClass("live-indicator--hide")}},{key:"hide",value:function(){this.$el.addClass("live-indicator--hide")}},{key:"render",value:function(){this.$el.empty(),this.$indicator=$("<span/>").attr("data-live-indicator","").html(this.label);var e=Bn.getStyleFrom(Bo,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$indicator[0]),this}},{key:"name",get:function(){return"live_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"label",get:function(){return this.options&&this.options.isLiveContent?"AO VIVO":"AGORA"}},{key:"isLive",get:function(){return this.container&&this.container.getPlaybackType()===Be.LIVE}},{key:"attributes",get:function(){return{class:"live-indicator live-indicator--hide","aria-hidden":"true"}}}]),n}(hr),Vo=".clappr-player#wp3-player-0 .pip-transition[data-pip] {\n  transition: all 0.3s ease-out; }\n\n.clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip], .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip] {\n  cursor: none; }\n  .clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip].pointer-enabled, .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: none; }\n\n.clappr-player#wp3-player-0 .container[data-container].master-container[data-pip] {\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  font-size: 100%;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding: 0;\n  margin: 0;\n  border: none; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled.chromeless {\n      cursor: default; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pip-transition {\n    z-index: 1000; }\n\n.clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip] {\n  cursor: default;\n  width: 24%;\n  height: 24%;\n  min-width: 0;\n  font-size: 24%;\n  z-index: 1000;\n  position: absolute;\n  padding: 0;\n  margin: 0;\n  right: 23px;\n  bottom: 23px;\n  border-width: 2px;\n  border-radius: 3px;\n  border-style: solid;\n  border-color: rgba(255, 255, 255, 0.25);\n  background-clip: padding-box;\n  -webkit-background-clip: padding-box; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].over-media-control {\n    transform: translateY(-43px); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].mouse-over {\n    border-color: rgba(255, 255, 255, 0.5); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].unobtrusive-mode {\n    opacity: .3;\n    z-index: 993; }\n";or(Vo);var Ho=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;Ci(this,n),(i=t.call(this,e)).core=e,i.allowPipToMaster=!!i.core.options.allowPipToMaster;var r=Bn.getStyleFrom(Vo,{playerId:i.core.options.playerId});return i.core.$el.append(r[0]),i.setupContainers(),i.addListeners(),i}return Ii(n,[{key:"name",get:function(){return"pip"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"mediaControl",get:function(){return this.core.getPlugin("globo_media_control")}}]),Ii(n,[{key:"getExternalInterface",value:function(){return{addPip:this.addPip,discardPip:this.discardPip,addMaster:this.addMaster,changeMaster:this.changeMaster,getPipSource:this.getPipSource,pipToMaster:this.pipToMaster,hasPip:this.hasPip}}},{key:"addListeners",value:function(){var e=this;this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.mediaControlContainerChanged),this.listenTo(this.mediaControl,be.MEDIACONTROL_SHOW,this.onMediaControlShow),this.listenTo(this.mediaControl,be.MEDIACONTROL_HIDE,this.onMediaControlHide),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,(function(t){return e.onMouseMove(t)})),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeave),this.listenTo(this.mediaControl,Fn.WM_SETTINGS_SHOW,this.setSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,Fn.WM_SETTINGS_HIDE,this.removeSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,Fn.WM_VOLUME_SHOW,this.setVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,Fn.WM_VOLUME_HIDE,this.removeVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,Fn.WM_SHARE_SHOW,this.setUnobtrusiveMode),this.listenTo(this.mediaControl,Fn.WM_SHARE_HIDE,this.removeUnobtrusiveMode)}},{key:"mediaControlContainerChanged",value:function(){this.core.options.dfp&&(this.stopListening(this.core.options.dfp),this.listenTo(this.core.options.dfp,Fn.DFP_AD_STARTED,this.setUnobtrusiveMode),this.listenTo(this.core.options.dfp,Fn.DFP_AD_COMPLETED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,Fn.DFP_AD_CLOSED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,Fn.DFP_AD_SKIPPED,this.removeUnobtrusiveMode)),this.masterContainer=this.core.activeContainer,this.setMasterStyle(this.masterContainer,!1)}},{key:"setupContainers",value:function(){this.core.containers.length>0&&(this.masterContainer=this.core.containers[0],this.setMasterStyle(this.masterContainer,!1),2===this.core.containers.length&&(this.pipContainer=this.core.containers[1],this.setPipStyle(this.pipContainer,!1),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play(),this.pipContainer.playback&&this.pipContainer.playback.playWhenReady()||this.pipContainer.play(),this.pipContainer.setVolume(0),this.pipContainer.playback.isPip(!0),this.listenToPipClick()))}},{key:"onMouseMove",value:function(e){this.isOnUnobtrusiveMode||((!e||this.mediaControl.container.playback.settings.seekEnabled&&!["thumb","thumb-position"].includes(e.target.className))&&this.pipContainer?this.pipContainer.$el.addClass("unobtrusive-mode"):this.onMouseLeave())}},{key:"onMouseLeave",value:function(){this.isOnUnobtrusiveMode||this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode")}},{key:"hasPip",value:function(){return!!this.pipContainer}},{key:"getPipSource",value:function(){return this.pipContainer.playback.src}},{key:"canAddMaster",value:function(){return this.masterContainer&&"ad"!==this.masterContainer.getPlaybackType()}},{key:"addPip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.core.getCurrentPlayback(),i=this.core.getCurrentContainer(),r=!!n.getPlaybackType()&&"ad"!==n.getPlaybackType();r&&n.isPlaying()?(this.discardPip(),this.pipContainer=this.core.createContainer(t,{onPip:!0}),this.addPipCallback()):i.once(be.CONTAINER_PLAY,(function(){return e.addPip(t)}))}},{key:"addPipCallback",value:function(){var e=this,t=this.pipContainer.playback;t.once(Fn.WM_PLAYBACK_WILL_PLAY,(function(){return e.pipContainer.setVolume(0)})),this.setPipStyle(this.pipContainer),t&&t.playWhenReady()||this.pipContainer.play(),this.stopListening(this.pipContainer),this.listenToPipClick(),this.listenTo(this.pipContainer,be.CONTAINER_ENDED,this.discardPip),this.listenTo(this.pipContainer,be.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,be.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.listenTo(this.masterContainer,be.CONTAINER_ENDED,this.pipToMaster),t.isPip(!0),this.core.trigger(Fn.WM_PIP_ADDED)}},{key:"mouseEnterPip",value:function(){this.pipContainer.$el.addClass("mouse-over"),this.pipContainer.setVolume(this.masterContainer.volume),this.masterContainer.setVolume(0)}},{key:"mouseLeavePip",value:function(){this.pipContainer.$el.removeClass("mouse-over"),this.masterContainer.setVolume(this.pipContainer.volume),this.pipContainer.setVolume(0)}},{key:"discardPip",value:function(){this.pipContainer&&(this.mouseLeavePip(),this.stopListening(this.pipContainer),this.discardContainer(this.pipContainer),this.pipContainer=void 0,this.core.trigger(Fn.WM_PIP_DISCARDED))}},{key:"discardMaster",value:function(){this.masterContainer&&(this.stopListening(this.masterContainer),this.discardContainer(this.masterContainer),this.masterContainer=void 0)}},{key:"setMasterContainer",value:function(e){this.discardMaster(),this.masterContainer=e,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,be.CONTAINER_ENDED,this.pipToMaster),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play()}},{key:"addMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.canAddMaster()&&this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.addMasterCallback(t)}}},{key:"addMasterContainer",value:function(e){this.masterContainer&&(this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition"),this.addMasterCallback(e))}},{key:"addMasterCallback",value:function(e){var t=Math.max(this.masterContainer.volume,this.pipContainer&&this.pipContainer.volume||0);this.tmpContainer.setVolume(0),this.masterContainer=e,this.pipContainer&&this.discardPip(),this.pipContainer=this.tmpContainer,this.setPipStyle(this.pipContainer),this.setMasterStyle(this.masterContainer);var n=this.masterContainer.playback,i=n&&n.playWhenReady.bind(n)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?i():this.listenToOnce(n,Fn.WM_PLAYBACK_WILL_PLAY,(function(){return i()})),this.animateMasterToPip(),this.listenTo(this.pipContainer,be.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,be.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.tmpContainer=void 0,this.masterContainer.setVolume(t),this.pipContainer.trigger(Fn.WM_MASTERTOPIP),this.core.trigger(Fn.WM_MASTER_ADDED)}},{key:"animateMasterToPip",value:function(){this.listenTo(this.masterContainer,be.CONTAINER_ENDED,this.pipToMaster),this.pipContainer.playback.isPip(!0),this.setPipStyle(this.pipContainer),this.core.activeContainer=this.masterContainer,this.listenToPipClick()}},{key:"changeMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.changeMasterCallback(t)}}},{key:"changeMasterCallback",value:function(e){this.masterContainer.destroy(),this.masterContainer=e,this.tmpContainer=void 0,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,be.CONTAINER_ENDED,this.pipToMaster);var t=this.masterContainer.playback,n=t&&t.playWhenReady.bind(t)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?n():this.listenToOnce(this.masterContainer.playback,Fn.WM_PLAYBACK_WILL_PLAY,(function(){return n()})),this.core.activeContainer=this.masterContainer,this.core.trigger(Fn.WM_MASTER_CHANGED)}},{key:"listenToPipClick",value:function(){this.pipContainer&&this.allowPipToMaster&&(this.stopListening(this.pipContainer),this.listenTo(this.pipContainer,be.CONTAINER_CLICK,this.pipToMaster.bind(this)))}},{key:"discardContainer",value:function(e){e.destroy()}},{key:"pipToMaster",value:function(){var e=this;return this.stopListening(this.masterContainer),this.stopListening(this.pipContainer),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.setMasterStyle(this.pipContainer),this.pipContainer.$el.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){e.pipContainer.$el.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e.pipToMasterCallback()}))),this}},{key:"pipToMasterCallback",value:function(){var e=Math.max(this.masterContainer.volume,this.pipContainer.volume);this.discardMaster(),this.pipContainer.playback.isPip(!1),this.masterContainer=this.pipContainer,this.pipContainer=void 0,this.core.activeContainer=this.masterContainer,this.mediaControl.updatePlaybackTypeClass(),this.mediaControl.enable(),this.masterContainer.setVolume(e),this.masterContainer.trigger(Fn.WM_PIPTOMASTER)}},{key:"onMediaControlShow",value:function(){this.mediaControl.disabled||this.pipContainer&&this.pipContainer.$el.addClass("pip-transition over-media-control")}},{key:"onMediaControlHide",value:function(){this.mediaControl.keepVisible||(this.masterContainer&&this.masterContainer.$el.removeClass("over-media-control"),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.pipContainer.$el.removeClass("over-media-control")))}},{key:"setAnimatedTransition",value:function(e,t){t?e.$el.addClass("pip-transition"):e.$el.removeClass("pip-transition")}},{key:"setPipStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("pip-container"),e.$el.removeClass("over-media-control master-container"),e.hasPlugin("click_to_pause")&&(e.getPlugin("click_to_pause").disable(),e.getPlugin("click_to_pause").settingsUpdate()),this.mediaControl.isVisible()&&this.onMediaControlShow()}},{key:"setMasterStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("master-container"),e.$el.removeClass("over-media-control pip-container"),e.hasPlugin("click_to_pause")&&(!V.supportsTouchEvents&&e.getPlugin("click_to_pause").enable(),e.getPlugin("click_to_pause").settingsUpdate())}},{key:"setUnobtrusiveMode",value:function(){this.isOnUnobtrusiveMode=!0,this.pipContainer&&this.pipContainer.$el.addClass("unobtrusive-mode")}},{key:"removeUnobtrusiveMode",value:function(){this.volumeUnobtrusive||this.settingsUnobtrusive||(this.isOnUnobtrusiveMode=!1,this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode"))}},{key:"setVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!1,this.removeUnobtrusiveMode()}},{key:"setSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!1,this.removeUnobtrusiveMode()}}]),n}(Ze),jo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M8 16.59L12.58 12 8 7.41 9.41 6l6 6-6 6z"/>\n    </g>\n</svg>',Ko='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8.59 15.58l-4.17-4.17L3 12.82l5.59 5.59 12-12L19.18 5z"/>\n    </g>\n</svg>',Go=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"shouldRender",value:function(){return this.options&&this.options.length>1}},{key:"clickOption",value:function(e){e.stopPropagation();var t=U(e.target).closest(".settings__options-item").data("option-id"),n=parseInt(t);this.selectOption(isNaN(n)?t:n)}},{key:"selectOption",value:function(e){this.playbackUpdate(e),this.interfaceUpdate(e),this.trigger(Fn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"interfaceUpdate",value:function(e){var t=".settings__options-menu .settings__options-item",n="settings__options-item--active";this.options=e,this.$(t).find(".settings__options-active-icon").remove(),this.$(t).removeClass(n);var i=U("<span>").addClass("settings__options-active-icon").append(Ko);this.$('.settings__options-item[data-option-id="'.concat(e,'"]')).addClass(n).prepend(i)}},{key:"render",value:function(){return this.shouldRender()&&(this.$el.html(this.template({options:this.options||[],title:this.title,activeIcon:Ko,arrowIcon:jo})),this.$el.addClass("settings__options-wrapper")),this}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<div role="menu" class="settings__options-menu">\n  <% for (var i = 0; i < options.length; i++) { %>\n    <button role="menuitem" data-option-id="<%= options[i].id %>" type="button" class="settings__options-item <% if (options[i].selected) { %>settings__options-item--active<% } %>">\n      <% if (options[i].selected) { %><span class="settings__options-active-icon"><%= activeIcon %></span><% } %>\n      <div class="settings__options-item-label">\n        <span class="settings__options-item-label-language" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n        <span class="settings__options-item-label-role" data-option-id="<%= options[i].id %>"><%= options[i].sublabel %></span>\n      </div>\n    </button>\n  <% } %>\n</div>\n')}},{key:"options",get:function(){return this.availableOptions||[]},set:function(e){this.availableOptions=this.options.map((function(t){return Pi(Pi({},t),{},{selected:t.id.toString()===e.toString()})}))}},{key:"selected",get:function(){var e=this.options.find((function(e){return e.selected}))||this.options.length&&this.options[0];return e&&{language:e.label,role:e.sublabel}}},{key:"events",get:function(){return{"click .settings__options-item":"clickOption"}}}]),n}(Ne),zo={por:{label:"Portugus",language:"por",keys:["pt","por"]},eng:{label:"Ingls",language:"eng",keys:["en","eng"]},ger:{label:"Alemo",language:"ger",keys:["de","ger"]},esp:{label:"Espanhol",language:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ron",keys:["ro","ron"]},cat:{label:"Catalo",language:"cat",keys:["ca","cat"]},chi:{label:"Chins",language:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"kor",keys:["ko","kor"]},dan:{label:"Dinamarqus",language:"dan",keys:["da","dan"]},fin:{label:"Finlands",language:"fin",keys:["fi","fin"]},fre:{label:"Francs",language:"fre",keys:["fr","fre"]},wel:{label:"Gals",language:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"heb",keys:["he","heb"]},dut:{label:"Holands",language:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hin",keys:["hi","hin"]},hun:{label:"Hngaro",language:"hun",keys:["hu","hun"]},ind:{label:"Indonsio",language:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"ita",keys:["it","ita"]},jpn:{label:"Japons",language:"jpn",keys:["ja","jpn"]},nor:{label:"Noruegus",language:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"per",keys:["fa","per"]},rus:{label:"Russo",language:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"swe",keys:["sv","swe"]},tha:{label:"Tailands",language:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tur",keys:["tr","tur"]},ara:{label:"Arbico",language:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",keys:["fil"]},ice:{label:"Islands",language:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polnes",language:"pol",keys:["pol","pl"]},srp:{label:"Srvio",language:"srp",keys:["srp","scc","sr"]},yid:{label:"Idiche",language:"yid",keys:["yid","yi"]}},Wo={language:"off",role:"subtitle"},Yo=Pi(Pi({},zo),{},{off:{label:"Desabilitadas",language:"off",keys:["off"]}}),qo=[],$o=0;for(var Xo in Yo)qo.push(Pi({id:$o},Yo[Xo])),$o++;var Zo=function(e,t){return e.language===t||e.keys.includes(t)},Qo=function(e,t){return e.role===t},Jo=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).core=e,i.setInitialValues(),i.onAddTrack=i.onAddTrack.bind(Ni(i)),i}return Ii(n,[{key:"name",get:function(){return"subtitle_selector"}},{key:"optionName",get:function(){return"subtitle"}},{key:"title",get:function(){return"Legendas"}},{key:"isReady",get:function(){return this.video&&this.playback.innerPlaybackName}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opes de legendas</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"initialSubtitleOption",get:function(){return this.core.options.defaultSubtitle}},{key:"defaultOption",get:function(){return this.initialSubtitleOption||Wo}},{key:"resourceSubtitles",get:function(){return this.video.selectedResource&&this.video.selectedResource.subtitles}},{key:"subtitleTrackAutoHandled",get:function(){return V.isiOS||V.isSafari&&"hls_fairplay_playback"===this.playback.innerPlaybackName}},{key:"tagVideo",get:function(){return this.playback.videoEl}}]),Ii(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenToOnce(this.playback,Fn.WM_RESOURCE_READY,this.setup))}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"stopListening",value:function(){Fi(Li(n.prototype),"stopListening",this).call(this),this.playback&&this.subtitleTrackAutoHandled&&this.tagVideo.textTracks.removeEventListener("addtrack",this.onAddTrack)}},{key:"setInitialValues",value:function(){this.availableOptions=[],this.availableContents=[],this.currentSubtitleId=null}},{key:"setup",value:function(){this.setInitialValues();var e=this.getSubtitleResource();this.isReady&&0!==e.length&&(this.onSubtitleLoaded("off","subtitle",""),this.subtitleTrackAutoHandled?this.setupTextTracks():this.loadSubtitles(e))}},{key:"getSubtitleResource",value:function(){var e=this.video.selectedResource.subtitles,t=this.video.selectedResource.subtitlesWebVTT;return!!this.core.options.shouldDeviceUseWebVTT&&t.length>0&&t||e}},{key:"setupTextTracks",value:function(){this.tagVideo.textTracks.addEventListener("addtrack",this.onAddTrack)}},{key:"onAddTrack",value:function(e){var t=this.tagVideo.textTracks;this.onSubtitleLoaded(e.track.language,e.track.kind,""),this.availableOptions.length-1===t.length&&this.onAllSubtitlesLoaded()}},{key:"loadSubtitles",value:function(e){var t=this,n=e.map((function(e){return t.fetchSubtitle(e)}));Promise.all(n).then((function(){return t.onAllSubtitlesLoaded()}))}},{key:"fetchSubtitle",value:function(e){var t=this,n=e.url,i=e.language,r=e.role,a=e.type;return new Promise((function(e){U.ajax({url:n,timeout:3e3,success:function(n){t.onSubtitleLoaded(i,r,n,a),e()},error:function(n){t.onSubtitleLoadError(n),e()}})}))}},{key:"onSubtitleLoadError",value:function(e){fe.error(this.name,e)}},{key:"onSubtitleLoaded",value:function(e,t,n,i){var r=Object.values(Yo).find((function(t){return t.keys.includes(e)}));r&&(r=Pi(Pi({},r),{},{id:this.availableOptions.length,label:this.getSubtitleLabel(r,t),role:t}),i&&(r.type=i),this.availableOptions.push(Pi({},r)),this.availableContents.push(n))}},{key:"getSubtitleLabel",value:function(e,t){var n=e.label;return t.match(/caption/)?n+" - CC":n}},{key:"onAllSubtitlesLoaded",value:function(){1!==this.availableOptions.length&&this.onSubtitlesReady()}},{key:"onSubtitlesReady",value:function(){this.setInitialSubtitle(),this.container.trigger(Fn.WM_SUBTITLE_AVAILABLE,this.availableOptions,this.availableContents),this.trigger(Fn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"findSubtitleOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return Zo(e,t)&&Qo(e,n)})),r=this.availableOptions.find((function(e){return Zo(e,t)}));return i||r}},{key:"setInitialSubtitle",value:function(){if(this.availableOptions.length){var e=this.findSubtitleOption(this.initialSubtitleOption),t=this.findSubtitleOption(Wo),n=e||t;this.playbackUpdate(n.id,!1),this.interfaceUpdate(n.id)}}},{key:"playbackUpdate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentSubtitleId!==e&&(this.selectedSubtitle=this.availableOptions[e],this.selectedSubtitle.selected=!0,this.currentSubtitleId=e,this.playback.currentSubtitle=this.selectedSubtitle,t&&this.container.trigger(Fn.WM_SUBTITLE_CHANGED,this.selectedSubtitle))}},{key:"getCurrentOption",value:function(){return this.selectedSubtitle}}]),n}(Go),es={language:"por"},ts=[],ns=0;for(var is in zo)ts.push(Pi({id:ns},zo[is])),ns++;var rs=function(e,t){return e.language===t||e.keys.includes(t)},as=function(e,t){return e.role===t},os=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.availableOptions=[],i.selectedAudio=null,i.currentAudioId=null,i.bindEvents(),i}return Ii(n,[{key:"initialAudioOption",get:function(){return this.idPlayback.currentAudio||this.options.defaultAudio}},{key:"playback",get:function(){return this.idPlayback.playback}},{key:"audioTracks",get:function(){return[]}}]),Ii(n,[{key:"bindEvents",value:function(){this.playback&&this.listenToOnce(this.playback,be.PLAYBACK_PLAY,this.setup)}},{key:"onReady",value:function(){this.ready=!0,this.trigger(Fn.WM_AUDIOSELECTOR_READY)}},{key:"setup",value:function(){}},{key:"parseAudioTracks",value:function(){}},{key:"updateAudioPlayback",value:function(){}},{key:"getAudioInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e&&"audio"!==e){var i=this.findAudioData(e);if(i)return Pi(Pi({},i),{},{languageISO_639_2B:i.language,language:e,sublabel:this.getAudioSublabel(n),role:n,id:t})}}},{key:"findAudioData",value:function(e){return ts.find((function(t){return rs(t,e)}))}},{key:"getAudioSublabel",value:function(e){return e.match(/description/)?"audiodescrio":""}},{key:"findAudioOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return rs(e,t)&&as(e,n)})),r=this.availableOptions.find((function(e){return rs(e,t)}));return i||r}},{key:"setInitialAudio",value:function(){if(this.availableOptions.length){var e=this.findAudioOption(this.initialAudioOption),t=this.findAudioOption(es),n=Vi(this.availableOptions,1)[0],i=e||t||n;this.audioSwitch(i.id,!0)}}},{key:"getSelectedOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e||void 0!==t)return this.availableOptions.find((function(n){return n.id.toString()===e.toString()||n.language.toString()===t.toString()||n.keys.includes(t)}))}},{key:"audioSwitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.currentAudioId!==e||t)&&(this.selectedAudio=this.getSelectedOption(e),this.selectedAudio&&(this.idPlayback.currentAudio=this.selectedAudio,this.selectedAudio.selected=!0,this.currentAudioId=e,this.updateAudioPlayback(),!t&&this.trigger(Fn.WM_AUDIO_CHANGED,this.selectedAudio)))}},{key:"getCurrentOption",value:function(){return this.selectedAudio}}]),n}(Ae),ss=["alternate","description"],ls=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"setup",value:function(){this.audioTracks.length>1&&(this.parseAudioTracks(),this.setInitialAudio())}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[];var t=0;this.audioTracks.forEach((function(n){var i=e.getAudioRole(n),r=e.getAudioInfo(n.language,t,i);r&&e.availableOptions.push(r),t++})),this.onReady()}},{key:"parseShakaTracks",value:function(){var e=this,t=function(e,t){return e.find((function(e){return e.role===t}))},n=[];return this.shakaPlayerLanguages.forEach((function(i){var r=e.shakaPlayerTracks.filter((function(e){return e.language===i})),a=t(r,"alternate"),o=t(r,"description");a&&o&&(r=r.filter((function(e){return"description"!==e.role}))),n.push.apply(n,Hi(r))})),n}},{key:"getAudioRole",value:function(e){var t=e.role;return ss.includes(t)?"description":""}},{key:"updateAudioPlayback",value:function(){var e,t=this.selectedAudio,n=t.language,i=t.role,r=ss.includes(i)?"alternate":"main";null===(e=this.shakaPlayerInstance)||void 0===e||e.selectAudioLanguage(n,r)}},{key:"shakaPlayerInstance",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e._player}},{key:"shakaPlayerLanguages",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguages()}},{key:"shakaPlayerTracks",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguagesAndRoles()}},{key:"audioTracks",get:function(){return this.shakaPlayerTracks&&this.parseShakaTracks()||[]}}]),n}(os),us=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"setup",value:function(){var e=this;this.playback._hls&&(this.audioTracks.length>1?(this.parseAudioTracks(),this.setInitialAudio()):this.playback._hls.once(ft.Events.AUDIO_TRACKS_UPDATED,(function(){return e.setup()})))}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.lang||t.name||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){return this.checkIfAudioTrackDescriptive(e)?"description":""}},{key:"checkIfAudioTrackDescriptive",value:function(e){var t,n;return null===(t=e.attrs)||void 0===t||null===(n=t.CHARACTERISTICS)||void 0===n?void 0:n.includes("public.accessibility.describes-video")}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._hls&&(this.playback._hls.audioTrack=this.selectedAudio.id)}},{key:"audioTracks",get:function(){return this.playback._hls.audioTracks||[]}}]),n}(os),cs=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"setup",value:function(){this.audioTracks.length>1&&(this.parseAudioTracks(),this.setInitialAudio())}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.language||t.label||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){var t=e.kind;return"description"===t?t:""}},{key:"updateAudioPlayback",value:function(){var e=this;this.audioTracks.forEach((function(t){t.enabled=t.id.toString()===e.selectedAudio.id.toString()}))}},{key:"audioTracks",get:function(){var e=this.playback&&this.playback.el&&this.playback.el.audioTracks;return"object"===Si(e)&&(e=Object.keys(e).map((function(t){return e[t]}))),e||[]}}]),n}(os),ds=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.playback=i.idPlayback.playback,i.bindEvents(),i}return Ii(n,[{key:"audioTracks",get:function(){return this.playback.getAudioStreams()||[]}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,be.PLAYBACK_PLAY,this.setup)}},{key:"setup",value:function(){this.audioTracks.length>1&&this.parseAudioTracks()}},{key:"parseAudioTracks",value:function(){this.ready=!0,this.trigger(Fn.WM_AUDIOSELECTOR_READY),this.trigger(Fn.WM_AUDIO_AVAILABLE,this.audioTracks)}}]),n}(Ae),hs=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&this.listenTo(this.playback,Fn.WM_PLAYBACK_WILL_PLAY,this.setup),this.playback&&this.playback.isReady&&this.setup()}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this;this.availableOptions=[];var t=this.playback.innerPlaybackName;if(t){if(this.selector&&this.stopListening(this.selector),"dash_shaka_playback"===t)this.selector=new ls(this.playback);else if("hls"===t)this.selector=new us(this.playback);else if(["html5","html5_video","hls_fairplay_playback"].includes(t))this.selector=new cs(this.playback);else{if("cast"!==t)return void fe.info(this.name,"could not setup audio selector");this.selector=new ds(this.playback)}this.listenTo(this.selector,Fn.WM_AUDIOSELECTOR_READY,this.onSelectorReady),this.listenTo(this.selector,Fn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.selector,Fn.WM_AUDIO_AVAILABLE,(function(t){e.container.trigger(Fn.WM_AUDIO_AVAILABLE,t)})),this.selector.setup()}else fe.info(this.name,"should not setup audio selector")}},{key:"onSelectorReady",value:function(){this.availableOptions=this.selector.availableOptions,this.orderAudioTracks(),this.trigger(Fn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"orderAudioTracks",value:function(){var e=this.availableOptions.filter((function(e){return e.keys.includes("por")})),t=this.availableOptions.filter((function(e){return!e.keys.includes("por")}));e=e.sort((function(e,t){return e.role.localeCompare(t.role)})),t=t.sort((function(e,t){return e.label.localeCompare(t.label)})),this.availableOptions=[].concat(Hi(e),Hi(t))}},{key:"playbackUpdate",value:function(e){this.selector.audioSwitch(e)}},{key:"onAudioChanged",value:function(e){this.container.trigger(Fn.WM_AUDIO_CHANGED,e)}},{key:"getCurrentOption",value:function(){return this.selector.getCurrentOption()}},{key:"name",get:function(){return"audio_selector"}},{key:"optionName",get:function(){return"audio"}},{key:"title",get:function(){return"&Aacute;udios"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opes de udio</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return this.core.options.defaultAudio||es}}]),n}(Go),ps='.clappr-player#wp3-player-0 .media-control.volume-modal--visible .settings__box {\n  opacity: 0.3; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .media-control-panel__modal {\n  z-index: -1; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-option, .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-selected {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item {\n  padding: 8px 32px 8px 60px; }\n  .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item--active {\n    padding-left: 4px; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel .settings .settings__box--hidden {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel__modal.settings__modal {\n  z-index: 998; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .settings__box, .clappr-player#wp3-player-0 .media-control.w480 .settings__box, .clappr-player#wp3-player-0 .media-control.w540 .settings__box {\n  background-color: transparent; }\n\n.clappr-player#wp3-player-0 .settings {\n  position: relative;\n  cursor: pointer;\n  line-height: 100%; }\n  .clappr-player#wp3-player-0 .settings__button {\n    width: 100%;\n    height: 100%;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .settings__box {\n    position: absolute;\n    right: 12px;\n    bottom: 64px;\n    cursor: default;\n    border-radius: 8px;\n    background-color: rgba(0, 0, 0, 0.8);\n    z-index: 998;\n    box-sizing: content-box;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n    .clappr-player#wp3-player-0 .settings__box--options-rendered .settings__title {\n      padding-right: 32px; }\n  .clappr-player#wp3-player-0 .settings__header {\n    display: none; }\n  .clappr-player#wp3-player-0 .settings__back-button {\n    display: flex;\n    margin: 0;\n    padding: 0;\n    border: 0;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n    background: none;\n    align-items: center;\n    flex-shrink: 0;\n    cursor: pointer;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .settings__back-button--hidden {\n      display: none; }\n  .clappr-player#wp3-player-0 .settings__body {\n    flex-grow: 2;\n    box-sizing: content-box;\n    padding: 12px 0;\n    align-items: center;\n    max-height: 91px;\n    overflow: auto; }\n  .clappr-player#wp3-player-0 .settings__menu, .clappr-player#wp3-player-0 .settings__options, .clappr-player#wp3-player-0 .settings__options-wrapper, .clappr-player#wp3-player-0 .settings__options-menu {\n    max-height: inherit; }\n  .clappr-player#wp3-player-0 .settings__title {\n    display: flex;\n    padding: 12px;\n    align-items: center;\n    opacity: 0.5;\n    font-family: "opensans-regular";\n    letter-spacing: -0.5;\n    font-size: 15px;\n    line-height: 1;\n    color: #FFFFFF;\n    text-transform: capitalize; }\n    .clappr-player#wp3-player-0 .settings__title-option {\n      padding-left: 0; }\n  .clappr-player#wp3-player-0 .settings__close {\n    display: none;\n    box-sizing: content-box;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    cursor: pointer;\n    border: 0;\n    background: none; }\n    .clappr-player#wp3-player-0 .settings__close svg {\n      width: 100%;\n      height: 100%; }\n  .clappr-player#wp3-player-0 .settings__separator {\n    display: block;\n    width: 100%;\n    height: 1px;\n    border: 0;\n    background-color: #666;\n    opacity: .4;\n    margin: 12px 0; }\n  .clappr-player#wp3-player-0 .settings__menu {\n    list-style-type: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    height: auto;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .settings__menu > li {\n      width: 100%; }\n    .clappr-player#wp3-player-0 .settings__menu-item {\n      display: flex;\n      flex-shrink: 0;\n      align-items: center;\n      justify-content: space-between;\n      align-self: stretch;\n      position: static;\n      line-height: 1.14;\n      padding: 0;\n      margin: 0;\n      background: none;\n      border: 0;\n      width: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-label {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-language, .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n          display: inline-block;\n          font-family: "opensans-regular", sans-serif;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          color: #888A89; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-language {\n          font-size: 14px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n          font-size: 13px; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        padding: 4px 0 4px 16px; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        padding: 4px 16px 4px 16px; }\n      .clappr-player#wp3-player-0 .settings__menu-item:hover {\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        display: flex;\n        align-items: center;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-icon {\n        width: 16px;\n        height: 16px;\n        margin-right: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title {\n        display: inline;\n        pointer-events: none;\n        font-family: "opensans-regular", sans-serif;\n        text-transform: capitalize;\n        font-size: 14px;\n        line-height: 1.14;\n        color: #FFFFFF;\n        opacity: 1; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        display: flex;\n        align-items: center;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon {\n        width: 24px;\n        height: 24px;\n        margin-left: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-value {\n        font-family: "opensans-regular", sans-serif;\n        font-size: 14px;\n        color: #FFFFFF;\n        opacity: 0.5;\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title, .clappr-player#wp3-player-0 .settings__menu-item-value {\n        height: 16px; }\n    .clappr-player#wp3-player-0 .settings__menu--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .settings__back-icon {\n    display: flex;\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    margin-right: 4px;\n    box-sizing: content-box;\n    border: 0;\n    background: none; }\n    .clappr-player#wp3-player-0 .settings__back-icon svg {\n      width: 100%;\n      height: 100%; }\n  .clappr-player#wp3-player-0 .settings__options {\n    display: flex;\n    cursor: pointer;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-wrapper {\n      margin: 0 auto;\n      width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-header {\n      display: flex;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .settings__options-title {\n      display: flex;\n      cursor: pointer;\n      opacity: 0.7;\n      font-family: "opensans-regular", sans-serif;\n      color: #FFFFFF;\n      text-transform: capitalize;\n      text-align: left;\n      font-size: 14px; }\n    .clappr-player#wp3-player-0 .settings__options-menu {\n      list-style-type: none;\n      background: none;\n      padding: 0;\n      margin: 0; }\n    .clappr-player#wp3-player-0 .settings__options-item {\n      display: flex;\n      align-items: center;\n      box-sizing: content-box;\n      height: 24px;\n      padding: 6px 32px 6px 56px;\n      background: none;\n      font-family: "opensans-regular", sans-serif;\n      font-weight: 400;\n      line-height: 1.14;\n      color: #FFFFFF;\n      opacity: 1;\n      border: 0; }\n      .clappr-player#wp3-player-0 .settings__options-item::before {\n        content: ""; }\n      .clappr-player#wp3-player-0 .settings__options-item-label {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-language, .clappr-player#wp3-player-0 .settings__options-item-label-role {\n          display: inline-block;\n          text-overflow: ellipsis;\n          white-space: nowrap; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-language {\n          font-size: 15px; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-role {\n          font-size: 13px; }\n      .clappr-player#wp3-player-0 .settings__options-item--active {\n        margin-left: 0;\n        font-weight: 700;\n        font-family: "opensans-regular", sans-serif;\n        opacity: 1;\n        padding-left: 0; }\n    .clappr-player#wp3-player-0 .settings__options-active-icon {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      padding: 0 16px;\n      box-sizing: content-box; }\n      .clappr-player#wp3-player-0 .settings__options-active-icon svg {\n        width: 100%;\n        height: 100%; }\n    .clappr-player#wp3-player-0 .settings__options--hidden {\n      display: none !important; }\n';or(ps);var fs=".clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-radius: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    margin-bottom: 8px;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header--hidden {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__body {\n    max-height: calc(100% - 57px) !important;\n    max-width: 336px;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    box-sizing: border-box;\n    flex-direction: column;\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-title {\n      align-self: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-value {\n      line-height: 1.14; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options {\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-wrapper {\n      margin-left: 20%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-title {\n      height: 24px;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-item {\n      padding-right: 88px; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__close {\n    display: flex; }\n";or(fs);var gs=".settings__menu",vs=".settings__options",ys=".settings__back-button",ms=".settings__header",bs=".settings__back-button__title",Es="settings__title-option",As="settings__box--options-rendered",ks=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).hideSettingsBoxHandler=function(e){e instanceof KeyboardEvent&&"Escape"!==e.key||i.hideSettingsBox()},i}return Ii(n,[{key:"getExternalInterface",value:function(){return{getSelectedSettings:this.getSelectedSettings,getDefaultSettings:this.getDefaultSettings}}},{key:"name",get:function(){return"settings"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return xe('<div role="menu" class="settings__box settings__box--hidden" data-controls>\n  <button type="button" class="settings__back-button settings__back-button--hidden">\n    <span class="settings__back-icon">\n      <%= backIcon %>\n      <span class="visually-hidden">Voltar para Seleo de udio e Legenda</span>\n    </span>\n    <span class="settings__back-button__title settings__title"></span>\n  </button>\n  <div class="settings__header">\n    <span class="settings__title">Configuraes</span>\n    <button type="button" class="settings__close settings__close--hidden"><%= closeIcon %></button>\n  </div>\n  <div class="settings__body">\n    <div class="settings__menu">\n      <% for (var i = 0; i < selectors.length; i++) { %>\n        <button type="button" class="settings__menu-item" data-selector-name="<%= selectors[i].name %>" role="menuitem" aria-expanded="false">\n          <span class="settings__menu-item-option">\n            <span class="settings__menu-item-icon" aria-hidden="true"><%= selectors[i].icon %></span>\n            <span class="settings__menu-item-title"><%= selectors[i].title %></span>\n          </span>\n          <span class="settings__menu-item-selected">\n            <div class="settings__menu-item-label">\n              <span class="settings__menu-item-label-language"><%= selectors[i].selected.language %></span>\n              <span class="settings__menu-item-label-role"><%= selectors[i].selected.role %></span>\n            </div>\n            <span class="settings__menu-item-arrow-icon"><%= arrowIcon %></span>\n          </span>\n        </button>\n      <% } %>\n    </div>\n    <div class="settings__options settings__options--hidden"></div>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"settings","data-settings":""}}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"events",get:function(){return{click:"toggleSettingsBox"}}},{key:"selectors",get:function(){return this._selectors=this._selectors||[new hs(this.core),new Jo(this.core)],this._selectors}},{key:"availableSelectors",get:function(){return this.selectors.filter((function(e){return e.shouldRender()}))}}]),Ii(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.mediaControl,be.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,be.MEDIACONTROL_HIDE,this.onMediaControlhide),this.selectors.forEach((function(t){e.listenTo(t,Fn.WM_SETTINGS_OPTIONS_CHANGED,e.render)}))}},{key:"onMediaControlhide",value:function(){if(!this.mediaControl.keepVisible&&this.isSettingsBoxVisible){this.$settingsBox.remove();var e=this.mediaControl.$modal;e&&e.removeClass("settings__modal"),this.resetSettings(),this.triggerDidHideModalElement()}}},{key:"bindMenuClickEvents",value:function(){this.unbindMenuClickEvents(),this.$settingsMenuitem=this.$settingsBox.find(".settings__menu-item"),this.$settingsMenuitem.on("click",this.clickMenu.bind(this))}},{key:"unbindMenuClickEvents",value:function(){this.$settingsMenuitem&&this.$settingsMenuitem.off("click")}},{key:"bindSettingsEvents",value:function(){var e=this;this.unbindSettingsEvents(),this.$settingsOptionsTitle=this.$settingsBox.find(".settings__options-title"),this.$settingsBox.on("click",(function(e){return e.stopPropagation()})),this.bindMenuClickEvents(),ir((function(){U(document).one("click",e.hideSettingsBoxHandler),U(document).on("keyup",e.hideSettingsBoxHandler),e.listenTo(e.mediaControl,Fn.MEDIACONTROL_ITEMCLICKED,e.hideSettingsBoxHandler)}))}},{key:"unbindSettingsEvents",value:function(){this.$settingsOptionsTitle&&this.$settingsOptionsTitle.off("click"),this.$settingsClose&&this.$settingsClose.off("click"),U(document).off("click",this.hideSettingsBoxHandler),U(document).off("keyup",this.hideSettingsBoxHandler),this.stopListening(this.mediaControl,Fn.MEDIACONTROL_ITEMCLICKED,this.hideSettingsBoxHandler)}},{key:"onContainerChanged",value:function(){this.resetSettings(),this.render()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(this.settingsFullScreenEnabled))}},{key:"updateSettingsFullScreenState",value:function(e){this.settingsFullScreenEnabled=this.currentWidth<540,this.isSettingsBoxVisible&&e!==this.settingsFullScreenEnabled&&(this.settingsFullScreenEnabled?this.showSettingsFullScreen():this.hideSettingsFullScreen())}},{key:"getPanelBetweenHeight",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__between");return e&&e.height()}},{key:"getSettingBoxHeaderHeight",value:function(){var e=this.mediaControl.$modal.find(".settings__back-button");return e&&e.height()}},{key:"updateSettingsBoxMaxHeight",value:function(){if(this.isSettingsBoxVisible){var e=this.getPanelBetweenHeight(),t=this.getSettingBoxHeaderHeight();if(e>=0&&t>=0){var n=e-t;this.mediaControl.$modal.find(".settings__body").css({maxHeight:n})}}}},{key:"clickMenu",value:function(e){e.stopPropagation();var t=U(e.target).data("selector-name"),n=this.selectors.find((function(e){return e.name===t}));this.fromMenuToOptions(),this.renderOptions(n),this.isKeyboardAction(e)&&n.$el.find(".settings__options-item--active").focus()}},{key:"renderOptions",value:function(e){this.$settingsBox.find(vs).html(e.render().el),this.$settingsBox.find(bs).html(e.title).attr("aria-hidden",!0).addClass(Es),this.$settingsBox.find(".settings__back-button").on("click",this.fromOptionsToMenu.bind(this))}},{key:"fromMenuToOptions",value:function(){this.$settingsBox.addClass(As),this.$settingsBox.find(gs).addClass("settings__menu--hidden"),this.$settingsBox.find(ms).addClass("settings__header--hidden"),this.$settingsBox.find(vs).removeClass("settings__options--hidden"),this.$settingsBox.find(ys).removeClass("settings__back-button--hidden"),this.updateSettingsBoxMaxHeight()}},{key:"fromOptionsToMenu",value:function(e){e&&e.stopPropagation(),this.$settingsBox.removeClass(As),this.$settingsBox.find(gs).removeClass("settings__menu--hidden"),this.$settingsBox.find(ms).removeClass("settings__header--hidden"),this.$settingsBox.find(vs).addClass("settings__options--hidden"),this.$settingsBox.find(ys).addClass("settings__back-button--hidden"),this.$settingsBox.find(bs).html("Configuraes").attr("aria-hidden",!1).removeClass(Es),this.updateSettingsBoxMaxHeight(),this.updateAllSelectors()}},{key:"updateButtonAttrs",value:function(e){this.$el.find(".settings__button").attr("aria-expanded",e)}},{key:"isKeyboardAction",value:function(e){return 0===(null==e?void 0:e.detail)}},{key:"toggleSettingsBox",value:function(e){e.stopPropagation(),this.isSettingsBoxVisible?this.hideSettingsBox():this.showSettingsBox(e)}},{key:"showSettingsBox",value:function(e){var t=this,n=this.template({selectors:this.availableSelectors,arrowIcon:jo,backIcon:Sa,closeIcon:Do});this.triggerWillShowModalElement(),this.settingsFullScreenEnabled||(this.$settingsBox=U(n),this.$el.append(this.$settingsBox),this.updateButtonAttrs(!0),ir((function(){return t.$settingsBox.removeClass("settings__box--hidden")}))),this.mediaControl.$modal.addClass("settings__modal"),this.mediaControl.trigger(Fn.WM_SETTINGS_SHOW),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_SHOW,"<div/>"),this.isSettingsBoxVisible=!0,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(!1),this.bindSettingsEvents(),this.mediaControl.setKeepVisible(),this.isKeyboardAction(e)&&this.el.querySelector(".settings__menu-item").focus()}},{key:"updateAllSelectors",value:function(){var e=this;this.availableSelectors.forEach((function(t){e.updateSelectorValue(t)}))}},{key:"updateSelectorValue",value:function(e){var t,n,i="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-language"),r="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-role"),a=null===(t=this.$settingsBox)||void 0===t?void 0:t.find(i),o=null===(n=this.$settingsBox)||void 0===n?void 0:n.find(r);null==a||a.html(e.selected.language),null==o||o.html(e.selected.role),this.bindMenuClickEvents()}},{key:"showSettingsFullScreen",value:function(){var e=this;if(this.isSettingsBoxVisible){this.$settingsBox&&this.$settingsBox.remove();var t=this.template({selectors:this.availableSelectors,arrowIcon:jo,backIcon:Sa,closeIcon:Do});this.mediaControl.updatePanelsVisibility({hide:!0}),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_SHOW,t),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause(),this.$settingsBox=this.mediaControl.$modal.find(".settings__box"),this.$settingsBox.addClass("settings__fullscreen"),this.bindSettingsEvents(),ir((function(){e.$settingsBox.removeClass("settings__box--hidden"),e.$settingsClose=e.$settingsBox.find(".settings__close"),e.$settingsClose&&e.$settingsClose.removeClass("settings__close--hidden"),e.$settingsClose&&e.$settingsClose.on("click",e.hideSettingsBox.bind(e))}))}}},{key:"hideSettingsBox",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSettingsBoxVisible&&(this.$settingsBox.addClass("settings__box--hidden"),this.updateButtonAttrs(!1),this.$settingsBox.one("transitionend",(function(){return e.$settingsBox.remove()})),this.unbindSettingsEvents(),this.resetSettings(),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_HIDE,t),this.mediaControl.trigger(Fn.WM_SETTINGS_HIDE),this.mediaControl.resetKeepVisible(),this.triggerDidHideModalElement(),this.resetSettings(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"hideSettingsFullScreen",value:function(){this.mediaControl.updatePanelsVisibility({hide:!1}),this.showSettingsBox()}},{key:"resetSettings",value:function(){this.isSettingsBoxVisible=!1}},{key:"getSelectedSettings",value:function(){var e={};return this.availableSelectors.forEach((function(t){e[t.optionName]=t.getCurrentOption()})),e}},{key:"getDefaultSettings",value:function(){var e={};return this.selectors.forEach((function(t){e[t.optionName]=t.defaultOption})),e}},{key:"shouldRender",value:function(){return this.availableSelectors.length>0&&!["ad","live"].includes(this.core.getPlaybackType())}},{key:"render",value:function(){if(!this.isSettingsBoxVisible){this.$el.html("");var e=Bn.getStyleFrom(ps,{playerId:this.core.options.playerId}),t=Bn.getStyleFrom(fs,{playerId:this.core.options.playerId});if(this.$el.append(e[0]).append(t[0]),this.shouldRender()){this.$el.removeClass("media-control-element--hidden"),this.$el.attr("style","");var n=U('<button type="button" aria-haspopup="true" aria-expanded="false" class="settings__button media-control-button"></button>');n.append('<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="#EEEEEE"/>\n<mask id="mask0_6_301" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="3" width="21" height="20">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="white"/>\n</mask>\n<g mask="url(#mask0_6_301)">\n</g>\n</svg>\n<span class="visually-hidden">Opes de udios e legendas</span>'),this.$el.append(n)}else this.$el.addClass("media-control-element--hidden");return this}}}]),n}(hr),Ts='.clappr-player#wp3-player-0 .media-control.settings-modal--visible .thumb-preview {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .thumb-preview {\n  bottom: 52px; }\n\n.clappr-player#wp3-player-0 .thumb-preview {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  bottom: 44px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .thumb-preview--hidden {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .thumb-preview__thumb {\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 2px;\n    outline: 1px solid transparent;\n    background-repeat: no-repeat;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .thumb-preview__thumb--no-outline {\n      outline: 0 !important; }\n  .clappr-player#wp3-player-0 .thumb-preview__position {\n    padding: 2px 8px 3px;\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    color: #fff;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n    border-radius: 2px;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    z-index: 100;\n    align-self: flex-end; }\n\n.clappr-player#wp3-player-0 .w425 .thumb-preview, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: auto;\n  height: 16px; }\n  .clappr-player#wp3-player-0 .w425 .thumb-preview__position, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview__position {\n    display: inline-block;\n    overflow: hidden;\n    position: initial;\n    padding: 0 6px;\n    width: auto;\n    height: auto;\n    font-size: 10px;\n    line-height: 16px; }\n';or(Ts);var _s=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).supportedTypes={vod:{thumb:function(e){return i.updateThumbForVod(e)},text:function(e){return i.thumbTextForVod(e)}},live:{thumb:function(e){return i.updateThumbForLive(e)},text:function(e){return i.thumbTextForLive(e)}}},i}return Ii(n,[{key:"name",get:function(){return"thumb-preview"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"seekbar",get:function(){return this._seekbar||(this._seekbar=this.core.getPlugin("seekbar"))}},{key:"template",get:function(){return xe('<div class="thumb-preview__thumb"></div>\n<div class="thumb-preview__position"></div>\n')}},{key:"attributes",get:function(){return{class:"thumb-preview"}}},{key:"thumbHost",get:function(){return this.options.env.name,"".concat(this.options.env.protocol,"://live-thumbs.video.globo.com/")}}]),Ii(n,[{key:"bindEvents",value:function(){this.mediaControl&&(this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.show),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.calculatePosition),this.listenTo(this.mediaControl,be.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hide),this.listenTo(this.mediaControl,be.MEDIACONTROL_HIDE,this.hide),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,be.CORE_RESIZE,this.checkOutline),this.trigger("plugin:thumbpreview:ready"),this.bindContainerEvents())}},{key:"bindContainerEvents",value:function(){this.mediaControl.container&&(this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.container.playback&&this.stopListening(this.container.playback),this.listenTo(this.container,be.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container.playback,Fn.WM_RESOURCE_SELECTED,this.onResourceSelected))}},{key:"checkOutline",value:function(){le.Fullscreen.fullscreenElement()&&V.isIE11?this.$el.find(".thumb-preview__thumb").addClass("thumb-preview__thumb--no-outline"):this.$el.find(".thumb-preview__thumb").removeClass("thumb-preview__thumb--no-outline")}},{key:"onResourceSelected",value:function(e){this.thumbUrl=e.selectedResource&&e.selectedResource.thumbUrl}},{key:"updateThumbForVod",value:function(e){if(this.lastTimestamp!==e)if(this.lastTimestamp=e,this.thumbUrl){var t=Math.floor(e/60),n=Math.floor(e%60/5),i="".concat(this.thumbUrl,"/x96/tile/").concat(t,".jpg");this.$el.css({height:this.thumbSize.height,width:this.thumbSize.width}),this.$el.find(".thumb-preview__thumb").css({"background-image":"url(".concat(i,")"),"background-position":"center ".concat(n*-this.thumbSize.height,"px")}),this.mediaControl.$el.removeClass("thumb-preview-basic")}else this.mediaControl.$el.addClass("thumb-preview-basic")}},{key:"thumbTextForVod",value:function(e){return e.formattedTime}},{key:"updateThumbForLive",value:function(e){var t=this;this.throttledUpdateThumb||(this.throttledUpdateThumb=no((function(e){var n=Math.floor(Date.now()/1e3),i=t.mediaControl.container.playback.getDuration(),r=10*Math.floor((n-(i-e))/10),a=t.core.getCurrentPlayback().video.transmission.signal,o=t.thumbHost+a+"/snapshot/172/97/?utc="+r;t.$el.css({height:t.thumbSize.height,width:t.thumbSize.width}),t.$el.find(".thumb-preview__thumb").css({"background-image":"url("+o+")","background-size":"cover"})}),500,!0)),this.mediaControl.container.playback.dvrEnabled&&this.throttledUpdateThumb(e)}},{key:"thumbTextForLive",value:function(e){if(100===this.mediaControl.currentSeekPercentage){var t=this.mediaControl.container.playback.getDuration()-e.timestamp;return"Voltar "+this.formatTimeInterval(t)}return e.formattedTime}},{key:"show",value:function(e){this.$el.removeClass("thumb-preview--hidden"),this.canShow(e)?(this.core.trigger(Fn.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.css({"z-index":997}),this.$el.removeClass("thumb-preview--hidden")):this.hide()}},{key:"canShow",value:function(){return this.mediaControl.container.playback.settings.seekEnabled&&Object.keys(this.supportedTypes).includes(this.playbackType)}},{key:"hide",value:function(){this.$el.addClass("thumb-preview--hidden"),this.core.trigger(Fn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"settingsUpdate",value:function(){this.playbackType=this.mediaControl.container.getPlaybackType(),this.thumbSize={width:170,height:96}}},{key:"containerChanged",value:function(){var e=this,t=this.core.getPlugin("seek_time");t.render=function(){return e.render()},t.stopListening(this.mediaControl.container,be.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),t.update=function(t){return e.update(t)},t.listenTo(this.mediaControl.container,be.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),this.bindContainerEvents(),this.settingsUpdate(),this.trigger("plugin:thumbpreview:ready")}},{key:"render",value:function(){var e=this.core.getPlugin("seek_time");if(this.mediaControl&&e){this.$el.html(this.template());var t=Bn.getStyleFrom(Ts,{playerId:this.core.options.playerId});this.$el.append(t[0]),e.setElement(this.el),this.seekbar.$seekBarContainer.append(this.el),this.$el.addClass("thumb-preview--hidden")}else this.listenToOnce(this,"plugin:thumbpreview:ready",this.render);this.checkOutline()}},{key:"calculatePosition",value:function(e){var t=e.touches&&e.touches.length>0&&e.touches[e.touches.length-1]||{},n=(e.pageX||t.pageX)-this.seekbar.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))}},{key:"update",value:function(){var e=this.core.getPlugin("seek_time");if(this.hoverPosition&&e.hoveringOverSeekBar){var t=this.hoverPosition*this.core.getCurrentContainer().getDuration(),n=le.formatTime(t),i=this.seekbar.$seekBarContainer;if(!i.length)return;if(isNaN(t))return;if(Object.keys(this.supportedTypes).includes(this.playbackType)){var r=this.supportedTypes[this.playbackType].thumb,a=this.supportedTypes[this.playbackType].text,o=i.width(),s=this.$el.width()/2,l=this.hoverPosition*o-s,u=o-this.$el.width();l=Math.max(0,Math.min(l,u)),this.$el.css("left",l),this.$el.find(".thumb-preview__position").text(a({timestamp:t,formattedTime:n})),this.core.mediaControl.$el.hasClass("w425")||r(t)}}}},{key:"formatTimeInterval",value:function(e){var t=!1;e*=1e3;var n=(e=parseInt(e/1e3,10))%60,i=(e=parseInt(e/60,10))%60,r=(e=parseInt(e/60,10))%24,a="";return r&&r>0&&(a+=r.toString().slice(-2)+"h",t=!0),i&&i>0&&(a+=i.toString().slice(-2)+"m"),t||(a+=("0"+n).slice(-2)+"s"),a.trim()}},{key:"destroy",value:function(){this._mediaControl=null,Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(Ne),ws={default:{10:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#0095DA"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12566)">\n<path d="M18.9195 36H13.4879V21.1289L13.5406 18.6855L13.6285 16.0137C12.7261 16.916 12.0992 17.5078 11.7476 17.7891L8.79449 20.1621L6.17535 16.8926L14.4547 10.3008H18.9195V36Z" fill="#EEEEEE"/>\n<path d="M40.6077 23.1504C40.6077 27.6387 39.8694 30.9609 38.3929 33.1172C36.928 35.2734 34.6663 36.3516 31.6077 36.3516C28.6429 36.3516 26.4046 35.2383 24.8929 33.0117C23.3929 30.7852 22.6429 27.498 22.6429 23.1504C22.6429 18.6152 23.3753 15.2754 24.8401 13.1309C26.305 10.9746 28.5608 9.89648 31.6077 9.89648C34.5725 9.89648 36.8108 11.0215 38.3225 13.2715C39.846 15.5215 40.6077 18.8145 40.6077 23.1504ZM28.0393 23.1504C28.0393 26.3027 28.3089 28.5645 28.8479 29.9355C29.3987 31.2949 30.3186 31.9746 31.6077 31.9746C32.8733 31.9746 33.7874 31.2832 34.3499 29.9004C34.9124 28.5176 35.1936 26.2676 35.1936 23.1504C35.1936 19.998 34.9065 17.7363 34.3323 16.3652C33.7698 14.9824 32.8616 14.291 31.6077 14.291C30.3304 14.291 29.4163 14.9824 28.8655 16.3652C28.3147 17.7363 28.0393 19.998 28.0393 23.1504Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12566" x="6.17535" y="9.89648" width="36.4323" height="28.4551" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12566"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12566" result="shape"/>\n</filter>\n</defs>\n</svg>',12:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#FBC115"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12578)">\n<path d="M18.9195 36H13.4879V21.1289L13.5406 18.6855L13.6285 16.0137C12.7261 16.916 12.0992 17.5078 11.7476 17.7891L8.79449 20.1621L6.17535 16.8926L14.4547 10.3008H18.9195V36Z" fill="#EEEEEE"/>\n<path d="M40.7483 36H22.7835V32.2207L29.2347 25.6992C31.1448 23.7422 32.3929 22.3887 32.9788 21.6387C33.5647 20.877 33.9866 20.1738 34.2444 19.5293C34.5022 18.8848 34.6311 18.2168 34.6311 17.5254C34.6311 16.4941 34.344 15.7266 33.7698 15.2227C33.2073 14.7188 32.4515 14.4668 31.5022 14.4668C30.5061 14.4668 29.5393 14.6953 28.6018 15.1523C27.6643 15.6094 26.6858 16.2598 25.6663 17.1035L22.7132 13.6055C23.9788 12.5273 25.0276 11.7656 25.8597 11.3203C26.6917 10.875 27.5999 10.5352 28.5843 10.3008C29.5686 10.0547 30.6702 9.93164 31.889 9.93164C33.4944 9.93164 34.9124 10.2246 36.1429 10.8105C37.3733 11.3965 38.3284 12.2168 39.0081 13.2715C39.6878 14.3262 40.0276 15.5332 40.0276 16.8926C40.0276 18.0762 39.8167 19.1895 39.3948 20.2324C38.9847 21.2637 38.3401 22.3242 37.4612 23.4141C36.594 24.5039 35.0589 26.0566 32.8558 28.0723L29.5511 31.1836V31.4297H40.7483V36Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12578" x="6.17535" y="9.93164" width="36.573" height="28.0684" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12578"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12578" result="shape"/>\n</filter>\n</defs>\n</svg>',14:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#F58220"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12590)">\n<path d="M18.9195 36H13.4879V21.1289L13.5406 18.6855L13.6285 16.0137C12.7262 16.916 12.0992 17.5078 11.7476 17.7891L8.79451 20.1621L6.17537 16.8926L14.4547 10.3008H18.9195V36Z" fill="#EEEEEE"/>\n<path d="M41.3284 30.6738H38.2347V36H32.9261V30.6738H21.9573V26.8945L33.2249 10.3008H38.2347V26.4551H41.3284V30.6738ZM32.9261 26.4551V22.0957C32.9261 21.3691 32.9554 20.3145 33.014 18.9316C33.0726 17.5488 33.1194 16.7461 33.1546 16.5234H33.014C32.5804 17.4844 32.0589 18.4219 31.4495 19.3359L26.7386 26.4551H32.9261Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12590" x="6.17537" y="10.3008" width="37.1531" height="27.6992" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12590"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12590" result="shape"/>\n</filter>\n</defs>\n</svg>',16:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#EC1D25"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12602)">\n<path d="M18.9195 36H13.4879V21.1289L13.5406 18.6855L13.6285 16.0137C12.7262 16.916 12.0992 17.5078 11.7476 17.7891L8.79451 20.1621L6.17537 16.8926L14.4547 10.3008H18.9195V36Z" fill="#EEEEEE"/>\n<path d="M22.6077 25.084C22.6077 19.998 23.68 16.2129 25.8245 13.7285C27.9808 11.2441 31.2034 10.002 35.4925 10.002C36.9573 10.002 38.1058 10.0898 38.9378 10.2656V14.6074C37.8948 14.373 36.8636 14.2559 35.844 14.2559C33.9808 14.2559 32.4573 14.5371 31.2737 15.0996C30.1019 15.6621 29.223 16.4941 28.637 17.5957C28.0511 18.6973 27.7054 20.2617 27.5999 22.2891H27.8284C28.9886 20.2969 30.846 19.3008 33.4007 19.3008C35.6976 19.3008 37.4964 20.0215 38.7972 21.4629C40.098 22.9043 40.7483 24.8965 40.7483 27.4395C40.7483 30.1816 39.9749 32.3555 38.428 33.9609C36.8812 35.5547 34.7366 36.3516 31.9944 36.3516C30.096 36.3516 28.4378 35.9121 27.0198 35.0332C25.6136 34.1543 24.5237 32.8711 23.7503 31.1836C22.9886 29.4961 22.6077 27.4629 22.6077 25.084ZM31.889 32.0098C33.0491 32.0098 33.9398 31.623 34.5608 30.8496C35.1819 30.0645 35.4925 28.9512 35.4925 27.5098C35.4925 26.2559 35.1995 25.2715 34.6136 24.5566C34.0394 23.8301 33.1663 23.4668 31.9944 23.4668C30.8929 23.4668 29.9495 23.8242 29.1644 24.5391C28.3909 25.2539 28.0042 26.0859 28.0042 27.0352C28.0042 28.4297 28.3675 29.6074 29.094 30.5684C29.8323 31.5293 30.764 32.0098 31.889 32.0098Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12602" x="6.17537" y="10.002" width="36.573" height="28.3496" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12602"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12602" result="shape"/>\n</filter>\n</defs>\n</svg>',18:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="black"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12620)">\n<path d="M18.9195 36H13.4879V21.1289L13.5406 18.6855L13.6285 16.0137C12.7262 16.916 12.0992 17.5078 11.7476 17.7891L8.79451 20.1621L6.17537 16.8926L14.4547 10.3008H18.9195V36Z" fill="#EEEEEE"/>\n<path d="M31.6429 9.9668C34.1038 9.9668 36.0843 10.5293 37.5843 11.6543C39.096 12.7676 39.8519 14.2734 39.8519 16.1719C39.8519 17.4844 39.4886 18.6562 38.762 19.6875C38.0355 20.707 36.8636 21.6211 35.2464 22.4297C37.1683 23.4609 38.5452 24.5391 39.3773 25.6641C40.221 26.7773 40.6429 28.002 40.6429 29.3379C40.6429 31.4473 39.8167 33.1465 38.1644 34.4355C36.512 35.7129 34.3382 36.3516 31.6429 36.3516C28.8304 36.3516 26.6214 35.7539 25.0159 34.5586C23.4105 33.3633 22.6077 31.6699 22.6077 29.4785C22.6077 28.0137 22.9944 26.7129 23.7679 25.5762C24.553 24.4395 25.8069 23.4375 27.5296 22.5703C26.0648 21.6445 25.0101 20.6543 24.3655 19.5996C23.721 18.5449 23.3987 17.3906 23.3987 16.1367C23.3987 14.2969 24.1605 12.8086 25.6839 11.6719C27.2073 10.5352 29.1937 9.9668 31.6429 9.9668ZM27.6351 29.1621C27.6351 30.1699 27.9866 30.9551 28.6898 31.5176C29.3929 32.0801 30.3538 32.3613 31.5726 32.3613C32.9202 32.3613 33.928 32.0742 34.596 31.5C35.264 30.9141 35.598 30.1465 35.598 29.1973C35.598 28.4121 35.264 27.6797 34.596 27C33.9398 26.3086 32.8675 25.5762 31.3792 24.8027C28.8831 25.9512 27.6351 27.4043 27.6351 29.1621ZM31.6077 13.9395C30.6819 13.9395 29.9319 14.1797 29.3577 14.6602C28.7952 15.1289 28.514 15.7617 28.514 16.5586C28.514 17.2617 28.7366 17.8945 29.1819 18.457C29.639 19.0078 30.4593 19.5762 31.6429 20.1621C32.7913 19.623 33.594 19.0723 34.0511 18.5098C34.5081 17.9473 34.7366 17.2969 34.7366 16.5586C34.7366 15.75 34.4437 15.1113 33.8577 14.6426C33.2718 14.1738 32.5218 13.9395 31.6077 13.9395Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12620" x="6.17537" y="9.9668" width="36.4675" height="28.3848" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12620"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12620" result="shape"/>\n</filter>\n</defs>\n</svg>',L:'<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#00A651"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_13_12552)">\n<path d="M16.0351 36V10.3008H21.4843V31.5H31.9081V36H16.0351Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_13_12552" x="16.0351" y="10.3008" width="17.873" height="27.6992" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="2" dy="2"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_13_12552"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_13_12552" result="shape"/>\n</filter>\n</defs>\n</svg>'},self_rated:{10:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#0095DA"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73319)">\n<path d="M14.6068 35L13.8321 31.0044H8.72117L7.92493 35H3.25513L8.38761 13.5933H14.0581L19.2551 35H14.6068ZM12.9498 26.2798L12.2719 22.7801C12.1141 22.0023 11.9204 20.9962 11.6909 19.7615C11.4685 18.5269 11.3215 17.6423 11.2497 17.1076C11.1852 17.6034 11.0561 18.42 10.8624 19.5574C10.6759 20.6948 10.2562 22.9356 9.60348 26.2798H12.9498Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73319)">\n<path d="M27.7539 35H23.2275V22.6074L23.2715 20.5713L23.3447 18.3447C22.5928 19.0967 22.0703 19.5898 21.7773 19.8242L19.3164 21.8018L17.1338 19.0771L24.0332 13.584H27.7539V35Z" fill="#EEEEEE"/>\n<path d="M44.5547 24.292C44.5547 28.0322 43.9395 30.8008 42.709 32.5977C41.4883 34.3945 39.6035 35.293 37.0547 35.293C34.584 35.293 32.7188 34.3652 31.459 32.5098C30.209 30.6543 29.584 27.915 29.584 24.292C29.584 20.5127 30.1943 17.7295 31.415 15.9424C32.6357 14.1455 34.5156 13.2471 37.0547 13.2471C39.5254 13.2471 41.3906 14.1846 42.6504 16.0596C43.9199 17.9346 44.5547 20.6787 44.5547 24.292ZM34.0811 24.292C34.0811 26.9189 34.3057 28.8037 34.7549 29.9463C35.2139 31.0791 35.9805 31.6455 37.0547 31.6455C38.1094 31.6455 38.8711 31.0693 39.3398 29.917C39.8086 28.7646 40.043 26.8896 40.043 24.292C40.043 21.665 39.8037 19.7803 39.3252 18.6377C38.8564 17.4854 38.0996 16.9092 37.0547 16.9092C35.9902 16.9092 35.2285 17.4854 34.7695 18.6377C34.3105 19.7803 34.0811 21.665 34.0811 24.292Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73319" x="3.25513" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73319"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73319" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73319" x="17.1338" y="13.2471" width="28.4209" height="23.0459" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73319"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73319" result="shape"/>\n</filter>\n</defs>\n</svg>',12:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#FBC115"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73290)">\n<path d="M14.6076 35L13.8329 31.0044H8.7219L7.92566 35H3.25586L8.38834 13.5933H14.0588L19.2559 35H14.6076ZM12.9505 26.2798L12.2727 22.7801C12.1149 22.0023 11.9212 20.9962 11.6916 19.7615C11.4693 18.5269 11.3222 17.6423 11.2505 17.1076C11.1859 17.6034 11.0568 18.42 10.8631 19.5574C10.6766 20.6948 10.257 22.9356 9.60421 26.2798H12.9505Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73290)">\n<path d="M27.7539 35H23.2275V22.6074L23.2715 20.5713L23.3447 18.3447C22.5928 19.0967 22.0703 19.5898 21.7773 19.8242L19.3164 21.8018L17.1338 19.0771L24.0332 13.584H27.7539V35Z" fill="#EEEEEE"/>\n<path d="M44.6719 35H29.7012V31.8506L35.0771 26.416C36.6689 24.7852 37.709 23.6572 38.1973 23.0322C38.6855 22.3975 39.0371 21.8115 39.252 21.2744C39.4668 20.7373 39.5742 20.1807 39.5742 19.6045C39.5742 18.7451 39.335 18.1055 38.8564 17.6855C38.3877 17.2656 37.7578 17.0557 36.9668 17.0557C36.1367 17.0557 35.3311 17.2461 34.5498 17.627C33.7686 18.0078 32.9531 18.5498 32.1035 19.2529L29.6426 16.3379C30.6973 15.4395 31.5713 14.8047 32.2646 14.4336C32.958 14.0625 33.7148 13.7793 34.5352 13.584C35.3555 13.3789 36.2734 13.2764 37.2891 13.2764C38.627 13.2764 39.8086 13.5205 40.834 14.0088C41.8594 14.4971 42.6553 15.1807 43.2217 16.0596C43.7881 16.9385 44.0713 17.9443 44.0713 19.0771C44.0713 20.0635 43.8955 20.9912 43.5439 21.8604C43.2021 22.7197 42.665 23.6035 41.9326 24.5117C41.21 25.4199 39.9307 26.7139 38.0947 28.3936L35.3408 30.9863V31.1914H44.6719V35Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73290" x="3.25586" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73290"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73290" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73290" x="17.1338" y="13.2764" width="28.5381" height="22.7236" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73290"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73290" result="shape"/>\n</filter>\n</defs>\n</svg>',14:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#F58220"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73298)">\n<path d="M14.6076 35L13.8329 31.0044H8.7219L7.92566 35H3.25586L8.38834 13.5933H14.0588L19.2559 35H14.6076ZM12.9505 26.2798L12.2727 22.7801C12.1149 22.0023 11.9212 20.9962 11.6916 19.7615C11.4693 18.5269 11.3222 17.6423 11.2505 17.1076C11.1859 17.6034 11.0568 18.42 10.8631 19.5574C10.6766 20.6948 10.257 22.9356 9.60421 26.2798H12.9505Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73298)">\n<path d="M27.7539 35H23.2275V22.6074L23.2715 20.5713L23.3447 18.3447C22.5928 19.0967 22.0703 19.5898 21.7773 19.8242L19.3164 21.8018L17.1338 19.0771L24.0332 13.584H27.7539V35Z" fill="#EEEEEE"/>\n<path d="M45.1553 30.5615H42.5771V35H38.1533V30.5615H29.0127V27.4121L38.4023 13.584H42.5771V27.0459H45.1553V30.5615ZM38.1533 27.0459V23.4131C38.1533 22.8076 38.1777 21.9287 38.2266 20.7764C38.2754 19.624 38.3145 18.9551 38.3438 18.7695H38.2266C37.8652 19.5703 37.4307 20.3516 36.9229 21.1133L32.9971 27.0459H38.1533Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73298" x="3.25586" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73298"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73298" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73298" x="17.1338" y="13.584" width="29.0215" height="22.416" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73298"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73298" result="shape"/>\n</filter>\n</defs>\n</svg>',16:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#EC1D25"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73305)">\n<path d="M14.6076 35L13.8329 31.0044H8.7219L7.92566 35H3.25586L8.38834 13.5933H14.0588L19.2559 35H14.6076ZM12.9505 26.2798L12.2727 22.7801C12.1149 22.0023 11.9212 20.9962 11.6916 19.7615C11.4693 18.5269 11.3222 17.6423 11.2505 17.1076C11.1859 17.6034 11.0568 18.42 10.8631 19.5574C10.6766 20.6948 10.257 22.9356 9.60421 26.2798H12.9505Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73305)">\n<path d="M27.7539 35H23.2275V22.6074L23.2715 20.5713L23.3447 18.3447C22.5928 19.0967 22.0703 19.5898 21.7773 19.8242L19.3164 21.8018L17.1338 19.0771L24.0332 13.584H27.7539V35Z" fill="#EEEEEE"/>\n<path d="M29.5547 25.9033C29.5547 21.665 30.4482 18.5107 32.2354 16.4404C34.0322 14.3701 36.7178 13.335 40.292 13.335C41.5127 13.335 42.4697 13.4082 43.1631 13.5547V17.1729C42.2939 16.9775 41.4346 16.8799 40.585 16.8799C39.0322 16.8799 37.7627 17.1143 36.7764 17.583C35.7998 18.0518 35.0674 18.7451 34.5791 19.6631C34.0908 20.5811 33.8027 21.8848 33.7148 23.5742H33.9053C34.8721 21.9141 36.4199 21.084 38.5488 21.084C40.4629 21.084 41.9619 21.6846 43.0459 22.8857C44.1299 24.0869 44.6719 25.7471 44.6719 27.8662C44.6719 30.1514 44.0273 31.9629 42.7383 33.3008C41.4492 34.6289 39.6621 35.293 37.377 35.293C35.7949 35.293 34.4131 34.9268 33.2314 34.1943C32.0596 33.4619 31.1514 32.3926 30.5068 30.9863C29.8721 29.5801 29.5547 27.8857 29.5547 25.9033ZM37.2891 31.6748C38.2559 31.6748 38.998 31.3525 39.5156 30.708C40.0332 30.0537 40.292 29.126 40.292 27.9248C40.292 26.8799 40.0479 26.0596 39.5596 25.4639C39.0811 24.8584 38.3535 24.5557 37.377 24.5557C36.459 24.5557 35.6729 24.8535 35.0186 25.4492C34.374 26.0449 34.0518 26.7383 34.0518 27.5293C34.0518 28.6914 34.3545 29.6729 34.96 30.4736C35.5752 31.2744 36.3516 31.6748 37.2891 31.6748Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73305" x="3.25586" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73305"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73305" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73305" x="17.1338" y="13.335" width="28.5381" height="22.958" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73305"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73305" result="shape"/>\n</filter>\n</defs>\n</svg>',18:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="black"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73326)">\n<path d="M14.6076 35L13.8329 31.0044H8.7219L7.92566 35H3.25586L8.38834 13.5933H14.0588L19.2559 35H14.6076ZM12.9505 26.2798L12.2727 22.7801C12.1149 22.0023 11.9212 20.9962 11.6916 19.7615C11.4693 18.5269 11.3222 17.6423 11.2505 17.1076C11.1859 17.6034 11.0568 18.42 10.8631 19.5574C10.6766 20.6948 10.257 22.9356 9.60421 26.2798H12.9505Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73326)">\n<path d="M27.7539 35H23.2275V22.6074L23.2715 20.5713L23.3447 18.3447C22.5928 19.0967 22.0703 19.5898 21.7773 19.8242L19.3164 21.8018L17.1338 19.0771L24.0332 13.584H27.7539V35Z" fill="#EEEEEE"/>\n<path d="M37.084 13.3057C39.1348 13.3057 40.7852 13.7744 42.0352 14.7119C43.2949 15.6396 43.9248 16.8945 43.9248 18.4766C43.9248 19.5703 43.6221 20.5469 43.0166 21.4062C42.4111 22.2559 41.4346 23.0176 40.0869 23.6914C41.6885 24.5508 42.8359 25.4492 43.5293 26.3867C44.2324 27.3145 44.584 28.335 44.584 29.4482C44.584 31.2061 43.8955 32.6221 42.5186 33.6963C41.1416 34.7607 39.3301 35.293 37.084 35.293C34.7402 35.293 32.8994 34.7949 31.5615 33.7988C30.2236 32.8027 29.5547 31.3916 29.5547 29.5654C29.5547 28.3447 29.877 27.2607 30.5215 26.3135C31.1758 25.3662 32.2207 24.5312 33.6562 23.8086C32.4355 23.0371 31.5566 22.2119 31.0195 21.333C30.4824 20.4541 30.2139 19.4922 30.2139 18.4473C30.2139 16.9141 30.8486 15.6738 32.1182 14.7266C33.3877 13.7793 35.043 13.3057 37.084 13.3057ZM33.7441 29.3018C33.7441 30.1416 34.0371 30.7959 34.623 31.2646C35.209 31.7334 36.0098 31.9678 37.0254 31.9678C38.1484 31.9678 38.9883 31.7285 39.5449 31.25C40.1016 30.7617 40.3799 30.1221 40.3799 29.3311C40.3799 28.6768 40.1016 28.0664 39.5449 27.5C38.998 26.9238 38.1045 26.3135 36.8643 25.6689C34.7842 26.626 33.7441 27.8369 33.7441 29.3018ZM37.0547 16.6162C36.2832 16.6162 35.6582 16.8164 35.1797 17.2168C34.7109 17.6074 34.4766 18.1348 34.4766 18.7988C34.4766 19.3848 34.6621 19.9121 35.0332 20.3809C35.4141 20.8398 36.0977 21.3135 37.084 21.8018C38.041 21.3525 38.71 20.8936 39.0908 20.4248C39.4717 19.9561 39.6621 19.4141 39.6621 18.7988C39.6621 18.125 39.418 17.5928 38.9297 17.2021C38.4414 16.8115 37.8164 16.6162 37.0547 16.6162Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73326" x="3.25586" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73326"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73326" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73326" x="17.1338" y="13.3057" width="28.4502" height="22.9873" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73326"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73326" result="shape"/>\n</filter>\n</defs>\n</svg>',L:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="48" height="48" rx="3" fill="#00A651"/>\n<rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n<g filter="url(#filter0_d_179_73312)">\n<path d="M19.3517 35L18.577 31.0044H13.466L12.6698 35H8L13.1325 13.5933H18.803L24 35H19.3517ZM17.6947 26.2798L17.0168 22.7801C16.859 22.0023 16.6653 20.9962 16.4358 19.7615C16.2134 18.5269 16.0664 17.6423 15.9946 17.1076C15.9301 17.6034 15.8009 18.42 15.6073 19.5574C15.4208 20.6948 15.0011 22.9356 14.3484 26.2798H17.6947Z" fill="#EEEEEE"/>\n</g>\n<g filter="url(#filter1_d_179_73312)">\n<path d="M26.2372 35V13.584H30.7783V31.25H39.4648V35H26.2372Z" fill="#EEEEEE"/>\n</g>\n<defs>\n<filter id="filter0_d_179_73312" x="8" y="13.5933" width="17" height="22.4067" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73312"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73312" result="shape"/>\n</filter>\n<filter id="filter1_d_179_73312" x="26.2372" y="13.584" width="14.2275" height="22.416" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dx="1" dy="1"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_179_73312"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_179_73312" result="shape"/>\n</filter>\n</defs>\n</svg>'}},Ss='.clappr-player#wp3-player-0 .media-control--keep-video-info .media-control-panel__upper {\n  opacity: 1 !important;\n  transform: translateY(0) !important; }\n\n.clappr-player#wp3-player-0 .media-control--keep-video-info .video-info {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.w320 .video-info, .clappr-player#wp3-player-0 .media-control.w360 .video-info, .clappr-player#wp3-player-0 .media-control.w480 .video-info {\n  height: 48px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full {\n    pointer-events: auto; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full .drawer-info-icon {\n      cursor: pointer;\n      padding: 0px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-container {\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    right: 0px;\n    bottom: 0px;\n    z-index: 998;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, 0.6); }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-header {\n    height: 36px;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__data, .clappr-player#wp3-player-0 .media-control.w360 .video-info__data, .clappr-player#wp3-player-0 .media-control.w480 .video-info__data {\n    display: flex;\n    flex-flow: column;\n    flex-grow: 1;\n    justify-content: center;\n    margin: 0;\n    padding: 0 12px 12px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__close, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close {\n    background-color: transparent;\n    border: 0;\n    box-sizing: content-box;\n    padding: 12px;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    position: absolute;\n    right: 0;\n    width: 24px;\n    height: 24px;\n    outline: none;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close svg {\n      width: 100%;\n      height: 100%; }\n\n.clappr-player#wp3-player-0 .video-info {\n  box-sizing: border-box;\n  color: white;\n  pointer-events: none;\n  text-shadow: none;\n  z-index: 996; }\n  .clappr-player#wp3-player-0 .video-info__data {\n    height: 24px;\n    text-align: left; }\n    .clappr-player#wp3-player-0 .video-info__data-title {\n      margin-bottom: 5px;\n      font-size: 18px;\n      line-height: 24px; }\n    .clappr-player#wp3-player-0 .video-info__data-subtitle {\n      display: flex;\n      flex-direction: row;\n      align-items: center; }\n      .clappr-player#wp3-player-0 .video-info__data-subtitle-rating {\n        display: flex;\n        margin-right: 8px; }\n        .clappr-player#wp3-player-0 .video-info__data-subtitle-rating svg {\n          height: 16px;\n          width: 16px; }\n        .clappr-player#wp3-player-0 .video-info__data-subtitle-rating:empty {\n          margin-right: 0px; }\n      .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n        font-size: 14px;\n        line-height: 18px; }\n    .clappr-player#wp3-player-0 .video-info__data-title, .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-family: "opensans-regular";\n      letter-spacing: 0;\n      color: #ffffff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .video-info__status {\n    text-align: left;\n    font-family: "opensans-regular";\n    font-size: 16px;\n    line-height: 16px; }\n  .clappr-player#wp3-player-0 .video-info__data, .clappr-player#wp3-player-0 .video-info__status {\n    transition: all ease .2s; }\n  .clappr-player#wp3-player-0 .video-info--chromecast {\n    position: absolute;\n    top: 0;\n    background-color: transparent;\n    transition: opacity ease-in .2s; }\n    .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data {\n      margin: 5vw 0 0 5vw; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-title {\n        font-size: 3.4vh;\n        line-height: 4.4vh;\n        margin-bottom: 8px; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-subtitle-program {\n        font-size: 2.4vh;\n        line-height: 2.6vh; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__data {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__status {\n    font-size: 14px;\n    line-height: normal;\n    color: #ffff93; }\n    .clappr-player#wp3-player-0 .video-info--ad .video-info__status:after {\n      content: "Publicidade"; }\n  .clappr-player#wp3-player-0 .video-info--hidden {\n    display: none; }\n';or(Ss);function Cs(e,t){if(e)return ws[t][e]}var Rs=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container&&this.container.playback&&this.stopListening(this.container.playback),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this.initialize),this.listenTo(this.container,Fn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Fn.DFP_AD_STARTED,this.updateState),this.listenTo(this.container,Fn.WM_MASTERTOPIP,(function(){return e.$el.addClass("video-info--hidden")})),this.listenTo(this.container.playback,be.PLAYBACK_PLAY_INTENT,this.updateState),this.container.options.chromeless&&this.disable())}},{key:"initialize",value:function(e){this.playlist=e,this.render()}},{key:"onPlayerResize",value:function(e){this.playerSize=e,this.render()}},{key:"updateState",value:function(){(this.currentState!==this.renderedState||V.isMobile)&&(this.$el.removeClass(this.allStates),this.$el.addClass("video-info--".concat(this.currentState)),this.displayInlineMode||this.displayFullScreenMode||"ad"===this.container.getPlaybackType()?this.$el.removeClass("video-info--hidden"):this.$el.addClass("video-info--hidden"),this.renderedState=this.currentState)}},{key:"render",value:function(){if(this.container){V.isChromecast&&(this.$el.remove(),this.container.$el.append(this.el)),this.updateState();var e=Pi(Pi({},this.videoInfoHTMLData),{},{modalMode:!1});return!this.currentState.includes("video-info--ad")&&this.$el.html(this.shouldUseInfoButton?this.buttonTemplate():this.template(e)),this.$el.append(Bn.getStyleFrom(Ss,{playerId:this.options.playerId})[0]),this.shouldUseInfoButton&&this.$el.find(".drawer-info-icon").html('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Informaes da mdia</span>'),this}}},{key:"showModalvideoInfo",value:function(e){var t=this,n=Pi(Pi({},this.videoInfoHTMLData),{},{modalMode:!0});e&&e.stopPropagation(),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_SHOW,this.template(n),{hidePanels:!0}),this.mediaControl.$el.addClass("media-control--keep-video-info");var i=this.modal.find(".video-info__mobile-container"),r=this.modal.find(".video-info__close");i&&i.on("click",(function(e){e&&e.stopPropagation(),t.hideModal()})),r&&r.append(Do),this.mediaControl.setKeepVisible()}},{key:"hideModal",value:function(){this.modal&&this.modal.find(".video-info__mobile-container").off("click"),this.mediaControl.trigger(Fn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--keep-video-info")}},{key:"name",get:function(){return"video_info"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"videoTitle",get:function(){return this.options.videoInfo&&this.options.videoInfo.title||this.playlist&&this.playlist.title}},{key:"videoRating",get:function(){return this.playlist&&this.playlist.contentRating}},{key:"videoRatingType",get:function(){return this.playlist&&this.playlist.isSelfRated?"self_rated":"default"}},{key:"videoProgram",get:function(){return this.options.videoInfo&&this.options.videoInfo.secondaryText||this.playlist&&this.playlist.program}},{key:"videoInfoHTMLData",get:function(){return{title:this.videoTitle,rating:Cs(this.videoRating,this.videoRatingType),program:this.videoProgram}}},{key:"template",get:function(){return xe('<% if (modalMode === true) { %>\n  <div class="video-info__mobile-container">\n    <div class="video-info__mobile-header">\n      <button class="video-info__close"></button>\n    </div>\n<% } %>\n  <div class="video-info__data">\n    <div class="video-info__data-title"><%= title %></div>\n    <div class="video-info__data-subtitle">\n      <div class="video-info__data-subtitle-rating"><%= rating %></div>\n      <div class="video-info__data-subtitle-program"><%= program %></div>\n    </div>\n  </div>\n  <div class="video-info__status"></div>\n<% if (modalMode === true) { %>\n</div>\n<% } %>\n')}},{key:"buttonTemplate",get:function(){return xe('<button class="drawer-info-icon media-control-button" data-video-info></button>\n')}},{key:"shouldUseInfoButton",get:function(){return this.playerSize&&this.playerSize.width<=480}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"allStates",get:function(){return"video-info--chromecast video-info--full video-info--inline video-info--ad video-info--live video-info--dvr"}},{key:"displayInlineMode",get:function(){return this.options.videoInfo.inlineEnabled&&this.$el.hasClass("video-info--inline")}},{key:"displayFullScreenMode",get:function(){return this.options.videoInfo.fullscreenEnabled&&this.$el.hasClass("video-info--full")}},{key:"currentState",get:function(){if(!this.container)return null;var e=V.isChromecast?"chromecast":Un.Fullscreen.isFullscreen()?"full":"inline";this.status=[];var t=this.container.getPlaybackType();return"live"===t&&this.status.push("video-info--live"),this.container.isDvrInUse()&&this.status.push("video-info--dvr"),"ad"===t&&this.status.push("video-info--ad"),"".concat(e," ").concat(this.status.join(" "))}},{key:"events",get:function(){return{"click .drawer-info-icon[data-video-info]":"showModalvideoInfo"}}},{key:"attributes",get:function(){return{class:"video-info","data-video-info":""}}}]),n}(hr),Is=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).src=e.src,i.currentMedia=e.currentMedia,i.mediaControl=e.mediaControl,i.currentMedia.addUpdateListener((function(){return i.onMediaStatusUpdate()})),i.settings=e.settings,i}return Ii(n,[{key:"name",get:function(){return"chromecast_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<div class="chromecast-playback-background"></div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-playback"}}},{key:"isReady",get:function(){return!0}}]),Ii(n,[{key:"render",value:function(){var e=this.template();this.$el.html(e),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}},{key:"configure",value:function(e){var t=this;fe.debug(this.name,"configure",e),Fi(Li(n.prototype),"configure",this).call(this,e),e.currentMedia&&(this.currentMedia=e.currentMedia,this.previousMediaState=void 0,this.currentMedia.addUpdateListener((function(){return t.onMediaStatusUpdate()})),clearTimeout(this.idleTimeout),this.onMediaStatusUpdate())}},{key:"play",value:function(){this.currentMedia.play()}},{key:"pause",value:function(){this.stopTimer(),this.currentMedia.pause()}},{key:"stop",value:function(){this.stopTimer(),this.currentMedia.stop()}},{key:"volume",value:function(e){var t=this,n=e/100,i=new chrome.cast.Volume(n,!1),r=new chrome.cast.media.VolumeRequest(i);this.currentMedia.setVolume(r,(function(){return fe.info(t.name,"volume set")}),(function(e){return fe.warn(t.name,e)}))}},{key:"seek",value:function(e){var t=this;this.stopTimer();var n=new chrome.cast.media.SeekRequest;n.currentTime=e,this.currentMedia.seek(n,(function(){return t.startTimer()}),(function(){return fe.warn(t.name,"seek failed")}))}},{key:"getVolume",value:function(){}},{key:"seekPercentage",value:function(e){if(e>=0&&e<=100){var t=this.getDuration();this.seek(e*t/100)}}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.updateMediaControl()}),100)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getDuration",value:function(){return this.currentMedia.media.duration}},{key:"isPlaying",value:function(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}},{key:"getPlaybackType",value:function(){return"LIVE"==this.currentMedia.streamType?Be.LIVE:Be.VOD}},{key:"onMediaStatusUpdate",value:function(){var e=this,t=this.currentMedia.loadingItemId||this.currentMedia.preloadedItemId;fe.debug(this.name,"onMediaStatusUpdate",this.currentMedia.playerState,t),this.isPlaying()&&!this.timer&&this.startTimer(),this.updateBufferState(),this.idleTimeout&&"IDLE"!==this.currentMedia.playerState&&clearTimeout(this.idleTimeout),"PLAYING"===this.currentMedia.playerState?(this.trigger(be.PLAYBACK_PLAY,this.name),this.trigger(be.PLAYBACK_MEDIACONTROL_ENABLE,this.name)):t||"IDLE"!==this.currentMedia.playerState||"PLAYING"!==this.previousMediaState||"FINISHED"!==this.currentMedia.idleReason?"IDLE"===this.currentMedia.playerState&&"FINISHED"===this.currentMedia.idleReason&&this.trigger(be.PLAYBACK_MEDIACONTROL_DISABLE,this.name):this.idleTimeout=setTimeout((function(){return e.trigger(be.PLAYBACK_ENDED,e.name)}),1e3),this.previousMediaState=this.currentMedia.playerState}},{key:"updateBufferState",value:function(){"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(be.PLAYBACK_BUFFERING,this.name)):this.isBuffering&&(this.isBuffering=!1,this.trigger(be.PLAYBACK_BUFFERFULL,this.name))}},{key:"updateMediaControl",value:function(){if(this.currentMedia.media){var e=this.currentMedia.getEstimatedTime(),t=this.currentMedia.media.duration;this.trigger(be.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),n}(Be),xs=".clappr-player#wp3-player-0 svg #cast, .clappr-player#wp3-player-0 svg #cast-on, .clappr-player#wp3-player-0 svg #Path {\n  fill: #fff; }\n\n.clappr-player#wp3-player-0 .chromecast-playback {\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .chromecast-playback .chromecast-playback-background {\n    background-size: cover; }\n\n.clappr-player#wp3-player-0 .chromecast-playback-background,\n.clappr-player#wp3-player-0 .chromecast-playback-overlay {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator.media-control-element {\n  padding-bottom: 0;\n  padding-top: 0; }\n";or(xs);var Ds="urn:x-cast:wm.player",Ps=0,Os=1,Ls={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ogv:"video/ogg","3gp":"video/3gpp"},Ms=Un.getCookie,Ns=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).contentType="application/video-id",!V.isiOS&&V.isChrome&&i.options.appId?(i.appId=i.options.appId,i.deviceState=Ps,i.embedScript()):i.disable(),i.subtitlesAvailable=[],i.audiosAvailable=[],i}return Ii(n,[{key:"version",get:function(){return VERSION}},{key:"name",get:function(){return"chromecast"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"attributes",get:function(){return{class:"chromecast-button media-control-button","data-chromecast":""}}},{key:"events",get:function(){return{click:"click"}}},{key:"options",get:function(){return this.core.options.chromecast||(this.core.options.chromecast={})}},{key:"hasCastLib",get:function(){return window.chrome&&window.chrome.cast}},{key:"isCastAvailable",get:function(){return this.hasCastLib&&window.chrome.cast.isAvailable}}],[{key:"Movie",get:function(){return"movie"}},{key:"TvShow",get:function(){return"tv_show"}},{key:"Generic",get:function(){return"none"}},{key:"version",get:function(){return VERSION}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,be.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,be.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,be.CONTAINER_ENDED,this.sessionStopped),this.listenTo(this.container,be.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container,Fn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Fn.WM_AUDIO_CHANGED,this.onAudioChanged))}},{key:"onMetadataLoaded",value:function(e){this.providerId=e.providerId}},{key:"onVolumeChanged",value:function(e){var t=this;if(this.session){var n=e/100;this.session.setReceiverVolumeLevel(n,(function(){return fe.info(t.name,"volume set")}),(function(e){return fe.error(t.name,e)}))}}},{key:"onSubtitleChanged",value:function(e){if(this.session){var t={action:"SUBTITLE_CHANGED",payload:this.subtitlesAvailable.find((function(t){return e.keys.includes(t.language)||t.role===e.role}))};this.sendMessage(t)}}},{key:"onAudioChanged",value:function(e){if(this.session){var t={action:"AUDIO_CHANGED",payload:this.audiosAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(t)}}},{key:"enable",value:function(){Fi(Li(n.prototype),"enable",this).call(this),this.render(),this.embedScript()}},{key:"embedScript",value:function(){var e=this;if(this.isCastAvailable)ir((function(){return e.bootstrapCastApi()}));else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=function(){e.core.trigger(Fn.CHROMECAST_SCRIPT_LOADED),e.bootstrapCastApi()},t.onerror=function(){e.core.trigger(Fn.CHROMECAST_SCRIPT_ERROR,{code:"chromecast-script-error",description:"Chromecast script error.",level:"INFO"})},document.body.appendChild(t)}}},{key:"bootstrapCastApi",value:function(){var e=this;this.isCastAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(t,n){t?(e.core.trigger(Fn.CHROMECAST_API_READY),e.initializeCastApi()):(fe.warn(e.name,"GCastApi error",n),e.core.trigger(Fn.CHROMECAST_API_ERROR,{code:"chromecast-api-error",description:n,level:"INFO"}),e.disable())}}},{key:"initializeCastApi",value:function(){var e=this,t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(n,(function(t){return e.sessionListener(t)}),(function(t){return e.receiverListener(t)}),t);chrome.cast.initialize(i,(function(){e.core.trigger(Fn.CHROMECAST_INITIALIZE_SUCCESS),fe.debug(e.name,"init success")}),(function(){e.core.trigger(Fn.CHROMECAST_INITIALIZE_ERROR,{code:"chromecast-init-error",description:"Chromecast initialize error.",level:"INFO"}),fe.warn(e.name,"init error")}))}},{key:"sessionListener",value:function(e){fe.debug(this.name,"new session id:"+e.sessionId),this.newSession(e)}},{key:"sessionUpdateListener",value:function(){this.session&&(fe.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}},{key:"mediaListener",value:function(){if(fe.debug(this.name,"mediaListener",this.session.media),this.session.media){var e=this.session.media[this.session.media.length-1];this.mediaSession=e,this.playbackProxy&&this.playbackProxy.configure({currentMedia:e})}}},{key:"receiverListener",value:function(e){e===chrome.cast.ReceiverAvailability.AVAILABLE?(this.core.trigger(Fn.CHROMECAST_AVAILABLE),fe.debug(this.name,"receiver found"),this.show()):(this.core.trigger(Fn.CHROMECAST_UNAVAILABLE),fe.debug(this.name,"receiver list empty"),this.hide())}},{key:"launchSuccess",value:function(e){clearInterval(this.connectAnimInterval),this.core.trigger(Fn.CHROMECAST_LAUNCH_SUCCESS),fe.debug(this.name,"launch success - session: "+e.sessionId),this.newSession(e)}},{key:"launchError",value:function(e){var t=this.mediaSession&&this.mediaSession.playerState!==chrome.cast.media.PlayerState.IDLE,n=this.mediaSession&&this.mediaSession.playerState===chrome.cast.media.PlayerState.PLAYING,i=e.code===chrome.cast.ErrorCode.CANCEL;this.core.trigger(Fn.CHROMECAST_LAUNCH_ERROR,e),t&&i||(fe.debug(this.name,"error on launch",e),this.renderDisconnected(),clearInterval(this.connectAnimInterval),(this.isPlayingBeforeConnect||n)&&(this.container.play(),this.container.seek(this.currentTime)))}},{key:"loadMediaSuccess",value:function(e,t){this.core.trigger(Fn.CHROMECAST_MEDIA_LOAD_SUCCESS),fe.debug(this.name,"new media session",t,"(".concat(e,")")),this.originalPlayback=this.core.getCurrentPlayback();var n=Object.assign({},this.originalPlayback.options,{currentMedia:t,mediaControl:this.core.mediaControl,poster:this.container.options.poster,settings:this.originalPlayback.settings});this.src=this.originalPlayback.src,this.playbackProxy=new Is(n),this.playbackProxy.render(),this.mediaSession=t,this.originalPlayback.$el.hide();var i=this.core.getCurrentContainer();i.$el.append(this.playbackProxy.el),i.stopListening(),i.playback=this.playbackProxy,i.bindEvents(),i.settingsUpdate()}},{key:"loadMediaError",value:function(e){this.core.trigger(Fn.CHROMECAST_MEDIA_LOAD_ERROR,e),fe.warn(this.name,"media error",e)}},{key:"newSession",value:function(e){var t=this;this.session=e,this.deviceState=Os,this.renderConnected(),this.core.trigger(Fn.DFP_DISABLE),e.addUpdateListener((function(){return t.sessionUpdateListener()})),e.addMediaListener((function(){return t.mediaListener()})),e.addMessageListener(Ds,(function(e,n){return t.wmpMessageListener(e,n)})),this.containerPlay()}},{key:"sessionStopped",value:function(){this.renderDisconnected();var e=this.core.getCurrentContainer(),t=void 0;this.mediaSession&&(t=this.mediaSession.playerState,this.mediaSession=null,this.playbackProxy.$el&&this.playbackProxy.$el.remove(),this.originalPlayback.$el&&this.originalPlayback.$el.show(),e.stopListening(),e.playback=this.originalPlayback,e.bindEvents(),e.settingsUpdate(),this.core.trigger(Fn.DFP_ENABLE)),this.playbackProxy&&((this.playbackProxy.isPlaying()||"PLAYING"===t)&&(e.play(),e.seek(this.currentTime)),this.playbackProxy.stop(),this.playbackProxy=null)}},{key:"sendMessage",value:function(e){var t=this;this.session.sendMessage(Ds,e,(function(e){return t.onMessageSuccess(e)}),(function(e){return t.onMessageFailure(e)}))}},{key:"onMessageSuccess",value:function(e){fe.info(this.name,"message bus: send message success",e)}},{key:"onMessageFailure",value:function(e){fe.error(this.name,"message bus: send message error",e)}},{key:"loadMedia",value:function(){var e=this;if(!this.playback||this.playback.isReady){this.container.pause();var t=this.container.options.src;fe.debug(this.name,"loading... "+t);var n=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime="ad"==this.core.getPlaybackType()?0:this.currentTime||0,this.session.loadMedia(i,(function(t){return e.loadMediaSuccess("loadMedia",t)}),(function(t){return e.loadMediaError(t)}))}else this.listenToOnce(this.playback,be.PLAYBACK_READY,this.loadMedia)}},{key:"createMediaInfo",value:function(e){var t=n.mimeTypeFor(e),i=this.core.options,r=i.dfp,a=r.watchedAds,o=this.getSelectedSettings();"ad"===this.core.getPlaybackType()&&(a+=1);var s={token:i.token||this.getTokenFromCookie(),adUnit:r.adUnit,adCustomData:r.adCustomData,adAccountId:r.adAccountId,adCmsId:r.adCmsId,daiCustomData:i.daiCustomData,adPublisherProvidedID:i.adPublisherProvidedID,watchedAds:a,ga:i.ga,defaultSubtitle:o.subtitle,defaultAudio:o.audio,videoInfo:i.videoInfo,enableBingeWatch:this.options.enableBingeWatch||!1,upa:i.upa,globoId:i.globoId||void 0,horizon:i.horizon||{}},l=new chrome.cast.media.MediaInfo(e);return l.contentType=this.contentType||t,l.customData=s,l.metadata=this.createMediaMetadata(),l}},{key:"getSelectedSettings",value:function(){var e=this.core.getPlugin("settings"),t=e.getSelectedSettings()||{},n=t.audio,i=t.subtitle;return Pi(Pi({},e.getDefaultSettings()||{}),{},{audio:n,subtitle:i})}},{key:"getTokenFromCookie",value:function(){var e=this.providerId?"WMPTOKEN_".concat(this.providerId):"GLBID";return Ms(e)}},{key:"createMediaMetadata",value:function(){this.options.media||(this.options.media={});var e=this.options.media.type,t=this.createCastMediaMetadata(e);return t.title=this.options.media.title,t.subtitle=this.options.media.subtitle,t.releaseDate=this.options.media.releaseDate,e===n.TvShow?(t.episode=this.options.media.episode,t.originalAirdate=this.options.media.originalAirdate,t.season=this.options.media.season,t.seriesTitle=this.options.media.seriesTitle):e===n.Movie&&(t.studio=this.options.media.studio),this.options.media.images&&(t.images=this.options.media.images.map((function(e){return new chrome.cast.Image(e)}))),!t.images&&this.core.options.poster&&(t.images=[new chrome.cast.Image(this.core.options.poster)]),t}},{key:"createCastMediaMetadata",value:function(e){switch(e){case n.Movie:return new chrome.cast.media.MovieMediaMetadata;case n.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"click",value:function(){var e=this;if(this.core.trigger(Fn.CHROMECAST_LAUNCH_REQUEST),chrome.cast.requestSession((function(t){return e.launchSuccess(t)}),(function(t){return e.launchError(t)})),!this.session){this.isPlayingBeforeConnect=this.container.isPlaying(),this.container.pause();var t=0;clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval((function(){e.renderConnecting(t),t=(t+1)%3}),600)}}},{key:"containerChanged",value:function(){this.stopListening(),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindEvents(),this.currentTime=0,this.session&&(this.originalPlayback=this.playback)&&this.sessionStopped()}},{key:"containerTimeUpdate",value:function(e){this.currentTime=e.current}},{key:"containerPlay",value:function(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerStatus||(fe.debug(this.name,"load media"),this.currentTime=this.currentTime||0,this.loadMedia())}},{key:"wmpMessageListener",value:function(e,t){if(this.session){var n=JSON.parse(t);this.handleAdBreak(n),this.handleMediaTracks(n)}}},{key:"handleAdBreak",value:function(e){"adBreakStarted"===e.name?(fe.debug(this.name,"ad break started"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!1,this.playbackProxy.trigger(be.PLAYBACK_SETTINGSUPDATE))):"adBreakEnded"===e.name&&(fe.debug(this.name,"ad break ended"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!0,this.playbackProxy.trigger(be.PLAYBACK_SETTINGSUPDATE)))}},{key:"handleMediaTracks",value:function(e){switch(e.action){case"SUBTITLE_AVAILABLE":this.subtitlesAvailable=e.payload;break;case"AUDIO_AVAILABLE":this.audiosAvailable=e.payload}}},{key:"createCachedElements",value:function(){this.$mediaControl=this.mediaControl&&this.mediaControl.$el,this.$settingsButton=this.$mediaControl.find(".media-control-button[data-settings]")}},{key:"renderOverlay",value:function(){if(this.removeOverlay(),this.createCachedElements(),this.session){var e=this.session&&this.session.receiver&&this.session.receiver.friendlyName;this.core.trigger(Fn.CHROMECAST_MEDIA_WATCHING,e)}}},{key:"renderConnecting",value:function(e){var t=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast0_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-240.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast1_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-272.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast2_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-304.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>'];this.$el.html(t[e]),this.container&&this.container.$el.addClass("cast-connecting"),this.$mediaControl.addClass("media-control-disabled media-control--no-background"),this.mediaControl.setKeepVisible(),this.renderStyle()}},{key:"removeOverlay",value:function(){this.core.trigger(Fn.CHROMECAST_MEDIA_STOP_WATCHING)}},{key:"renderConnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on-a"/>\n        <path id="cast-on-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-on-b" fill="#fff">\n            <use xlink:href="#cast-on-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-on-a"/>\n        <g mask="url(#cast-on-b)">\n            <use fill="#FFF" xlink:href="#cast-on-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Parar de espelhar</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.setKeepVisible(),this.container.$el.removeClass("cast-connecting"),this.container.$el.addClass("cast-enabled"),this.renderStyle(),this.renderOverlay()}},{key:"renderDisconnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="cast-off-a"/>\n        <path id="cast-off-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-off-b" fill="#fff">\n            <use xlink:href="#cast-off-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-off-a"/>\n        <g mask="url(#cast-off-b)">\n            <use fill="#FFF" xlink:href="#cast-off-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhar em outro dispositivo</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.resetKeepVisible(),this.container&&this.container.$el.removeClass("cast-enabled cast-connecting"),this.$mediaControl.removeClass("media-control--no-background"),this.renderStyle(),this.removeOverlay()}},{key:"renderStyle",value:function(){var e=Bn.getStyleFrom(xs,{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"render",value:function(){return this.createCachedElements(),this.session?this.renderConnected():this.renderDisconnected(),this.appendToMediaControl(),this}},{key:"appendToMediaControl",value:function(){var e=this.$mediaControl&&this.$mediaControl.find(".media-control-button[data-fullscreen]");e.length>0?U(this.el).insertBefore(e):this.$mediaControl.find(".media-control-center-panel").append(this.el)}}],[{key:"mimeTypeFor",value:function(e){var t=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return Ls[t]?Ls[t]:e.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}]),n}(hr),Us='.clappr-player#wp3-player-0 .thumb-preview-modal--visible .chromecast-sender-indicator {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay {\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n  pointer-events: none;\n  flex-direction: row;\n  align-items: center; }\n  .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status {\n    position: relative;\n    top: -16px; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-watching,\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      color: #fff; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-weight: bold; }\n\n.clappr-player#wp3-player-0 .media-control-panel__between .chromecast-playback-overlay .chromecast-status {\n  top: -36px; }\n';or(Us);var Bs=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).$el.hide(),i}return Ii(n,[{key:"name",get:function(){return"chromecast_sender_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return V.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return"center"}},{key:"overlayTemplate",get:function(){return xe('<div class="chromecast-playback-overlay">\n  <div class="chromecast-status">\n    <span class="label-watching">Assistindo em</span>\n    <span class="label-device"></span>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-sender-indicator"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,Fn.CHROMECAST_MEDIA_WATCHING,this.renderTemplate),this.listenTo(this.core,Fn.CHROMECAST_MEDIA_STOP_WATCHING,this.hideRender)}},{key:"hideRender",value:function(){this.$el.empty(),this.$el.hide()}},{key:"renderStyle",value:function(){var e=Bn.getStyleFrom(Us,{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"renderTemplate",value:function(e){this.hideRender(),this.renderStyle(),this.$el.append(this.overlayTemplate()),this.$el.show(),e&&this.$el.find(".label-device").html(e)}}]),n}(hr),Fs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector">\r\n\t<path d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921c-0.722,0-1.351,0.367-1.707,0.916l0,0\r\n\t\tc-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999c0,1.07,0.898,1.939,2.015,1.939\r\n\t\tc0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004c1.113,0,2.016-0.869,2.016-1.939\r\n\t\tC45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Vs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_">\r\n\t<path d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136c-1.004-0.994-1.004-2.599,0-3.589\r\n\t\tc1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g>\r\n\t\t<path d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Hs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903c0,1.795,1.141,3.498,2.969,3.498h26.474\r\n\t\tc1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z M23.446,35.267\r\n\t\tc-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',js='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.7px" height="45.8px" viewBox="0 0 45.7 45.8" enable-background="new 0 0 45.7 45.8" xml:space="preserve">\r\n<g id="Layer_1_1_" display="none">\r\n\t<g id="vector" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M45.3,38.3L45.3,38.3L24.7,5.2l0,0c-0.4-0.6-1-0.9-1.7-0.9c-0.7,0-1.4,0.4-1.7,0.9l0,0\r\n\t\t\tC16,13.6,0.6,38.3,0.6,38.3v0c-0.2,0.3-0.3,0.6-0.3,1c0,1.1,0.9,1.9,2,1.9c0,0,0.1,0,0.1,0l0,0h41.1v0c0,0,0,0,0,0\r\n\t\t\tc1.1,0,2-0.9,2-1.9C45.6,38.9,45.5,38.6,45.3,38.3z M24.2,13.7c1.5,0.5,2.4,1.9,2.2,3.6c-0.2,1.7-0.6,3.4-0.8,5.1\r\n\t\t\tc-0.3,2-0.6,4.1-1,6.2c-1.1,0-2.1,0-3.2,0c-0.3-2.2-0.7-4.3-1-6.4c-0.2-1.4-0.5-2.8-0.8-4.3C19.1,15,21.4,12.8,24.2,13.7z\r\n\t\t\t M23,37.2c-1.9,0-3.5-1.5-3.4-3.3c0-0.7,0.3-1.4,0.7-1.9c0.6-0.8,1.7-1.3,2.8-1.3c1.9,0,3.5,1.5,3.4,3.3\r\n\t\t\tC26.4,35.7,24.9,37.2,23,37.2z"/>\r\n\t</g>\r\n\t<g id="vector_2_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.9,44.7c-1,1-2.7,1-3.7,0L1,4.5c-1-1-1-2.7,0-3.7c1-1,2.7-1,3.7,0L44.9,41C45.9,42,45.9,43.7,44.9,44.7\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M24.3,6.4c0.8,0,1.6,0.4,1.6,1.2c0,1.5,0,3,0,6c1.2,0,1.6,0,4.6,0c0-3,0-5.6,0-7.5c0-2.5-1.5-3.3-3.9-3.3\r\n\t\t\t\tc-4.1,0-8.5,0-12.6,0l3.6,3.6C19.8,6.4,22,6.4,24.3,6.4z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M30.4,15.5C30.4,15.5,30.4,15.5,30.4,15.5c0,0,0.6,0,1.4,0c0.8,0,0.8,0.3,0.8,1.1c0,1.7-0.1,3.3-0.1,5\r\n\t\t\t\tl3.6,3.6c0-3.3,0-6.7,0-10c0-2.5-0.7-3.3-3.1-3.3c-1.3,0-2.6,0-3.5,0l0,0c-1.4,0-2.7,0-4.1,0c-0.7,0-1.6,0-2.6,0.1l3.7,3.5\r\n\t\t\t\tC27.8,15.4,28.4,15.5,30.4,15.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M29.1,37.3c-0.9,0-1.8,0-2.7,0c-1.6,0-2.9,0-4.6,0c-1.7,0-1.7-0.8-1.7-0.8c0-5,0.2-4.5,0.2-6.6l-3.9-4.7\r\n\t\t\t\tc0,1.2,0.1,2.1,0.1,3.3c-0.8,0-1.8,0.1-2.3,0.1c-0.8,0-1-0.6-1-1.4c0-1.9,0-3.9,0-5.8L9.7,18c0,0.5,0,0.8,0,0.8\r\n\t\t\t\tc0,3.8,0,7.8,0,11.9c0,2.5,0.5,3.1,3,3.1c0.9,0,2.8-0.1,3.9-0.1c0.1,2.6,0.1,4.7,0.1,5.9c0,2.2,0.6,3,2.4,3.2c0.3,0,0.5,0,0.9,0\r\n\t\t\t\tc4.3,0,8.7,0,13,0c0.5,0,1-0.1,1.4-0.2L29.1,37.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="vector_4_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M40.3,3.6H8.4c-2.3,0-5-0.3-5,2.1v30.2c0,2.4,2.7,6.7,5,6.7h31.9c2.3,0,1.1-4.4,1.1-6.7V5.7\r\n\t\t\tC41.4,3.3,42.6,3.6,40.3,3.6z M32.4,12.6c0,0,0.7,0.1,0.4,0.1c-1.4,0.2-1.9,0.7-2.9,1.8c-0.9,1-1.5,5.1-1.5,5.1c1.3,0,3,0,3,0\r\n\t\t\ts0,1.9,0,3.4c0,0.3,0.5,0.3,0.2,0.3c-1.9,0-3.5,0-5.3,0c-0.2,0-2,4.2-3.3,6c-1.6,2.3-3.8,3.7-6.5,4.3c-1,0.2-1.9,0.3-2.9,0.3\r\n\t\t\tc-0.2,0-0.2,0-0.2-0.2c0-1.6,0-3.1,0-4.7c0-0.2-0.6-0.3-0.3-0.3c-0.1,0-0.8,0-0.8,0c0,0,0,0,0,0.1c0,0,0.8,0,1,0\r\n\t\t\tc1.6-0.1,3.3-0.7,4.4-1.8c0.4-0.4,1.8-2.3,2.1-2.8c0.2-0.3,1.6-3.4,1.9-4.1c0.3-0.8,0.6-1.6,0.9-2.4c0.1-0.3,0.8-1.8,0.9-2\r\n\t\t\tc0.4-0.8,0.8-1.5,1.2-2.3c0.2-0.4,0.5-0.8,0.8-1.2c1.6-2.2,3.4-3.7,5.9-4.4c0.9-0.2,0.8-0.6,0.8-0.6C32.4,10.5,32.4,11,32.4,12.6z\r\n\t\t\t"/>\r\n\t</g>\r\n\t<g id="vector_5_" display="inline">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path fill="#CCCBCB" d="M23,5.2c-6.9,0-12.5,4.2-12.5,13.3v11.2c0,5.5,4.3,8.7,9.3,9.7c-2.8-1.6-5-5.1-5-10.2v-7.4\r\n\t\t\t\t\tc0-6.8,3.7-12.2,8.2-12.2c4.5,0,8.2,5.5,8.2,12.2v7.4c0,5.1-1.7,8.4-3.9,10c4.5-1.2,8.2-4.3,8.2-9.4V18.5\r\n\t\t\t\t\tC35.4,9.3,29.8,5.2,23,5.2z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path fill="#CCCBCB" d="M36.6,14.6H10.1c-1.8,0-3-0.7-3,1.1v11.9c0,1.8,1.1,3.5,3,3.5h26.5c1.8,0,2.2-1.7,2.2-3.5V15.7\r\n\t\t\tC38.8,13.9,38.4,14.6,36.6,14.6z M23.4,26.3c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C27.5,24.5,25.7,26.3,23.4,26.3z"/>\r\n\t</g>\r\n\t<g id="vector_3_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M34.1,35.6c-0.3,0-0.6,0-0.9,0c-0.3-2.5,0.4-5-0.6-7.4c-1-2.3-2.6-4.1-4.3-5.8c1.7-1.7,3.3-3.4,4.3-5.7\r\n\t\t\tc1-2.3,0.4-4.8,0.7-7.3c0.3,0,0.6,0,0.9,0c0.8-0.1,1.3-0.6,1.4-1.4c0-0.8-0.5-1.3-1.4-1.3c-0.1,0-22.1,0-22.3,0\r\n\t\t\tc-0.8,0.1-1.2,0.6-1.2,1.4c0,0.8,0.5,1.3,1.3,1.4c0.4,0,0.8,0,1.3,0c0,1.4,0,2.7,0,4.1c0,1.9,0.5,3.6,1.5,5.1c1,1.4,2.1,2.6,3.2,4\r\n\t\t\tc-1.6,1.6-3.2,3.4-4.1,5.6c-1,2.3-0.3,4.8-0.6,7.3c-0.5,0-0.9-0.1-1.4,0c-0.7,0.1-1.1,0.6-1.1,1.3c0,0.8,0.4,1.6,1.1,1.8\r\n\t\t\tc0.2,0,22.4,0,22.5,0c0.8-0.1,1.3-0.8,1.3-1.6C35.4,36.4,34.9,35.7,34.1,35.6z M17,10.4c4,0,7.9,0,11.9,0c0.2,0,0.1,3.7-0.5,4.5\r\n\t\t\tc-1.5,2.2-3.5,4.4-5.5,6.2c-2-1.7-3.9-4.2-5.3-6.4C16.9,13.8,16.8,10.4,17,10.4z M28.9,34.5c-4,0-7.9,0-11.9,0\r\n\t\t\tc-0.2,0-0.1-3.4,0.5-4.2c1.5-2.2,3.5-3.8,5.5-5.6c2,1.7,3.9,3.5,5.3,5.7C29,31.3,29.1,34.5,28.9,34.5z"/>\r\n\t</g>\r\n\t<g id="vector_1_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.5,44c-1,1-2.6,1-3.6,0L1.4,5.1c-1-1-1-2.6,0-3.6c1-1,2.6-1,3.6,0l39.4,38.8C45.5,41.4,45.5,43,44.5,44\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M16.5,34.5c-1,0-1.3-0.3-1.3-1.3c0-3.2,0-5.8,0-8.3L11.4,21c0,1.5,0,3,0,4.2c0,0-0.2,9.9-0.2,14.8\r\n\t\t\t\tc0,3,0.8,4.1,3.8,4.1c5.3,0,10.4,0.1,15.7,0.1c1.5,0,2.5-0.3,3-1l-8.8-8.7C22.1,34.5,19.3,34.5,16.5,34.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M28.7,11.7c1,0,1.3,0.3,1.3,1.3c0,2.4,0,4.8,0,7.2l4.4,4.4c0-4.4,0-8.8,0-13.2c0-3-1-3.9-4-3.9\r\n\t\t\t\tc-4.5,0-9,0-13.5,0l4.4,4.3C23.8,11.7,26.2,11.7,28.7,11.7z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="Layer_7" display="inline">\r\n\t</g>\r\n</g>\r\n<g id="Layer_2">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M28.5,25.6l0.1-2c0-5.9,4.2-7.6,8.7-7.6c1.1,0,2.2,0.2,3.2,0.5c-0.9-2.9-2.5-5.5-4.9-7.8c-3.9-3.9-8.5-5.8-14-5.8\r\n\t\t\t\tc-5.3,0-9.9,1.9-13.7,5.6c1.3,0.4,3,1,5.1,1.9c0.2,0.1-0.1,0.4-0.1,0.6c0,0.6,0.5,0.9,1.1,0.7c0.6-0.2,1.1-0.6,1.6-0.9\r\n\t\t\t\tc0.8-0.4,1.6-0.7,2.5-0.6c0.5,0.1,0.9,0.4,0.8,0.9c0,0.4-0.2,0.8-0.3,1.3c-0.2,0.5-0.4,0.9-0.5,1.3c-0.1,0.5,0.1,0.7,0.6,0.5\r\n\t\t\t\tc0.4-0.2,0.7-0.4,1.1-0.6c0.7-0.4,1.3-0.1,1.6,0.6c0.1,0.4,0.1,0.8-0.2,1.1c-0.3,0.4-0.6,0.8-0.9,1.2c-0.6,0.7-1.1,1.4-1.3,2.3\r\n\t\t\t\tc-0.1,0.5-0.3,1.3-0.5,1.7c-0.1,0.2-0.2,0.8-0.3,0.8c0,0-0.1,0-0.1,0c-0.1,0-0.2-0.9-0.3-1.2c-0.3-0.9-0.7-1.4-1.6-1.5\r\n\t\t\t\tc-0.3,0-0.6-0.1-0.8-0.1c-1,0.1-1.7,0.6-1.8,1.5c-0.2,1.3,0.8,2.8,2,3.1c0.7,0.1,1.3,0.1,2,0.1c0.6,0,1.3-0.1,1.9,0\r\n\t\t\t\tc1.3,0,2.3,0.6,2.9,1.8c0.6,1.1,0.8,2.3,0.7,3.5c-0.1,1.3-0.6,2.3-1.7,3c-0.4,0.2-0.7,0.5-1,0.8c-0.5,0.4-0.8,1-0.9,1.7\r\n\t\t\t\tc-0.2,1.3-0.9,2.4-1.8,3.4c0,0.1-0.1,0.1-0.2,0.1c-0.2,0.1-0.4,0.1-0.6-0.1c-0.1-0.1-0.3-0.3-0.4-0.4c-0.7-0.5-1.1-1.1-1.3-1.9\r\n\t\t\t\tc-0.2-1-0.4-2.1-0.5-3.2c-0.2-1.4-0.7-2.7-1.9-3.6c-0.2-0.1-0.3-0.3-0.5-0.4c-1-0.9-1-2.2-0.1-3.2c0.2-0.3,0.5-0.5,0.7-0.8\r\n\t\t\t\tc0.4-0.5,0.4-1.1,0-1.6c-0.3-0.4-0.7-0.8-1.1-1c-1.2-0.7-2.5-1.4-4-0.7c-0.3,0.1-0.5,0-0.6-0.3c-0.2-0.4-0.3-0.8-0.4-1.2\r\n\t\t\t\tc-0.1-0.7,0-1.4,0-2c0-0.9-0.1-1.8-0.5-2.7c-0.1-0.2-0.8-1-1.5-2c-1.9,3.1-2.9,6.5-2.9,10.4c0,5.5,1.9,10.1,5.8,14\r\n\t\t\t\tc3.9,3.9,8.5,6.4,14,6.4c4.8,0,9-0.9,12.6-3.9h-5.7c-1.2,0-1.7-2.2-1.7-3.4v-7.8C26.9,26.8,27.3,27.3,28.5,25.6z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path d="M37.2,19.6c-3.2,0-5.7,1.9-5.7,6.1v5.1c0,6.1,11.4,6.1,11.4,0v-5.1C42.9,21.5,40.4,19.6,37.2,19.6z M40.5,29.7\r\n\t\t\t\t\tc0,6.3-6.5,5.5-6.5,0v-2.9c0-2.7,1.4-4.8,3.3-4.8c1.8,0,3.2,2.2,3.2,4.8V29.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path d="M43.2,28.1H31.1c-0.8,0-1.3-0.2-1.3,0.7v5.4c0,0.8,0.5,1.9,1.3,1.9h12.1c0.8,0,0.6-1.1,0.6-1.9v-5.4\r\n\t\t\tC43.9,27.9,44.1,28.1,43.2,28.1z M37.3,33.6c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n\t\t\tS38.2,33.6,37.3,33.6z"/>\r\n\t</g>\r\n</g>\r\n</svg>',Ks={DEFAULT_ERROR:Pi(Pi({},An.DEFAULT_ERROR),{},{UI:{title:"N&#227;o foi poss&#237;vel exibir o v&#237;deo.",message:'Ocorreu um problema ao tentar carregar o v&#237;deo. <a class="player-error__link"  href="" onclick="window.location.reload(); return false;">Atualize</a> a sua p&#225;gina para tentar novamente.',className:"default-error",icon:Fs}})},Gs=Ks=Pi(Pi({},Ks),{},{AUTH_REQUIRED:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.AUTH_REQUIRED),{},{UI:{title:"Faa seu login para assistir aos contedos exclusivos.",message:"Alguns vdeos podem ser restritos a assinantes.",className:"auth-required",icon:Hs}}),DEVICE_NOT_AUTHORIZED:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.DEVICE_NOT_AUTHORIZED),{},{UI:{title:"Dispositivo n&#227;o autorizado.",message:"Voc&#234; precisa cadastrar seu dispositivo para ter acesso ao conte&#250;do exclusivo.",className:"unsupported-device",icon:Vs}}),DEVICE_NOT_SUPPORTED:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.DEVICE_NOT_SUPPORTED),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Vs}}),GEOFENCING:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.GEOFENCING),{},{UI:Pi(Pi({},Ks.DEFAULT_ERROR.UI),{},{title:"O vdeo no est disponvel nesta localidade",icon:js})}),GEO_BLOCKED:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.GEO_BLOCKED),{},{UI:{title:"V&#237;deo indispon&#237;vel nessa regi&#227;o",message:"Este v&#237;deo n&#227;o est&#225; dispon&#237;vel para ser exibido na sua regi&#227;o. Desculpe-nos pelo inconveniente.",className:"geoblocking",icon:js}}),HASH_LOAD_ERROR:Pi(Pi({},Ks.DEFAULT_ERROR),An.HASH_LOAD_ERROR),PLAYER_NOT_RECOGNIZED:Pi(Pi({},Ks.DEFAULT_ERROR),An.PLAYER_NOT_RECOGNIZED),RESOURCE_LOAD_ERROR:Pi(Pi({},Ks.DEFAULT_ERROR),An.RESOURCE_LOAD_ERROR),LOCATION_UNAVAILABLE:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.LOCATION_UNAVAILABLE),{},{UI:Pi(Pi({},Ks.DEFAULT_ERROR.UI),{},{title:"Contedo disponvel apenas com informao de localizao.",icon:js})}),NOT_ALLOWED_DOMAIN:Pi(Pi({},Ks.DEFAULT_ERROR),An.NOT_ALLOWED_DOMAIN),NOT_FOUND:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.NOT_FOUND),{},{UI:{title:"Conte&#250;do n&#227;o dispon&#237;vel.",message:"Infelizmente este v&#237;deo n&#227;o est&#225; mais dispon&#237;vel. Desculpe-nos pelo inconveniente.",className:"default-error",icon:Fs}}),PLAYLIST_LOAD_ERROR:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.PLAYLIST_LOAD_ERROR),{},{UI:Pi(Pi({},Ks.DEFAULT_ERROR.UI),{},{title:"Erro ao carregar o recurso de v&#237;deo."})}),RESTRICTED_CONTENT:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.RESTRICTED_CONTENT),{},{UI:{title:"Contedo restrito.",message:"O vdeo no est autorizado a ser exibido.",className:"default-error",icon:Fs}}),SIMULTANEOUS_ACCESS:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.SIMULTANEOUS_ACCESS),{},{UI:{title:"Acesso Simult&#226;neo.",message:"Existem muitas sess&#245;es ativas utilizando esta conta. Por favor, pare de assistir em algum dispositivo para continuar.",className:"simultaneous-access",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_">\r\n\t<path d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526c-1.026-1.021-1.026-2.685,0-3.707\r\n\t\tc1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g>\r\n\t\t<path d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013c1.215,0,1.561,0,4.561,0\r\n\t\t\tc0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),STREAMING_PAUSE_TIME_EXPIRED:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.STREAMING_PAUSE_TIME_EXPIRED),{},{UI:{title:"Sess&#227;o expirada.",message:'O v&#237;deo ficou pausado por muito tempo. Para voltar a assistir, <a class="player-error__link" href="" onclick="window.location.reload(); return false;">atualize</a> a p&#225;gina.',className:"time-expired",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_">\r\n\t<path d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),SUBSCRIBERS_ONLY:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.SUBSCRIBERS_ONLY),{},{UI:{title:"Conte&#250;do exclusivo para assinantes.",message:"Voc&#234; precisa ser assinante para ter acesso ao conte&#250;do.",className:"subscriber-only",icon:Hs}}),UNSUPPORTED_BROWSER:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.UNSUPPORTED_BROWSER),{},{UI:{title:"Seu navegador est&#225; velhinho.",message:"Para assistir aos nossos v&#237;deos, por favor, atualize-o para uma vers&#227;o mais nova.",className:"unsupported-browser",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="94.054px" height="58.925px" viewBox="0 0 94.054 58.925" enable-background="new 0 0 94.054 58.925" xml:space="preserve">\r\n<g>\r\n\t<path d="M89.057,0H13.051c-2.755,0-4.997,2.242-4.997,4.997v14.44C3.515,20.05,0,23.941,0,28.646v28.278c0,1.104,0.896,2,2,2\r\n\t\ts2-0.896,2-2V28.646c0-2.492,1.734-4.574,4.054-5.139v30.421c0,2.755,2.241,4.996,4.997,4.996h76.006\r\n\t\tc2.756,0,4.997-2.241,4.997-4.996V4.997C94.054,2.242,91.812,0,89.057,0z M23.054,3c1.105,0,2,0.896,2,2s-0.895,2-2,2\r\n\t\tc-1.104,0-2-0.896-2-2S21.95,3,23.054,3z M18.054,3c1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S16.95,3,18.054,3z M13.054,3\r\n\t\tc1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S11.95,3,13.054,3z M91.054,53.929c0,1.102-0.894,1.996-1.997,1.996H13.051\r\n\t\tc-1.103,0-1.997-0.895-1.997-1.996V23.663c2.062,0.728,3.552,2.676,3.552,4.983c0,1.104,0.896,2,2,2s2-0.896,2-2\r\n\t\tc0-4.531-3.257-8.311-7.552-9.133V10h80V53.929z M91.054,6c0,0.552-0.447,1-1,1h-61c-0.552,0-1-0.448-1-1V4c0-0.552,0.448-1,1-1h61\r\n\t\tc0.553,0,1,0.448,1,1V6z"/>\r\n\t<path d="M55.14,37.386c-0.828,0-1.5,0.672-1.5,1.5c0,1.379-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5c0-0.828-0.672-1.5-1.5-1.5\r\n\t\tc-0.829,0-1.5,0.672-1.5,1.5c0,3.032,2.468,5.5,5.5,5.5s5.5-2.468,5.5-5.5C56.64,38.058,55.968,37.386,55.14,37.386z"/>\r\n\t<path d="M21.921,23.039c3.199,0,5.802,2.604,5.802,5.804c0,4.854,3.951,8.805,8.808,8.805c4.854,0,8.803-3.95,8.803-8.805\r\n\t\tc0-3.2,2.604-5.804,5.805-5.804c3.199,0,5.803,2.604,5.803,5.804c0,4.854,3.949,8.805,8.804,8.805s8.804-3.95,8.804-8.805\r\n\t\tc0-3.2,2.604-5.804,5.804-5.804c0.828,0,1.5-0.671,1.5-1.5s-0.672-1.5-1.5-1.5c-3.038,0-5.721,1.547-7.304,3.894\r\n\t\tc-1.583-2.347-4.266-3.894-7.304-3.894s-5.721,1.547-7.304,3.894c-1.583-2.347-4.266-3.894-7.303-3.894\r\n\t\tc-3.038,0-5.722,1.547-7.305,3.894c-1.583-2.347-4.265-3.894-7.303-3.894c-3.039,0-5.724,1.547-7.307,3.895\r\n\t\tc-1.583-2.348-4.265-3.895-7.303-3.895c-0.829,0-1.5,0.671-1.5,1.5S21.093,23.039,21.921,23.039z M65.745,23.039\r\n\t\tc3.2,0,5.804,2.604,5.804,5.804c0,3.201-2.604,5.805-5.804,5.805s-5.804-2.604-5.804-5.805\r\n\t\tC59.941,25.643,62.545,23.039,65.745,23.039z M36.531,23.039c3.2,0,5.803,2.604,5.803,5.804c0,3.201-2.603,5.805-5.803,5.805\r\n\t\tc-3.202,0-5.808-2.604-5.808-5.805C30.724,25.643,33.329,23.039,36.531,23.039z"/>\r\n\t<path d="M21.921,30.343h2.937c0.829,0,1.5-0.672,1.5-1.5s-0.671-1.5-1.5-1.5h-2.937c-0.829,0-1.5,0.672-1.5,1.5\r\n\t\tS21.093,30.343,21.921,30.343z"/>\r\n\t<path d="M80.353,27.343h-2.938c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h2.938c0.828,0,1.5-0.672,1.5-1.5\r\n\t\tS81.181,27.343,80.353,27.343z"/>\r\n\t<path d="M78.476,31.036c-0.586-0.586-1.535-0.586-2.121,0s-0.586,1.535,0,2.121l1.492,1.492c0.293,0.293,0.677,0.439,1.061,0.439\r\n\t\ts0.768-0.146,1.061-0.439c0.586-0.586,0.586-1.535,0-2.121L78.476,31.036z"/>\r\n\t<path d="M23.797,31.037l-1.49,1.492c-0.585,0.586-0.584,1.535,0.001,2.121c0.293,0.292,0.676,0.438,1.06,0.438\r\n\t\tc0.384,0,0.769-0.146,1.062-0.44l1.49-1.492c0.585-0.586,0.584-1.535-0.001-2.121C25.333,30.45,24.383,30.449,23.797,31.037z"/>\r\n</g>\r\n</svg>'}}),UNSUPPORTED_MOBILE_DEVICE:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.UNSUPPORTED_MOBILE_DEVICE),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Vs}}),TIMESTAMP_ERROR:Pi(Pi(Pi({},Ks.DEFAULT_ERROR),An.TIMESTAMP_ERROR),{},{UI:{title:"Relgio adiantado.",message:"Para assistir, ajuste o horrio do seu dispositivo conforme sua localizao.",className:"unsupported-device",icon:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M11.99 2C17.52 2 22 6.48 22 12s-4.48 10-10.01 10C6.47 22 2 17.52 2 12S6.47 2 11.99 2zM12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13v5.25l4.5 2.67-.75 1.23L11 13V7h1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'}})}),zs=".clappr-player#wp3-player-0 .player-error {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  cursor: default;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .player-error__background-overlay {\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    position: absolute;\n    top: 0; }\n  .clappr-player#wp3-player-0 .player-error__link, .clappr-player#wp3-player-0 .player-error__link:visited {\n    color: #CCCACA; }\n  .clappr-player#wp3-player-0 .player-error__content {\n    position: relative;\n    line-height: 1.4; }\n  .clappr-player#wp3-player-0 .player-error__title {\n    color: #CCCACA;\n    font-weight: bold;\n    font-size: 18px; }\n  .clappr-player#wp3-player-0 .player-error__description {\n    color: #CCCACA;\n    width: 90%;\n    margin: 0 auto;\n    font-size: 14px; }\n  .clappr-player#wp3-player-0 .player-error__icon svg {\n    width: 30px;\n    max-height: 30px;\n    fill: #ffffff; }\n  .clappr-player#wp3-player-0 .player-error__icon.unsupported-browser svg {\n    width: 40px; }\n  .clappr-player#wp3-player-0 .player-error--hide {\n    display: none; }\n";or(zs);var Ws="ERROR_SCREEN_SHOW",Ys="ERROR_SCREEN_HIDE",qs=Un.session;be.register(Ws),be.register(Ys);var $s=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).playerId=i.options.playerId,i}return Ii(n,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<div class="player-error__background-overlay"></div>\n<div class="player-error__content">\n  <span class="player-error__icon <%= className %>"><%= icon %></span>\n  <p class="player-error__title"><%= title %></p>\n  <p class="player-error__description"><%= message %></p>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"posterImage",get:function(){return this.container&&(this.container.getPlugin("poster")||{}).posterImage}},{key:"attributes",get:function(){return{class:"player-error"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindPlaybackEvents),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.clearErrors)}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,be.PLAYBACK_ERROR,this.onError)}},{key:"clearErrors",value:function(){this.error=null,this.$el.hide(),this.core.trigger(be.Custom.ERROR_SCREEN_HIDE)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=Pi(Pi({},e),{},{videoSessionId:qs.getVideoSessionId(this.options.playerId)}),this.showErrorScreen(),this.logError()}},{key:"showErrorScreen",value:function(){this.render(),this.$el.show(),this.core.trigger(be.Custom.ERROR_SCREEN_SHOW)}},{key:"logError",value:function(){switch(this.error.level){case Le.Levels.INFO:fe.info("player_error","",this.error);break;case Le.Levels.WARN:fe.warn("player_error","",this.error);break;case Le.Levels.FATAL:default:fe.error("player_error","",this.error)}}},{key:"setPoster",value:function(){!(this.error.code===Gs.RESTRICTED_CONTENT.code)&&this.posterImage&&this.$el.css({"background-image":"url("+this.posterImage+")"})}},{key:"getErrorUI",value:function(e){var t=Object.values(Gs).find((function(t){return t.code===e}));return t&&t.UI||Gs.DEFAULT_ERROR.UI}},{key:"render",value:function(){if(this.error){Object.assign(this.error.UI,this.getErrorUI(this.error.code));var e=Bn.getStyleFrom(zs,{playerId:this.playerId});return this.$el.html(this.template(Pi({},this.error.UI))),this.setPoster(),this.$el.append(e[0]),this.core.$el.append(this.el),this}}}]),n}(Ne),Xs=".clappr-player#wp3-player-0 .container-overlay {\n  width: 100%;\n  z-index: 2; }\n  .clappr-player#wp3-player-0 .container-overlay--hidden {\n    visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control::after {\n  height: 0; }\n";or(Xs);var Zs=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.core,be.CORE_READY,this.initPlugins),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.bindAdEvents()}},{key:"bindAdEvents",value:function(){this.listenTo(this.container,Fn.DFP_AD_STARTED,this.disableVisibility),this.listenTo(this.container,Fn.DFP_AD_COMPLETED,this.enableVisibility),this.listenTo(this.container,Fn.DFP_AD_CLOSED,this.enableVisibility),this.listenTo(this.container,Fn.DFP_AD_SKIPPED,this.enableVisibility)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"--hidden"))}},{key:"enableVisibility",value:function(){this.$el.removeClass("".concat(this.internalName,"--hidden"))}},{key:"filterItems",value:function(e){return e instanceof n&&e!==this}},{key:"initPlugins",value:function(){var e=this;this.corePlugins.filter((function(t){return e.filterItems(t)})).forEach((function(t){return e.renderPlugin(t)}))}},{key:"renderPlugin",value:function(e){var t=e.el;this.$el.append(t)}},{key:"render",value:function(){this.$el.empty();var e=Bn.getStyleFrom(Xs,{playerId:this.playerId});return this.$el.append(e[0]),this.core.$el.append(this.el),this.triggerDidShowOverlay(),this}},{key:"triggerDidShowOverlay",value:function(){this.core.trigger(Fn.DID_SHOW_OVERLAY)}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"name",get:function(){return"overlay"}},{key:"internalName",get:function(){return"container-overlay"}},{key:"attributes",get:function(){return{class:"".concat(this.internalName)}}},{key:"playerId",get:function(){return this.options.playerId}},{key:"corePlugins",get:function(){return this.core.plugins}}]),n}(Ne),Qs=":root {\n  --player-drawer-hint-size: heightHint; }\n\n.clappr-player#wp3-player-0 .drawer--bottom {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  bottom: calc(-100% + var(--player-drawer-hint-size));\n  height: 100%;\n  background: transparent;\n  z-index: 9999;\n  will-change: transform, opacity;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom * {\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom:hover {\n    transform: translateY(-12px);\n    transition: transform 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom-expand {\n    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n    transform: translateY(heightImmersion);\n    transition: transform 0.3s; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand * {\n      pointer-events: auto; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:hover {\n      transform: translateY(heightImmersion); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:before {\n      content: '';\n      position: absolute;\n      top: -100%;\n      height: 100%;\n      width: 100%;\n      background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse {\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:hover {\n        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:before {\n        content: '';\n        position: absolute;\n        top: -100%;\n        height: 100%;\n        width: 100%;\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand-with-header:before {\n      transition: visibility 0.3s ease, opacity 0.3s ease;\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.6) 100%); }\n  .clappr-player#wp3-player-0 .drawer--bottom-disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom-hidden {\n    pointer-events: none;\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .drawer--bottom-hidden:hover {\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n\n.clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand {\n  transform: translateY(immersionFullScreen); }\n  .clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand:hover {\n    transform: translateY(immersionFullScreen); }\n";or(Qs);var Js="24px",el="40px",tl=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"expandOffset",value:function(){return"max(".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") ")}},{key:"expandOffsetFullscreen",value:function(){return"px"==this.heightImmersionUnit?"max(-".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") "):"max(".concat(this.specifiedExpandOffsetPercentageFullscreen(),", ").concat(this.maxExpandOffset(),") ")}},{key:"maxExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," + ").concat(this.headerSize())}},{key:"specifiedExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," - ").concat(this.translateYValue())}},{key:"specifiedExpandOffsetPercentageFullscreen",value:function(){return"-".concat(this.translateYValue())}},{key:"headerSize",value:function(){return"".concat(this.headerHeight,"  - 100%")}},{key:"translateYValue",value:function(){return"".concat(parseInt(this.heightImmersion,10)).concat(this.heightImmersionUnit)}},{key:"toggle",value:function(e){e&&(this.isExpanded?this.clickAtHideArea(e)&&Fi(Li(n.prototype),"hide",this).call(this):Fi(Li(n.prototype),"show",this).call(this))}},{key:"clickAtHideArea",value:function(e){return e.clientY>=0&&e.clientY<=this.drawerYPosition()}},{key:"drawerYPosition",value:function(){return Math.round(this.$el[0].getBoundingClientRect().top)-1}},{key:"name",get:function(){return"drawer_bottom"}},{key:"internalName",get:function(){return"drawer--bottom"}},{key:"hasPlaceholder",get:function(){return!0}}]),n}(function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).lastChromelessValue=!!i.options.chromeless,i}return Ii(n,[{key:"name",get:function(){return"drawer"}},{key:"internalName",get:function(){return"drawer"}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e}},{key:"attributes",get:function(){return{class:"".concat(this.internalName," ").concat(this.internalName,"-hidden")}}}]),Ii(n,[{key:"bindEvents",value:function(){this.bindMouseEvents(),this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,be.MEDIACONTROL_SHOW,this.showHint),this.listenTo(this.core,Fn.WM_SHARE_HIDE,this.showHint),this.listenTo(this.core,Fn.TAP_TO_UNMUTE_SHOW,this.showHint),this.listenTo(this.core,Fn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked),this.listenTo(this.core,Fn.WM_SHARE_HIDE,this.bindMouseEvents),this.listenTo(this.core,be.MEDIACONTROL_HIDE,this.hideHint),this.listenTo(this.core,Fn.WM_SHARE_SHOW,this.unbindMouseEvents),this.listenTo(this.core,Fn.WM_SHARE_SHOW,this.hideHint),this.listenTo(this.core,Fn.DID_CLOSE_HEADER,this.hide),this.listenTo(this.core,Fn.SYNC_DRAWER_STATE_REQUEST,this.currentState),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.core,be.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,be.ERROR,this.onError)}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,Fn.DFP_AD_STARTED,this.onDfpStarted),this.listenTo(this.container,Fn.DFP_AD_SKIPPED,this.onDfpClose),this.listenTo(this.container,Fn.DFP_AD_CLOSED,this.onDfpClose),this.listenTo(this.container,Fn.DFP_AD_COMPLETED,this.onDfpClose)}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.bindContainerEvents()}},{key:"onDfpStarted",value:function(){this.isDfpActive=!0,this.isPreviouslyExpanded=this.isExpanded,this.hide(),this.hideHint()}},{key:"onDfpClose",value:function(){this.isDfpActive=!1,this.isPreviouslyExpanded&&this.show()}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===Le.Levels.FATAL&&this.showHint()}},{key:"updateChromelessState",value:function(){this.disableDrawer(),!1===this.options.chromeless&&(this.hideHint(),this.enableDrawer()),this.lastChromelessValue=this.options.chromeless}},{key:"bindMouseEvents",value:function(){var e=this;this.enableVisibilityDebounced||(this.enableVisibilityDebounced=no((function(){return e.enableVisibility.apply(e,arguments)}),100,{trailing:!1})),this.listenTo(this.core,be.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.listenTo(this.core,be.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"unbindMouseEvents",value:function(){this.stopListening(this.core,be.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.stopListening(this.core,be.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,!this.lastChromelessValue&&this.updateResponsiveStyle())}},{key:"onTapToUnmuteClicked",value:function(){V.isMobile&&this.hideHint()}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?this.disableDrawer():this.enableDrawer()}},{key:"enableDrawer",value:function(){this.$el.removeClass("".concat(this.internalName,"-disabled"))}},{key:"disableDrawer",value:function(){this.$el.addClass("".concat(this.internalName,"-disabled"))}},{key:"showHint",value:function(){this.isVisible()||this.isDfpActive||(this.$el.removeClass("".concat(this.internalName,"-hidden")),this.onDidShowDrawerHint())}},{key:"onDidShowDrawerHint",value:function(){this.core.trigger(Fn.DID_SHOW_DRAWER_HINT)}},{key:"hideHint",value:function(){!this.isExpanded&&this.isVisible()&&(this.disableVisibility(),this.onDidHideDrawerHint())}},{key:"onDidHideDrawerHint",value:function(){this.core.trigger(Fn.DID_HIDE_DRAWER_HINT)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"-hidden"))}},{key:"currentState",value:function(){this.core.trigger(Fn.SYNC_DRAWER_STATE_RESPONSE,this.isExpanded)}},{key:"show",value:function(e){this.isExpanded||(e&&e.stopPropagation(),this.isExpanded=!0,this.hideDelayed(),this.core.trigger(Fn.WILL_SHOW_DRAWER),this.addExpandBackground(),this.onDidShowDrawer())}},{key:"onDidShowDrawer",value:function(){this.core.trigger(Fn.DID_SHOW_DRAWER)}},{key:"hide",value:function(){var e=this;this.isExpanded&&(this.isExpanded=!1,this.core.trigger(Fn.WILL_HIDE_DRAWER),this.$el.removeClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.removeClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")})),this.onDidHideDrawer())}},{key:"onDidHideDrawer",value:function(){this.core.trigger(Fn.DID_HIDE_DRAWER)}},{key:"enableVisibility",value:function(e){var t=this;V.isMobile&&e&&"mousemove"===e.type||(clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout),this.isExpanded&&this.isVisible()||this.showHint())}},{key:"isVisible",value:function(){return!this.$el.hasClass("".concat(this.internalName,"-hidden"))}},{key:"hideDelayed",value:function(e){var t=this;!this.isExpanded||this.inactivityTimeout<=0||!this.isVisible()||V.supportsTouchEvents||(clearTimeout(this.hideId),this.userKeepVisible||e&&"mouseout"===e.type?this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout):!this.userKeepVisible&&this.disableVisibility())}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1)}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0)}},{key:"parseStyle",value:function(){var e=Qs.toString();return e=(e=(e=e.replace(/heightImmersion/g,this.expandOffset())).replace(/immersionFullScreen/g,this.expandOffsetFullscreen())).replace(/heightHint/g,this.effectiveHeightHint)}},{key:"expandOffset",value:function(){}},{key:"expandOffsetFullscreen",value:function(){}},{key:"addExpandBackground",value:function(){var e=this;this.$el.addClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.addClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")}))}},{key:"render",value:function(){var e=Bn.getStyleFrom(this.parseStyle(),{playerId:this.playerId});return this.$el.html(this.content),this.$el.append(e[0]),this.core.trigger(Fn.SHOW_DRAWER_REQUESTED),this.hasPlaceholder&&this.core.trigger(Fn.DRAWER_HAS_PLACEHOLDER,this.effectiveHeightHint),this.updateChromelessState(),this}},{key:"content",get:function(){return this._content||""},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._content=e}},{key:"height",get:function(){return this._height||"inherit"},set:function(e){this._height=e}},{key:"heightImmersion",get:function(){return"50%"}},{key:"heightImmersionUnit",get:function(){return this.heightImmersion.includes("%")?"%":"px"}},{key:"heightHint",get:function(){return Js}},{key:"headerHeight",get:function(){return"57px"}},{key:"hasHeader",get:function(){return!1}},{key:"hasPlaceholder",get:function(){return!1}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"gradientHeadSize",get:function(){return parseInt("32px",10)}},{key:"defaultExpandValues",get:function(){return{drawerExpanded:"50%",drawerHintSize:this.effectiveHeightHint}}},{key:"effectiveHeightHint",get:function(){var e=parseInt(this.heightHint,10);return Number.isInteger(e)?e>parseInt(el,10)?el:e<parseInt(Js,10)?Js:this.heightHint:Js}},{key:"container",get:function(){return this.core.activeContainer}},{key:"inactivityTimeout",get:function(){return 2e3}},{key:"events",get:function(){var e={click:"toggle"},t={mouseenter:"setUserKeepVisible",mouseleave:"resetUserKeepVisible",click:"toggle"},n=Pi(Pi(Pi({},e),t),{},{touchend:this.resetUserKeepVisible});return V.isHybridDevice?n:V.isMobile?e:t}}]),n}(Zs)),nl='.clappr-player#wp3-player-0 .drawer-header {\n  height: 57px;\n  left: 0px;\n  position: absolute;\n  width: 100%;\n  z-index: 999;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s; }\n  .clappr-player#wp3-player-0 .drawer-header-modal--visible .media-control-panel__upper {\n    display: none; }\n  .clappr-player#wp3-player-0 .drawer-header-panel {\n    padding: 4px 4px 0;\n    position: relative; }\n    .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      position: relative; }\n      .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right {\n        display: flex;\n        flex-flow: row nowrap;\n        align-items: center; }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-element, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-element {\n          padding: 12px;\n          will-change: opacity;\n          transition: visibility 0.3s ease, opacity 0.3s ease; }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-button, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-button {\n          display: inline-block;\n          margin: 0;\n          border: 0;\n          cursor: pointer;\n          background-color: transparent;\n          text-align: center;\n          width: 24px;\n          height: 24px;\n          box-sizing: content-box;\n          transition: visibility 0.3s ease, opacity 0.3s ease; }\n      .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left {\n        width: calc(100% - 48px); }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-title {\n          box-sizing: border-box;\n          color: #fff;\n          pointer-events: none;\n          text-align: left;\n          text-shadow: none;\n          transition: visibility 0.3s ease, opacity 0.3s ease;\n          overflow: hidden;\n          font-family: "opensans-regular";\n          letter-spacing: 0;\n          color: #fff;\n          text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n          margin-bottom: 6px;\n          font-size: 18px;\n          line-height: 24px;\n          white-space: nowrap;\n          text-overflow: ellipsis; }\n    .clappr-player#wp3-player-0 .drawer-header-panel--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .drawer-header--hidden {\n    opacity: 0;\n    transform: translateY(100%);\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    z-index: 0; }\n';or(nl);var il=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,Fn.SHOW_HEADER_REQUESTED,this.showHeader),this.listenTo(this.core,Fn.CLOSE_HEADER_REQUESTED,this.closeHeader)}},{key:"bindCloseButton",value:function(){var e=this;this.$el.find(".".concat(this.name,"__close")).on("click",(function(t){t&&t.stopPropagation(),e.closeHeader()}))}},{key:"showHeader",value:function(e){this.updateTitle(e),this.core.trigger(Fn.WILL_SHOW_HEADER),this.show(),this.core.trigger(Fn.DID_SHOW_HEADER)}},{key:"closeHeader",value:function(){this.core.trigger(Fn.WILL_CLOSE_HEADER),this.hide(),this.core.trigger(Fn.DID_CLOSE_HEADER)}},{key:"updateTitle",value:function(e){this.title=e,this.$el.find(".".concat(this.name,"-title")).text(this.title)}},{key:"show",value:function(){this.core.trigger(Fn.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).removeClass("".concat(this.name,"-panel--hidden")),this.$el.removeClass("".concat(this.name,"--hidden"))}},{key:"hide",value:function(){this.core.trigger(Fn.DID_HIDE_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).addClass("".concat(this.name,"-panel--hidden")),this.$el.addClass("".concat(this.name,"--hidden"))}},{key:"render",value:function(){var e=Bn.getStyleFrom(nl,{playerId:this.core.options.playerId});return this.$el.empty(),this.$el.html(this.template({title:this.title,closeIcon:Do})),this.$el.append(e[0]),this.core.$el.append(this.el),this.bindCloseButton(),this}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"name",get:function(){return"drawer-header"}},{key:"attributes",get:function(){return{class:"".concat(this.name," ").concat(this.name,"--hidden")}}},{key:"title",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._title=e},get:function(){return this._title}},{key:"template",get:function(){return xe('<div class="drawer-header-panel drawer-header-panel--hidden">\n    <div class="opposites-container">\n        <div class="drawer-header-position__left">\n            <div class="drawer-header-element drawer-header-title">\n                <%= title %>\n            </div>\n        </div>\n        <div class="drawer-header-position__right">\n            <div class="drawer-header-element drawer-header-button" data-controls data-close>\n                <div class="drawer-header__close"><%= closeIcon %></div>\n            </div>\n        </div>\n    </div>\n</div>')}}]),n}(Ne),rl=".clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder {\n  position: relative;\n  width: 100%;\n  height: 24px; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.media-control-element {\n    padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-placeholder {\n  display: none; }\n";or(rl);var al=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,Fn.DRAWER_HAS_PLACEHOLDER,this.onDrawerHasPlaceholder),this.listenTo(this.core,be.CORE_RESIZE,this.onPlayerResize)}},{key:"onDrawerHasPlaceholder",value:function(){this.hasDrawer=!0,this.enablePlaceholder()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.updateResponsiveStyle())}},{key:"enablePlaceholder",value:function(e){e&&this.heightHint!==e&&this.$el.css({height:e}),this.$el.removeClass("disabled")}},{key:"disablePlaceholder",value:function(){this.$el.addClass("disabled")}},{key:"show",value:function(){this.$el.removeClass("hidden")}},{key:"updateResponsiveStyle",value:function(){this.hasDrawer&&(this.shouldDisable?this.disablePlaceholder():this.enablePlaceholder())}},{key:"render",value:function(){this.$el.empty();var e=Bn.getStyleFrom(rl,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"name",get:function(){return"media_control_placeholder"}},{key:"panel",get:function(){return"front-layer"}},{key:"position",get:function(){return""}},{key:"heightHint",get:function(){return 0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"attributes",get:function(){return{class:"media-control-placeholder disabled hidden"}}}]),n}(hr),ol=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),e.options.clapprStats=e.options.clapprStats||{runEach:1e3,onReport:function(e){return i.onMetricsReceived(e)}},i=t.call(this,e)}return Ii(n,[{key:"innerPlayback",get:function(){return this.container.playback&&this.container.playback.playback}},{key:"_playbackName",get:function(){return this.innerPlayback&&this.innerPlayback.name}}]),Ii(n,[{key:"_html5FetchFPS",value:function(){var e=this.container.playback.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"onMetricsReceived",value:function(e){this.container.trigger(Fn.WM_STATS_REPORTED,e)}}]),n}(Ba(Fa((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="latest/",n(n.s="./src/clappr-stats.js")}({"./node_modules/lodash.get/index.js":
/*!******************************************!*\
    !*** ./node_modules/lodash.get/index.js ***!
    \******************************************/
/*! no static exports found */function(e,t,n){(function(t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="__lodash_hash_undefined__",a="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,f="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,g=p||f||Function("return this")(),v=Array.prototype,y=Function.prototype,m=Object.prototype,b=g["__core-js_shared__"],E=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",A=y.toString,k=m.hasOwnProperty,T=m.toString,_=RegExp("^"+A.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=g.Symbol,S=v.splice,C=B(g,"Map"),R=B(Object,"create"),I=w?w.prototype:void 0,x=I?I.toString:void 0;function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function M(e,t){for(var n,r=0,a=(t=function(e,t){if(j(e))return!1;var n=void 0===e?"undefined":i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!G(e))||(l.test(e)||!s.test(e)||null!=t&&e in Object(t))}(t,e)?[t]:j(n=t)?n:F(n)).length;null!=e&&r<a;)e=e[V(t[r++])];return r&&r==a?e:void 0}function N(e){return!(!K(e)||function(e){return!!E&&E in e}(e))&&(function(e){var t=K(e)?T.call(e):"";return t==a||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:h).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function U(e,t){var n,r,a=e.__data__;return("string"==(r=void 0===(n=t)?"undefined":i(n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}D.prototype.clear=function(){this.__data__=R?R(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(R){var n=t[e];return n===r?void 0:n}return k.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:k.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=R&&void 0===t?r:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},P.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return L(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,i=L(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},O.prototype.clear=function(){this.__data__={hash:new D,map:new(C||P),string:new D}},O.prototype.delete=function(e){return U(this,e).delete(e)},O.prototype.get=function(e){return U(this,e).get(e)},O.prototype.has=function(e){return U(this,e).has(e)},O.prototype.set=function(e,t){return U(this,e).set(e,t),this};var F=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(G(e))return x?x.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(d,"$1"):t||e)})),n}));function V(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(H.Cache||O),n}H.Cache=O;var j=Array.isArray;function K(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function G(e){return"symbol"==(void 0===e?"undefined":i(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}(e)&&"[object Symbol]"==T.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:M(e,t);return void 0===i?n:i}}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},"./src/clappr-stats.js":
/*!*****************************!*\
    !*** ./src/clappr-stats.js ***!
    \*****************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! @clappr/core */"@clappr/core"),s=n(/*! lodash.get */"./node_modules/lodash.get/index.js"),l=(i=s)&&i.__esModule?i:{default:i},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._runEach=(0,l.default)(e,"options.clapprStats.runEach",5e3),n._onReport=(0,l.default)(e,"options.clapprStats.onReport",n._defaultReport),n._uriToMeasureLatency=(0,l.default)(e,"options.clapprStats.uriToMeasureLatency"),n._urisToMeasureBandwidth=(0,l.default)(e,"options.clapprStats.urisToMeasureBandwidth"),n._runBandwidthTestEvery=(0,l.default)(e,"options.clapprStats.runBandwidthTestEvery",10),n._bwMeasureCount=0,n._completion={watch:(0,l.default)(e,"options.clapprStats.onCompletion",[]),calls:[]},n._newMetrics(),n.on(t.REPORT_EVENT,n._onReport),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start"+e]}},{key:"_start",value:function(e){this["_start"+e]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start"+e]}},{key:"_defaultReport",value:function(e){console.log(e)}},{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.2"}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}}]),a(t,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,o.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,o.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,o.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,o.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,o.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,o.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,o.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,o.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,o.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,o.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,o.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,o.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(e){var t=parseInt((0,l.default)(e,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var i=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];i.end=n,i.time=n-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,n=1e3*e.total,i=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=t,this._metrics.extra.watchedPercentage=t/n*100,0===i?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[i-1][1]=t,this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end||(r.time=this._now()-r.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,i=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||i||(o.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(t.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(t.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this._metrics.extra.bitratesHistory.map((function(e){return e.time})).reduce((function(e,t){return e+t}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate*e.time})).reduce((function(e,t){return e+t}),0)/e,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(e,t){return e.time<t.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"_measureLatency",value:function(){var e=this;if(this._uriToMeasureLatency){var t,n=[],i=function(){t=n[2]-n[1],e._metrics.timers.latency=t};!function t(){if(n.push(e._now()),n.length>2)i();else{var r=new Image;r.onload=t,r.src=e._uriToMeasureLatency+"?"+Math.random()+"="+e._now()}}()}}},{key:"_measureBandwidth",value:function(){var e=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var t=0,n=function(n){var i=(e._urisToMeasureBandwidth[t-1].end-e._urisToMeasureBandwidth[t-1].start)/1e3,r=8*n.loaded/i;e._metrics.extra.bandwidth=r,e._urisToMeasureBandwidth.forEach((function(e){e.start=0,e.end=0,e.expired=!1,clearTimeout(e.timer)}))};!function i(r){if(t>0&&(e._urisToMeasureBandwidth[t-1].end=e._now(),clearTimeout(e._urisToMeasureBandwidth[t-1].timer)),t>=e._urisToMeasureBandwidth.length||t>0&&e._urisToMeasureBandwidth[t-1].expired)n(r);else{var a=new XMLHttpRequest;a.open("GET",e._urisToMeasureBandwidth[t].url,!0),a.responseType="arraybuffer",a.onload=a.onabort=i,e._urisToMeasureBandwidth[t].start=e._now(),e._urisToMeasureBandwidth[t].timer=setTimeout((function(t){e._urisToMeasureBandwidth[t].expired=!0,a.abort()}),e._urisToMeasureBandwidth[t].timeout,t),a.send()}t++}()}this._bwMeasureCount++}}]),t}(o.ContainerPlugin);t.default=u,u.REPORT_EVENT="clappr:stats:report",u.PERCENTAGE_EVENT="clappr:stats:percentage",e.exports=t.default},"@clappr/core":
/*!*************************!*\
    !*** external "Clappr" ***!
    \*************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(ct)})))),sl=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this._parseCuepoints)}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.container.playback,be.PLAYBACK_TIMEUPDATE,this._onPositionUpdate)}},{key:"_onPositionUpdate",value:function(e){var t=this,n=e.current;this._cuepoints.forEach((function(e){(t._previousPosition<e.time||n===e.time)&&(n===e.time||n>=e.time&&n-t._previousPosition<=1)&&(fe.debug(t.name,"cuepoint reached:",e),t.container.trigger(Fn.DID_REACH_CUEPOINT,e))})),this._previousPosition=n}},{key:"_parseCuepoints",value:function(e){var t=this;this._cuepoints=(e.cuepoints||[]).map((function(e){var t=Pi({},e);return t.time/=1e3,t})).sort((function(e,t){return e.time-t.time})),fe.debug(this.name,"cuepoints loaded:",this._cuepoints),this._cuepoints.length>0&&(ir((function(){return t.container.trigger(Fn.DID_LOAD_CUEPOINTS,t._cuepoints)})),this._bindPlaybackEvents(),this._previousPosition=-.01)}},{key:"name",get:function(){return"cuepoints"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}}]),n}(Xe),ll=/^https?:\/\/([a-z0-9\.\-]*)\.globoi?\.com/,ul=/^https?:\/\/[w]*\.?(techtudo)\.com\.br/,cl=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).siteName=i.options.siteName,i.listenToOnce(i.container.playback,Fn.WM_RESOURCE_READY,i.onResourceReady),i.embedPlugin(),i}return Ii(n,[{key:"name",get:function(){return"comscore"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"environment",get:function(){return this.container.options.env}},{key:"scorecardBeacon",get:function(){return"".concat(this.environment.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/beacon.js")}}]),Ii(n,[{key:"embedPlugin",value:function(){var e=this;if(!window.COMSCORE){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src=this.scorecardBeacon,t.onload=function(){return e.ready()},document.head.appendChild(t)}}},{key:"ready",value:function(){this.isReady=!0,this.trigger("comscore:ready")}},{key:"onResourceReady",value:function(e){var t=this;window.COMSCORE?(this.video=e,this.listenToOnce(this.container,be.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container,be.CONTAINER_STOP,this.onStop),this.listenToOnce(this.container,be.CONTAINER_ENDED,this.onStop)):this.listenToOnce(this,"comscore:ready",(function(){return t.onResourceReady(e)}))}},{key:"onPlay",value:function(){var e={c2:6035227,c3:this.getSiteName(),c4:this.video.channel,c5:this.getVideoType(),c6:null,c10:"1|1",rn:Math.random()};window.location.host.match(/globotv\.globo\.com$/)&&(e.c6="Globotv - "+this.video.channel),COMSCORE.beacon(e)}},{key:"onStop",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"getSiteName",value:function(){return this.siteName?this.siteName:this.getSubdomain(window.location.href)}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(ll)||e.match(ul);return t?t[1]:null}return null}},{key:"getVideoType",value:function(){return{ad:"09",live:"03"}[this.video.kind]||"02"}}]),n}(Xe),dl=function(){function e(t){Ci(this,e),this.channel=t.channel,this.channelId=t.channel_id,this.program=t.program,this.programId=t.program_id,this.startTime=t.start_time,this.endTime=t.end_time,this.rawData=t}return Ii(e,[{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=this.startTime-t&&e<this.endTime+t}},{key:"toString",value:function(){var e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},t=new Date(1e3*this.startTime).toLocaleDateString(void 0,e),n=new Date(1e3*this.endTime).toLocaleDateString(void 0,e);return"Program [".concat(this.channel).concat(this.channelId?" (".concat(this.channelId,")"):""," - ").concat(this.program).concat(this.programId?" (".concat(this.programId,")"):"",": ").concat(t," - ").concat(n,"]")}}]),e}(),hl=function(){function e(t){Ci(this,e),this._programs=t.programs||[],this._programs=this._programs.map((function(e){return new dl(e)})).sort((function(e,t){return t.endTime-e.endTime})),this.rawData=t}return Ii(e,[{key:"programs",get:function(){return this._programs}},{key:"latestProgram",get:function(){return this.programs[0]}}]),Ii(e,[{key:"getProgramForTime",value:function(e,t){return this.programs&&this.programs.find((function(n){return n.contains(e,t)}))}}]),e}(),pl=Un.truncateTimeSeconds,fl=Un.getCurrentTime,gl=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e))._playback=e.playback,i._throttledPositionUpdate=no((function(){var e;return(e=i)._onPositionUpdate.apply(e,arguments)}),5e3,{trailing:!1}),i._url=i.epgApiUrl,i}return Ii(n,[{key:"name",get:function(){return"epg"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"epgApiUrl",get:function(){return"".concat(this.options.env.protocol,"://epg-api.video.globo.com/v2/programs")}},{key:"playback",get:function(){return this._playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}}]),Ii(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this._onResourceReady)}},{key:"parseEPG",value:function(e){this._updating=!1,this._epg=new hl(e),this.container.trigger(Fn.DID_LOAD_EPG,{programs:this._epg.programs}),this._onPositionUpdate()}},{key:"updateEPG",value:function(){if(!this._updating){this._updating=!0;var e=fl(this.innerPlayback),t=pl(e-this.playback.getDuration()),n=pl(e+1800);this._loadEpgData(t,n)}}},{key:"updateProgramForTime",value:function(e){if(!this._currentProgram||!this._currentProgram.contains(e)){var t=this._epg&&this._epg.getProgramForTime(e,5);this._currentProgram!==t&&(this._currentProgram=t,this.container.trigger(Fn.DID_CHANGE_CURRENT_PROGRAM,{program:this._currentProgram}))}}},{key:"_onResourceReady",value:function(e){var t,n=e.isLive,i=e.transmission&&e.transmission.id,r=!!(null===(t=this.innerPlayback)||void 0===t?void 0:t.getProgramDateTime);n&&i&&r?(this._video=e,this._transmissionId=i,this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate),this.listenTo(this.playback,be.PLAYBACK_SEEKED,this._onPositionUpdate),this.listenToOnce(this.playback,be.PLAYBACK_PLAY,this.updateEPG)):fe.info(this.name,"skipping EPG loading (isLive=".concat(n,", transmissionId=").concat(i,")"))}},{key:"_loadEpgData",value:function(e,t){var n=this;if(!isNaN(e)&&!isNaN(t)){var i="".concat(this._url,"?transmission_id=").concat(this._transmissionId,"&start_time=").concat(e,"&end_time=").concat(t);return U.ajax({url:i}).then((function(e){return n.parseEPG(e)}),(function(e,t,i){fe.error(n.name,"could not load EPG:",i||t),!n._epg&&n.stopListening(n.playback)}))}fe.warn(this.name,"skipping EPG request. Invalid start or end time. start: ".concat(e,",  end: ").concat(t))}},{key:"_onPositionUpdate",value:function(){if(this.innerPlayback){var e=fl(this.innerPlayback);this.updateProgramForTime(e);var t=this._epg&&this._epg.latestProgram;!this._updating&&t&&t.endTime-e<=300&&this.updateEPG()}}}]),n}(Xe),vl=".clappr-player#wp3-player-0 .poster {\n  cursor: pointer;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .poster--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .poster:hover .poster__play-wrapper {\n    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5)); }\n  .clappr-player#wp3-player-0 .poster__background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .poster__background-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .poster__play-wrapper {\n    background: none;\n    border: none;\n    width: auto;\n    height: 30%;\n    text-align: center;\n    opacity: 0.97;\n    transition: filter 0.3s; }\n    .clappr-player#wp3-player-0 .poster__play-wrapper svg {\n      height: 100%;\n      display: inline; }\n";or(vl);var yl=Un.autoplayManager,ml=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).options.disableControlsOnPoster||(i.options.disableControlsOnPoster=!0),i.options.disableControlsOnPoster&&i.container.disableMediaControl(),i._clicked=!1,i.playButtonVisible=!0,i.render(),i}return Ii(n,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<div class="poster__background"></div>\n<div class="poster__background-overlay"></div>\n<button class="poster__play-wrapper" tabindex="0"></button>\n')}},{key:"disableImage",get:function(){return this.options.poster&&this.options.poster.disableImage}},{key:"attributes",get:function(){return{class:"poster"}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"posterImage",get:function(){if(!this.options.src||!this.options.sources||!this.options.sources.length)return null;var e=this.video&&this.video.posterImageUrls||{},t=Object.keys(e),n=this.container.currentSize.height;return e[t.find((function(e){return e>=n}))||t[t.length-1]]}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Fn.WM_PLAY_REQUESTED,this.hidePlayButton),this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container.playback,Fn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,be.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,be.CONTAINER_STOP,this.onStop),this.listenTo(this.container,be.CONTAINER_ENDED,this.onStop)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.authorizePosterImage=!e.adult||this.options.allowRestrictedContent,this.authorizePosterImage&&!this.disableImage&&this.addPosterImage()}},{key:"onAutoplayBlocked",value:function(){this.stopListening(this.container.playback,Fn.WM_PLAY_REQUESTED),this.showPlayButton()}},{key:"onBuffering",value:function(){this._clicked=!0,this.hidePlayButton()}},{key:"onPlay",value:function(){this.$el.addClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.enableMediaControl()}},{key:"onStop",value:function(){this._clicked=!1,this.show()}},{key:"show",value:function(){this.$el.removeClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.disableMediaControl(),this.options.poster&&this.options.poster.disablePlayButton||V.isChromecast||this.showPlayButton()}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.playButtonVisible=!1}},{key:"showPlayButton",value:function(){this.playButtonVisible=!0,this.$playButton.show()}},{key:"clicked",value:function(e){if(e.stopPropagation(),!this._clicked&&this.playButtonVisible)return this.container.playback.trigger(Fn.WM_USER_PLAY_REQUESTED,{event:e}),this.container.playback.playback&&this.container.playback.consent(),this.container.playback.play(),this.hidePlayButton(),this._clicked=!0,!1}},{key:"render",value:function(){var e=this,t=Bn.getStyleFrom(vl,{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(t[0]),this.container.$el.append(this.el),this.$playButton=this.$el.find(".poster__play-wrapper"),this.$playButton.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir vdeo</span>'),this.options.autoPlay&&this.hidePlayButton(),yl.onAutoplayAvailable((function(){return e.hidePlayButton()}),this.options,(function(){yl.isAutoPlayMutedAllowed(e.options)||e._clicked||e.showPlayButton()})),this}},{key:"addPosterImage",value:function(){if(this.container.currentSize&&this.container.currentSize.height>0){var e=this.posterImage;if(e){this.container.options.poster=e,this.imgEl=this.$(".poster__background"),this.imgEl.css({"background-image":"url("+e+")"}),this.$el.prepend(this.imgEl[0]);var t=this.container.$el.find("video");t.length&&(t[0].poster=e)}}else this.listenToOnce(this.container,be.CONTAINER_RESIZE,this.addPosterImage)}}]),n}(Qe),bl=".clappr-player#wp3-player-0 .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 998;\n  width: 48px;\n  height: 48px;\n  margin: -24px 0 0 -24px;\n  cursor: default;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .spinner__svg {\n    line-height: 100%;\n    height: 100%;\n    width: 100%;\n    margin: 0; }\n    .clappr-player#wp3-player-0 .spinner__svg--animated {\n      -webkit-animation: rotate-spinner-player 0.5s linear infinite normal forwards;\n              animation: rotate-spinner-player 0.5s linear infinite normal forwards; }\n\n@-webkit-keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n\n@keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n";or(bl);var El=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).render(),i}return Ii(n,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<p class="visually-hidden">Carregando</p>\n<div class="spinner__svg spinner__svg--animated" aria-hidden="true">\n  <%= spinnerIcon %>\n</div>\n')}},{key:"playback",get:function(){return this.container.playback}},{key:"attributes",get:function(){return{class:"spinner",role:"alert"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Fn.WM_PLAY_REQUESTED,this.start),this.listenToOnce(this.playback,Fn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERING,this.start),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,be.CONTAINER_PLAY,this.stop),this.listenTo(this.container,be.CONTAINER_STOP,this.stop),this.listenTo(this.container,be.CONTAINER_ERROR,this.stop)}},{key:"onAutoplayBlocked",value:function(){this.stop(),this.stopListening(this.playback,Fn.WM_PLAY_REQUESTED),this.listenToOnce(this.playback,Fn.WM_USER_PLAY_REQUESTED,this.start)}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.stop(),this.stopListening(),this.enabled=!1}},{key:"start",value:function(){var e=this;this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.timeoutId=setTimeout((function(){e.$el.html(e.template({spinnerIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M2.4 12c0-5.302 4.298-9.6 9.6-9.6.663 0 1.2.537 1.2 1.2 0 .663-.537 1.2-1.2 1.2-3.976 0-7.2 3.224-7.2 7.2 0 .663-.537 1.2-1.2 1.2-.663 0-1.2-.537-1.2-1.2z" fill="#FFF"/>\n    </g>\n</svg>'})),e.isVisible=!0,e.container.trigger(Fn.WM_SPINNER_START),e.timeoutId=null}),300)}},{key:"stop",value:function(){this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible&&(this.isVisible=!1,this.$el.html(""),this.container.trigger(Fn.WM_SPINNER_STOP))}},{key:"resetTimeoutToStart",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"disableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop&&(this.waitingTimeUpdateToStop=!1,this.stopListening(this.container,be.CONTAINER_TIMEUPDATE))}},{key:"enableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop=!0,this.listenToOnce(this.container,be.CONTAINER_TIMEUPDATE,this.stop)}},{key:"onBufferfull",value:function(){var e=this.playback&&this.playback.videoEl;e&&e.currentTime>0?this.stop():this.enableTimeUpdateObserver()}},{key:"render",value:function(){var e=this,t=Bn.getStyleFrom(bl,{playerId:this.options.playerId});return this.container.$el.append(t[0]),this.container.$el.append(this.el),this.options.autoPlay?this.start():this.stop(),Un.autoplayManager.onAutoplayAvailable((function(){return e.start()}),this.options,(function(){Un.autoplayManager.isAutoPlayMutedAllowed(e.options)||e.stop()})),this}}]),n}(Qe),Al=/([a-z0-9\.\-]*)\.globoi?\.com/,kl=/[w]*\.?(techtudo)\.com\.br/,Tl="*null",_l=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).options.daxExtras||(i.options.daxExtras=i.options.daxextras),i.adError=!1,i.isReady=!1,i.started=!1,i.currentTime=0,i.embedScript(),i}return Ii(n,[{key:"name",get:function(){return"streamsense"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"waitForDFP",get:function(){return!V.isChromecast&&!V.isMobile}},{key:"isAdPlayback",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"currentTimeInMilliseconds",get:function(){return this.toMilliseconds(this.currentTime)}},{key:"streamsenseScript",get:function(){return"".concat(this.options.env.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/vendor/libs/comScore-JS-6.3.1.181004.min.js")}},{key:"scorecardMeasurement",get:function(){return"".concat(this.options.env.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/p?c1=2&c2=6035227&ns_site=globo")}},{key:"contentType",get:function(){var e="live"===this.video.kind,t=!e&&this.video.duration/1e3/60;return e?"vc13":!e&&t>=10?"vc12":"vc11"}}]),Ii(n,[{key:"bindEvents",value:function(){var e=this;this.waitForDFP&&(this.listenTo(this.container,Fn.DFP_CONTENT_RESUME,(function(){return e.checkAd(!1)})),this.listenTo(this.container,Fn.DFP_AD_ERROR,(function(){return e.checkAd(!0)})),this.listenTo(this.container,Fn.DFP_CONTENT_ENDED,this.bindPlaybackEvents)),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,(function(t){return e.setupStart(t)}))}},{key:"bindPlaybackEvents",value:function(){var e,t=this,n=(xi(e={},be.CONTAINER_TIMEUPDATE,this.timeUpdate),xi(e,be.CONTAINER_PLAY,this.onPlay),xi(e,be.CONTAINER_PAUSE,this.onPause),xi(e,be.CONTAINER_ERROR,this.onError),xi(e,be.CONTAINER_SEEK,this.onSeek),xi(e,be.CONTAINER_STATE_BUFFERING,this.onBuffering),e),i=xi({},be.PLAYBACK_ENDED,this.onEnded);Object.keys(n).forEach((function(e){var i=n[e];t.stopListening(t.container,e,i),t.listenTo(t.container,e,i)})),Object.keys(i).forEach((function(e){var n=i[e];t.stopListening(t.container.playback,e,n),t.listenTo(t.container.playback,e,n)}))}},{key:"setupStart",value:function(e){var t=this;this.video=e,!this.isReady&&!window.ns_||!this.dfpReady&&this.waitForDFP?this.listenToOnce(this,Fn.STREAMSENSE_READY,(function(){return t.setupStart(e)})):(this.start(),!this.waitForDFP&&this.bindPlaybackEvents())}},{key:"checkAd",value:function(e){this.adError=e,this.dfpReady=!0,!this.started&&this.setupStart(this.video),this.bindPlaybackEvents()}},{key:"ready",value:function(){window.ns_?(this.isReady=!0,this.trigger(Fn.STREAMSENSE_READY)):this.disable()}},{key:"embedScript",value:function(){var e=this;if(!window.ns_||!window.ns_.StreamingAnalytics){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",this.streamsenseScript),t.onload=function(){return e.ready()},t.onerror=function(){return e.ready()},document.head.appendChild(t)}}},{key:"start",value:function(){this.video&&ns_.StreamingAnalytics&&(this.streamSense=new ns_.StreamingAnalytics({liveEndpointURL:this.scorecardMeasurement}),this.setStreamSenseInitData(),this.setClip(),this.started=!0)}},{key:"setStreamSenseInitData",value:function(){this.streamSense.setLabels&&this.streamSense.setLabels({ns_st_mp:"Player",ns_st_mv:"7.51.1"}),this.streamSense.createPlaybackSession&&this.streamSense.createPlaybackSession({ns_st_pl:this.video.program+"-"+this.video.title})}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(Al)||e.match(kl);return t?t[1]:null}return null}},{key:"setClip",value:function(){var e={short:"vc11",full:"vc12",live:"vc13",collaborative:"vc21",ad:"va00"}[this.contentType],t=this.container.options.dax&&this.container.options.dax.url,n=this.container.options.dax&&this.container.options.dax;n||(n=this.container.options.domain);var i=n||t&&new URL(t).hostname||document.location.hostname,r={c3:this.getSubdomain(i),c4:this.video.channel,ns_st_ty:e,ns_st_ct:this.contentType,ns_st_pr:this.video.program,ns_st_ep:this.video.title,ns_st_st:this.video.channel,ns_st_pu:"Globo",ns_st_ge:this.video.category,ns_st_ci:""+this.video.id,ns_st_cu:t||document.location.href,ns_st_cl:this.video.duration||0,ns_st_cn:1,ns_st_pn:1,ns_st_tp:1,ns_st_ia:Tl,ns_st_ce:Tl,ns_st_ddt:Tl,ns_st_tdt:Tl};Object.assign(r,this.options.daxExtras),this.streamSense.getPlaybackSession&&this.streamSense.getPlaybackSession().setAsset(r)}},{key:"timeUpdate",value:function(e){this.currentTime=e.current}},{key:"onPlay",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPlay(this.currentTimeInMilliseconds)}},{key:"onPause",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPause(this.currentTimeInMilliseconds)}},{key:"onEnded",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds)}},{key:"onBuffering",value:function(){this.started&&!this.isAdPlayback&&this.video&&"Live"===this.video.type&&this.streamSense.notifyBufferStart(this.currentTimeInMilliseconds)}},{key:"onSeek",value:function(){this.onPause()}},{key:"onError",value:function(){}},{key:"toMilliseconds",value:function(e){return 1e3*e>>0}},{key:"destroy",value:function(){this.started&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds),Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(Xe),wl=Un.Ajax,Sl=Un.loadUrlAsImage,Cl=Un.hexGrf,Rl=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).url=i.webmediaApiHit,i}return Ii(n,[{key:"name",get:function(){return"webmedia_api_hit"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"type",get:function(){return V.isMobile?"mobile_browser":"desktop"}},{key:"environment",get:function(){return this.container.options.env}},{key:"webmediaApiHit",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://stats.video.globo.com"):"".concat(this.environment.protocol,"://stats.video.dev.globoi.com")}}]),Ii(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.fillIds),this.listenToOnce(this.container.playback,be.PLAYBACK_PLAY,this.seed),this.listenToOnce(this.container.playback,be.PLAYBACK_ENDED,this.bindEvents),this.listenToOnce(this.container.playback,be.PLAYBACK_STOP,this.bindEvents)}},{key:"fillIds",value:function(e){this.videoId=e.id,this.programId=e.programId}},{key:"seed",value:function(){var e=this;if(this.videoId&&this.programId){var t="hitStats_".concat(+new Date),n="/hits/".concat(this.videoId,"?type=").concat(this.type,"&callback=").concat(t),i="".concat(this.url).concat(n);wl.jsonp({url:i,callbackName:t,timeout:5e3}).then((function(t){return e.hit(t)}),this.logError)}else this.logError("no argument was passed")}},{key:"hit",value:function(e){var t=e.data,n="".concat(t).concat(Cl(t+"w3bM3d!A")),i="hitIncStats_".concat(+new Date),r="/hits/".concat(this.videoId,"/").concat(this.programId,"/").concat(n,"?type=").concat(this.type,"&callback=").concat(i),a="".concat(this.url).concat(r);Sl(a)}},{key:"logError",value:function(e){fe.error(this.name,"Webmedia api hit was not possible because ",e)}}]),n}(Xe),Il=/\n?(\r?\n){2}/,xl=/\r?\n/,Dl=/([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]*)?/,Pl=/[0-9:,]+/g,Ol=/[^\S\r\n]+$/gm,Ll=function(){function e(t){var n=this;Ci(this,e),this.subtitleItems=[];var i=t.replace(Ol,"").split(Il).filter((function(e){return n.isValid(e)}));this.subtitleItems=i.map((function(e){return n.parseSubtitle(e)}))}return Ii(e,[{key:"isCurrentSubtitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t>=e.start&&t<=e.end}},{key:"getSubtitleAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.subtitleItems[e]}},{key:"getSubtitleBy",value:function(e){for(var t=0,n=this.subtitleItems.length-1,i=Math.floor((t+n)/2);!this.isCurrentSubtitle(this.subtitleItems[i],e)&&t<n;)e>this.subtitleItems[i].start?t=i+1:n=i-1,i=Math.floor((t+n)/2);return this.isCurrentSubtitle(this.subtitleItems[i],e)?{index:i,subtitle:this.subtitleItems[i]}:void 0}},{key:"isValid",value:function(e){return e&&""!==e.trim()}},{key:"millisFromTimestamp",value:function(e){e=e.match(Dl);var t=60*parseInt(e[1],10)*60*1e3;return t+=60*parseInt(e[2],10)*1e3,t+=1e3*parseInt(e[3],10),e[4]&&(t+=parseInt(e[4],10)),t}},{key:"parseSubtitle",value:function(e){var t=-1,n=-1,i="",r=e.split(xl);if(r.length>=2){var a=r[1].match(Pl);if(a[0]&&(t=this.millisFromTimestamp(a[0])),a[1]&&(n=this.millisFromTimestamp(a[1])),-1!==t&&-1!==n)i=r.slice(2).join("<br>");return{start:t,end:n,content:i}}}}]),e}(),Ml="undefined"!=typeof window?window:void 0!==Ua?Ua:"undefined"!=typeof self?self:{},Nl=Array.prototype.slice,Ul=function(e,t){"length"in e||(e=[e]);e=Nl.call(e);for(;e.length;){var n=e.shift(),i=t(n);if(i)return i;n.childNodes&&n.childNodes.length&&(e=Nl.call(n.childNodes).concat(e))}};var Bl=Fl;function Fl(e,t){if(!(this instanceof Fl))return new Fl(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}Fl.prototype.nodeType=8,Fl.prototype.nodeName="#comment",Fl.prototype.toString=function(){return"[object Comment]"};var Vl=Hl;function Hl(e,t){if(!(this instanceof Hl))return new Hl(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}Hl.prototype.type="DOMTextNode",Hl.prototype.nodeType=3,Hl.prototype.nodeName="#text",Hl.prototype.toString=function(){return this.data},Hl.prototype.replaceData=function(e,t,n){var i=this.data,r=i.substring(0,e),a=i.substring(e+t,i.length);this.data=r+n+a,this.length=this.data.length};var jl=function(e){var t=this,n=e.type;e.target||(e.target=t);t.listeners||(t.listeners={});var i=t.listeners[n];if(i)return i.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)};var Kl=function(e,t){var n=this;n.listeners||(n.listeners={});n.listeners[e]||(n.listeners[e]=[]);-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)};var Gl=function(e,t){var n=this;if(!n.listeners)return;if(!n.listeners[e])return;var i=n.listeners[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)};var zl=Yl,Wl=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function Yl(e){switch(e.nodeType){case 3:return Xl(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],n=e.tagName;"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(n=n.toLowerCase());t.push("<"+n+function(e){var t=[];for(var n in e)ql(e,n)&&t.push({name:n,value:e[n]});for(var i in e._attributes)for(var r in e._attributes[i]){var a=e._attributes[i][r],o=(a.prefix?a.prefix+":":"")+r;t.push({name:o,value:a.value})}e.className&&t.push({name:"class",value:e.className});return t.length?$l(t):""}(e)+function(e){var t=e.dataset,n=[];for(var i in t)n.push({name:"data-"+i,value:t[i]});return n.length?$l(n):""}(e)),Wl.indexOf(n)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(Yl)):e.textContent||e.innerText?t.push(Xl(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+n+">"));return t.join("")}(e)}}function ql(e,t){var n=typeof e[t];return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function $l(e){var t=[];return e.forEach((function(e){var n=e.name,i=e.value;"style"===n&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var i=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+i+";"})),t}(i)),t.push(n+'="'+(Xl(i).replace(/"/g,"&quot;")+'"'))})),t.length?" "+t.join(" "):""}function Xl(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Zl="http://www.w3.org/1999/xhtml",Ql=Jl;function Jl(e,t,n){if(!(this instanceof Jl))return new Jl(e);var i=void 0===n?Zl:n||null;this.tagName=i===Zl?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}Jl.prototype.type="DOMElement",Jl.prototype.nodeType=1,Jl.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},Jl.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},Jl.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},Jl.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},Jl.prototype.setAttributeNS=function(e,t,n){var i=null,r=t,a=t.indexOf(":");(a>-1&&(i=t.substr(0,a),r=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[r]={value:n,prefix:i}},Jl.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],i=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},Jl.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},Jl.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},Jl.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},Jl.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},Jl.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},Jl.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},Jl.prototype.removeEventListener=Gl,Jl.prototype.addEventListener=Kl,Jl.prototype.dispatchEvent=jl,Jl.prototype.focus=function(){},Jl.prototype.toString=function(){return zl(this)},Jl.prototype.getElementsByClassName=function(e){var t=e.split(" "),n=[];return Ul(this,(function(e){if(1===e.nodeType){var i=(e.className||"").split(" ");t.every((function(e){return-1!==i.indexOf(e)}))&&n.push(e)}})),n},Jl.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return Ul(this.childNodes,(function(n){1!==n.nodeType||"*"!==e&&n.tagName.toLowerCase()!==e||t.push(n)})),t},Jl.prototype.contains=function(e){return Ul(this,(function(t){return e===t}))||!1};var eu=tu;function tu(e){if(!(this instanceof tu))return new tu;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}tu.prototype.type="DocumentFragment",tu.prototype.nodeType=11,tu.prototype.nodeName="#document-fragment",tu.prototype.appendChild=Ql.prototype.appendChild,tu.prototype.replaceChild=Ql.prototype.replaceChild,tu.prototype.removeChild=Ql.prototype.removeChild,tu.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")};var nu=iu;function iu(e){}iu.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},iu.prototype.preventDefault=function(){};var ru=au;function au(){if(!(this instanceof au))return new au;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var ou=au.prototype;ou.createTextNode=function(e){return new Vl(e,this)},ou.createElementNS=function(e,t){var n=null===e?null:String(e);return new Ql(t,this,n)},ou.createElement=function(e){return new Ql(e,this)},ou.createDocumentFragment=function(){return new eu(this)},ou.createEvent=function(e){return new nu(e)},ou.createComment=function(e){return new Bl(e,this)},ou.getElementById=function(e){return e=String(e),Ul(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},ou.getElementsByClassName=Ql.prototype.getElementsByClassName,ou.getElementsByTagName=Ql.prototype.getElementsByTagName,ou.contains=Ql.prototype.contains,ou.removeEventListener=Gl,ou.addEventListener=Kl,ou.dispatchEvent=jl;var su,lu=new ru,uu=void 0!==Ua?Ua:"undefined"!=typeof window?window:{};"undefined"!=typeof document?su=document:(su=uu["__GLOBAL_DOCUMENT_CACHE@4"])||(su=uu["__GLOBAL_DOCUMENT_CACHE@4"]=lu);var cu=su;var du=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null},hu=cu.createElement&&cu.createElement("textarea"),pu={rt:"ruby"},fu={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},gu={v:"title",lang:"lang"},vu={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var yu=function(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!pu[t.localName]||pu[t.localName]===e.localName}function r(t,n){var i=fu[t];if(!i)return null;var r=e.document.createElement(i),a=gu[t];return a&&n&&(r[a]=n.trim()),r}for(var a,o,s=e.document.createElement("div"),l=s,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((o=a,hu.innerHTML=o,o=hu.textContent,hu.textContent="",o)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=du(a.substr(1,a.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(!i(l,c))continue;if(h[2]){var p=h[2].split(".");p.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(Object.prototype.hasOwnProperty.call(vu,n)){var i=t?"background-color":"color",r=vu[n];c.style[i]=r}})),c.className=p.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return s},mu=function(e,t){return e&&t?yu(e,t):null};function bu(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}bu.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},bu.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},bu.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},bu.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},bu.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},bu.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},bu.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},bu.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}};var Eu=bu;function Au(){}Au.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)Object.prototype.hasOwnProperty.call(e,n)&&(t.style[n]=e[n])},Au.prototype.formatStyle=function(e,t){return 0===e?0:e+t};var ku=Au,Tu=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];var _u=function(e){for(var t=0;t<Tu.length;t++){var n=Tu[t];if(e>=n[0]&&e<=n[1])return!0}return!1};var wu=function(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(n,e);i=a(n);)for(var o=0;o<i.length;o++)if(t=i.charCodeAt(o),_u(t))return"rtl";return"ltr"};function Su(e,t,n){ku.call(this),this.cue=t,this.cueDiv=yu(e,t.text);var i={color:n.color||"rgba(255, 255, 255, 1)",backgroundColor:n.backgroundColor||"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:n.display||"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",padding:n.padding,borderRadius:n.borderRadius};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:wu(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}Su.prototype=Object.create(ku.prototype),Su.prototype.constructor=Su;var Cu=Su;var Ru=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i};var Iu=function(e,t,n,i){var r=new Eu(t),a=t.cue,o=Ru(a),s=[];if(a.snapToLines){var l;switch(a.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(o),d=n[l]+u,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),r.move(h,c)}else{var p=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new Eu(t)}var f=function(e,t){for(var r,a=new Eu(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(r=new Eu(e),o=l),e=new Eu(a)}return r||a}(r,s);t.move(f.toCSSCompatValues(n))},xu=function(e,t,n,i){if(!e||!t||!n)return null;for(i=i||{};n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],o=Eu.getSimpleBoxPosition(r),s=i.fontSize||Math.round(.05*o.height*100)/100,l=i.fontFamily||"sans-serif",u=Object.assign({font:s+"px "+l},i,u);!function(){for(var n,i,s=0;s<t.length;s++)i=t[s],n=new Cu(e,i,u),r.appendChild(n.div),Iu(e,n,o,a),i.displayState=n.div,a.push(Eu.getSimpleBoxPosition(n))}()}else for(var c=0;c<t.length;c++)r.appendChild(t[c].displayState)};function Du(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}Du.prototype=Object.create(Error.prototype),Du.prototype.constructor=Du,Du.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};var Pu=Du;function Ou(){this.values=Object.create(null)}Ou.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Lu=Ou;var Mu=function(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length)t(o[0],o[1])}};var Nu=function(e,t,n){var i=e;function r(){var t=du(e);if(null===t)throw new Pu(Pu.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new Pu(Pu.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new Lu;Mu(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line",-1)}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position",-1)}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)},Uu=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new e.TextDecoder("utf8"),this.regionList=[]};Uu.prototype.reportOrThrowError=function(e){if(!(e instanceof Pu))throw e;this.onparsingerror&&this.onparsingerror(e)},Uu.prototype.parse=function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?Mu(e,(function(e,n){switch(e){case"X-TIMESTAMP-MAP":!function(e){var n=new Lu;Mu(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",du(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}}),/=/):Mu(e,(function(e,n){switch(e){case"Region":!function(e){var n=new Lu;if(Mu(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new Lu;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Pu(Pu.Errors.BadSignature);t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{Nu(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},Uu.prototype.flush=function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Pu(Pu.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this};var Bu=Uu;function Fu(e){return e.default||e}function Vu(){}Vu.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Vu.convertCueToDOMTree=Fu(mu),Vu.processCues=Fu(xu),Vu.Parser=Fu(Bu);var Hu=Vu;var ju,Ku=(ju=mu).default||ju,Gu={"":1,lr:1,rl:1},zu={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Wu(e){return"string"==typeof e&&(!!zu[e.toLowerCase()]&&e.toLowerCase())}function Yu(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,o=t,s=n,l=null,u="",c=!0,d="auto",h="start",p="auto",f="auto",g=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Gu[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Wu(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Wu(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=Wu(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Yu.prototype.getCueAsHTML=function(){return Ku(window,this.text)};var qu=Yu,$u={"":!0,up:!0};function Xu(e){return"number"==typeof e&&e>=0&&e<=100}var Zu=function(){var e=100,t=3,n=0,i=100,r=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Xu(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Xu(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!Xu(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Xu(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Xu(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t=function(e){return"string"==typeof e&&!!$u[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):o=t}}})},Qu=Fa((function(e){var t=e.exports={WebVTT:Hu,VTTCue:qu,VTTRegion:Zu};Ml.vttjs=t,Ml.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=Ml.VTTCue,a=Ml.VTTRegion;t.shim=function(){Ml.VTTCue=n,Ml.VTTRegion=i},t.restore=function(){Ml.VTTCue=r,Ml.VTTRegion=a},Ml.VTTCue||t.shim()})),Ju=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this)).subtitleItems=i.parseVttFile(e),i}return Ii(n,[{key:"init",value:function(){return{parser:new Qu.WebVTT.Parser(window,Qu.WebVTT.StringDecoder()),cues:[]}}},{key:"bindEvents",value:function(e,t){e.onparsingerror=function(e){fe.error(this.name,"\n Error when trying to parse WebVTT file: ".concat(e))},e.oncue=function(e){t.push(e)}}},{key:"parseVttFile",value:function(e){if(e){var t=this.init(),n=t.parser,i=t.cues;return this.bindEvents(n,i),n.parse(e),n.flush(),i}}},{key:"getActiveCue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subtitleItems,n=Hi(t),i=n.length,r=0,a=i-1,o=Math.floor((i-1)/2),s=n[o],l=n.splice(0,o+1),u=n;if(!(r>a)&&s.startTime)return e>=s.startTime&&e<=s.endTime?[s]:i<=1?[]:e<=s.startTime?this.getActiveCue(e,l):e>s.startTime?this.getActiveCue(e,u):void 0}},{key:"processActiveCue",value:function(e,t,n){Qu.WebVTT.processCues(window,e,t,n)}}]),n}(Ae),ec='.clappr-player#wp3-player-0 .subtitle {\n  background-color: rgba(0, 0, 0, 0.7);\n  position: relative;\n  font-family: "clearsans-bold", sans-serif;\n  font-size: 14px;\n  color: #f1f1f1;\n  line-height: 1.4;\n  margin: auto;\n  display: inline-block;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .subtitle--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-show, .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n    transition: opacity 0.3s ease-in-out; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-show {\n    opacity: 0.5; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .subtitle__wrapper {\n    display: flex;\n    bottom: 0;\n    position: absolute;\n    width: 100%;\n    z-index: 993;\n    will-change: transform;\n    transition: transform 0.3s ease-out; }\n    .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt {\n      /* This section is responsible for override wrapper styles for WebVTT resources */\n      bottom: auto;\n      height: 100%; }\n      .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle {\n        background-color: transparent;\n        /* The WebVTT parser lib calculates based on the screen size where to put\n            the subtitles. This leaves 10/12 portion so it wont be placed on the screen limit */\n        height: 98%;\n        width: 98%; }\n        .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle i {\n          font-family: "clearsans-bolditalic"; }\n\n.clappr-player#wp3-player-0 .cast-enabled .subtitle__wrapper, .clappr-player#wp3-player-0 .cast-connecting .subtitle__wrapper {\n  display: none; }\n';or(ec);var tc={fontFamily:"clearsans-bold",padding:"0.2em",borderRadius:"0.2em",display:"inline-block"},nc=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).render(),i.createCachedElements(),i.idPlayback=i.container.playback,i.enableWebVtt=!!i.options.shouldDeviceUseWebVTT,i}return Ii(n,[{key:"attributes",get:function(){return{class:"subtitle__wrapper","data-subtitle":""}}},{key:"name",get:function(){return"subtitle"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<p class="subtitle"></p>\n')}},{key:"tagVideo",get:function(){return this.idPlayback.videoEl}},{key:"subtitleTrackAutoHandled",get:function(){return V.isiOS||V.isSafari&&"hls_fairplay_playback"===this.idPlayback.innerPlaybackName}}]),Ii(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.updateSubtitle),this.listenTo(this.container,Fn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Fn.WM_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,be.CONTAINER_MEDIACONTROL_SHOW,(function(){return e.onMediaControlShow()})),this.listenTo(this.container,be.CONTAINER_MEDIACONTROL_HIDE,(function(){return e.onMediaControlHide()})),this.listenTo(this.container,Fn.WM_MASTERTOPIP,(function(){return e.$el.hide()})),this.listenTo(this.container,Fn.WM_PIPTOMASTER,(function(){return e.$el.show()})),this.listenTo(this.container,be.CONTAINER_RESIZE,this.onPlayerResize),this.listenToOnce(this.container,be.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container.playback,Fn.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onPlay",value:function(){this.createCachedElements(),this.updateCurrentSize(),this.updateResponsiveStyle()}},{key:"onCanPlay",value:function(){var e=this;this.listenToOnce(this.idPlayback.playback,be.PLAYBACK_SUBTITLE_CHANGED,(function(){e.innerPlaybackSubtitleChanged=!0}))}},{key:"updateCurrentSize",value:function(){this.currentWidth=this.container.el.clientWidth,this.currentHeight=this.container.el.clientHeight}},{key:"onSubtitleAvailable",value:function(e,t){this.availableSubtitles=e,this.enableWebVtt=e.some((function(e){return"webvtt"===e.type})),this.generateSubtitleParser(t),this.updateStyle(),this.shouldCreateSubtitleTrack()&&!this.innerPlaybackSubtitleChanged?this.listenToOnce(this.idPlayback.playback,be.PLAYBACK_SUBTITLE_CHANGED,this.setInitialSubtitle):this.setInitialSubtitle()}},{key:"shouldCreateSubtitleTrack",value:function(){return!this.subtitleTrackAutoHandled&&this.enableWebVtt}},{key:"generateSubtitleParser",value:function(e){var t=this;this.availableContents=e.map((function(e){return e&&(t.enableWebVtt?new Ju(e):new Ll(e))}))}},{key:"onMediaControlShow",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-hide").addClass("subtitle--opacity-media-control-show")}},{key:"onMediaControlHide",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-show").addClass("subtitle--opacity-media-control-hide")}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.updateSize(),this.updateStyle()}},{key:"setInitialSubtitle",value:function(){var e=this,t=this.availableSubtitles.find((function(e){return e.selected}));this.subtitleTrackAutoHandled?setTimeout((function(){return e.onSubtitleChanged(t)})):this.onSubtitleChanged(t)}},{key:"onSubtitleChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.subtitleTrackAutoHandled)this.changeTextTrack(e);else{var t=this.availableContents[e.id];t?(this.subtitleParser=t,this.currentIndex=0,this.$el.show(),this.$subtitle.addClass("subtitle--hidden")):(delete this.subtitleParser,delete this.currentIndex,this.$subtitle.html(""),this.$el.hide())}}},{key:"changeTextTrack",value:function(e){var t=this.tagVideo.textTracks;Object.values(t).forEach((function(e){return e.mode="hidden"}));var n=Object.values(t).find((function(t){return e.keys.includes(t.language)}));n&&(n.mode="showing")}},{key:"updateSize",value:function(){Un.applySizeClass(this.$el,this.container.$el.width())}},{key:"updateStyle",value:function(){this.enableWebVtt&&this.processVttActiveCue(),this.updateFontSize(),this.updateVerticalPosition()}},{key:"updateFontSize",value:function(){this.$subtitle.css({fontSize:this.getFontSize()})}},{key:"updateVerticalPosition",value:function(){this.enableWebVtt?this.$el.css({bottom:"auto"}):this.$el.css({bottom:this.getVerticalPosition()})}},{key:"updateSubtitle",value:function(e){this.subtitleParser&&(this.enableWebVtt?this.updateWebVTTSubtitleContent(e.current):this.updateSrtSubtitleContent(1e3*e.current))}},{key:"updateWebVTTSubtitleContent",value:function(e){this.subtitleParser.subtitleItems&&(this.activeSubtitle=this.subtitleParser.getActiveCue(e),this.activeSubtitle&&!!this.activeSubtitle.length?(this.$el.addClass("subtitle__wrapper--override-webvtt"),this.$subtitle.removeClass("subtitle--hidden"),this.processVttActiveCue()):this.$subtitle.addClass("subtitle--hidden"))}},{key:"processVttActiveCue",value:function(){this.resetVttCueStyle(),this.subtitleParser&&this.subtitleParser.processActiveCue(this.activeSubtitle,this.$subtitle[0],this.getVttStyles())}},{key:"resetVttCueStyle",value:function(){this.activeSubtitle&&this.activeSubtitle[0]&&(this.activeSubtitle[0].hasBeenReset=this.activeSubtitle[0].playerWidth!==this.currentWidth,this.activeSubtitle[0].playerWidth=this.currentWidth)}},{key:"getVttStyles",value:function(){return Pi({fontSize:this.getFontSize()},tc)}},{key:"updateSrtSubtitleContent",value:function(e){var t=this.subtitleParser.getSubtitleAt(this.currentIndex),n=this.subtitleParser.isCurrentSubtitle(t,e);if(!n){var i=this.currentIndex+1,r=this.subtitleParser.getSubtitleAt(i);if(n=this.subtitleParser.isCurrentSubtitle(r,e))this.currentIndex=i,t=r;else if(r&&(e>r.end||e<t.start)){var a=this.subtitleParser.getSubtitleBy(e);t=a&&a.subtitle,a&&(this.currentIndex=a.index),n=!!a}}t&&this.$subtitle.html()!=t.content&&this.$subtitle.html(t.content),n?this.$subtitle.removeClass("subtitle--hidden"):this.$subtitle.addClass("subtitle--hidden")}},{key:"getMediaControlLowerHeight",value:function(){return this.$mediaControlPanelLower&&this.$mediaControlPanelLower.getBoundingClientRect().height||80}},{key:"getVerticalPosition",value:function(){return this.currentHeight/12}},{key:"getFontSize",value:function(){return this.currentWidth<560?14:2.5*this.currentWidth/100}},{key:"createCachedElements",value:function(){this.$subtitle=this.$el.find(".subtitle");var e=".clappr-player#wp3-player-".concat(this.options.playerId," .media-control-panel__lower");this.$mediaControlPanelLower=document.querySelector(e)}},{key:"render",value:function(){var e=Bn.getStyleFrom(ec,{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.container.$el.append(this.el),this}}]),n}(Qe),ic=function(){function e(){Ci(this,e),this.youboraTimersStopped=!1,this.metrics={},this.youboraTimers={},this.initYouboraTimers()}return Ii(e,[{key:"YOUBORA_SERVICES",get:function(){return["init","adInit","adStart","adJoinTime","adStop","joinTime"]}}]),Ii(e,[{key:"initYouboraTimers",value:function(){var e=this;this.YOUBORA_SERVICES.forEach((function(t){return e.youboraTimers[t]=0}))}},{key:"delta",value:function(e,t){var n=this.youboraTimers[e]-this.youboraTimers[t];return n>0?n:0}},{key:"onTimemark",value:function(e){var t=e.time,n=e.service,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="init"!==n&&this.youboraTimersStopped;-1===this.YOUBORA_SERVICES.indexOf(n)||r||(this.youboraTimers[n]=t,this.setAdMetrics(),this.setDFPMetrics(),this.setContentMetrics(),this.willSendParams(n)&&(this.setParams(i),this.initYouboraTimers()))}},{key:"setAdMetrics",value:function(){this.metrics.adInitTime=this.delta("adInit","init"),this.metrics.adStartTime=this.delta("adStart","adInit"),this.metrics.adJoinTime=this.delta("adJoinTime","adStart")}},{key:"setDFPMetrics",value:function(){this.metrics.dfpSetupTime=this.metrics.adStartTime+this.metrics.adJoinTime,this.metrics.dfpRunTime=this.delta("adStop","adInit"),this.metrics.dfpTime=this.metrics.dfpSetupTime?this.metrics.dfpSetupTime:this.metrics.dfpRunTime;var e=this.youboraTimers.adStop&&this.youboraTimers.adJoinTime;this.metrics.dfpWatchedTime=e?this.youboraTimers.adStop-this.youboraTimers.adJoinTime:0}},{key:"setContentMetrics",value:function(){this.metrics.contentStartTime=this.youboraTimers.adStop?this.delta("joinTime","adStop"):0,this.metrics.joinTime=this.delta("joinTime","init")-this.metrics.dfpWatchedTime}},{key:"willSendParams",value:function(e){var t="joinTime"===e;return this.youboraTimersStopped=t,t}},{key:"setParams",value:function(e){e.youboraMetrics=this.metrics}}]),e}(),rc=wi.Video,ac=Un.getExperimentsList,oc=Un.API_VERSION,sc=Un.getPlatformName,lc=Un.toQueryString,uc=Un.secondsToMillis,cc=Un.getCookie,dc=Un.session,hc=Un.User,pc=Un.autoplayManager,fc=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).initValues(),i.video={},i.setVideoSessionID(),i.browser="".concat(V.name).concat(V.version),i.playerId=Qt.playerId,i.url="".concat(i.horizonHost,"/auth-session/activity/webmedia/watch"),i.domain=i.options.domain||window.location.hostname.replace("www.","").split(".")[0],i.experiments=ac(i.options),pc.onAutoplayAvailable(i.onAutoplaySuccess.bind(Ni(i)),i.options,i.onAutoplayFailed.bind(Ni(i))),i.youboraTimemark=new ic,i.externalData={},i.onDFPInit(),i}return Ii(n,[{key:"shouldIgnoreVolumeUpdate",value:function(e,t){var n=!this.isReady&&!this.container.playback.isPlaying();return null===e||n||!t}},{key:"setYouboraParams",value:function(e){var t=this.externalData&&this.externalData.youboraMetrics||{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}},{key:"setVideoSessionID",value:function(){this.params.video_session_id=dc.getVideoSessionId(this.options.playerId)}},{key:"setDeviceInfo",value:function(){var e=this;Object.keys(this.options.deviceInfo).forEach((function(t){e.params["device_".concat(t)]=e.options.deviceInfo[t]}))}},{key:"getPercentage",value:function(e){return 0===e?e:e/this.session.duration*100}},{key:"initValues",value:function(){this.params={},this.dfpInit=0,this.bufftime=0,this.playRequestTime=0,this.isBuffering=!1,this.hasStartedClip=!1,this.isPlaying=!1}},{key:"name",get:function(){return"horizon"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"isLive",get:function(){return"live"===this.video.kind||"live"===this.container.getPlaybackType()}},{key:"isAdsDisabled",get:function(){return this.options.skipDFP||!1}},{key:"currentTime",get:function(){return this.currentTimeValue},set:function(e){this.currentTimeValue=e}},{key:"horizonHost",get:function(){return"".concat(this.options.env.protocol,"://horizon.globo.com")}},{key:"tenant",get:function(){var e=this.options.horizon;return(void 0===e?{}:e).tenant||"unknown"}},{key:"isEncrypted",get:function(){var e=this.video&&this.video.encrypted;return void 0!==e?e:"unknown"}},{key:"playbackName",get:function(){var e=this.container,t=e&&e.playback;return t?t.innerPlaybackName||t.name||"":null}},{key:"bufferingTime",get:function(){this.isBuffering&&(this.bufftime+=le.now()-this.buffstarttime,this.buffstarttime=le.now());var e=this.bufftime;return this.bufftime=0,Math.trunc(e)}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container,be.CONTAINER_PLAY,this.onFirstPlaying),this.listenToOnce(this.container.playback,Fn.WM_PLAY_REQUESTED_READY,this.onPlayRequested),this.listenTo(this.container,be.CONTAINER_PLAY,this.play),this.listenTo(this.container,be.CONTAINER_PAUSE,this.pause),this.listenTo(this.container,be.CONTAINER_SEEK,this.seek),this.listenTo(this.container,be.CONTAINER_TIMEUPDATE,this.timeUpdate),this.listenTo(this.container,be.CONTAINER_ENDED,this.end),this.listenTo(this.container,be.CONTAINER_DESTROYED,this.end),this.listenTo(this.container,be.CONTAINER_STOP,this.end),this.listenTo(this.container,be.CONTAINER_STATS_REPORT,this.onOldStatsReport),this.listenTo(this.container,be.CONTAINER_ERROR,this.onError),this.listenTo(this.container,Fn.WM_STATS_REPORTED,this.onStatsReport),this.listenTo(this.container,Fn.WM_MUTED,this.onVolumeMuted),this.listenTo(this.container,Fn.WM_UNMUTED,this.onVolumeUnmuted),this.listenTo(this.container,Fn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Fn.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.container,Fn.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,Fn.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenTo(this.container,Fn.WM_BITRATE_CAP,this.onBitrateCap),this.listenTo(this.container,Fn.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,Fn.WM_GA_UNTRACKED_EVENT,this.onGoogleAnalyticsEventUntracked),this.listenTo(this.container.playback,Fn.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,Fn.WILL_SELECT_FALLBACK_SOURCE,this.onFallbackSource),this.listenTo(this.container.playback,Fn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,Fn.WILL_RENEW_RESOURCE,this.onRenewResource),this.listenTo(this.container.playback,Fn.WM_WROOM_WAITING,this.onWRWaiting),this.listenToOnce(this.container,be.Custom.DAI_ERROR,this.onDaiError),this.listenToOnce(this.container,Fn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats)}},{key:"onPlayRequested",value:function(){this.playRequestTime=le.now(),this.isReady=!0}},{key:"onMetadataLoaded",value:function(e){e&&(this.video=e,this.params.playback_id=e.id,this.params.subscriber_only=e.isSubscriberOnly,this.params.title=e.title,this.params.program=e.program,this.params.channel=e.channel,this.params.kind=e.kind,this.setExperimentsParams())}},{key:"setExperimentsParams",value:function(){this.experiments.length>0&&this.experiments[0]&&(this.params.experiment_1=this.experiments[0]),this.experiments.length>1&&this.experiments[1]&&(this.params.experiment_2=this.experiments[1])}},{key:"onStreamingDataLoaded",value:function(e){var t=e.pop,n=e.host;this.params.host=n,this.params.pop=t}},{key:"onFallbackSource",value:function(e){this.notifyAction(uc(this.currentTime),"will_fallback_source",e)}},{key:"onFallbackSourceSelected",value:function(e){this.notifyAction(uc(this.currentTime),"fallback_source_selected",e)}},{key:"onRenewResource",value:function(e){this.notifyAction(uc(this.currentTime),"willRenewResource",e)}},{key:"onDaiError",value:function(e){if(e.notifiable){var t=e.errorCode,n=e.errorMessage;this.notifyAction(uc(this.currentTime),"dai_error",{daiErrorCode:t,daiErrorMessage:n})}}},{key:"onBitrateCap",value:function(e){this.params.cap_bitrate=e}},{key:"onDFPInit",value:function(){this.dfpInit=le.now()}},{key:"onAdNotServed",value:function(){this.params.dfp_status="not served"}},{key:"onAdError",value:function(){this.params.dfp_status="error"}},{key:"onOldStatsReport",value:function(e){this.isLive&&(this.params.dvr=e.dvr?1:0)}},{key:"onStatsReport",value:function(e){e.extra.bitratesHistory.length>0&&(this.params.nominal_bitrate=e.extra.bitratesHistory[e.extra.bitratesHistory.length-1].bitrate),this.params.avg_bitrate=Math.trunc(e.extra.bitrateWeightedMean),this.params.session_time=Math.trunc(e.timers.session),this.params.watch_time=Math.trunc(e.timers.watch)}},{key:"onFirstPlaying",value:function(){if(this.listenToOnce(this.container,be.CONTAINER_STATE_BUFFERING,this.buffering),this.isAd&&!this.dfp_startup_time)return this.params.dfp_status="delivered",void(this.params.dfp_startup_time=Math.trunc(le.now()-this.dfpInit));this.params.startup_time=Math.trunc(le.now()-this.playRequestTime)}},{key:"onVolumeMuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(uc(this.currentTime),{mute_status:!0})}},{key:"onVolumeUnmuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(uc(this.currentTime),{mute_status:!1})}},{key:"onSubtitleChanged",value:function(e){this.hasStartedClip&&this.notify(uc(this.currentTime),{subtitle_status:"none"===e.language?"disabled":"enabled",subtitle_language:e.language})}},{key:"onLocationAvailable",value:function(e){this.params.lat=e.latitude,this.params.long=e.longitude}},{key:"onCurrentProgramUpdated",value:function(e){void 0!==e.program&&(this.params.program=e.program),void 0!==e.channel&&(this.params.channel=e.channel)}},{key:"onGoogleAnalyticsEventUntracked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;this.params.ga_untracked_event=n}},{key:"onWRWaiting",value:function(){this.params.wroom=1,this.isLive?this.ping():this.sendRequest("".concat(this.url,"?").concat(lc(this.params)))}},{key:"onAutoplaySuccess",value:function(){this.params.autoPlayAvailable=!0}},{key:"onAutoplayFailed",value:function(){this.params.autoPlayAvailable=!1}},{key:"updateAuthorizedWRState",value:function(){this.params.wroom=0,this.ping()}},{key:"onResourceRequestStats",value:function(e){var t=e.retries,n=e.usedFallback;this.retryHistory=JSON.stringify({attempts:t,fallback:n})}},{key:"onResourceReady",value:function(){this.updateAuthorizedWRState(),!this.session&&this.startSession(),this.retryHistory&&this.notifyRequestStats(this.retryHistory)}},{key:"play",value:function(){var e=this;this.isAd||(this.notifyPlayOrSeek(uc(this.currentTime)),this.isPlaying||(this.breakTimerId=setInterval((function(){e.isPlaying=!0,e.notifyRelevantPoint(uc(e.currentTime))}),15e3),this.ping()),this.doingSeek=!1,this.paused=!1)}},{key:"pause",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.userInvoked,r=void 0!==i&&i;this.pauseTimerId=setTimeout((function(){t.notifyAction(uc(t.currentTime),"pause",{user_invoked:r})}),100)}},{key:"seek",value:function(){this.pauseTimerId&&(clearTimeout(this.pauseTimerId),this.pauseTimerId=null),this.doingSeek=!0}},{key:"timeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentTime=e.current}},{key:"onBufferStart",value:function(){this.isBuffering=!0,this.buffstarttime=le.now()}},{key:"onBufferEnd",value:function(){this.isBuffering=!1,this.bufftime+=le.now()-this.buffstarttime}},{key:"buffering",value:function(){this.onBufferStart(),this.listenToOnce(this.container,be.CONTAINER_STATE_BUFFERFULL,this.bufferfull)}},{key:"bufferfull",value:function(){this.onBufferEnd(),this.listenToOnce(this.container,be.CONTAINER_STATE_BUFFERING,this.buffering)}},{key:"end",value:function(){this.notifyAction(uc(this.currentTime),"stop"),this.cancelBreakTimer(),this.cancelPing(),this.initValues()}},{key:"clear",value:function(){this.params.dfp_startup_time=null,this.params.dfp_status=null}},{key:"cancelBreakTimer",value:function(){clearInterval(this.breakTimerId),clearInterval(this.playOrSeekTimerId),this.breakTimerId=null,this.isPlaying=!1}},{key:"cancelPing",value:function(){this.isLive&&(clearInterval(this.pingTimerId),this.pingTimerId=null)}},{key:"startSession",value:function(){var e=(new Date).getTime().toString();this.lastNotifiedPoint=-1,this.totalActions=0,this.isLive&&(this.params.signal=this.video.selectedResource.signal,this.params.started_at=e),this.video.providerId&&(this.params.gst=cc("GST")),this.session={duration:this.video.duration,started_at:e,play:0,seek:0,pause:0,stop:0,mute:0,unmute:0,subtitle_enable:0,subtitle_disable:0,will_fallback_source:0,fallback_source_selected:0,willRenewResource:0,dai_error:0,retry_history:0},this.doingSeek=!1,this.hasStartedClip=!0}},{key:"notifyRelevantPoint",value:function(e){if(this.hasStartedClip){var t=this.getPercentage(e),n=5*Math.floor(t/5);n>this.lastNotifiedPoint?(this.notify(e),this.lastNotifiedPoint=n):this.verbose&&fe.info(this.name,"do not notify: ".concat(n," !> ").concat(this.lastNotifiedPoint))}}},{key:"notifyPlayOrSeek",value:function(e){var t=this,n=this.doingSeek;this.playOrSeekTimerId=setTimeout((function(){n?t.notifyAction(e,"seek"):t.notifyAction(e,"play")}),100)}},{key:"notifyRequestStats",value:function(e){this.notifyAction(uc(this.currentTime),"retry_history",{retryHistory:e})}},{key:"notifyAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.hasStartedClip){var i=++this.session[t];n["".concat(t,"_total")]=i,n["".concat(t,"_id_").concat(i)]=e,this.notify(e,n)}}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.hasStartedClip){this.setCommonParams();var n=++this.totalActions,i=Pi(Pi(Pi({},t),this.params),{},xi({duration:this.session.duration,started_at:this.session.started_at,last_at:(new Date).getTime().toString(),btime:this.bufferingTime},"time_".concat(n),e));1===n&&this.setYouboraParams(i),this.sendRequest("".concat(this.url,"?").concat(lc(i))),this.clear()}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isLive?"watchlive":"watch";this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/").concat(t),this.params.started_at=(new Date).getTime().toString(),this.params.error=e.code||"unknown",this.params.errorDescription=e.description||"unknown",this.params.retryHistory=this.retryHistory,this.setCommonParams(),this.setExperimentsParams(),this.sendRequest("".concat(this.url,"?").concat(lc(this.params)))}},{key:"ping",value:function(){var e=this;this.isLive&&(this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/watchlive"),this.params.dvr=this.params.dvr||0,this.setCommonParams(),this.pingTimerId||(this.sendPing(),this.pingTimerId=setInterval((function(){e.sendPing()}),6e4)))}},{key:"sendPing",value:function(){this.params.btime=this.bufferingTime,this.params.n=++this.totalActions;var e=Object.assign({},this.params);1===this.totalActions&&this.setYouboraParams(e),this.sendRequest("".concat(this.url,"?").concat(lc(e)))}},{key:"sendRequest",value:function(e){return V.isSmartTvEnvironment?this.sendRequestWithHeaders(e):this.sendRequestAsJsonP(e)}},{key:"sendRequestAsJsonP",value:function(e){var t=new Image;return t.src=e,t}},{key:"sendRequestWithHeaders",value:function(e){var t=this;U.ajax({url:e,xhrFields:{withCredentials:!0},headers:xi({},this.options.token?"GLBID":"GLBUID",this.options.token||hc.uid),error:function(e,n,i){return fe.warn(t.name,"could not send request: ".concat(i))}})}},{key:"setCommonParams",value:function(){var e,t=(null===(e=this.video)||void 0===e?void 0:e.id)||this.options.src||this.options.sources,n=this.video&&this.video.playerType||rc.getPlayerType();this.setVideoSessionID(),this.options.deviceInfo&&this.setDeviceInfo(),this.params.player_id=this.playerId,this.params.browser=this.browser,this.params.object="video:".concat(t),this.params.playback_id=this.params.playback_id||t,this.params.playback=this.playbackName,this.params.player_type=n,this.params.platform=sc(n),this.params.ads_disabled=this.isAdsDisabled,this.params.encrypted=this.isEncrypted,this.params.url=document.location.href,this.params.domain=this.domain,this.params.cdn=this.video.cdn,this.params.player_version="7.51.1",this.params.api_version=oc,this.params.tenant=this.tenant}}]),n}(Xe),gc={ambient:"dimension1",provider:"dimension21",userId:"dimension22",platform:"dimension36",platform_manufacturer:"dimension37",platform_model:"dimension38",arc:"dimension100",signal:"dimension101",id:"dimension102",channel:"dimension103",program:"dimension104",episode:"dimension105",domain:"dimension106",type:"dimension107",kind:"dimension108",length_range:"dimension109",gsat_op:"dimension110",pisp:"dimension111",channel_id:"dimension112",program_id:"dimension113",keep_watching:"dimension114",pub_err:"dimension115",exb_date:"dimension116",creation_date:"dimension117",length:"dimension118",auto_play:"dimension119",quality:"dimension120",player_version:"dimension121",schema_version:"dimension122",affiliate_code:"dimension123",service_id:"dimension124",dvr_status:"dimension128",current_subtitle:"dimension130",current_audio:"dimension131",EPG_program_id:"dimension132",EPG_program:"dimension133",EPG_channel_id:"dimension134",EPG_channel:"dimension135",video_session_id:"dimension136"},vc={start:"metric100",seconds_watched:"metric101",complete:"metric102",bucket10:"metric103",bucket25:"metric104",bucket50:"metric105",bucket75:"metric106",bucket90:"metric107",bucket100:"metric108",seek:"metric109",load:"metric110",load_time:"metric111",skip_recap_displayed:"metric112",skip_recap_clicked:"metric113",skip_intro_displayed:"metric114",skip_intro_clicked:"metric115",quick_seek:"metric116",start_over_clicked:"metric117",auto_skip_recap:"metric118",start_over_displayed:"metric119"},yc=Un.session,mc=Un.embedScript,bc=Un.registerGlobal,Ec=Un.LocalStorage,Ac=Un.now,kc=Un.seekStringToSeconds,Tc=Un.toDurationString,_c=Un.toLowerCase,wc=Un.User,Sc="object"===Si(window.onbeforeunload)?"beforeunload":"unload",Cc=1,Rc=2,Ic=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).videoUA="prod"===i.options.env.name?"UA-296593-59":"UA-296593-62",i.productUA=i.options.ga&&i.options.ga.productUA||i.options.gaProductua,i.gaClientId=i.options.ga&&i.options.ga.productClientId,i.gaExtras=i.options.ga&&i.options.ga.extras||{},i.isPaused=!1,i.seekCounter=0,i.checkpoint=0,i.trackedPlayTime=0,i.loadTimer=0,i.sentBuckets={},i.deviceInfo=i.options.deviceInfo||{},bc("ga"),window.ga?(i.getGAClientId(),i.setupAnalytics()):mc("https://www.google-analytics.com/analytics.js").then((function(){i.getGAClientId(),i.setupAnalytics()})),i}return Ii(n,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"schemaVersion",get:function(){return"2.0"}},{key:"inflatedPlaytime",get:function(){return this.isLive?300:this.video.duration/1e3*3}},{key:"shouldResetPlaytime",get:function(){return this.trackedPlayTime>this.inflatedPlaytime||this.trackedPlayTime<0}},{key:"oneDayInMiliseconds",get:function(){return 864e5}},{key:"playerTracker",get:function(){return"playerTracker".concat(this.options.playerId)}},{key:"productTracker",get:function(){return"productTracker".concat(this.options.playerId)}},{key:"ambient",get:function(){return V.isSmartTvEnvironment?"app_tv":"web"}},{key:"platform",get:function(){return V.isSmartTvEnvironment?"big screen":V.isMobile?"mobile":"desktop"}}]),Ii(n,[{key:"getGAClientId",value:function(){if(!this.gaClientId)if(window.GoogleAnalyticsObject&&window[window.GoogleAnalyticsObject]&&window[window.GoogleAnalyticsObject].getAll){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ji(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(window[window.GoogleAnalyticsObject].getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.get("trackingId")===this.productUA&&(this.gaClientId=n.get("clientId"),fe.info(this.name,"Getting GA product client id via GoogleAnalyticsObject"))}}catch(e){t.e(e)}finally{t.f()}}else{var i=Ec.loadRaw("wm.player._videoGa");if(!i){var r=new Date;r.setFullYear(r.getFullYear()+2),Ec.store("_videoGa",wc.uid,r)}this.gaClientId=i,fe.info(this.name,"Player has not found a valid client id. It`s been generated by the player.")}}},{key:"setupAnalytics",value:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,this.createGATrackers()}},{key:"createGATrackers",value:function(){var e=this.mountGAInitialParameters();ga("create",this.videoUA,"auto",this.playerTracker,e),ga("".concat(this.playerTracker,".set"),"location",window.location.href),this.productUA&&(ga("create",this.productUA,"auto",this.productTracker,e),ga("".concat(this.productTracker,".set"),"location",window.location.href))}},{key:"mountGAInitialParameters",value:function(){var e={};return this.gaExtras&&this.gaExtras.uid&&(e.userId=this.gaExtras.uid),this.productUA&&(e.clientId=this.gaClientId),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,Fn.DFP_CONTENT_RESUME,(function(){e.DFPError="false"})),this.listenTo(this.container,Fn.DFP_AD_ERROR,(function(){e.DFPError="true"})),this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.playback,be.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.playback,be.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,be.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,Fn.WM_SETTINGS_LEVEL_SELECTED,this.onQualitySelected),this.listenTo(this.playback,be.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,be.PLAYBACK_STOP,this.onEnd),this.listenTo(this.playback,be.PLAYBACK_ENDED,(function(){e.onEnd("complete")})),this.listenTo(this.container,be.CONTAINER_DESTROYED,this.onEnd),this.listenTo(this.container,Fn.WM_STATS_REPORTED,(function(t){e.watchedTime=t.timers.watch})),this.listenTo(this.container,Fn.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,Fn.SKIP_BUTTON_SHOW,this.onSkipButtonDisplayed),this.listenTo(this.playback,be.PLAYBACK_DVR,this.onDVR),this.listenTo(this.container,Fn.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,Fn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.container,Fn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Fn.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,Fn.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap),this.bindCustomEvents()}},{key:"bindCustomEvents",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(Sc,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.defineBuckets(this.video.duration),this.setVideoLayer(),this.layer.schema_version=this.schemaVersion,this.layer.gaAccounts=[this.videoUA],this.productUA&&this.layer.gaAccounts.push(this.productUA)}},{key:"onResourceReady",value:function(e,t){this.layer.video_session_id=yc.getVideoSessionId(this.options.playerId),t&&t.product&&(this.layer.pisp=t.product),e.transmission&&e.transmission.affiliate&&(this.layer.affiliate_code=e.transmission.affiliate.code)}},{key:"setVideoLayer",value:function(){var e={excerpt:"short",segment:"short",episode:"full"}[this.video.kind]||this.video.kind,t=this.options.resumeAt||kc(),n=this.container.options.domain;this.layer={arc:this.video.isArchived?"acervo":"grade",signal:this.video.isSubscriberOnly?"fechado":"aberto",id:"".concat(this.video.id),channel:this.video.channel,program:this.video.program,episode:this.video.title,domain:n||document.location.hostname,type:e,kind:_c(this.video.category),length_range:Tc(this.video.duration),channel_id:this.video.channelId,program_id:this.video.programId,keep_watching:t>0?"true":"false",exb_date:this.video.exhibitedAt,creation_date:this.video.createdAt,length:Math.trunc(this.video.duration/1e3),auto_play:this.options.autoPlay+"",player_version:"7.51.1",start:0,service_id:this.video.serviceId,ambient:this.ambient,platform:this.platform},this.video.providerId&&this.video.isSubscriberOnly&&(this.layer.gsat_op=_c(this.options.payTvServiceProvider)),V.isSmartTvEnvironment&&(this.layer=Pi(Pi({},this.layer),{},{platform_manufacturer:this.deviceInfo.manufacturer||V.device&&V.device.brand,platform_model:this.deviceInfo.model||V.device&&V.device.model}))}},{key:"onQualitySelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=e.find((function(e){return e.selected}))||e[0];this.levelSelected=t&&t.name}}},{key:"onPlay",value:function(){this.isFirstPlay()?this.isPaused=!1:this.isPaused&&(this.initialTrackedPlayTime=Ac(),this.track("play"),this.isPaused=!1)}},{key:"getDimension",value:function(e){var t=e.languageISO_639_2B||e.language;return"description"!==e.role&&"caption"!==e.role||(t+="-".concat(e.role)),t}},{key:"isFirstPlay",value:function(){return 0===this.layer.start&&(this.isLive&&(this.layer.dvr_status=this.container.isDvrEnabled()?"em-simulcast":"nao-disponivel"),this.playback.currentAudio&&(this.layer.current_audio=this.getDimension(this.playback.currentAudio)),this.playback.currentSubtitle&&(this.layer.current_subtitle=this.getDimension(this.playback.currentSubtitle)),this.layer.start=1,this.initialTrackedPlayTime=Ac(),this.track("start"),!0)}},{key:"calculatePlayTime",value:function(){if(this.initialTrackedPlayTime){var e=Ac(),t=(e-this.initialTrackedPlayTime)/1e3;this.isBuffering&&(this.calculateBufferTime(),this.onBufferStart()),this.trackedPlayTime=t-this.loadTimer,this.hasSentBuffer(),this.shouldResetPlaytime&&(this.sendToSentry({type:"GA ERROR: Not possible to calculate trackedPlayTime",description:"initialTrackedPlayTime = ".concat(this.initialTrackedPlayTime," / finalTrackedPlayTime = ").concat(e)}),this.trackedPlayTime=null),this.initialTrackedPlayTime=0}}},{key:"milestone",value:function(e){!this.isPaused&&0!==e&&this.checkpoint!==e&&e%60<1&&(this.calculatePlayTime(),1===this.layer.start&&this.track("milestone"),this.initialTrackedPlayTime=Ac()),this.checkpoint=e}},{key:"onSkipButtonDisplayed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_displayed")]!==Rc&&(this["".concat(t,"_displayed")]=Cc)}},{key:"onSkipButtonClicked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_clicked")]!==Rc&&(this["".concat(t,"_clicked")]=Cc)}},{key:"onAutoSkipRecap",value:function(){this.auto_skip_recap!==Rc&&(this.auto_skip_recap=Cc)}},{key:"onCurrentProgramUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.layer.EPG_program=t&&t.program||null,this.layer.EPG_channel=t&&t.channel||null,this.layer.EPG_program_id=t&&t.programId||null,this.layer.EPG_channel_id=t&&t.channelId||null}},{key:"onAudioChanged",value:function(e){this.layer.current_audio=e&&this.getDimension(e)||null}},{key:"onSubtitleChanged",value:function(e){this.layer.current_subtitle=e&&this.getDimension(e)||null}},{key:"onQuickSeek",value:function(){this.didQuickSeek=!0}},{key:"onPause",value:function(){this.calculatePlayTime(),this.track("pause"),this.isPaused=!0}},{key:"onBuffering",value:function(){this.isBuffering||(this.isBuffering=!0,this.listenToOnce(this.container,be.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.onBufferStart())}},{key:"onBufferStart",value:function(){this.loadInitialTime=Ac()}},{key:"onBufferFull",value:function(){this.calculateBufferTime(),this.isBuffering=!1}},{key:"calculateBufferTime",value:function(){this.loadEndTime=Ac(),this.loadEndTime>0&&this.loadInitialTime>0&&this.loadEndTime>this.loadInitialTime&&(this.loadTimer+=(this.loadEndTime-this.loadInitialTime)/1e3),this.loadInitialTime=0,this.loadEndTime=0}},{key:"hasSentBuffer",value:function(){this.loadTimer=0,this.layer.load=0,this.layer.load_time=0}},{key:"onSeek",value:function(){this.hasSeeked=!0,this.seekCounter++}},{key:"onEnd",value:function(e){!this.layer||this.layer&&0===this.layer.start||(this.layer.start=0,this.hasVideoCompleted="complete"===e,this.calculatePlayTime(),this.track("end"))}},{key:"destroy",value:function(){window.removeEventListener(Sc,this.boundOnEnd),Fi(Li(n.prototype),"destroy",this).call(this),this.stopListening(),window.ga&&ga.getByName&&ga.getByName(this.playerTracker)&&ga("".concat(this.playerTracker,".remove")),window.ga&&ga.getByName&&ga.getByName(this.productTracker)&&ga("".concat(this.productTracker,".remove"))}},{key:"onTimeUpdate",value:function(e){this.currentTime=this.isLive?Math.trunc(this.watchedTime/1e3):e.current,this.milestone(Math.trunc(this.currentTime))}},{key:"onDVR",value:function(e){this.layer.dvr_status=e?"em-dvr":"em-simulcast"}},{key:"track",value:function(e){window.ga?(this.layer.event=e,this.layer.quality=this.levelSelected,this.layer.pub_err=this.DFPError,this.setGACustomMetrics(this.layer.event),this.useGAtracker()):this.container.trigger(Fn.WM_GA_UNTRACKED_EVENT,{eventName:e})}},{key:"setGACustomMetrics",value:function(e){for(var t in this.GACustomMetrics={},this.GACustomMetrics[vc.start]="start"===e&&1,this.GACustomMetrics[vc.seconds_watched]=this.shouldSendPlayTime()&&this.trackedPlayTime,this.trackedPlayTime=0,this.GACustomMetrics[vc.load]=this.shouldSendLoadTime()&&1,this.GACustomMetrics[vc.load_time]=this.shouldSendLoadTime()&&this.loadTimer,this.GACustomMetrics[vc.complete]="end"===e&&this.hasVideoCompleted&&1,this.setSkipButtonsCustomMetric(),this.didQuickSeek&&(this.GACustomMetrics[vc.quick_seek]=1,this.didQuickSeek=!1),"milestone"!==e&&this.hasSeeked&&(this.hasSeeked=!1,this.GACustomMetrics[vc.seek]=this.seekCounter,this.seekCounter=0),!this.isLive&&this.watchedTime&&this.calculateBuckets(this.watchedTime),this.GACustomMetrics)!1===this.GACustomMetrics[t]&&delete this.GACustomMetrics[t]}},{key:"setSkipButtonsCustomMetric",value:function(){var e=this;["skip_recap_displayed","skip_recap_clicked","skip_intro_displayed","skip_intro_clicked","start_over_displayed","start_over_clicked","auto_skip_recap"].forEach((function(t){e[t]===Cc&&(e.GACustomMetrics[vc[t]]=1,e[t]=Rc)}))}},{key:"useGAtracker",value:function(){this.setGACustomDimensions(this.playerTracker),this.sendtoGA(this.playerTracker),this.productUA&&(this.setGACustomDimensions(this.productTracker),this.sendtoGA(this.productTracker))}},{key:"setGACustomDimensions",value:function(e){var t=this;for(var n in gc)void 0!==this.layer[n]&&ga("".concat(e,".set"),gc[n],this.layer[n]);this.gaExtras&&Object.keys(this.gaExtras).forEach((function(n){t.gaExtras[n]&&ga("".concat(e,".set"),gc[n]||n,t.gaExtras[n])}))}},{key:"sendtoGA",value:function(e){this.isLive?this.milestoneTime=this.milliToMinutes(this.watchedTime):this.milestoneTime=Math.trunc(this.currentTime/60),this.gaEventLabel="milestone"===this.layer.event?"minute - ".concat(this.milestoneTime):this.layer.episode,ga("".concat(e,".send"),"event","video",this.layer.event,this.gaEventLabel,this.GACustomMetrics),this.shouldSendLoadTime()&&this.hasSentBuffer()}},{key:"shouldSendPlayTime",value:function(){return"milestone"===this.layer.event||"pause"===this.layer.event||"end"===this.layer.event}},{key:"shouldSendLoadTime",value:function(){return"start"===this.layer.event||"play"===this.layer.event}},{key:"defineBuckets",value:function(e){this.videobuckets={};for(var t=0,n=[10,25,50,75,90,100];t<n.length;t++){var i=n[t];this.videobuckets["bucket".concat(i)]=i/100*e}}},{key:"calculateBuckets",value:function(e){for(var t in this.videobuckets)e>=this.videobuckets[t]&&!this.sentBuckets[t]&&(this.GACustomMetrics[vc[t]]=1,this.sentBuckets[t]=1)}},{key:"milliToMinutes",value:function(e){return Math.trunc(e/6e4)}},{key:"sendToSentry",value:function(e){this.container.trigger("wm:ga:error",e)}}]),n}(Xe),xc='.clappr-player#wp3-player-0 .waiting-room {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: #202020;\n  background-size: cover;\n  z-index: 999;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__aligner {\n    flex-grow: 1;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .waiting-room__main-text {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    width: 100%;\n    left: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__countdown {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    margin: 0 auto;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    line-height: 50px;\n    display: inline-block;\n    text-align: center; }\n';or(xc);var Dc=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).rendered=!1,i}return Ii(n,[{key:"name",get:function(){return"waiting_room"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"template",get:function(){return xe('<div class="waiting-room__aligner">\n<div class="waiting-room__main-text">Estamos lotados! Tentaremos carregar a transmisso novamente em </div>\n<p class="waiting-room__countdown"></p>\n</div>\n')}},{key:"attributes",get:function(){return{class:"waiting-room"}}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.container.playback,Fn.WM_WROOM_WAITING,this.onResponse)}},{key:"onResponse",value:function(){var e=this;this.retryInterval=this.setRetryInterval(),this.rendered?this.updateScreenVisibility("flex"):this.render(),this.countdownStart=Date.now(),this.retryID=setTimeout((function(){e.retry()}),this.retryInterval),this.countdownID=setInterval((function(){e.updateScreen()}),1e3)}},{key:"retry",value:function(){clearInterval(this.retryID),clearInterval(this.countdownID),this.updateScreenVisibility("none"),this.container.playback.trigger(Fn.WILL_RESTART_PLAYBACK,"wroom")}},{key:"updateScreen",value:function(){this.updateCountdownElement(this.updateCountdownTime())}},{key:"updateScreenVisibility",value:function(e){this.$el[0].style.display=e}},{key:"updateCountdownElement",value:function(e){this.$el.find(".waiting-room__countdown").text(this.toSeconds(e))}},{key:"updateCountdownTime",value:function(){return this.retryInterval-(Date.now()-this.countdownStart)}},{key:"toSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"setRetryInterval",value:function(){return Math.round(-2e4*Math.random())+5e4}},{key:"render",value:function(){if(!this.rendered){this.$el.html(this.template());var e=Bn.getStyleFrom(xc,{baseUrl:this.options.baseUrl,playerId:this.options.playerId});return this.$el.append(e[0]),this.container.$el.append(this.el),this.rendered=!0,this}}}]),n}(Qe),Pc=function e(){Ci(this,e),Object.assign(e.prototype,$YB.adnalyzers.Generic.prototype)},Oc=function(e){Oi(n,e);var t=Bi(n);function n(e,i){var r;Ci(this,n),r=t.call(this);try{r.pluginName="clappr-web",r.pluginVersion="6.0.0-clappr-5.5.4-lib",r.container=e,r.playback=r.container.playback,r.tag=r.playback.$el&&r.playback.$el.find("video")[0]||r.playback.el,r.startMonitoring(e,i)}catch(e){$YB.error(e)}return r}return Ii(n,[{key:"getPlayhead",value:function(){return this.viewManager.isShowingAds||(this.playhead=this.playback.getStartTimeOffset()+this.container.getCurrentTime()),this.playhead}},{key:"getMediaDuration",value:function(){return this.container.getDuration()}},{key:"getIsLive",value:function(){return"live"===this.container.getPlaybackType()}},{key:"getResource",value:function(){var e=this.playback.options.sources;return"object"===Si(e)?e.source:e}},{key:"getPlayerVersion",value:function(){return"Clappr"+Clappr.version}},{key:"getBitrate",value:function(){return this.bitrate||-1}},{key:"getThroughput",value:function(){return this.throughput||-1}},{key:"getRendition",value:function(){return this.rendition||""}}]),n}((function e(){Ci(this,e),Object.assign(e.prototype,$YB.plugins.Generic.prototype)})),Lc=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).insertYouboraScript(),i}return Ii(n,[{key:"name",get:function(){return"youbora_plugin"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"youboraUrl",get:function(){return""}},{key:"youboraOptions",get:function(){return{}}},{key:"youboraPlugin",get:function(){return Oc}}]),Ii(n,[{key:"insertYouboraScript",value:function(){var e=this;if(window.$YB)this.createPlugin();else{var t=document.createElement("script");t.src=this.youboraUrl,t.onload=function(){e.createPlugin()},document.body.appendChild(t)}}},{key:"createPlugin",value:function(){$YB.plugins.Clappr=this.youboraPlugin,this.plugin=new $YB.plugins.Clappr(this.container,this.youboraOptions)}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,be.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(this.container,be.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,be.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,be.CONTAINER_STOP,this.onStop),this.listenTo(this.container,be.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,be.CONTAINER_ERROR,this.onError),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,be.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,be.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,be.CONTAINER_SEEKED,this.onContainerSeeked),this.listenTo(this.container,be.CONTAINER_SEEK,this.onContainerSeek)}},{key:"destroy",value:function(){this.plugin&&this.plugin.endedHandler(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"onPlayIntent",value:function(){this.plugin.playHandler()}},{key:"onPlay",value:function(){this.plugin.playingHandler()}},{key:"onPause",value:function(){this.plugin.pauseHandler()}},{key:"onStop",value:function(){this.plugin&&this.plugin.endedHandler()}},{key:"onEnded",value:function(){this.plugin.endedHandler()}},{key:"onContainerSeeked",value:function(){this.plugin&&(this.plugin.seekedHandler(),this.plugin.currentTime=null)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.code!==An.PLAYLIST_LOAD_ERROR.code&&this.plugin&&this.plugin.errorHandler(e.code,e.description)}},{key:"onBuffering",value:function(){this.plugin&&this.plugin.bufferingHandler()}},{key:"onBufferfull",value:function(){this.plugin&&this.plugin.bufferedHandler()}},{key:"onBitrate",value:function(e){var t=this.container.playback.levels;if(this.plugin.bitrate=e.bitrate,this.plugin.throughput=e.bandwidth,t&&t.length){var n=t.filter((function(t){return e.level===t.id}));this.plugin.rendition=n&&n[0].label}}},{key:"onContainerSeek",value:function(e){this.plugin&&(this.plugin.currentTime=e,this.plugin.seekingHandler())}}]),n}(Xe),Mc=function(e){Oi(n,e);var t=Bi(n);function n(e,i){var r;return Ci(this,n),(r=t.call(this)).adnalyzerVersion="6.0.0-IMA",r.startMonitoring(e,i),r}return Ii(n,[{key:"ad",get:function(){return this.ads.ad},set:function(e){this.ads.ad=e}}]),Ii(n,[{key:"getAdPosition",value:function(){return this.ad&&0!==this.ad.getAdPodInfo().getPodIndex()?-1===this.ad.getAdPodInfo().getPodIndex()?"post":"mid":"pre"}},{key:"getAdResource",value:function(){return this.ad?this.ad.getMediaUrl():Fi(Li(n.prototype),"getAdResource",this).call(this)}},{key:"getAdTitle",value:function(){return this.ad?this.ad.getTitle():Fi(Li(n.prototype),"getAdTitle",this).call(this)}},{key:"getAdDuration",value:function(){return this.ad?this.ad.getDuration():Fi(Li(n.prototype),"getAdDuration",this).call(this)}},{key:"getMediaPlayhead",value:function(){return this.plugin.getPlayhead()}},{key:"getAdPlayhead",value:function(){var e=this.plugin.container.playback;return(void 0!==e.getDuration?e.getDuration():0)-(void 0!==e.getRemainingTime?e.getRemainingTime():0)||this.plugin.container.getCurrentTime()}}]),n}(Pc),Nc=function(e){Oi(n,e);var t=Bi(n);function n(e,i){var r;return Ci(this,n),(r=t.call(this,e,i)).options=i,r.container=e,r.setupAdnalyzer(),r}return Ii(n,[{key:"setupAdnalyzer",value:function(){this.adnalyzer=new Mc(this,{})}},{key:"getPlayerVersion",value:function(){return n.playerVersion()}},{key:"endedHandler",value:function(){this.stopMonitoring(),Fi(Li(n.prototype),"endedHandler",this).call(this)}}],[{key:"playerVersion",value:function(){return"7.51.1"}}]),n}(Oc),Uc=Un.session,Bc=Un.toLowerCase,Fc=Un.getExperimentsList,Vc=Un.API_VERSION,Hc=Un.getPlatformName,jc=wi.Video,Kc=1,Gc=2,zc=3,Wc=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).requestState=Kc,i}return Ii(n,[{key:"name",get:function(){return"globo_youbora_plugin"}},{key:"youboraPlugin",get:function(){return Nc}},{key:"youboraUrl",get:function(){return"".concat(this.options.env.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/vendor/libs/youboralib-v5.5.4.min.js")}},{key:"dashboardAccount",get:function(){return this.options.youbora?this.options.youbora.account:this.options.env.name}},{key:"youboraOptions",get:function(){var e,t,n,i,r,a,o,s,l,u;return{accountCode:"prod"===this.dashboardAccount?"globo":"globodev",enableAnalytics:!0,username:this.options.globoId||void 0,transactionCode:Uc.getVideoSessionId(this.options.playerId),httpSecure:!this.options.httpOnly,enableInit:!0,media:{title:(null===(e=this.video)||void 0===e?void 0:e.title)||"",duration:null!==(t=(null===(n=this.video)||void 0===n?void 0:n.duration)/1e3)&&void 0!==t?t:"",isLive:"live"===this.container.getPlaybackType(),resource:(null===(i=this.video)||void 0===i||null===(r=i.selectedResource)||void 0===r?void 0:r.url)||""},ads:{campaign:this.options.adUnit||(null===(a=this.video)||void 0===a?void 0:a.adUnit)||""},extraParams:{param1:"".concat(this.options.src),param2:(null===(o=this.video)||void 0===o?void 0:o.programId)||"",param3:(null===(s=this.video)||void 0===s?void 0:s.channelId)||"",param4:this.getPlayerVersion(),param5:Vc,param6:Bc(null===(l=this.video)||void 0===l?void 0:l.kind)||"",param7:document.location.hostname,param8:Hc(jc.getPlayerType()),param9:Fc(this.options).toString(),param10:this.container.playback.name,param11:void 0,param12:!!this.options.autoPlay,param13:this.container.getPlaybackType()!==Be.LIVE&&!!this.options.resumeAt&&this.options.resumeAt>0,param14:null,param15:void 0,param16:!1,param17:!(null===(u=this.video)||void 0===u?void 0:u.isLive)&&null,param18:"",param19:!!this.options.skipDFP,param20:void 0}}}}]),Ii(n,[{key:"bindEvents",value:function(){Fi(Li(n.prototype),"bindEvents",this).call(this),this.listenTo(this.container.playback,Fn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenToOnce(this.container.playback,Fn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.container,be.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded),this.listenTo(this.container,Fn.DFP_FINISHED,Fi(Li(n.prototype),"onEnded",this)),this.listenTo(this.container,Fn.DFP_AD_LOADED,this.onAdLoaded),this.listenTo(this.container,Fn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,Fn.DFP_AD_PAUSE,this.onAdPause),this.listenTo(this.container,Fn.DFP_AD_RESUME,this.onAdResume),this.listenTo(this.container,Fn.DFP_AD_CLICKED,this.onAdClicked),this.listenTo(this.container,Fn.DFP_AD_SKIPPED,this.onAdSkipped),this.listenTo(this.container,Fn.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,Fn.DFP_CONTENT_RESUME,this.onContentResume),this.listenTo(this.container,Fn.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,Fn.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenToOnce(this.container,Fn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats)}},{key:"getPlayerVersion",value:function(){var e=this.youboraPlugin.playerVersion(),t=window.GloboplaySDKPlugins,n=void 0===t?{}:t;return n.Version&&(e="".concat(e,"/").concat(n.Version)),e}},{key:"createPlugin",value:function(){this.hasYouboraScript=!0,this._startYouBora()}},{key:"destroy",value:function(){var e=this;Fi(Li(n.prototype),"destroy",this).call(this),this.plugin&&ir((function(){e.plugin.endedHandler()}))}},{key:"onPlayRequestedReady",value:function(){this.plugin&&(this.plugin.playhead=0,this.plugin.playHandler())}},{key:"onResourceReady",value:function(e){this.setupAdHandler(),this.setupInfoManager(e)}},{key:"onDaiResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.streamId;if(this.plugin&&this.plugin.infoManager){var n={extraParams:{param17:!0,param18:t}};this.plugin.infoManager.setOptions(n)}}},{key:"setupInfoManager",value:function(e){if(this.plugin&&this.plugin.infoManager){var t={transactionCode:Uc.getVideoSessionId(this.options.playerId),media:{cdn:(e.cdn||"").toUpperCase(),resource:e.selectedResource.url},extraParams:{param11:"live"==this.video.kind?this.video.transmission.signal:"",param15:this.video.selectedResource&&this.video.selectedResource.resourcePOP||"",param20:this.video.isLive?this.video.selectedResource&&this.video.selectedResource.dai:""}};this.plugin.infoManager.setOptions(t)}}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.plugin&&this.plugin.infoManager&&this.plugin.infoManager.setOptions(this.youboraOptions)}},{key:"onPlaybackEnded",value:function(){(!this.container.options.dfp||this.hasAdBlock)&&Fi(Li(n.prototype),"onEnded",this).call(this)}},{key:"setupAdHandler",value:function(){this.hasAdBlock||this.options.skipDFP||(this.requestState=Gc,this.adnalyzer&&this.adnalyzer.initAdHandler())}},{key:"onAdLoaded",value:function(e){this.adnalyzer.ad=e,this.requestState!==Gc&&this.adnalyzer.playAdHandler()}},{key:"onAdStarted",value:function(){this.requestState===Gc?(this.requestState=zc,this.adnalyzer.playAdHandler()):this.adnalyzer.joinAdHandler()}},{key:"onAdPause",value:function(){this.adnalyzer.pauseAdHandler()}},{key:"onAdResume",value:function(){this.adnalyzer.resumeAdHandler()}},{key:"onAdClicked",value:function(){this.adnalyzer.clickAdHandler()}},{key:"onAdSkipped",value:function(){this.adnalyzer.skipAdHandler()}},{key:"onContentResume",value:function(){this.hasAdBlock||this.adnalyzer.endedAdHandler()}},{key:"onAdError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.requestState!==Kc?(this.adnalyzer.errorAdHandler(e.type,e.message),this.adnalyzer.endedAdHandler()):this.hasAdBlock=!0}},{key:"onAdNotServed",value:function(){this.requestState=zc;this.adnalyzer.noServedAdHandler("AD_NOT_SERVED","Ad not served")}},{key:"onResourceRequestStats",value:function(e){var t=e.totalAttempts,n=e.usedFallback;if(this.plugin&&this.plugin.infoManager){var i={extraParams:{param14:t,param16:n}};this.plugin.infoManager.setOptions(i)}}},{key:"_startYouBora",value:function(){Fi(Li(n.prototype),"createPlugin",this).call(this),this.adnalyzer=this.plugin.adnalyzer}}]),n}(Lc),Yc="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Yc&&Yc,qc="URLSearchParams"in Yc,$c="Symbol"in Yc&&"iterator"in Symbol,Xc="FileReader"in Yc&&"Blob"in Yc&&function(){try{return new Blob,!0}catch(e){return!1}}(),Zc="FormData"in Yc,Qc="ArrayBuffer"in Yc;if(Qc)var Jc=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ed=ArrayBuffer.isView||function(e){return e&&Jc.indexOf(Object.prototype.toString.call(e))>-1};function td(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function nd(e){return"string"!=typeof e&&(e=String(e)),e}function id(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return $c&&(t[Symbol.iterator]=function(){return t}),t}function rd(e){this.map={},e instanceof rd?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function ad(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function od(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function sd(e){var t=new FileReader,n=od(t);return t.readAsArrayBuffer(e),n}function ld(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function ud(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Xc&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Zc&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:qc&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Qc&&Xc&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=ld(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Qc&&(ArrayBuffer.prototype.isPrototypeOf(e)||ed(e))?this._bodyArrayBuffer=ld(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):qc&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Xc&&(this.blob=function(){var e=ad(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=ad(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(sd)}),this.text=function(){var e,t,n,i=ad(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=od(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Zc&&(this.formData=function(){return this.text().then(hd)}),this.json=function(){return this.text().then(JSON.parse)},this}rd.prototype.append=function(e,t){e=td(e),t=nd(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},rd.prototype.delete=function(e){delete this.map[td(e)]},rd.prototype.get=function(e){return e=td(e),this.has(e)?this.map[e]:null},rd.prototype.has=function(e){return this.map.hasOwnProperty(td(e))},rd.prototype.set=function(e,t){this.map[td(e)]=nd(t)},rd.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},rd.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),id(e)},rd.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),id(e)},rd.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),id(e)},$c&&(rd.prototype[Symbol.iterator]=rd.prototype.entries);var cd=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function dd(e,t){if(!(this instanceof dd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof dd){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new rd(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new rd(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),cd.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function hd(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function pd(e,t){if(!(this instanceof pd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new rd(t.headers),this.url=t.url||"",this._initBody(e)}dd.prototype.clone=function(){return new dd(this,{body:this._bodyInit})},ud.call(dd.prototype),ud.call(pd.prototype),pd.prototype.clone=function(){return new pd(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new rd(this.headers),url:this.url})},pd.error=function(){var e=new pd(null,{status:0,statusText:""});return e.type="error",e};var fd=[301,302,303,307,308];pd.redirect=function(e,t){if(-1===fd.indexOf(t))throw new RangeError("Invalid status code");return new pd(null,{status:t,headers:{location:e}})};var gd=Yc.DOMException;try{new gd}catch(e){(gd=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),gd.prototype.constructor=gd}function vd(e,t){return new Promise((function(n,i){var r=new dd(e,t);if(r.signal&&r.signal.aborted)return i(new gd("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new rd,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new pd(r,i))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new gd("Aborted","AbortError"))}),0)},a.open(r.method,function(e){try{return""===e&&Yc.location.href?Yc.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&(Xc?a.responseType="blob":Qc&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof rd?r.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,nd(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&r.signal.removeEventListener("abort",o)}),a.send(void 0===r._bodyInit?null:r._bodyInit)}))}vd.polyfill=!0,Yc.fetch||(Yc.fetch=vd,Yc.Headers=rd,Yc.Request=dd,Yc.Response=pd);var yd=window.WM&&window.WM.Settings||{},md=(yd.bitrateCapping&&yd.bitrateCapping||{}).poolingInterval||yd.bitrateCappingPoolingInterval||6e5,bd=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},Ed=function(e){return e.json()},Ad=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).options.bitrateCappingDisabled&&i.disable(),i}return Ii(n,[{key:"name",get:function(){return"bitrate_capping"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"host",get:function(){return"".concat(this.options.env.protocol,"://wroom.video.globo.com/limits")}},{key:"isHlsjsPlayback",get:function(){return"id_playback"===this.playback.name&&"hls"===this.playback.innerPlaybackName}}]),Ii(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.playback,Fn.WM_RESOURCE_READY,this._onResourceReady),this.listenTo(this.playback,Fn.WM_RESOURCE_ERROR,this._onResourceError),this.listenTo(this.playback,Fn.WM_RESOURCE_SELECTED,this._onResourceSelected)}},{key:"disable",value:function(){Fi(Li(n.prototype),"disable",this).call(this),this._currentBitrate&&this._capBitrate(0),this._stopPolling()}},{key:"enable",value:function(){Fi(Li(n.prototype),"enable",this).call(this),this._bindPlaybackEvents(),this.playback.isPlaying()&&this._startPolling()}},{key:"_bindPlaybackEvents",value:function(){this._unbindPlaybackEvents(),this.listenTo(this.playback,be.PLAYBACK_PLAY,this._startPolling),this.listenTo(this.playback,be.PLAYBACK_PAUSE,this._stopPolling),this.listenTo(this.playback,be.PLAYBACK_STOP,this._stopPolling),this.listenTo(this.playback,be.PLAYBACK_ENDED,this._stopPolling),this.listenTo(this.playback,be.PLAYBACK_ERROR,this._stopPolling)}},{key:"_unbindPlaybackEvents",value:function(){this.stopListening(this.playback,be.PLAYBACK_PLAY,this._startPolling),this.stopListening(this.playback,be.PLAYBACK_PAUSE,this._stopPolling),this.stopListening(this.playback,be.PLAYBACK_STOP,this._stopPolling),this.stopListening(this.playback,be.PLAYBACK_ENDED,this._stopPolling),this.stopListening(this.playback,be.PLAYBACK_ERROR,this._stopPolling)}},{key:"_buildLimitsUrl",value:function(){var e=new URL(this.host),t=this.resource.selectedResource,n=(void 0===t?{}:t).resourcePOP;return n&&(e.search=new URLSearchParams({pop:n})),e}},{key:"_fetchLimits",value:function(){var e=this;fe.info(this.name,"fetching bitrate capping"),fetch(this._buildLimitsUrl()).then(bd).then(Ed).then((function(t){var n=t.b;return e._capBitrate(n)})).catch((function(t){return fe.warn(e.name,"error fetching bitrate capping:",t)}))}},{key:"_capBitrate",value:function(e){if(this._currentBitrate!==e){e?fe.warn(this.name,"capping bitrate to ".concat(e)):fe.warn(this.name,"reset bitrate to unlimited");var t=this._getLevelFromBitrate(e);t>=0&&fe.warn(this.name,"capping level to ".concat(t)),this._currentBitrate=e,this._capLevelIndex(t),this.container.trigger(Fn.WM_BITRATE_CAP,e)}else fe.info(this.name,"no limit changes")}},{key:"_capLevelIndex",value:function(e){this.isHlsjsPlayback&&this._capHlsjsLevel(e)}},{key:"_capHlsjsLevel",value:function(e){this._destroyCapLevelController(),this._updateHlsjsConfig(e),this._createCapLevelController()}},{key:"_createCapLevelController",value:function(){if(!this._currentBitrate&&this.playback.options.playback.hlsjsConfig.capLevelToPlayerSize){var e=this.playback.playback._hls,t=new e.config.capLevelController(e);t.onMediaAttaching(e),t.onManifestParsed(e),this.playback.playback._hls.coreComponents.push(t)}}},{key:"_destroyCapLevelController",value:function(){var e=this;this.playback.playback._hls.coreComponents=this.playback.playback._hls.coreComponents.filter((function(t){var n=e._isHlsjsCapLevelController(t);return n&&(t.unregisterListeners(),t.destroy()),!n}))}},{key:"_updateHlsjsConfig",value:function(e){this.playback.playback._hls.autoLevelCapping=e}},{key:"_isHlsjsCapLevelController",value:function(e){return e.constructor===this.playback.playback._hls.config.capLevelController}},{key:"_getLevelFromBitrate",value:function(e){if(!e)return-1;var t,n=[];return this.isHlsjsPlayback&&(n=this.playback.playback._hls.levels),(t=n.reduce((function(t,n,i){return n.bitrate<=e?i:t}),0))>n.length&&(t=-1),fe.debug(this.name,"selected level:",n[t]),t}},{key:"_onResourceSelected",value:function(e){this._stopPolling(),this.resource=e}},{key:"_onResourceError",value:function(){fe.info(this.name,"resource error: disabling"),this.disable()}},{key:"_onResourceReady",value:function(e){"globo"===e.cdn?(fe.info(this.name," video loaded, waiting for start"),this._bindPlaybackEvents()):(fe.info(this.name,"cdn does not allow bitrate capping"),this.disable())}},{key:"_startPolling",value:function(){var e=this;this._pollTimerId||(fe.info(this.name,"video playing, configuring polling"),this._pollTimerId=setInterval((function(){return e._fetchLimits()}),md),this._fetchLimits())}},{key:"_stopPolling",value:function(){this._pollTimerId&&(fe.info(this.name,"polling canceled"),clearInterval(this._pollTimerId),delete this._pollTimerId)}}]),n}(Xe),kd=((window.WM&&window.WM.Settings||{}).webmediaHeartBeat||{}).poolingInterval||6e4,Td=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,Fn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(e){var t=e.selectedResource;t.isGloboCDN&&t.session&&this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,be.PLAYBACK_PLAY,this.startPolling),this.listenTo(this.playback,be.PLAYBACK_STOP,this.stopPolling),this.listenTo(this.playback,be.PLAYBACK_ENDED,this.stopPolling),this.listenTo(this.playback,be.PLAYBACK_ERROR,this.stopPolling)}},{key:"startPolling",value:function(){var e=this;this._pollTimerId||(this._pollTimerId=setInterval((function(){return e.sendPing()}),kd),this.sendPing())}},{key:"sendPing",value:function(){var e,t=this,n=new Headers,i=null===(e=this.container.playback.selectedResource)||void 0===e?void 0:e.session;n.append("Authorization","Bearer ".concat(i));var r={method:"POST",headers:n};fetch(this.endpoint,r).then((function(e){return t.onPingResponse(e)})).catch((function(e){return fe.warn(t.name,"error",e)}))}},{key:"onPingResponse",value:function(e){if(fe.info(this.name,e),404===e.status){this.playback.trigger(be.PLAYBACK_ERROR,this.createError(An.SIMULTANEOUS_ACCESS,{useCodePrefix:!1}))}}},{key:"stopPolling",value:function(){this._pollTimerId&&(clearInterval(this._pollTimerId),delete this._pollTimerId)}},{key:"destroy",value:function(){this.stopPolling(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"lock_client"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"endpoint",get:function(){return"".concat(this.options.env.protocol,"://watcher.playback.video.globo.com/heartbeat")}}]),n}(Xe),_d=Un.getCurrentTime,wd=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,Fn.WM_VIDEO_METADATA_LOADED,this.bindPlaybackEvents)}},{key:"bindPlaybackEvents",value:function(e){e.isLive&&(this.listenTo(this.playback,be.PLAYBACK_STOP,this.stopTimer),this.listenTo(this.playback,be.PLAYBACK_ERROR,this.stopTimer),this.listenTo(this.playback,be.PLAYBACK_ENDED,this.stopTimer),this.listenToOnce(this.playback,be.PLAYBACK_PLAY,this.onPlay))}},{key:"onPlay",value:function(){this.startTimer(),this.heartbeatTick()}},{key:"heartbeatTick",value:function(){this.innerPlayback&&this.container.trigger(Fn.SIMULCAST_PING,_d(this.innerPlayback))}},{key:"startTimer",value:function(){this.heartbeat=setInterval(this.heartbeatTick.bind(this),this.pingInterval)}},{key:"stopTimer",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"restartTimer",value:function(){this.stopTimer(),this.startTimer()}},{key:"destroy",value:function(){this.stopTimer(),Fi(Li(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"simulcast-ping"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"pingInterval",get:function(){return 6e4}}]),n}(Xe),Sd=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e))._isVideoFinished=!1,i}return Ii(n,[{key:"name",get:function(){return"watch_session"}},{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"dfp",get:function(){return this.options.dfp}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.dfp,Fn.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,be.CONTAINER_ENDED,this.onVideoFinished)}},{key:"onAllAdsCompleted",value:function(){this.sendEvent()}},{key:"onVideoFinished",value:function(){this._isVideoFinished=!0,this.sendEvent()}},{key:"sendEvent",value:function(){(this.dfp.isAllAdsCompleted||this.dfp.shouldSkipAd||this.dfp.error)&&this._isVideoFinished&&this.container.trigger(Fn.WATCH_SESSION_END)}}]),n}(Xe),Cd=Ba(Fa((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var a={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:r(n(2)).default.getResource("clientInstanceUUID",(0,i.default)()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"1.10.0",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0},o={avoidCookieUsage:function(){a.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){a.USE_HTTPS=!1},useQAConfiguration:function(){a.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",a.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",a.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(a,o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_STRING_NUMERIC_STRING:"[Horizon] numericString should be string.",INVALID_EMPTY_NUMERIC_STRING:"[Horizon] numericString should be empty.",INVALID_NUMERIC_STRING:"[Horizon] Invalid number. Field with NumericString must to be number.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",INVALID_RELATION_ID:"[Horizon] Invalid relation identification.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},r={mustBeDefined:function(e){throw new Error(i.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(i,r)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return window.horizonResources=window.horizonResources||{},window.horizonResources};t.default={getContext:i,getResource:function(e,t){var n=i();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={execAsync:function(e,t){setTimeout((function(){return e(t)}),1)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,i){var r=new XMLHttpRequest;r.open(e,t,!0),r.onload=function(){return r.status<400?n(JSON.parse(r.response)):i(r.response)},r.onerror=i,r.send()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(4)),l=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){return a.default.getResource("idManager",{loggedIDs:null,anonymousIDs:null,sessionIDs:null})},d=["GLBID","GST"],h={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n?h.STATE_READY:h.STATE_NOT_READY,this.url=t,this.bypass=n,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===h.STATE_READY)return e(this.getClientIDs());if(this.callbacks.onReady.length>l.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" IDManager callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===h.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);if(this.bypass)return"";var e=this.getClientIDs();return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},{key:"getClientIDs",value:function(){var e=c();return Object.assign(e.loggedIDs||{},e.anonymousIDs||{},e.sessionIDs||{})}},{key:"isReady",value:function(){return this.state===h.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=h.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=h.STATE_NOT_READY,e.load()}),l.default.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===d.indexOf(e))throw Error(o.default.INVALID_AUTH_TOKEN);var n=c();n.loggedIDs=Object.assign(n.loggedIDs||{},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"setAnonymousUser",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=c();if(null==n.anonymousIDs||t){if(!("glb_uid"in e)||!("glb_uid_public"in e))throw o.default.mustBeDefined("glb_uid and glb_uid_public");var i={glb_uid:e.glb_uid,glb_uid_public:e.glb_uid_public};n.anonymousIDs=Object.assign(n.anonymousIDs||{},i)}}},{key:"getAnonymousUser",value:function(){return c().anonymousIDs}},{key:"setSessionID",value:function(e){e.hsid&&(c().sessionIDs=Object.assign({},{hsid:e.hsid}))}},{key:"removeLoggedUser",value:function(){var e=c();d.forEach((function(t){e.loggedIDs[t]&&delete e.loggedIDs[t]}))}},{key:"load",value:function(){var e=this;if(this.state===h.STATE_NOT_READY){this.state=h.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var t=l.default.USE_HTTPS?"https://":"http://";s.default.request("GET",""+t+this.url,(function(t){e.setSessionID(t),e.setAnonymousUser(t,!1),e.state=h.STATE_READY,e.callbacks.onReady.forEach((function(t){return r.default.execAsync(t,e.getClientIDs())}))}),(function(t){e.state=h.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}(),f=function(e){var t=c();if(!t.instance){var n=e||l.default.HORIZON_TRACK_HOST+"/"+l.default.HORIZON_TRACK_IDENTIFICATION_RESOURCE,i=!1===l.default.AVOID_COOKIE_USAGE;t.instance=new p(n,i)}return t.instance};t.default={getInstance:f,getContextManager:c,setLoggedUser:function(e,t){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||o.default.mustBeDefined("tokenName"),t&&0!==t.length||o.default.mustBeDefined("tokenValue"),f().setLoggedUser(e,t)},removeLoggedUser:function(){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);f().removeLoggedUser()},setAnonymousUser:function(e){f().setAnonymousUser(e)},getAnonymousUser:function(){return f().getAnonymousUser()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IDManager=t.Settings=t.HorizonClient=void 0,n(7);var i=o(n(9)),r=o(n(0)),a=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s={setLoggedUser:a.default.setLoggedUser,removeLoggedUser:a.default.removeLoggedUser,setAnonymousUser:a.default.setAnonymousUser,getAnonymousUser:a.default.getAnonymousUser};t.HorizonClient=i.default,t.Settings=r.default,t.IDManager=s},function(e,t,n){n(8).polyfill()},function(e,t,n){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=h(n(0)),o=h(n(13)),s=h(n(1)),l=h(n(15)),u=h(n(26)),c=h(n(27)),d=h(n(5));function h(e){return e&&e.__esModule?e:{default:e}}var p={READY:"stateReady",UNLOADED:"stateNotReady",LOADING:"stateLoading"},f=["web","instant-article","app"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"web";if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=t||c.default.getTenant()||s.default.mustBeDefined("tenant"),this.deviceGroup=n||c.default.getDeviceGroup()||s.default.mustBeDefined("deviceGroup"),this.defaultContentType=r,-1===f.indexOf(h))throw Error(s.default.INVALID_ENVIRONMENT);this.environment=h,this.validator=o.default,this.clientVersion=a.default.PACKAGE_VERSION,this.state=p.UNLOADED,this.referer=document.referrer;var g=null,v=null,y=null;this.setSchemasProvider=function(e){g=e},this.getSchemasProvider=function(){if(!g){var e=u.default.getInstance();i.setSchemasProvider(e)}return g},this.setEventBus=function(e){v=e},this.getEventBus=function(){if(!v){var e=l.default.getInstance(i.tenant,i.deviceGroup,i.environment,i.getIdManager());i.setEventBus(e)}return v},this.setIdManager=function(e){y=e},this.getIdManager=function(){if(!y){var e=d.default.getInstance();i.setIdManager(e)}return y},this.isReady=function(){return!!g&&!!y&&i.validator.isReady()&&g.isReady()&&y.isReady()},window.addEventListener("beforeunload",(function(){i.unload()}))}return r(e,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(e){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer,horizonRelationId:e}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state=p.READY,e()):(this.state=p.LOADING,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=p.LOADING,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=p.LOADING,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady((function(){return e.flush()}))}},{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&"string"!=typeof n)throw new Error(s.default.INVALID_RELATION_ID+" Wrong relationId type. It should be a String: actual type is "+(void 0===n?"undefined":i(n)));[].concat(e).forEach((function(e){t.validator.validateArgs(e),t.sendWithInfo(e,t.getScopeInfo(n))}))}},{key:"sendWithInfo",value:function(e,t){var n=this;if(!this.isReady())return this.state===p.UNLOADED&&this.flush(),void this.onReady((function(){return n.sendWithInfo(e,t)}));this.validateBeforeEnqueue(e);var i=Object.assign({},t,e);i.contentType||(this.defaultContentType||s.default.mustBeDefined("contentType"),i.contentType=this.defaultContentType),this.getEventBus().enqueue(i)}}]),e}();t.default=g},function(e,t,n){var i=n(11),r=n(12);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=s(n(14)),a=s(n(1)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l={ready:[]},u=["url"],c=function(){return!!window.tv4},d=function(e){return null===e||isNaN(e)&&!isNaN(Date.parse(e))?null:a.default.INVALID_DATE},h=function(e){return"string"!=typeof e?a.default.INVALID_STRING_NUMERIC_STRING:""===e.trim()?a.default.INVALID_EMPTY_NUMERIC_STRING:Number.isFinite(Number(e))?null:a.default.INVALID_NUMERIC_STRING};t.default={validateFor:function(e,t){if(!c())throw new Error(a.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(a.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(a.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(a.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(e){var t=Object.prototype.hasOwnProperty;if(!(e&&t.call(e,"id")&&t.call(e,"version")&&t.call(e,"properties")))throw new Error(a.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(e));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==i(e.properties))throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(u.filter((function(t){return e[t]&&"string"!=typeof e[t]})).length>0)throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(e.id.length<2||e.version.length<3)throw new Error(a.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(e));var n=Object.assign({},e);delete n.id,delete n.version,delete n.properties,delete n.contentType;var r=Object.keys(n);if(r.length>0&&!r.every((function(e){return-1!==u.indexOf(e)})))throw new Error(a.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:d,tv4IsNumericString:h,isReady:c,onReady:function(e){if(c())return e();if(l.ready.length>o.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Validator callback stack.");return l.ready.unshift(e)},load:function(){if(!r.default.isDefined("tv4")){var e=(o.default.USE_HTTPS?"https://":"http://")+o.default.SCHEMA_VALIDATOR_SCRIPT_URL;(0,r.default)([e],"tv4",{async:!0,numRetries:o.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",d),tv4.addFormat("numericString",h),l.ready.forEach((function(e){return e()}))},error:function(e){throw new Error(a.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}}},function(e,t,n){var i,r,a,o;o=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,l=document,u=i.async,c=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((s=l.createElement("link")).rel="stylesheet",s.href=h,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(s=l.createElement("img")).src=h:((s=l.createElement("script")).src=t,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(a)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<c)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,s)&&l.head.appendChild(s)}function s(e,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<s;r++)o(e[r],i,n)}(e,(function(e){a(l,e),t&&a({success:t,error:n},e),r(s,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return s.ready=function(e,t){return function(e,t){var r,a,o,s=[],l=(e=e.push?e:[e]).length,u=l;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};l--;)a=e[l],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t},s},r=[],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(16);var r=d(n(2)),a=d(n(17)),o=d(n(0)),s=d(n(1)),l=d(n(22)),u=d(n(24)),c=d(n(25));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){return r.default.getResource("bus",{})},p=function(){function e(t,n,i,r,a){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||s.default.mustBeDefined("tenant"),this.instanceID=n||s.default.mustBeDefined("instanceID"),this.deviceGroup=i||s.default.mustBeDefined("deviceGroup"),this.environment=r||s.default.mustBeDefined("environment"),this.queue=new u.default(o.default.EVENTS_BUFFER_SIZE),this.idManager=a,this.dispatchNumber=1,this.actionCounter=0,(new c.default).every(o.default.EVENTS_SENDER_INTERVAL).call((function(){d.queue=d.filterQueue();var e=d.prepareRequest();d.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach((function(e){return d.enqueue(e)}))})).call(l.default.applyThrottlingPolicy).start()}return i(e,[{key:"setMaxQueueSize",value:function(e){this.queue=u.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-o.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter((function(t){return t.actionTs>e}))}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,o.default.EVENTS_BULK_SIZE);return this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(s.default.INVALID_REQUEST);return e.actions.length>0}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=o.default.USE_HTTPS?"https://":"http://",i=this.idManager.getAsKeyValue(),r=i?"?"+i:"",s=""+n+l.default.applyDestinationPolicy()+"/event/"+this.currentTenant+r,u=a.default.get(t);if(!this.isValidRequest(e))return!1;this.dispatchNumber+=1;var c=u(e);return navigator.sendBeacon(s,c)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(s.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),e}();t.default={getInstance:function(e,t,n,i){var r=h(),a=e+"-"+t;return r[a]||(r[a]=new p(e,o.default.HORIZON_CLIENT_UUID,t,n,i)),r[a]},reset:function(e,t){e&&0!==e.length||s.default.mustBeDefined("tenant"),t&&0!==t.length||s.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete h()[n]},getContextBus:h}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"string"==typeof e},r=function(e){return e instanceof Blob};(function(){(function(){return"navigator"in this&&"sendBeacon"in this.navigator}).call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,a="unload"===n||"beforeunload"===n,o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!a),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),i(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text/plain"):r(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(18)),r=o(n(21)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s={base64:function(e){var t=new FormData;return t.append("data",i.default.encode(r.default.encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in s))throw new Error(a.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return s[e]}}},function(e,t,n){(function(e,i){var r;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(a){var o=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,o="",s=-1,c=e.length-a;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,i=e.charCodeAt(++s),o+=u.charAt((r=t+n+i)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==a?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=u.charAt((r=t+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(s),o+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",o=-1;++o<t;)i=u.indexOf(e.charAt(o)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(19)(e),n(20))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(e){var t,n,i,r=String.fromCharCode;function a(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return r(e>>t&63|128)}function l(e){if(0==(4294967168&e))return r(e);var t="";return 0==(4294965248&e)?t=r(e>>6&31|192):0==(4294901760&e)?(o(e),t=r(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=r(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+r(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(e=255&t[i],i++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return o(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,i=-1,r="";++i<n;)r+=l(t[i]);return r},e.decode=function(e){t=a(e),n=t.length,i=0;for(var o,s=[];!1!==(o=c());)s.push(o);return function(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=r((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=r(t);return a}(s)}}(t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(23)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.default={applyThrottlingPolicy:function(e){var t=r.default.EVENTS_SENDER_MIN_INTERVAL,n=r.default.EVENTS_SENDER_MAX_INTERVAL,a=Number(i.default.get("_hzt.interval"))||r.default.EVENTS_SENDER_INTERVAL;a<=n&&a>=t&&e.interval!==a&&e.reschedule(a)},applyDestinationPolicy:function(){return i.default.get("_hzt.host")||r.default.HORIZON_TRACK_HOST}}},function(e,t,n){var i,r;
/*!
   * JavaScript Cookie v2.2.0
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */!function(a){void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),e.exports=a()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,!0!==a[u]&&(l+="="+a[u]));return document.cookie=t+"="+r+l}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var p=c[h].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var g=p[0].replace(d,decodeURIComponent);if(f=n.read?n.read(f,g):n(f,g)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===g){o=f;break}t||(o[g]=f)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=t}return i(e,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(t,n){var i=new e(n);return t.forEach((function(e){return i.push(e)})),i}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}return i(e,[{key:"tick",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(0)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},d=function(){return a.default.getResource("schemas",{data:{}})},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=c.STATE_NOT_READY,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);var i=d().data[n];if(!i)throw new Error(o.default.UNSUPPORTED_TYPE+": "+n);return i}},{key:"isReady",value:function(){return this.state===c.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=c.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=c.STATE_NOT_READY,e.load()}),s.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===c.STATE_READY)return e(d().data);if(this.callbacks.onReady.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===c.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var e=this,t=d();if(this.state===c.STATE_NOT_READY){this.state=c.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var n=s.default.USE_HTTPS?"https://":"http://";l.default.request("GET",""+n+this.url,(function(n){t.data=Object.assign(t.data||{},n),e.state=c.STATE_READY,e.callbacks.onReady.forEach((function(e){return r.default.execAsync(e,t.data)}))}),(function(t){e.state=c.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}();t.default={getInstance:function(e){var t=d();return t.provider||(t.provider=new h(e||s.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:d}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null},r=function(e){return window.utag_data?window.utag_data[e]:null};t.default={getTenant:function(){return i("SITE_ID")||r("ut.profile")||"unknown"},getDeviceGroup:function(){return i("MOBILE_GROUP")||r("platform")||"unknown"}}}])}))),Rd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(Ci(this,e),e.instance)return e.instance;this.initHorizonClient(t,n,i)}return Ii(e,[{key:"initHorizonClient",value:function(e,t,n){var i=V.isSmartTvEnvironment?"tv":null;"prod"!==e&&Cd.Settings.useQAConfiguration(),t&&Cd.Settings.useHTTPOnly(),this.horizon=new Cd.HorizonClient(n,i),this.saveInstance()}},{key:"saveInstance",value:function(){e.instance=this}},{key:"send",value:function(e){this.horizon.send(e)}},{key:"unload",value:function(){this.horizon.unload()}}]),e}(),Id=Un.session,xd="object"===Si(window.onbeforeunload)?"beforeunload":"unload",Dd=function(e){return function(e){Oi(n,e);var t=Bi(n);function n(e){var i;Ci(this,n),(i=t.call(this,e))[e.type]=e;var r=i.options.env&&i.options.env.name||"",a=i.options.httpOnly,o=i.options.horizon&&i.options.horizon.tenant||(V.isSmartTvEnvironment?"player":null);return i.horizon=new Rd(r,a,o),i.setupUnload(),i}return Ii(n,[{key:"supportedVersion",get:function(){return{min:"0.4.22"}}},{key:"playerId",get:function(){return Qt.playerId}},{key:"videoSessionId",get:function(){return Id.getVideoSessionId(this.options.playerId)}},{key:"contentType",get:function(){return"monitoring"}},{key:"basicData",get:function(){return{id:this.id,version:this.version,contentType:this.contentType}}}]),Ii(n,[{key:"setupUnload",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(xd,this.boundOnEnd)}},{key:"bindEvents",value:function(){}},{key:"onUnload",value:function(){}},{key:"onEnd",value:function(){this.onUnload(),this.horizon.unload()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{this.horizon.send(Pi(Pi({},this.basicData),{},{properties:e}))}catch(e){fe.error(this.name,"Error when trying to send data to Horizon",e)}}},{key:"destroy",value:function(){window.removeEventListener(xd,this.boundOnEnd),this.stopListening(),Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(e)};var Pd=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Od="object"==typeof Ua&&Ua&&Ua.Object===Object&&Ua,Ld="object"==typeof self&&self&&self.Object===Object&&self,Md=Od||Ld||Function("return this")(),Nd=function(){return Md.Date.now()},Ud=Md.Symbol,Bd=Object.prototype,Fd=Bd.hasOwnProperty,Vd=Bd.toString,Hd=Ud?Ud.toStringTag:void 0;var jd=function(e){var t=Fd.call(e,Hd),n=e[Hd];try{e[Hd]=void 0;var i=!0}catch(e){}var r=Vd.call(e);return i&&(t?e[Hd]=n:delete e[Hd]),r},Kd=Object.prototype.toString;var Gd=function(e){return Kd.call(e)},zd=Ud?Ud.toStringTag:void 0;var Wd=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":zd&&zd in Object(e)?jd(e):Gd(e)};var Yd=function(e){return null!=e&&"object"==typeof e};var qd=function(e){return"symbol"==typeof e||Yd(e)&&"[object Symbol]"==Wd(e)},$d=/^\s+|\s+$/g,Xd=/^[-+]0x[0-9a-f]+$/i,Zd=/^0b[01]+$/i,Qd=/^0o[0-7]+$/i,Jd=parseInt;var eh=function(e){if("number"==typeof e)return e;if(qd(e))return NaN;if(Pd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Pd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace($d,"");var n=Zd.test(e);return n||Qd.test(e)?Jd(e.slice(2),n?2:8):Xd.test(e)?NaN:+e},th=Math.max,nh=Math.min;var ih=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(v,t),c?p(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function v(){var e=Nd();if(g(e))return y(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?nh(n,a-(e-u)):n}(e))}function y(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function m(){var e=Nd(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return clearTimeout(s),s=setTimeout(v,t),p(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=eh(t)||0,Pd(n)&&(c=!!n.leading,a=(d="maxWait"in n)?th(eh(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},m.flush=function(){return void 0===s?o:y(Nd())},m},rh=function(){return{}},ah=function(e){return{subject:e}},oh=function(e,t){return{subject:t,value:e}},sh=function(e,t){return{subject:t}},lh=Un.getCurrentTime,uh=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).counter=0,i}return Ii(n,[{key:"name",get:function(){return"events-schema"}},{key:"id",get:function(){return"player-events"}},{key:"version",get:function(){return"2.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"playbackType",get:function(){return this.container&&this.container.getPlaybackType()}},{key:"playHeadTimeLive",get:function(){return this.innerPlayback&&lh(this.innerPlayback)||-1}},{key:"playHeadTimeVOD",get:function(){return this.container&&parseInt(1e3*this.container.getCurrentTime(),10)||-1}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"coreEvents",get:function(){var e;return xi(e={},be.CORE_FULLSCREEN,(function(e,t){return{subject:t,value:e}})),xi(e,be.CORE_RESIZE,(function(e,t){var n=e.width,i=e.height;return{value:"".concat(n,"x").concat(i),subject:t}})),xi(e,be.CORE_SCREEN_ORIENTATION_CHANGED,(function(e,t){return{subject:t,value:e.orientation}})),xi(e,Fn.WM_PIP_ADDED,rh),xi(e,Fn.WM_PIP_DISCARDED,rh),xi(e,Fn.WM_MASTER_ADDED,rh),xi(e,Fn.WM_MASTER_CHANGED,rh),xi(e,Fn.WM_PIPTOMASTER,rh),xi(e,Fn.WM_MASTERTOPIP,rh),xi(e,Fn.MEDIACONTROL_DOUBLE_TAP,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide,n=void 0===t?"":t;return{value:n}})),xi(e,Fn.WILL_SHOW_QUICK_SEEK_HINT,rh),xi(e,Fn.WILL_HIDE_QUICK_SEEK_HINT,rh),xi(e,Fn.START_DRAGGING_SEEKBAR,rh),xi(e,Fn.STOP_DRAGGING_SEEKBAR,rh),e}},{key:"mediaControlEvents",get:function(){var e;return xi(e={},Fn.MEDIACONTROL_MODAL_SHOW,rh),xi(e,Fn.MEDIACONTROL_MODAL_HIDE,rh),xi(e,Fn.MEDIACONTROL_ITEMCLICKED,ah),xi(e,be.MEDIACONTROL_RENDERED,ah),xi(e,Fn.WM_VOLUME_SHOW,ah),xi(e,Fn.WM_VOLUME_HIDE,ah),xi(e,Fn.WM_SHARE_SHOW,ah),xi(e,Fn.WM_SHARE_HIDE,ah),e}},{key:"containerEvents",get:function(){var e;return xi(e={},be.CONTAINER_CLICK,sh),xi(e,be.CONTAINER_DESTROYED,sh),xi(e,be.CONTAINER_DBLCLICK,sh),xi(e,be.CONTAINER_VOLUME,(function(e,t){return{value:Math.round(e),subject:t}})),xi(e,Fn.WM_BITRATE_CAP,(function(e,t){return{value:e.toFixed(2),subject:t}})),xi(e,Fn.DFP_AD_LOADED,rh),xi(e,Fn.DFP_AD_CLOSED,rh),xi(e,Fn.DFP_AD_STARTED,rh),xi(e,Fn.DFP_AD_RESUME,rh),xi(e,Fn.DFP_AD_PAUSE,rh),xi(e,Fn.DFP_AD_CLICKED,rh),xi(e,Fn.DFP_AD_COMPLETED,rh),xi(e,Fn.DFP_AD_SKIPPED,rh),xi(e,Fn.DFP_AD_NOTSERVED,rh),xi(e,Fn.DFP_AD_METADATA,rh),xi(e,Fn.DFP_ALL_ADS_COMPLETED,rh),xi(e,Fn.DFP_CONTENT_PAUSE,rh),xi(e,Fn.DFP_CONTENT_RESUME,rh),xi(e,Fn.DFP_CONTENT_STARTED,rh),xi(e,Fn.DFP_CONTENT_ENDED,rh),xi(e,Fn.DFP_FINISHED,rh),xi(e,Fn.WM_MUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),xi(e,Fn.WM_UNMUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),xi(e,Fn.WM_SETTINGS_LEVEL_SELECTED,(function(e,t){return{value:JSON.stringify(e),subject:t}})),xi(e,Fn.WM_AUDIO_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),xi(e,Fn.WM_AUDIO_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,Fn.WM_LOCATION_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,Fn.WM_SUBTITLE_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),xi(e,Fn.SKIP_BUTTON_CLICKED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),xi(e,Fn.SKIP_BUTTON_SHOW,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),xi(e,Fn.DID_CHANGE_CURRENT_PROGRAM,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,Fn.WILL_QUICK_SEEK,rh),xi(e,Fn.WILL_AUTO_SKIP_RECAP,rh),xi(e,Fn.WM_GA_UNTRACKED_EVENT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;return{value:n}})),xi(e,Fn.SIMULCAST_PING,oh),xi(e,Fn.WM_RESOURCE_REQUEST_STATS,(function(e){var t=e.retries,n=e.usedFallback;return{value:JSON.stringify({attempts:t,fallback:n}),eventName:"retry_history"}})),e}},{key:"playbackEvents",get:function(){var e;return xi(e={},be.PLAYBACK_READY,oh),xi(e,be.PLAYBACK_BUFFERING,oh),xi(e,be.PLAYBACK_BUFFERFULL,oh),xi(e,be.PLAYBACK_LOADEDMETADATA,(function(e,t){var n=e.duration;return{subject:t,value:Math.round(n)}})),xi(e,be.PLAYBACK_HIGHDEFINITIONUPDATE,oh),xi(e,be.PLAYBACK_BITRATE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,be.PLAYBACK_DVR,oh),xi(e,be.PLAYBACK_ENDED,ah),xi(e,be.PLAYBACK_PLAY_INTENT,ah),xi(e,be.PLAYBACK_PLAY,ah),xi(e,be.PLAYBACK_PAUSE,(function(e,t){return{subject:e,value:JSON.stringify(t)}})),xi(e,be.PLAYBACK_SEEK,ah),xi(e,be.PLAYBACK_SEEKED,ah),xi(e,be.PLAYBACK_STOP,ah),xi(e,be.PLAYBACK_LEVEL_SWITCH,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,be.PLAYBACK_SUBTITLE_AVAILABLE,ah),xi(e,Fn.WM_WROOM_WAITING,sh),xi(e,Fn.WM_PLAY_REQUESTED_READY,sh),xi(e,Fn.WILL_SELECT_FALLBACK_SOURCE,(function(e){return{value:JSON.stringify(e)}})),xi(e,Fn.WILL_CHANGE_SOURCE,(function(e){return{value:JSON.stringify(e)}})),xi(e,Fn.FALLBACK_SOURCE_SELECTED,(function(e){return{value:JSON.stringify(e)}})),xi(e,Fn.WILL_RENEW_RESOURCE,(function(e){return{value:JSON.stringify(e)}})),e}}]),Ii(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_READY,this.bindContainerEvents),Object.entries(this.coreEvents).forEach((function(t){var n=Vi(t,2),i=n[0],r=n[1];e.subscribeEvent(e.core,i,r)})),Object.entries(this.mediaControlEvents).forEach((function(t){var n=Vi(t,2),i=n[0],r=n[1];e.subscribeEvent(e.mediaControl,i,r)}))}},{key:"onUnload",value:function(){this.sendEvent("user","DID_LEAVE")}},{key:"playheadTime",value:function(){return this.playbackType?this.playbackType===Be.LIVE?this.playHeadTimeLive:this.playHeadTimeVOD:-1}},{key:"handleEventArgs",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=t.apply(void 0,i),o=a.subject,s=a.value,l=a.eventName;this.sendEvent(o,l||e,s)}},{key:"subscribeEvent",value:function(e,t,n){this.listenTo(e,t,ih(this.handleEventArgs.bind(this,t,n),500,{leading:!0,trailing:!0}))}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.bindPlaybackEvents(),Object.entries(this.containerEvents).forEach((function(t){var n=Vi(t,2),i=n[0],r=n[1];e.subscribeEvent(e.container,i,r)})))}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.playback&&Object.entries(this.playbackEvents).forEach((function(t){var n=Vi(t,2),i=n[0],r=n[1];e.subscribeEvent(e.playback,i,r)}))}},{key:"sendEvent",value:function(e,t,n){this.send(Object.assign({},this.baseProperties,{subject:e||"unknown"},t&&{event:t.toString()},n&&{value:n.toString()},{playheadTime:this.playheadTime()},{counter:parseInt(this.counter,10)})),this.counter+=1}}]),n}(Dd(Ze)),ch=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send(Pi(Pi(Pi({},this.baseProperties),this.containerProperties()),this.videoProperties(e)))}},{key:"containerProperties",value:function(){return{playback:this.innerPlayback.name,muted:!this.container.playback.getVolume()}}},{key:"liveProps",value:function(e){return{duration:-1,dvr:this.container.isDvrEnabled(),signal:e.transmission.signal}}},{key:"videoProperties",value:function(e){var t={videoId:e.id,programId:e.programId,channelId:e.channelId,kind:e.kind,encrypted:e.encrypted,subscriberOnly:e.isSubscriberOnly,adult:e.adult,cdn:e.cdn,duration:e.duration,downloadedSession:!1};return e.encrypted&&(t.drmProtocol=e.drm),"live"==e.kind&&(t=Pi(Pi({},t),this.liveProps(e))),t}},{key:"name",get:function(){return"session-info-schema"}},{key:"id",get:function(){return"player-session-info"}},{key:"version",get:function(){return"2.3"}},{key:"innerPlayback",get:function(){return this.container.playback.playback}},{key:"startAt",get:function(){return"live"===this.container.getPlaybackType()?this.options.liveStartTime:this.options.resumeAt}},{key:"baseProperties",get:function(){var e={playerId:this.playerId,videoSessionId:this.videoSessionId,autoPlay:!!this.options.autoPlay,disableAds:!!this.options.skipDFP};return this.startAt&&(e.startAt=this.startAt),e}}]),n}(Dd(Xe)),dh=Un.API_VERSION,hh=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).chromecastStatus=i.getChromecastStatus(),i}return Ii(n,[{key:"name",get:function(){return"environment-web-info-schema"}},{key:"id",get:function(){return"player-environment-web"}},{key:"version",get:function(){return"2.0"}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_READY,this.sendEvents)}},{key:"getChromecastStatus",value:function(){return Promise.race([this.subscribe(this.listenTo.bind(this,this.core,Fn.CHROMECAST_SCRIPT_ERROR)).then((function(){return"script-load-error"})),this.subscribe(this.listenTo.bind(this,this.core,Fn.CHROMECAST_API_ERROR)).then((function(){return"api-error"})),this.subscribe(this.listenTo.bind(this,this.core,Fn.CHROMECAST_INITIALIZE_ERROR)).then((function(){return"initialize-error"})),this.subscribe(this.listenTo.bind(this,this.core,Fn.CHROMECAST_AVAILABLE)).then((function(){return"available"})),this.subscribe(this.listenTo.bind(this,this.core,Fn.CHROMECAST_UNAVAILABLE)).then((function(){return"unavailable"}))]).then((function(e){return{castStatus:e}})).catch((function(){return{castStatus:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,apiVersion:dh,browserVersion:V.data.fullVersion,browser:V.name,location:this.core.options.domain||document.location.hostname}),this.chromecastStatus]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(Hi(t))))}))}}]),n}(Dd(Ze)),ph=wi.Video,fh=Un.getDeviceType,gh=function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).deviceInfo=i.options.deviceInfo||{},i}return Ii(n,[{key:"name",get:function(){return"environment-info-schema"}},{key:"id",get:function(){return"player-environment-data"}},{key:"version",get:function(){return"3.0"}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_READY,this.sendEvents)}},{key:"initialSize",value:function(){return this.subscribe(this.listenTo.bind(this,this.core,be.CORE_RESIZE)).then((function(e){var t=e.width,n=e.height;return{initialSize:"".concat(t,"x").concat(n)}})).catch((function(){return{initialSize:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,os:this.deviceInfo.os||V.os.name,osVersion:this.osVersion,playerVersion:"7.51.1",playerType:ph.getPlayerType(),application:this.core.options.domain||document.location.hostname,deviceType:fh(),applicationVersion:this.core.options.applicationVersion||"not-informed",networkType:"None/web",deviceModel:this.deviceModel}),this.initialSize()]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(Hi(t))))}))}},{key:"osVersion",get:function(){return(V.isSmartTvEnvironment?this.deviceInfo.firmwareVersion:V.os.fullVersion)||"other"}},{key:"deviceModel",get:function(){return V.isSmartTvEnvironment&&(this.deviceInfo.model||V.device.model)||"not-informed"}}]),n}(Dd(Ze)),vh=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,be.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,be.CORE_READY,this.bindContainerEvents),this.listenToCoreErrors()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.listenToContainerErrors()}},{key:"listenToContainerErrors",value:function(){var e=this;this.listenTo(this.container,be.CONTAINER_ERROR,this.sendEvents),this.listenTo(this.container,Fn.DFP_AD_ERROR,(function(t){var n=e.formatAdErrors(t);e.sendEvents(n)})),this.listenTo(this.container,Fn.WM_VIDEO_METADATA_ERROR,this.sendEvents),this.listenTo(this.container,Fn.WM_RESOURCE_ERROR,this.sendEvents)}},{key:"listenToCoreErrors",value:function(){this.listenTo(this.core,Fn.CHROMECAST_API_ERROR,this.sendEvents),this.listenTo(this.core,Fn.CHROMECAST_SCRIPT_ERROR,this.sendEvents),this.listenTo(this.core,Fn.CHROMECAST_INITIALIZE_ERROR,this.sendEvents),this.listenTo(this.core,Fn.CHROMECAST_LAUNCH_ERROR,this.sendEvents),this.listenTo(this.core,Fn.CHROMECAST_MEDIA_LOAD_ERROR,this.sendEvents)}},{key:"formatAdErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===Si(e.message)?{code:e.message&&e.message.getType&&e.message.getType()||"",message:e.message&&e.message.getMessage&&e.message.getMessage(),level:"unknown"}:e}},{key:"errorProperties",value:function(e){return{code:e.code||e.type||"unknown",message:e.description||e.message||"unknown",level:e.level||"unknown"}}},{key:"sendEvents",value:function(e){this.send(Pi(Pi({},this.baseProperties),this.errorProperties(e)))}},{key:"name",get:function(){return"errors-schema"}},{key:"id",get:function(){return"player-errors"}},{key:"version",get:function(){return"1.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{playerId:this.playerId,videoSessionId:this.videoSessionId}}}]),n}(Dd(Ze)),yh=function(e){Oi(n,e);var t=Bi(n);function n(){return Ci(this,n),t.apply(this,arguments)}return Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.container,Fn.DFP_AD_LOADED,this.sendEvents)}},{key:"adConfigProperties",value:function(e){return Pi(Pi({},this.adProperties(e)),this.dfpProperties())}},{key:"adProperties",value:function(e){return{adId:e.getAdId(),linear:e.isLinear(),position:this.getAdPosition(e),skippable:e.isSkippable(),duration:parseInt(e.getDuration(),10),timeOffset:parseInt(e.getAdPodInfo().getTimeOffset(),10)}}},{key:"dfpProperties",value:function(){return{adUnit:this.dfp.adUnit,adCustomData:this.dfp.adCustomData,accountId:this.dfp.adAccountId,cmsId:this.dfp.adCmsId}}},{key:"getAdPosition",value:function(e){if(!e.isLinear())return"overlay";switch(e.getAdPodInfo().getPodIndex()){case 0:return"pre-roll";case-1:return"pos-roll";default:return"mid-roll"}}},{key:"sendEvents",value:function(e){this.send(Pi(Pi({},this.baseProperties),this.adConfigProperties(e)))}},{key:"name",get:function(){return"ad-config-schema"}},{key:"id",get:function(){return"player-ad-config"}},{key:"version",get:function(){return"2.0"}},{key:"dfp",get:function(){return this.container.options.dfp}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}}]),n}(Dd(Xe)),mh=6e4,bh=15e3,Eh=.05,Ah={EnvironmentInfo:gh,EnvironmentWebInfo:hh,SessionInfoSchema:ch,ErrorsInfo:vh,EventsInfo:uh,AdConfigSchema:yh,NetworkMonitoring:function(e){Oi(n,e);var t=Bi(n);function n(e){var i;return Ci(this,n),(i=t.call(this,e)).measurements=[],i.counter=0,i.bufferingTime=0,i.decodedFrames=0,i.droppedFrames=0,i.lastBufferType=null,i.updateMeasurements({}),i}return Ii(n,[{key:"name",get:function(){return"network-monitoring-schema"}},{key:"id",get:function(){return"player-network-monitoring"}},{key:"version",get:function(){return"6.0"}},{key:"currentTime",get:function(){return(new Date).getTime()}},{key:"isBuffering",get:function(){return this.lastBufferType===be.PLAYBACK_BUFFERING}},{key:"bandwidthEstimate",get:function(){var e=this.container.playback.bandwidthEstimate;return"number"==typeof e&&e>=0?e:-1}}]),Ii(n,[{key:"bindEvents",value:function(){this.listenTo(this.container,Fn.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container.playback,Fn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,Fn.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,Fn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,be.PLAYBACK_BITRATE,this.updateMeasurements),this.listenTo(this.container.playback,be.PLAYBACK_STOP,this.stopHeartbeat),this.listenTo(this.container.playback,be.PLAYBACK_ERROR,this.stopHeartbeat),this.listenTo(this.container.playback,be.PLAYBACK_ENDED,this.stopHeartbeat),this.listenTo(this.container.playback,be.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.container.playback,be.PLAYBACK_BUFFERFULL,this.onBufferFull)}},{key:"onStatsReported",value:function(e){this.decodedFrames=e.counters.decodedFrames,this.droppedFrames=e.counters.droppedFrames}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.domainHost=this.getDomainFromURL(t)}},{key:"onStreamingDataLoaded",value:function(e){var t=e.host;this.domainHost=t}},{key:"pingInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"live"==e.kind?mh:Math.max(bh,Eh*e.duration)}},{key:"onResourceReady",value:function(e){this.setCDNHost(e),this.setPoP(e),this.stopHeartbeat(),this.heartbeat=setInterval(this.onHeartbeatTick.bind(this),this.pingInterval(e)),this.onHeartbeatTick()}},{key:"setCDNHost",value:function(e){var t=e.selectedResource.url;this.domainHost=this.getDomainFromURL(t)}},{key:"setPoP",value:function(e){var t=e.selectedResource.resourcePOP;this.pop=t}},{key:"getDomainFromURL",value:function(e){return e&&/:\/\/(?:www\.)?(.[^/]+)(.*)/.exec(e)[1]}},{key:"updateMeasurements",value:function(e){var t=e.bitrate,n=void 0===t?0:t;this.lastMeasurement={nominalBitrate:parseInt(n,10),bandwidth:parseInt(this.bandwidthEstimate,10),timestamp:this.currentTime},this.measurements.push(this.lastMeasurement)}},{key:"increaseTotalBuffering",value:function(){this.isBuffering&&this.bufferStartTime>0&&(this.bufferingTime+=this.currentTime-this.bufferStartTime,this.bufferStartTime=this.currentTime)}},{key:"onBuffering",value:function(){this.bufferStartTime=this.currentTime,this.increaseTotalBuffering(),this.lastBufferType=be.PLAYBACK_BUFFERING}},{key:"onBufferFull",value:function(){this.increaseTotalBuffering(),this.bufferStartTime=0,this.lastBufferType=be.PLAYBACK_BUFFERFULL}},{key:"onHeartbeatTick",value:function(){0==this.measurements.length&&this.measurements.push(this.lastMeasurement),this.increaseTotalBuffering(),this.sendEvent(),this.resetStateTimmingInfo(),this.eraseMeasurements(),this.updateCounter()}},{key:"updateCounter",value:function(){this.counter+=1}},{key:"resetStateTimmingInfo",value:function(){this.bufferingTime=0}},{key:"eraseMeasurements",value:function(){this.measurements=[]}},{key:"onUnload",value:function(){this.sendEvent()}},{key:"sendEvent",value:function(){this.send({videoSessionId:this.videoSessionId,measurements:this.measurements,counter:this.counter,domainHost:this.domainHost||"unknown",pop:this.pop||"unknown",bufferingTime:this.bufferingTime,decodedFrames:this.decodedFrames,droppedFrames:this.droppedFrames})}},{key:"stopHeartbeat",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopHeartbeat(),Fi(Li(n.prototype),"destroy",this).call(this)}}]),n}(Dd(Xe))},kh=Object.entries(Ah).reduce((function(e,t){var n=Vi(t,2),i=n[0],r=n[1];return e[r.type]=e[r.type]||{},e[r.type][i]=r,e}),{}),Th=kh.core,_h=kh.container,wh=function(e){return(t=e,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).match(/skd\:\/\/(.*)$/)[1];var t},Sh=function(e,t,n){var i="string"==typeof t?function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t):t,r=0,a=new ArrayBuffer(e.byteLength+4+i.byteLength+4+n.byteLength),o=new DataView(a);new Uint8Array(a,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,i.byteLength,!0),r+=4;var s=new Uint16Array(a,r,i.length);return s.set(i),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},Ch=function(e){Oi(n,e);var t=Bi(n);function n(){var e;Ci(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReadyState=!1,e.certificate=null,e.setupDRM(e.options.fairplay||{}),e}return Ii(n,[{key:"name",get:function(){return"hls_fairplay_playback"}},{key:"events",get:function(){return Pi(Pi({},Fi(Li(n.prototype),"events",this)),{},{webkitneedkey:this.onNeedKey})}}]),Ii(n,[{key:"_setup",value:function(){this.setupDRM(this.options.fairplay||{})}},{key:"setupDRM",value:function(e){this.certificateUrl=e.certificate,this.serverUrl=e.server,this.certificateUrl&&this.loadCertificate()}},{key:"loadCertificate",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("load",(function(t){return e.onCertificateLoaded(t)}),!1),t.addEventListener("error",(function(t){return e.onCertificateError(t)}),!1),t.open("GET",this.certificateUrl,!0),t.send()}},{key:"onCertificateLoaded",value:function(e){var t=e.target;this.certificate=new Uint8Array(t.response),Fi(Li(n.prototype),"_ready",this).call(this),fe.info(this.name,"Certificate loaded successfully")}},{key:"onCertificateError",value:function(e){var t=this.createError({code:"certificateError",description:"Failed to retrieve the server certificate",raw:e});this.trigger(be.PLAYBACK_ERROR,t),fe.error(this.name,"Failed to retrieve the server certificate",t)}},{key:"onNeedKey",value:function(e){var t=e.target,n=e.initData,i=wh(n);n=Sh(n,i,this.certificate),this.createMediaKeys(t),this.createKeySession(t,n,i)}},{key:"createMediaKeys",value:function(e){if(!e.webkitKeys){var t=WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?"com.apple.fps.1_0":null;if(t)e.webkitSetMediaKeys(new WebKitMediaKeys(t));else{var n=this.createError({code:"unsupportedKeySystem",description:"Could not create MediaKeys. Key System not supported"});this.trigger(be.PLAYBACK_ERROR,n),fe.error(this.name,"Could not create MediaKeys. Key System not supported",n)}}}},{key:"createKeySession",value:function(e,t,n){if(e.webkitKeys){var i=e.webkitKeys.createSession("video/mp4",t);if(i)i.contentId=n,this.bindKeySessionEvents(i);else{var r=this.createError({code:"mediaKeysError",description:"Could not create key session"});this.trigger(be.PLAYBACK_ERROR,r),fe.error(this.name,"Could not create key session",r)}}}},{key:"bindKeySessionEvents",value:function(e){var t=this;e.addEventListener("webkitkeymessage",(function(e){return t.licenseRequestReady(e)}),!1),e.addEventListener("webkitkeyadded",(function(e){return t.onKeyAdded(e)}),!1),e.addEventListener("webkitkeyerror",(function(e){return t.onKeyError(e)}),!1)}},{key:"onKeyAdded",value:function(e){fe.info(this.name,"Decryption key was added to session",e)}},{key:"onKeyError",value:function(e){var t=this.createError({code:"decryptionKeyError",description:"A decryption key error was encountered",level:"WARN",raw:e});fe.warn(this.name,"A decryption key error was encountered",t)}},{key:"licenseRequestReady",value:function(e){var t=this,n=e.target,i=e.message,r=new XMLHttpRequest,a="spc=".concat(encodeURIComponent(function(e){for(var t,n,i,r,a,o,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)r=(t=e[c++])>>2,a=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,o=(15&n)<<2|(i=c<e.length?e[c++]:Number.NaN)>>6,s=63&i,isNaN(n)?(o=64,s=64):isNaN(i)&&(s=64),u+=l.charAt(r)+l.charAt(a)+l.charAt(o)+l.charAt(s);return u}(i)));r.responseType="text",r.session=n,r.addEventListener("load",(function(e){return t.onLicenseRequestLoaded(e)}),!1),r.addEventListener("error",(function(e){return t.onLicenseRequestError(e)}),!1),r.open("POST",this.serverUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),fe.info(this.name,"License request ready")}},{key:"onLicenseRequestLoaded",value:function(e){var t=e.target,n=t.session,i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}(JSON.parse(t.responseText.trim()).ckc);n.update(i),fe.info(this.name,"License loaded successfully")}},{key:"onLicenseRequestError",value:function(e){var t=this.createError({code:"licenseRequestError",description:"The license request failed",raw:e});this.trigger(be.PLAYBACK_ERROR,t),fe.error(this.name,"The license request failed",t)}}]),n}(it);Ch.canPlay=function(e,t,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t;return!(!V.isSafari&&!V.isiOS||!r||!n)};var Rh=Fa((function(e,t){e.exports=function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function f(e){var t=d();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=g(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function y(e){return m(e)||b(e)||E(e)||k()}function m(e){if(Array.isArray(e))return A(e)}function b(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function E(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var T=e.Utils.now,_=e.Utils.assign,w=e.Utils.listContainsIgnoreCase,S=-1;e.Events.register("PLAYBACK_FRAGMENT_CHANGED"),e.Events.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var C=function(i){l(o,i);var a=f(o);function o(){var t;n(this,o);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(t=a.call.apply(a,[this].concat(r))).options.playback=s(s({},t.options),t.options.playback),t._minDvrSize=void 0===t.options.hlsMinimumDvrSize?60:t.options.hlsMinimumDvrSize,t._extrapolatedWindowNumSegments=t.options.playback&&void 0!==t.options.playback.extrapolatedWindowNumSegments?t.options.playback.extrapolatedWindowNumSegments:2,t._playbackType=e.Playback.VOD,t._lastTimeUpdate={current:0,total:0},t._lastDuration=null,t._playableRegionStartTime=0,t._localStartTimeCorrelation=null,t._localEndTimeCorrelation=null,t._playableRegionDuration=0,t._programDateTime=0,t._durationExcludesAfterLiveSyncPoint=!1,t._segmentTargetDuration=null,t._playlistType=null,t._recoverAttemptsRemaining=t.options.hlsRecoverAttempts||16,t}return r(o,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.11"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?S:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===e.Playback.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return T()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,n=(e.remote+t)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,n=this._now-t.local,i=(t.remote+n)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(i,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}}],[{key:"HLSJS",get:function(){return t}}]),r(o,[{key:"_setup",value:function(){var e=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new t(_({},this.options.playback.hlsjsConfig)),this._hls.once(t.Events.MEDIA_ATTACHED,(function(){return e._hls.loadSource(e.options.src)})),this._hls.on(t.Events.LEVEL_LOADED,(function(t,n){return e._updatePlaybackType(t,n)})),this._hls.on(t.Events.LEVEL_UPDATED,(function(t,n){return e._onLevelUpdated(t,n)})),this._hls.on(t.Events.LEVEL_SWITCHING,(function(t,n){return e._onLevelSwitch(t,n)})),this._hls.on(t.Events.FRAG_CHANGED,(function(t,n){return e._onFragmentChanged(t,n)})),this._hls.on(t.Events.FRAG_LOADED,(function(t,n){return e._onFragmentLoaded(t,n)})),this._hls.on(t.Events.FRAG_PARSING_METADATA,(function(t,n){return e._onFragmentParsingMetadata(t,n)})),this._hls.on(t.Events.ERROR,(function(t,n){return e._onHLSJSError(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACK_LOADED,(function(t,n){return e._onSubtitleLoaded(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this._hls.attachMedia(this.el)}},{key:"_onFragmentParsingMetadata",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:t,data:n})}},{key:"render",value:function(){return this._ready(),v(u(o.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState=!0,this.trigger(e.Events.PLAYBACK_READY,this.name)}},{key:"_recover",value:function(t,n,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){e.Log.error("hlsjs: failed to recover",{evt:t,data:n}),i.level=e.PlayerError.Levels.FATAL;var r=this.createError(i);this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(t){t<0&&(e.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,this.el.currentTime=t}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(t){this.trigger(e.Events.PLAYBACK_DVR,t),this.trigger(e.Events.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"_updateSettings",value:function(){this._playbackType===e.Playback.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(e.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(n,i){var r,a={code:"".concat(i.type,"_").concat(i.details),description:"".concat(this.name," error: type: ").concat(i.type,", details: ").concat(i.details),raw:i};if(i.response&&(a.description+=", response: ".concat(JSON.stringify(i.response))),i.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,i.type){case t.ErrorTypes.NETWORK_ERROR:switch(i.details){case t.ErrorDetails.MANIFEST_LOAD_ERROR:case t.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case t.ErrorDetails.MANIFEST_PARSING_ERROR:case t.ErrorDetails.LEVEL_LOAD_ERROR:case t.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.Log.error("hlsjs: unrecoverable network fatal error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();break;default:e.Log.warn("hlsjs: trying to recover from network error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._hls.startLoad()}break;case t.ErrorTypes.MEDIA_ERROR:e.Log.warn("hlsjs: trying to recover from media error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._recover(n,i,a);break;default:e.Log.error("hlsjs: could not recover from error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else e.Log.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(i))return e.Log.error("hlsjs: could not load decrypt key.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),void this.stop();a.level=e.PlayerError.Levels.WARN,e.Log.warn("hlsjs: non-fatal error occurred",{evt:n,data:i})}}},{key:"_keyIsDenied",value:function(e){return e.type===t.ErrorTypes.NETWORK_ERROR&&e.details===t.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(e.Events.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,v(u(o.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var t=[],n=0,i=0;i<this.el.buffered.length;i++)t=[].concat(y(t),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=t[i].start&&this.el.currentTime<=t[i].end&&(n=i);var r={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(e.Events.PLAYBACK_PROGRESS,r,t)}}},{key:"play",value:function(){this._hls||this._setup(),v(u(o.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(v(u(o.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),v(u(o.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(t,n){this._playbackType=n.details.live?e.Playback.LIVE:e.Playback.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===e.Playback.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(e.Events.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(n,i){this._segmentTargetDuration=i.details.targetduration,this._playlistType=i.details.type||null;var r=!1,a=!1,o=i.details.fragments,s=this._playableRegionStartTime,l=this._playableRegionDuration;if(0!==o.length){if(o[0].rawProgramDateTime&&(this._programDateTime=o[0].rawProgramDateTime),this._playableRegionStartTime!==o[0].start&&(r=!0,this._playableRegionStartTime=o[0].start),r)if(this._localStartTimeCorrelation){var u=this._localStartTimeCorrelation,c=this._now-u.local,d=(u.remote+c)/1e3;d<o[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*o[0].start}:d>s+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(o[0].start,s+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(o[0].start+this._extrapolatedWindowDuration/2)};var h=i.details.totalduration;if(this._playbackType===e.Playback.LIVE){var p=i.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||t.DefaultConfig.liveSyncDurationCount);p<=h?(h-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}h!==this._playableRegionDuration&&(a=!0,this._playableRegionDuration=h);var f=o[0].start+h,g=s+l;if(f!==g)if(this._localEndTimeCorrelation){var v=this._localEndTimeCorrelation,y=this._now-v.local,m=(v.remote+y)/1e3;m>f?this._localEndTimeCorrelation={local:this._now,remote:1e3*f}:m<f-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(f-this._extrapolatedWindowDuration)}:m>g&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*g})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*f};a&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_CHANGED,n)}},{key:"_onFragmentLoaded",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_LOADED,n)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(e.Events.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===e.Playback.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(t,n){this.levels.length||this._fillLevels(),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_END),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH,n);var i=this._hls.levels[n.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(e.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(e.Events.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:n.level}))}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===e.Playback.VOD||this.dvrEnabled}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===e.Playback.LIVE}}]),o}(e.HTML5Video);return C.canPlay=function(e,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||w(n,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!t.isSupported()||!r)},C}(ct,ft)})),Ih=Ba(Fa((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s="./src/clappr-dash-shaka-playback.js")}({"./node_modules/shaka-player/dist/shaka-player.compiled.js":
/*!*****************************************************************!*\
    !*** ./node_modules/shaka-player/dist/shaka-player.compiled.js ***!
    \*****************************************************************/
/*! no static exports found */function(e,t,n){(function(e){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var n="undefined"!=typeof window?window:e,i={};for(var r in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{for(var n=o,i=e.split("."),r=0;r<i.length-1;r++){var s=i[r];if(!(s in n))break e;n=n[s]}(s=t(r=n[i=i[i.length-1]]))!=r&&null!=s&&a(n,i,{configurable:!0,writable:!0,value:s})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function c(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.a=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.a};var n=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(i||"")+"_"+n++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={ae:!0},p=f.ae;break e}catch(e){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=d;function v(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Rf=t.prototype}function y(){this.j=!1,this.g=null,this.b=void 0,this.a=1,this.f=this.h=0,this.v=this.c=null}function m(e){if(e.j)throw new TypeError("Generator is already running");e.j=!0}function b(e,t){e.c={Bd:t,Gd:!0},e.a=e.h||e.f}function E(e,t,n){return e.a=n,{value:t}}function A(e){e.a=0}function k(e,t,n){e.h=t,null!=n&&(e.f=n)}function T(e){e.h=0,e.f=2}function _(e,t){e.a=t,e.h=0}function w(e){e.h=0;var t=e.c.Bd;return e.c=null,t}function S(e){e.v=[e.c],e.h=0,e.f=0}function C(e,t){var n=e.v.splice(0)[0];(n=e.c=e.c||n)?n.Gd?e.a=e.h||e.f:null!=n.u&&e.f<n.u?(e.a=n.u,e.c=null):e.a=e.f:e.a=t}function R(e){this.a=new y,this.b=e}function I(e,t,n,i){try{var r=t.call(e.a.g,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.j=!1,r;var a=r.value}catch(t){return e.a.g=null,b(e.a,t),x(e)}return e.a.g=null,i.call(e.a,a),x(e)}function x(e){for(;e.a.a;)try{var t=e.b(e.a);if(t)return e.a.j=!1,{value:t.value,done:!1}}catch(t){e.a.b=void 0,b(e.a,t)}if(e.a.j=!1,e.a.c){if(t=e.a.c,e.a.c=null,t.Gd)throw t.Bd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return m(e.a),e.a.g?t=I(e,e.a.g.next,t,e.a.m):(e.a.m(t),t=x(e)),t},this.throw=function(t){return m(e.a),e.a.g?t=I(e,e.a.g.throw,t,e.a.m):(b(e.a,t),t=x(e)),t},this.return=function(t){return function(e,t){m(e.a);var n=e.a.g;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),x(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function P(e,t){var n=new D(new R(t));return g&&e.prototype&&g(n,e.prototype),n}function O(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new D(new R(e)))}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Y:r,Yd:a}}return{Y:-1,Yd:void 0}}function N(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}function U(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y.prototype.m=function(e){this.b=e},y.prototype.return=function(e){this.c={return:e},this.a=this.f},y.prototype.u=function(e){this.a=e},s("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[],this.j=!1;var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var r=o.setTimeout;n.prototype.c=function(e){r(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.H),reject:e(this.g)}},t.prototype.H=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.J(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.h(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.M(t,e):this.h(e)},t.prototype.g=function(e){this.m(2,e)},t.prototype.h=function(e){this.m(1,e)},t.prototype.m=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,2===this.b&&this.I(),this.v()},t.prototype.I=function(){var e=this;r((function(){if(e.A()){var t=o.console;void 0!==t&&t.error(e.c)}}),1)},t.prototype.A=function(){if(this.j)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.c,n(e))},t.prototype.v=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.J=function(e){var t=this.f();e.ec(t.resolve,t.reject)},t.prototype.M=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.ec(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.ec=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?a.b(n):this.a.push(n),this.j=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).ec(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).ec(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),s("WeakMap",(function(e){function t(e){if(this.a=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!L(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!L(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.a]=t,this},t.prototype.get=function(e){return i(e)&&L(e,s)?e[s][this.a]:void 0},t.prototype.has=function(e){return i(e)&&L(e,s)&&L(e[s],this.a)},t.prototype.delete=function(e){return!!(i(e)&&L(e,s)&&L(e[s],this.a))&&delete e[s][this.a]},t})),s("Map",(function(e){function t(){var e={};return e.Ga=e.next=e.head=e}function n(e,t){var n=e.a;return l((function(){if(n){for(;n.head!=e.a;)n=n.Ga;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&L(e.b,n))for(var r=0;r<i.length;r++){var s=i[r];if(t!=t&&s.key!=s.key||t===s.key)return{id:n,list:i,index:r,X:s}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ga:this.a.Ga,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ga.next=n.X,this.a.Ga=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ga.next=e.X.next,e.X.next.Ga=e.X.Ga,e.X.head=null,this.size--,0))},r.prototype.clear=function(){this.b={},this.a=this.a.Ga=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),s("Set",(function(e){function t(e){if(this.a=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).Y}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Array.prototype.keys",(function(e){return e||function(){return N(this,(function(e){return e}))}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==U(this,e,"includes").indexOf(e,t||0)}})),s("Array.prototype.values",(function(e){return e||function(){return N(this,(function(e,t){return t}))}})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),s("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).Yd}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)L(i,r)&&(e[r]=i[r])}return e};s("Object.assign",(function(e){return e||B})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)L(e,t)&&n.push(e[t]);return n}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=U(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}}));var F=this||self;function V(e,t){var n,i=e.split("."),r=F;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function H(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function j(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function K(e){return e.a/(1-Math.pow(e.c,e.b))}function G(){this.b=new H(2),this.c=new H(5),this.a=0}function z(){}function W(){}function Y(){}function q(){}G.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(K(this.b),K(this.c))};var $=new Set;if(e.console&&e.console.log.bind){var X={},Z=(X[1]=console.error.bind(console),X[2]=console.warn.bind(console),X[3]=console.info.bind(console),X[4]=console.log.bind(console),X[5]=console.debug.bind(console),X[6]=console.debug.bind(console),X);Y=Z[2],W=Z[1]}function Q(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}var J=function e(t){var n;return P(e,(function(e){return 1==e.a&&(n=0),3!=e.a?n<t?E(e,n,3):e.u(0):(n++,e.u(2))}))},ee=function e(t){var n,i,r,a,o,s;return P(e,(function(e){return 1==e.a&&(n=-1,r=i=void 0,a=u(t),o=a.next()),5!=e.a?o.done?-1==n?e.u(0):E(e,{Y:n,Oe:i,item:r,next:void 0},0):(s=o.value,0<=n?E(e,{Y:n,item:r,Oe:i,next:s},5):e.u(5)):(n++,i=r,r=s,o=a.next(),e.u(2))}))};function te(){}function ne(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ie(e)==ie(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=ae(e),i=ae(t),r=u(J(e.byteLength)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function ie(e){return e instanceof ArrayBuffer?e:e.buffer}function re(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ae(e,t,n){return se(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function oe(e,t,n){return se(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function se(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(ie(e),t,Math.min(t+Math.max(n,0),r)-t)}function le(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}V("shaka.util.BufferUtils",te),te.toDataView=oe,te.toUint8=ae,te.toArrayBuffer=re,te.equal=ne,le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",le),le.Severity={RECOVERABLE:1,CRITICAL:2},le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
var ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */function ce(e){var t;e instanceof ce?(de(this,e.va),this.Za=e.Za,this.ua=e.ua,he(this,e.qb),this.ja=e.ja,pe(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(ue))?(de(this,t[1]||"",!0),this.Za=fe(t[2]||""),this.ua=fe(t[3]||"",!0),he(this,t[4]),this.ja=fe(t[5]||"",!0),pe(this,t[6]||"",!0),this.Qa=fe(t[7]||"")):this.a=new ke(null)}function de(e,t,n){e.va=n?fe(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function he(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.qb=t}else e.qb=null}function pe(e,t,n){t instanceof ke?e.a=t:(n||(t=ge(t,Ee)),e.a=new ke(t))}function fe(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ge(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ve),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ve(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=ce.prototype).va="",i.Za="",i.ua="",i.qb=null,i.ja="",i.Qa="",i.toString=function(){var e=[],t=this.va;if(t&&e.push(ge(t,ye,!0),":"),t=this.ua){e.push("//");var n=this.Za;n&&e.push(ge(n,ye,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.qb)&&e.push(":",String(t))}return(t=this.ja)&&(this.ua&&"/"!=t.charAt(0)&&e.push("/"),e.push(ge(t,"/"==t.charAt(0)?be:me,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",ge(t,Ae)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new ce);var n=!!e.va;n?de(t,e.va):n=!!e.Za,n?t.Za=e.Za:n=!!e.ua,n?t.ua=e.ua:n=null!=e.qb;var i=e.ja;if(n)he(t,e.qb);else if(n=!!e.ja){if("/"!=i.charAt(0))if(this.ua&&!this.ja)i="/"+i;else{var r=t.ja.lastIndexOf("/");-1!=r&&(i=t.ja.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ja=i:n=""!==e.a.toString(),n?pe(t,e.a.clone()):n=!!e.Qa,n&&(t.Qa=e.Qa),t},i.clone=function(){return new ce(this)};var ye=/[#\/\?@]/g,me=/[#\?:]/g,be=/[#\?]/g,Ee=/[#\?@]/g,Ae=/#/g;function ke(e){this.a=e||null}function Te(e,t){this.a=e,this.b=t}function _e(e,t){var n=new Te(4,0),i=Ce,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function we(e,t,n,i){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Se(e,t,n,i){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}(i=ke.prototype).ga=null,i.hc=null,i.add=function(e,t){if(!this.ga&&(this.ga={},this.hc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ga.hasOwnProperty(e)&&this.ga[e])||(this.ga[e]=n=[]),n.push(t),this.hc++,this},i.toString=function(){if(this.a)return this.a;if(!this.ga)return"";var e,t=[];for(e in this.ga)for(var n=encodeURIComponent(e),i=this.ga[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},i.clone=function(){var e=new ke;if(e.a=this.a,this.ga){var t,n={};for(t in this.ga)n[t]=this.ga[t].concat();e.ga=n,e.hc=this.hc}return e},Te.prototype.toString=function(){return"v"+this.a+"."+this.b};var Ce=null;function Re(e,t){return e.concat(t)}function Ie(){}function xe(e){return null!=e}function De(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(_e("Factories requiring new","Factories should be plain functions"),n=t)}catch(t){_e("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Pe(e,t){if(0==t.length)return e;var n=t.map((function(e){return new ce(e)}));return e.map((function(e){return new ce(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(Re,[]).map((function(e){return e.toString()}))}function Oe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:new Set}}var Le={Da:"video",fb:"audio",$:"text",vf:"image",mf:"application"};function Me(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Ne(e){this.b=e,this.a=void 0}function Ue(){}function Be(e){if(!e)return"";239==(e=ae(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=Ke(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new le(2,2,2004)}}function Fe(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new le(2,2,2004);var i=Math.floor(e.byteLength/2);n=new Uint16Array(i),e=oe(e);for(var r=(i=u(J(i))).next();!r.done;r=i.next())n[r=r.value]=e.getUint16(2*r,t);return Ke(n)}function Ve(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=ae(e);if(239==n[0]&&187==n[1]&&191==n[2])return Be(n);if(254==n[0]&&255==n[1])return Fe(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Fe(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Fe(e,!1);if(0==n[1]&&0==n[3])return Fe(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Be(e);throw new le(2,2,2003)}function He(e){e=encodeURIComponent(e);var t=unescape(e);e=new Uint8Array(t.length);for(var n=(t=u(ee(t))).next();!n.done;n=t.next())e[(n=n.value).Y]=n.item.charCodeAt(0);return re(e)}function je(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=u(ee(e)),a=r.next();!a.done;a=r.next())a=a.value,i.setUint16(2*a.Y,a.item.charCodeAt(0),t);return n}function Ke(e){return Ge.value()(e)}Me.prototype.resolve=function(){},Me.prototype.reject=function(){},Ne.prototype.value=function(){return null==this.a&&(this.a=this.b()),this.a},V("shaka.util.StringUtils",Ue),Ue.resetFromCharCode=function(){Ge.a=void 0},Ue.toUTF16=je,Ue.toUTF8=He,Ue.fromBytesAutoDetect=Ve,Ue.fromUTF16=Fe,Ue.fromUTF8=Be;var Ge=new Ne((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ja:65536};0<t.Ja;(t={Ja:t.Ja}).Ja/=2)if(e(t.Ja))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ja)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ja));return n}}(t);return null}));function ze(){}function We(e){return e=Ke(ae(e)),btoa(e)}function Ye(e,t){t=null==t||t;var n=We(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function qe(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length);for(var i=(n=u(ee(n))).next();!i.done;i=n.next())t[(i=i.value).Y]=i.item.charCodeAt(0);return t}function $e(t){for(var n=t.length/2,i=new Uint8Array(n),r=(n=u(J(n))).next();!r.done;r=n.next())i[r=r.value]=e.parseInt(t.substr(2*r,2),16);return i}function Xe(e){var t=ae(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Ze(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var i=0,r=u(t);for(n=r.next();!n.done;n=r.next())i+=n.value.byteLength;for(i=new Uint8Array(i),r=0,n=(t=u(t)).next();!n.done;n=t.next())n=n.value,i.set(ae(n),r),r+=n.byteLength;return i}function Qe(){var e=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.h=[],this.c=[],this.g=[],this.f=!1,this.a.on("data",(function(t){e.c=t.captions,e.g=t.metadata,e.h.push(Ze(t.initSegment,t.data))})),this.a.on("done",(function(){var t={data:Ze.apply(ze,c(e.h)),captions:e.c,metadata:e.g};e.b.resolve(t),e.f=!1}))}function Je(t,n){if(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])return!1;if(n)return MediaSource.isTypeSupported(et(n,t));var i=et("audio",t),r=et("video",t);return MediaSource.isTypeSupported(i)||MediaSource.isTypeSupported(r)}function et(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function tt(e){this.b=e,this.a=null}function nt(e){this.b=e,this.a=null}function it(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.j=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function rt(e){var t,n;return O((function(i){if(1==i.a){if(e.a>=e.j){if(!e.c)throw new le(2,7,1010);e.a=1,e.b=e.f}return t=e.a,e.a++,0==t?i.return():(n=e.b*(1+(2*Math.random()-1)*e.h),E(i,new Promise((function(e){new nt(e).R(n/1e3)})),2))}e.b*=e.g,A(i)}))}function at(e,t){this.promise=e,this.c=t,this.a=!1}function ot(e){return new at(Promise.reject(e),(function(){return Promise.resolve()}))}function st(){var e=Promise.reject(new le(2,7,7001));return e.catch((function(){})),new at(e,(function(){return Promise.resolve()}))}function lt(e){return new at(Promise.resolve(e),(function(){return Promise.resolve()}))}function ut(e){return new at(e,(function(){return e.catch((function(){}))}))}function ct(e){return new at(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function dt(t,n){for(var i in n=void 0===n?{}:n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function ht(){this.a={}}function pt(){this.Mc=new ht,this.$b=this}function ft(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function gt(e){var t,n={};for(t in e)n[t]=e[t];return n}function vt(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function yt(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function mt(e,t,n){if(n||(n=vt),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={Ac:i.Ac},r=e.next()){if(i.Ac=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.Ac,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function bt(e,t,n){if(n||(n=vt),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Et(){this.a=[]}function At(e,t){e.a.push(t.finally((function(){yt(e.a,t)})))}function kt(e){pt.call(this),this.f=!1,this.g=new Et,this.a=new Set,this.b=new Set,this.c=e||null}function Tt(e,t,n){n=n||It;var i=xt[e];(!i||n>=i.priority)&&(xt[e]={priority:n,Ne:t})}function _t(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function wt(e,t,n,i,r,a,o){var s=new ce(n.uris[r]),l=s.va,u=!1;l||(de(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c,d=(l=xt[l])?l.Ne:null;return d?ut(rt(i)).U((function(){return e.f?st():(c=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&t==Rt&&(e.c(n,i),u=!0,o.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,Fe:u}}),(function(s){if(e.f)return st();if(s instanceof le){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity){var l=new dt("retry",{error:s});return e.dispatchEvent(l),r=(r+1)%n.uris.length,wt(e,t,n,i,r,s,o)}}throw s})):ot(new le(2,1,1e3,s))}function St(){this.a=0}function Ct(e,t,n){at.call(this,e,t),this.b=n}V("shaka.util.Uint8ArrayUtils",ze),ze.concat=Ze,ze.toHex=Xe,ze.fromHex=$e,ze.fromBase64=qe,ze.toBase64=Ye,ze.toStandardBase64=We,ze.equal=function(e,t){return _e("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),ne(e,t)},Qe.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},tt.prototype.R=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},tt.prototype.stop=function(){this.a&&(this.a(),this.a=null)},nt.prototype.Qb=function(){return this.stop(),this.b(),this},nt.prototype.R=function(e){var t=this;return this.stop(),this.a=new tt((function(){t.b()})).R(e),this},nt.prototype.ra=function(e){var t=this;return this.stop(),this.a=new tt((function(){t.a.R(e),t.b()})).R(e),this},nt.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},V("shaka.util.Timer",nt),nt.prototype.stop=nt.prototype.stop,nt.prototype.tickEvery=nt.prototype.ra,nt.prototype.tickAfter=nt.prototype.R,nt.prototype.tickNow=nt.prototype.Qb,at.prototype.abort=function(){return this.a=!0,this.c()},at.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},at.prototype.U=function(e,t){function n(n){return function(s){if(r.a&&n)a.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new Me,o=new le(2,7,7001);return this.promise.then(n(!0),n(!1)),new at(a,(function(){return i()}))},V("shaka.util.AbortableOperation",at),at.prototype.chain=at.prototype.U,at.prototype.finally=at.prototype.finally,at.all=ct,at.prototype.abort=at.prototype.abort,at.notAbortable=ut,at.completed=lt,at.aborted=st,at.failed=ot,dt.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},dt.prototype.stopImmediatePropagation=function(){this.a=!0},dt.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",dt),ht.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},ht.prototype.get=function(e){return(e=this.a[e])?e.slice():null},ht.prototype.remove=function(e,t){e in this.a&&(this.a[e]=this.a[e].filter((function(e){return e!=t})))},pt.prototype.addEventListener=function(e,t){this.Mc.push(e,t)},pt.prototype.removeEventListener=function(e,t){this.Mc.remove(e,t)},pt.prototype.dispatchEvent=function(e){for(var t=this.Mc.get(e.type)||[],n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.$b,e.currentTarget=this.$b;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Et.prototype.destroy=function(){for(var e=[],t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.a=[],Promise.all(e)},v(kt,pt),(i=kt.prototype).Pe=function(e){this.a.add(e)},i.hf=function(e){this.a.delete(e)},i.ge=function(){this.a.clear()},i.Qe=function(e){this.b.add(e)},i.jf=function(e){this.b.delete(e)},i.he=function(){this.b.clear()},i.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},i.request=function(e,t){var n=this,i=new St;if(this.f){var r=Promise.reject(new le(2,7,7001));return r.catch((function(){})),new Ct(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?ft(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=ft(t.uris);var a=(r=function(e,t,n){for(var i=lt(void 0),r={},a=(e=u(e.a)).next();!a.done;r={Ec:r.Ec},a=e.next())r.Ec=a.value,i=i.U(function(e){return function(){return n.body&&(n.body=re(n.body)),e.Ec(t,n)}}(r));return i.U(void 0,(function(e){if(e instanceof le&&7001==e.code)throw e;throw new le(2,1,1006,e)}))}(this,e,t)).U((function(){return wt(n,e,t,new it(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=lt(void 0),r={},a=(e=u(e.b)).next();!a.done;r={Fc:r.Fc},a=e.next())r.Fc=a.value,i=i.U(function(e){return function(){var i=n.response;return i.data&&(i.data=re(i.data)),e.Fc(t,i)}}(r));return i.U((function(){return n}),(function(e){var t=2;if(e instanceof le){if(7001==e.code)throw e;t=e.severity}throw new le(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=o.U((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Fe||!n.c||r.fromCache||e!=Rt||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Ct(d.promise,(function(){return d.abort()}),i),At(this.g,r),r},V("shaka.net.NetworkingEngine",kt),kt.prototype.request=kt.prototype.request,kt.prototype.destroy=kt.prototype.destroy,kt.makeRequest=_t,kt.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},kt.prototype.clearAllResponseFilters=kt.prototype.he,kt.prototype.unregisterResponseFilter=kt.prototype.jf,kt.prototype.registerResponseFilter=kt.prototype.Qe,kt.prototype.clearAllRequestFilters=kt.prototype.ge,kt.prototype.unregisterRequestFilter=kt.prototype.hf,kt.prototype.registerRequestFilter=kt.prototype.Pe,kt.unregisterScheme=function(e){delete xt[e]},kt.registerScheme=Tt,kt.NumBytesRemainingClass=St,v(Ct,at),kt.PendingRequest=Ct;var Rt=1;kt.RequestType={MANIFEST:0,SEGMENT:Rt,LICENSE:2,APP:3,TIMING:4};var It=3;kt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:It};var xt={};function Dt(e){this.a=!1,this.b=new Me,this.c=e}function Pt(e,t){if(e.a){if(t instanceof le&&7003==t.code)throw t;throw new le(2,7,7003,t)}}function Ot(){this.a=new ht}function Lt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Mt;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Mt=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}Dt.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},(i=Ot.prototype).release=function(){this.Xa(),this.a=null},i.l=function(e,t,n,i){this.a&&(e=new Lt(e,t,n,i),this.a.push(t,e))},i.ha=function(e,t,n,i){var r=this;this.l(e,t,(function i(a){r.sa(e,t,i),n(a)}),i)},i.sa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.sa(),this.a.remove(t,r))},i.Xa=function(){if(this.a){var e,t=this.a,n=[];for(e in t.a)n.push.apply(n,c(t.a[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.sa();this.a.a={}}},V("shaka.util.EventManager",Ot),Ot.prototype.removeAll=Ot.prototype.Xa,Ot.prototype.unlisten=Ot.prototype.sa,Ot.prototype.listenOnce=Ot.prototype.ha,Ot.prototype.listen=Ot.prototype.l,Ot.prototype.release=Ot.prototype.release,Lt.prototype.sa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var Mt=void 0;function Nt(){}function Ut(e){return new ce(e=Ve(e)).ua}function Bt(e,t,n){function i(e){oe(a).setUint32(o,e.byteLength,!0),o+=4,a.set(ae(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new le(2,6,6015);var r;r="string"==typeof t?je(t,!0):t,e=je(e=Ve(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Ft(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Vt(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Ht(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=u(e),i=n.next();!i.done;i=n.next()){var r=u(i.value);if(i=r.next().value,r=r.next().value,!t.has(i))return!1;if((i=t.get(i))!=r||null==i)return!1}return!0}function jt(){}function Kt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Gt(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}V("shaka.util.FairPlayUtils",Nt),Nt.initDataTransform=Bt,Nt.defaultGetContentId=Ut;var zt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Wt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Yt(e){return""!=Qt().canPlayType(e)}function qt(){return Zt("Tizen")}function $t(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!qt()}function Xt(){if(!$t())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Zt(e){return(navigator.userAgent||"").includes(e)}function Qt(){return en||(Jt||(Jt=new nt((function(){en=null}))),(en=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(en=document.createElement("video")),Jt.R(1),en)}var Jt=null,en=null;function tn(e,t){var n=this;t=void 0===t?1:t,this.s=e,this.m=new Set,this.a=this.h=null,this.M=!1,this.H=0,this.c=null,this.b=new Ot,this.f=new Map,this.v=[],this.j=new Me,this.i=null,this.g=function(t){n.j.reject(t),e.onError(t)},this.ca=new Map,this.T=new Map,this.J=new nt((function(){return function(e){var t=e.ca,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new le(2,6,6014)),e.s.oc(Vt(n))}(n)})),this.A=!1,this.D=[],this.I=!1,this.W=new nt((function(){!function(e){e.f.forEach((function(t,n){var i=t.bd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.s.onExpirationUpdated(n.sessionId,r),t.bd=r)}))}(n)})).ra(t),this.j.catch((function(){})),this.F=new Dt((function(){return function(e){return O((function(t){switch(t.a){case 1:return e.b.release(),e.b=null,e.j.reject(),e.W.stop(),e.W=null,e.J.stop(),e.J=null,E(t,yn(e),2);case 2:if(!e.a){t.u(3);break}return k(t,4),E(t,e.a.setMediaKeys(null),6);case 6:_(t,5);break;case 4:w(t);case 5:e.a=null;case 3:e.c=null,e.m.clear(),e.h=null,e.v=[],e.i=null,e.g=function(){},e.s=null,A(t)}}))}(n)}))}function nn(e,t,n){return e.v=n,e.A=0<n.length,rn(e,t)}function rn(t,n){var i=function(t){if(0==(t=Ft(t.i.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=$e(t),a=$e(e);r={kty:"oct",kid:Ye(r,!1),k:Ye(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:ae(He(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:new Set(i)}}(t);if(i)for(var r=u(n),a=r.next();!a.done;a=r.next())(a=a.value).video&&(a.video.drmInfos=[i]),a.audio&&(a.audio.drmInfos=[i]);for((i=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})}));for(var i=u(e),r=i.next();!r.done;r=i.next())(r=r.value).video&&(r.video.drmInfos=n),r.audio&&(r.audio.drmInfos=n)}(n,r=Ft(t.i.servers)),a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(((a=a.value).video?a.video.drmInfos:[]).concat(a.audio?a.audio.drmInfos:[]))).next();!o.done;o=a.next())An(o.value,Ft(t.i.servers),Ft(t.i.advanced||{}));return(r=function(e,t){for(var n=new Set,i=u(t),r=i.next();!r.done;r=i.next()){var a=u(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]));for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=u(n),r=i.next();!r.done;r=i.next())An(r.value,Ft(e.i.servers),Ft(e.i.advanced||{}));a=e.A?"required":"optional";var o=e.A?["persistent-license"]:["temporary"];for(i=new Map,n=u(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=u(t),r=n.next();!r.done;r=n.next())for(r=r.value,a=u([r.audio,r.video]),r=a.next();!r.done;r=a.next())if(o=r.value){var s=dn(o),l=null;"ac-3"==o.codecs.toLowerCase()&&qt()&&(l=dn(o,"ec-3"));var c=u(o.drmInfos);for(r=c.next();!r.done;r=c.next()){var d=r.value;(r=i.get(d.keySystem)).drmInfos.push(d),d.distinctiveIdentifierRequired&&(r.distinctiveIdentifier="required"),d.persistentStateRequired&&(r.persistentState="required");var h={robustness:(d="audio"==o.type?d.audioRobustness:d.videoRobustness)||"",contentType:s};"audio"==o.type?r.audioCapabilities.push(h):r.videoCapabilities.push(h),l&&(d={robustness:d||"",contentType:l},"audio"==o.type?r.audioCapabilities.push(d):r.videoCapabilities.push(d))}}return i}(t,n)).size?(r=hn(t,r),i?r:r.catch((function(){}))):(t.M=!0,Promise.resolve())}function an(e){return O((function(t){if(1==t.a)return e.h&&e.c&&e.c.serverCertificate&&e.c.serverCertificate.length?(k(t,3),E(t,e.h.setServerCertificate(e.c.serverCertificate),5)):t.u(0);if(3!=t.a)return _(t,0);throw new le(2,6,6004,w(t).message)}))}function on(e){for(var t=(e.c?e.c.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())sn(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.v)).next();!i.done;i=n.next())pn(e,i.value);return t.length||e.v.length||e.j.resolve(),e.j}function sn(e,t,n){for(var i=e.f.values(),r=(i=u(i)).next();!r.done;r=i.next())if(ne(n,r.value.initData)&&!Zt("Tizen 2"))return;!function(e,t,n){try{var i=e.A?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new le(2,6,6005,t.message))}e.b.l(i,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.I?e.D.push(t):gn(e,t)})),e.b.l(i,"keystatuseschange",(function(t){return vn(e,t)})),e.f.set(i,{initData:n,loaded:!1,bd:1/0,Aa:null});try{n=e.i.initDataTransform(n,t,e.c)}catch(n){return t=n,n instanceof le||(t=new le(2,6,6016,n)),void e.g(t)}e.i.logLicenseExchange&&Ye(n),i.generateRequest(t,n).catch((function(t){if(!e.F.a){e.f.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.g(new le(2,6,6006,t.message,t,r))}}))}(e,t,n)}function ln(e){return e?e.keySystem:""}function un(e,t){if(navigator.userAgent.match(/Edge\//))return!0;if(t=t.toLowerCase(),qt()&&t.includes('codecs="ac-3"')){var n=t.replace("ac-3","ec-3");return e.m.has(t)||e.m.has(n)}return e.m.has(t)}function cn(e){return e=Q(e=e.f.keys(),(function(e){return e.sessionId})),Array.from(e)}function dn(e,t){var n=Kt(e.mimeType,t||e.codecs);return Je(n)?et(e.type,n):n}function hn(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,T,S,C;return O((function(R){switch(R.a){case 1:if(1==t.size&&t.has(""))throw new le(2,6,6e3);for(n=u(t.values()),i=n.next();!i.done;i=n.next())0==(r=i.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;o=u([!0,!1]),s=o.next();case 2:if(s.done){R.u(4);break}l=s.value,c=u(t.keys()),d=c.next();case 5:if(d.done){R.u(7);break}if(h=d.value,(p=t.get(h)).drmInfos.some((function(e){return!!e.licenseServerUri}))!=l){R.u(6);break}return k(R,8),E(R,navigator.requestMediaKeySystemAccess(h,[p]),10);case 10:a=R.b,R.u(7);break;case 8:w(R);case 9:Pt(e.F);case 6:d=c.next(),R.u(5);break;case 7:if(a){R.u(4);break}s=o.next(),R.u(2);break;case 4:if(!a)throw new le(2,6,6001);for(Pt(e.F),k(R,11),e.m.clear(),f=a.getConfiguration(),g=f.audioCapabilities||[],v=f.videoCapabilities||[],y=u(g),m=y.next();!m.done;m=y.next())b=m.value,e.m.add(b.contentType.toLowerCase());for(A=u(v),m=A.next();!m.done;m=A.next())T=m.value,e.m.add(T.contentType.toLowerCase());if(e.c=function(e,t){var n=[],i=[],r=[],a=new Set;return function(e,t,n,i,r){for(var a={},o=(e=u(e)).next();!o.done;a={na:a.na},o=e.next()){if(a.na=o.value,t.includes(a.na.licenseServerUri)||t.push(a.na.licenseServerUri),a.na.serverCertificate&&(n.some(function(e){return function(t){return ne(t,e.na.serverCertificate)}}(a))||n.push(a.na.serverCertificate)),a.na.initData){o={};for(var s=u(a.na.initData),l=s.next();!l.done;o={Ub:o.Ub},l=s.next())o.Ub=l.value,i.some(function(e){return function(t){var n=e.Ub;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&ne(t.initData,n.initData)}}(o))||i.push(o.Ub)}if(a.na.keyIds)for(s=(o=u(a.na.keyIds)).next();!s.done;s=o.next())r.add(s.value)}}(t.drmInfos,n,i,r,a),{keySystem:e,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:i[0],initData:r,keyIds:a}}(a.keySystem,t.get(a.keySystem)),!e.c.licenseServerUri)throw new le(2,6,6012,e.c.keySystem);return E(R,a.createMediaKeys(),13);case 13:return S=R.b,Pt(e.F),e.h=S,e.M=!0,E(R,an(e),14);case 14:Pt(e.F),_(R,0);break;case 11:if(C=w(R),Pt(e.F,C),e.c=null,e.m.clear(),C instanceof le)throw C;throw new le(2,6,6002,C.message)}}))}function pn(e,t){var n,i,r,a,o;return O((function(s){switch(s.a){case 1:try{n=e.h.createSession("persistent-license")}catch(t){return i=new le(2,6,6005,t.message),e.g(i),s.return(Promise.reject(i))}return e.b.l(n,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.I?e.D.push(t):gn(e,t)})),e.b.l(n,"keystatuseschange",(function(t){return vn(e,t)})),r={initData:null,loaded:!1,bd:1/0,Aa:null},e.f.set(n,r),k(s,2),E(s,n.load(t),4);case 4:return a=s.b,Pt(e.F),a?(r.loaded=!0,En(e)&&e.j.resolve(),s.return(n)):(e.f.delete(n),e.g(new le(2,6,6013)),s.return(Promise.resolve()));case 2:o=w(s),Pt(e.F,o),e.f.delete(n),e.g(new le(2,6,6005,o.message));case 3:return s.return(Promise.resolve())}}))}function fn(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=Bt(e,n=Ut(e),t)),e}function gn(e,t){var n,i,r,a,o,s,l,c,d,h,p,f;O((function(g){switch(g.a){case 1:return n=t.target,e.i.logLicenseExchange&&Ye(t.message),i=e.f.get(n),r=e.c.licenseServerUri,a=e.i.advanced[e.c.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=_t([r],e.i.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,"com.microsoft.playready"!=e.c.keySystem&&"com.chromecast.playready"!=e.c.keySystem||function(e){var t=Fe(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=qe(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),k(g,2),E(g,e.s.nb.request(2,o).promise,4);case 4:l=g.b,_(g,3);break;case 2:return c=w(g),d=new le(2,6,6007,c),e.g(d),i&&i.Aa&&i.Aa.reject(d),g.return();case 3:return e.F.a?g.return():(e.H+=(Date.now()-s)/1e3,e.i.logLicenseExchange&&Ye(l.data),k(g,5),E(g,n.update(l.data),7));case 7:_(g,6);break;case 5:return h=w(g),p=new le(2,6,6008,h.message),e.g(p),i&&i.Aa&&i.Aa.reject(p),g.return();case 6:f=new dt("drmsessionupdate"),e.s.onEvent(f),i&&(i.Aa&&i.Aa.resolve(),new nt((function(){i.loaded=!0,En(e)&&e.j.resolve()})).R(Tn)),A(g)}}))}function vn(e,t){var n=t.target,i=e.f.get(n),r=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var a=n;n=t,t=a}if("com.microsoft.playready"==e.c.keySystem&&16==n.byteLength&&(Zt("Trident/")||navigator.userAgent.match(/Edge?\//))){var o=(a=oe(n)).getUint32(0,!0),s=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,l,!1)}"com.microsoft.playready"==e.c.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(i.loaded=!0),"expired"==t&&(r=!0),a=Xe(n),e.ca.set(a,t)}));var a=n.expiration-Date.now();(0>a||r&&1e3>a)&&i&&!i.Aa&&(e.f.delete(n),n.close().catch((function(){}))),En(e)&&(e.j.resolve(),e.J.R(_n))}function yn(e){var t;return O((function(n){return t=Array.from(e.f.keys()),e.f.clear(),E(n,Promise.all(t.map((function(e){return O((function(t){return 1==t.a?(k(t,2),E(t,function(e){var t;return O((function(n){return 1==n.a?(t=new Promise((function(e,t){new nt(t).R(kn)})),k(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.a?_(n,0):(w(n),void A(n))}))}(e),4)):2!=t.a?_(t,0):(w(t),void A(t))}))}))),0)}))}function mn(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted){var r=dn(n);if(!un(e,r))return!1}if(i&&i.encrypted&&!un(e,r=dn(i)))return!1;var a=ln(e.c);return 0==(n=(i?i.drmInfos:[]).concat(n?n.drmInfos:[])).length||n.some((function(e){return e.keySystem==a}))}function bn(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=u(t),o=a.next();!o.done;o=a.next())if(o=o.value,r.keySystem==o.keySystem){a=(a=(a=[]).concat(r.initData||[])).concat(o.initData||[]);var s=r.keyIds&&o.keyIds?new Set(c(r.keyIds).concat(c(o.keyIds))):r.keyIds||o.keyIds;n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,initData:a,keyIds:s});break}}return n}function En(e){return function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}(e=e.f.values(),(function(e){return e.loaded}))}function An(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}tn.prototype.destroy=function(){return this.F.destroy()},tn.prototype.configure=function(e){this.i=e},tn.prototype.zb=function(e){var t,n=this;return O((function(i){if(1==i.a)return n.h?(n.a=e,n.b.ha(n.a,"play",(function(){for(var e=u(n.D),t=e.next();!t.done;t=e.next())gn(n,t.value);n.I=!0,n.D=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.a&&n.b.l(n.a,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return yn(n)})),E(i,n.a.setMediaKeys(n.h).catch((function(e){return Promise.reject(new le(2,6,6003,e.message))})),2)):(n.b.ha(e,"encrypted",(function(){n.g(new le(2,6,6010))})),i.return());Pt(n.F),on(n),n.c.initData.length||n.v.length||(t=function(e){return sn(n,e.initDataType,ae(e.initData))},n.b.l(n.a,"encrypted",t)),A(i)}))},tn.prototype.Eb=function(){for(var e=1/0,t=this.f.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};var kn=1,Tn=5,_n=.5,wn=new Ne((function(){return re(new Uint8Array([0]))}));function Sn(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Cn(){}function Rn(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function In(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function xn(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=u(Dn(e)),r=i.next();!r.done;r=i.next()){var a=r.value;r=a.start,(a=a.end)>t&&(n+=a-Math.max(r,t))}return n}function Dn(e){if(!e)return[];for(var t=[],n=u(J(e.length)),i=n.next();!i.done;i=n.next())i=i.value,t.push({start:e.start(i),end:e.end(i)});return t}function Pn(e,t,n){this.startTime=e,this.direction=Fn,this.endTime=t,this.payload=n,this.region=new Yn,this.position=null,this.positionAlign=Ln,this.size=0,this.textAlign=Mn,this.writingMode=Vn,this.lineInterpretation=Hn,this.line=null,this.lineHeight="",this.lineAlign=jn,this.displayAlign=Un,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Gn,this.fontStyle=zn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1,this.cellResolution={columns:32,rows:15}}function On(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!bt(e.nestedCues,t.nestedCues,On))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!bt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}Sn.prototype.init=function(e){var t=muxjs.mp4.probe;e=ae(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Sn.prototype.b=function(e,t){var n=ae(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Sn.prototype.c=function(){this.a.resetCaptionStream()},Cn.prototype.init=function(){},Cn.prototype.b=function(){},Cn.prototype.c=function(){},Pn.prototype.clone=function(){var e,t=new Pn(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",Pn);var Ln="auto";Pn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ln};var Mn="center",Nn={LEFT:"left",RIGHT:"right",CENTER:Mn,START:"start",END:"end"};Pn.textAlign=Nn;var Un="after",Bn={BEFORE:"before",CENTER:"center",AFTER:Un};Pn.displayAlign=Bn;var Fn="ltr";Pn.direction={HORIZONTAL_LEFT_TO_RIGHT:Fn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Vn="horizontal-tb";Pn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Vn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Hn=0;Pn.lineInterpretation={LINE_NUMBER:Hn,PERCENTAGE:1};var jn="start",Kn={CENTER:"center",START:jn,END:"end"};Pn.lineAlign=Kn;var Gn=400;Pn.fontWeight={NORMAL:Gn,BOLD:700};var zn="normal",Wn={NORMAL:zn,ITALIC:"italic",OBLIQUE:"oblique"};function Yn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qn,this.scroll=$n}Pn.fontStyle=Wn,Pn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",Yn);var qn=1;Yn.units={PX:0,PERCENTAGE:qn,LINES:2};var $n="";function Xn(e){this.m=null,this.c=e,this.f=this.v=0,this.g=1/0,this.b=this.a=null,this.j="",this.h=new Map}function Zn(t){return!!(Jn[t]||e.muxjs&&"application/cea-608"==t)}function Qn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=u(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=r,l.endTime+=r,l.startTime>=e.f&&l.startTime<e.g&&(l=new Pn(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.j&&e.c.append([l]))}for(a=(r=u(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.h.has(a)||e.h.set(a,new Map),s=(t=u(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.h.get(a).set(s,l);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.g))}Yn.scrollMode={NONE:$n,UP:"up"},Xn.prototype.destroy=function(){return this.c=this.m=null,this.h.clear(),Promise.resolve()},Xn.prototype.remove=function(e,t){var n=this;return O((function(i){if(1==i.a)return E(i,Promise.resolve(),2);!n.c||!n.c.remove(e,t)||null==n.a||t<=n.a||e>=n.b||(e<=n.a&&t>=n.b?n.a=n.b=null:e<=n.a&&t<n.b?n.a=t:e>n.a&&t>=n.b&&(n.b=e)),A(i)}))},V("shaka.text.TextEngine",Xn),Xn.prototype.destroy=Xn.prototype.destroy,Xn.unregisterParser=function(e){delete Jn[e]},Xn.registerParser=function(e,t){Jn[e]=t};var Jn={};function ei(e,t,n,i){var r=this;this.a=e,this.h=n,this.f={},this.c=null,this.H=i||function(){},this.g={},this.b=new Ot,this.m={},this.v=t,this.A=new Me,this.j=function(e,t){var n=new MediaSource;return e.b.ha(n,"sourceopen",(function(){URL.revokeObjectURL(e.D),t.resolve()})),e.D=gi(n),e.a.src=e.D,n}(this,this.A),this.F=new Dt((function(){return function(e){var t,n,i,r,a,o,s;return O((function(l){if(1==l.a){for(n in t=[],e.g)for(i=e.g[n],r=i[0],e.g[n]=i.slice(0,1),r&&t.push(r.p.catch(Ie)),a=u(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new le(2,7,7003,void 0));for(s in e.c&&t.push(e.c.destroy()),e.h&&t.push(e.h.destroy()),e.m)t.push(e.m[s].destroy());return E(l,Promise.all(t),2)}e.b&&(e.b.release(),e.b=null),e.a&&(e.a.removeAttribute("src"),e.a.load(),e.a=null),e.j=null,e.c=null,e.h=null,e.f={},e.m={},e.v=null,e.g={},A(l)}))}(r)})),this.D=""}function ti(e){var t=Kt(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return zt.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return Zn(t)||MediaSource.isTypeSupported(n)||Je(t,e.type)}function ni(e,t){e.c||(e.c=new Xn(e.h)),"application/cea-608"!=t&&(e.c.m=De(Jn[t]))}function ii(e){return!e.j||"ended"==e.j.readyState}function ri(e,t){if("text"==t)var n=e.c.a;else n=!(n=oi(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function ai(e,t){return"text"==t?e.c.b:Rn(oi(e,t))}function oi(e,t){try{return e.f[t].buffered}catch(e){return null}}function si(t,n,i,r,a,o){var s,l,u,c;return O((function(d){return 1==d.a?n==(s=Le).$?E(d,function(e,t,n,i){var r,a,o;return O((function(s){return 1==s.a?E(s,Promise.resolve(),2):e.m&&e.c?null==n||null==i?(e.m.parseInit(ae(t)),s.return()):(r={periodStart:e.v,segmentStart:n,segmentEnd:i},a=e.m.parseMedia(ae(t),r),o=a.filter((function(t){return t.startTime>=e.f&&t.startTime<e.g})),e.c.append(o),null==e.a&&(e.a=Math.max(n,e.f)),e.b=Math.min(i,e.g),void A(s)):s.return()}))}(t.c,i,r,a),0):t.m[n]?E(d,function(e,t){e.f=!0,e.b=new Me,e.h=[],e.c=[],e.g=[];var n=ae(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new le(2,3,3018)),e.b}(t.m[n],i),10):(o&&e.muxjs&&(t.c||ni(t,"text/vtt"),null==r&&null==a?t.v.init(i):t.v.b(i,(function(e){e.length&&Qn(t.c,e,r,a,t.f[s.Da].timestampOffset)}))),E(d,di(t,n,(function(){t.f[n].appendBuffer(i)})),0)):(l=d.b,t.c||ni(t,"text/vtt"),l.metadata&&(u=t.f[n].timestampOffset,t.H(l.metadata,u,a)),l.captions&&l.captions.length&&(c=t.f[s.Da].timestampOffset,Qn(t.c,l.captions,r,a,c)),E(d,di(t,n,(function(){t.f[n].appendBuffer(l.data)})),0))}))}function li(e,t){var n=ai(e,"video")||0;!function(e,t,n){if(e.j=t,t=e.h.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.c.append(r)}(e.c,t,n)}function ui(e,t){return O((function(n){return t==Le.$?e.c?E(n,e.c.remove(0,1/0),0):n.return():E(n,di(e,t,(function(){var n=e.j.duration;0>=n?ci(e,t):e.f[t].remove(0,n)})),0)}))}function ci(e,t){var n=e.g[t][0];n&&(n.p.resolve(),pi(e,t))}function di(e,t,n){return Pt(e.F),n={start:n,p:new Me},e.g[t].push(n),1==e.g[t].length&&fi(e,t),n.p}function hi(e,t){var n,i,r,a,o;return O((function(s){switch(s.a){case 1:for(r in Pt(e.F),n=[],i={},e.f)i.vb=new Me,a={start:function(e){return function(){return e.vb.resolve()}}(i),p:i.vb},e.g[r].push(a),n.push(i.vb),1==e.g[r].length&&a.start(),i={vb:i.vb};return k(s,2),E(s,Promise.all(n),4);case 4:_(s,3);break;case 2:throw w(s);case 3:try{t()}catch(e){throw new le(2,3,3015,e)}finally{for(o in e.f)pi(e,o)}A(s)}}))}function pi(e,t){e.g[t].shift(),fi(e,t)}function fi(e,t){var n=e.g[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new le(2,3,3017,t)):n.p.reject(new le(2,3,3015,i)),pi(e,t)}}(i=ei.prototype).destroy=function(){return this.F.destroy()},i.init=function(e,t){var n,i,r,a,o,s,l,c=this;return O((function(d){if(1==d.a)return n=Le,E(d,c.A,2);for(i={},r=u(e.keys()),a=r.next();!a.done;i={ma:i.ma},a=r.next())i.ma=a.value,o=e.get(i.ma),s=Kt(o.mimeType,o.codecs),i.ma==n.$?ni(c,s):(!t&&MediaSource.isTypeSupported(s)||!Je(s,i.ma)||(c.m[i.ma]=new Qe,s=et(i.ma,s)),l=c.j.addSourceBuffer(s),c.b.l(l,"error",function(e){return function(){c.g[e.ma][0].p.reject(new le(2,3,3014,c.a.error?c.a.error.code:0))}}(i)),c.b.l(l,"updateend",function(e){return function(){return ci(c,e.ma)}}(i)),c.f[i.ma]=l,c.g[i.ma]=[]);A(d)}))},i.ic=function(){var e={total:Dn(this.a.buffered),audio:Dn(oi(this,"audio")),video:Dn(oi(this,"video")),text:[]};if(this.c){var t=this.c.a,n=this.c.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return O((function(r){return E(r,e==Le.$?i.c.remove(t,n):di(i,e,(function(){n<=t?ci(i,e):i.f[e].remove(t,n)})),0)}))},i.flush=function(e){var t=this;return O((function(n){return e==Le.$?n.return():E(n,di(t,e,(function(){t.a.currentTime-=.001,ci(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return O((function(n){return E(n,hi(t,(function(){ii(t)||(e?t.j.endOfStream(e):t.j.endOfStream())})),0)}))},i.za=function(e){var t=this;return O((function(n){return E(n,hi(t,(function(){t.j.duration=e})),0)}))},i.getDuration=function(){return this.j.duration};var gi=e.URL.createObjectURL;function vi(e,t){return e=bi(e),t=bi(t),e.split("-")[0]==t.split("-")[0]}function yi(e,t){e=bi(e),t=bi(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function mi(e,t){e=bi(e),t=bi(t);var n=e.split("-"),i=t.split("-");return 2==n.length&&2==i.length&&n[0]==i[0]}function bi(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Ti.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Ei(e,t){return e=bi(e),(t=bi(t))==e?4:yi(t,e)?3:mi(t,e)?2:yi(e,t)?1:0}function Ai(e){return e.language?bi(e.language):e.audio&&e.audio.language?bi(e.audio.language):e.video&&e.video.language?bi(e.video.language):"und"}function ki(e,t){for(var n=bi(e),i=new Set,r=u(t),a=r.next();!a.done;a=r.next())i.add(bi(a.value));for(a=(r=u(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(yi(a=a.value,n))return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(mi(a=a.value,n))return a;for(a=(i=u(i)).next();!a.done;a=i.next())if(yi(n,a=a.value))return a;return null}var Ti=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function _i(e,t){function n(e){var t="";e.video&&(t=Gt(e.video.codecs)[0]);var n="";return e.audio&&(n=Gt(e.audio.codecs)[0]),t+"-"+n}for(var i=Oi(e.variants,t),r=new ht,a=(i=u(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,l=1/0;!function(e,t){for(var n in e.a)t(n,e.a[n])}(r,(function(e,t){for(var n=0,i=0,r=u(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;(n/=i)<l&&(s=e,l=n)})),e.variants=e.variants.filter((function(e){return n(e)==s}))}function wi(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Si(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Ci(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var l=new Set;if(t)for(var c=u(t.roles),d=c.next();!d.done;d=c.next())l.add(d.value);if(n)for(d=(c=u(n.roles)).next();!d.done;d=c.next())l.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Ri(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Ii(e){return e.__shaka_id||(e.__shaka_id=Ni++),e.__shaka_id}function xi(e){var t=Di(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t}function Di(e){return{id:Ii(e),active:!1,type:"",bandwidth:0,language:bi(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Pi(e){return e.allowedByApplication&&e.allowedByKeySystem}function Oi(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,c(r))):i.get(Math.min.apply(Math,c(n)))}function Li(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=ki(bi(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return bi(e.language)==o})))}if(n){if((e=Mi(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(Re,[])).length?Mi(i,e[0]):i}function Mi(e,t){return e.filter((function(e){return e.roles.includes(t)}))}var Ni=0;function Ui(){this.h=null,this.c=!1,this.a=new G,this.b=[],this.g=1,this.j=!1,this.i=this.f=null}function Bi(e,t){return e&&(t=t.filter((function(t){return wi(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Fi(e,t){this.a=e,this.b=new Set([e]);for(var n=u(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Vi(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Hi(n,i)&&ji(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Hi(n=e.video,i=t.video)&&ji(n.roles,i.roles))),!n}function Hi(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Gt(e)[0]})),i=t.codecs.split(",").map((function(e){return Gt(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=u(J(n.length)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function ji(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=u(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Ki(e){this.a=e,this.b=new Gi(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Gi(e,t,n,i){this.c=e,this.f=t,this.a=n,this.b=void 0===i?"":i}function zi(){this.a=qi,this.b=(new Map).set(qi,2).set(Yi,1)}function Wi(e,t,n){e.b.set(qi,n).set(Yi,t)}(i=Ui.prototype).stop=function(){this.h=null,this.c=!1,this.b=[],this.g=1,this.f=null},i.init=function(e){this.h=e},i.chooseVariant=function(){var e=Bi(this.i.restrictions,this.b),t=this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate);this.b.length&&!e.length&&(e=[(e=Bi(null,this.b))[0]]);for(var n=e[0]||null,i=(e=u(ee(e))).next();!i.done;i=e.next()){var r=i.value;i=r.item;var a=isNaN(this.g)?1:Math.abs(this.g);r=a*(r.next||{bandwidth:1/0}).bandwidth/this.i.bandwidthUpgradeTarget,t>=a*i.bandwidth/this.i.bandwidthDowngradeTarget&&t<=r&&(n=i)}return this.f=Date.now(),n},i.enable=function(){this.c=!0},i.disable=function(){this.c=!1},i.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,j(n.b,r,i),j(n.c,r,i)}if(null!=this.f&&this.c)e:{if(this.j){if(Date.now()-this.f<1e3*this.i.switchInterval)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseVariant(),this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate),n&&this.h(n)}},i.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate)},i.setVariants=function(e){this.b=e},i.playbackRateChanged=function(e){this.g=e},i.configure=function(e){this.i=e},V("shaka.abr.SimpleAbrManager",Ui),Ui.prototype.configure=Ui.prototype.configure,Ui.prototype.playbackRateChanged=Ui.prototype.playbackRateChanged,Ui.prototype.setVariants=Ui.prototype.setVariants,Ui.prototype.getBandwidthEstimate=Ui.prototype.getBandwidthEstimate,Ui.prototype.segmentDownloaded=Ui.prototype.segmentDownloaded,Ui.prototype.disable=Ui.prototype.disable,Ui.prototype.enable=Ui.prototype.enable,Ui.prototype.chooseVariant=Ui.prototype.chooseVariant,Ui.prototype.init=Ui.prototype.init,Ui.prototype.stop=Ui.prototype.stop,Fi.prototype.add=function(e){return!!Vi(this.a,e)&&(this.b.add(e),!0)},Fi.prototype.values=function(){return this.b.values()},Ki.prototype.create=function(e){var t=this,n=e.filter((function(e){return Vi(t.a,e)}));return n.length?new Fi(n[0],n):this.b.create(e)},Gi.prototype.create=function(e){var t=[];t=function(e,t){var n=ki(bi(t),e.map((function(e){return Ai(e)})));return n?e.filter((function(e){return n==Ai(e)})):[]}(e,this.c);var n=e.filter((function(e){return e.primary}));for((e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.f)).length&&(t=e),this.a&&(e=Oi(t,this.a)).length&&(t=e),this.b&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b)).length&&(t=e),e=new Fi(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Vi(e.a,n)&&e.add(n);return e};var Yi=0,qi=1;function $i(){}function Xi(e,t,n,i){var r,a,o,s;return O((function(l){if(1==l.a)return i&&(r=Qi[i.toLowerCase()])?l.return(r):(a=Zi(e))&&(o=Ji[a])?l.return(o):i?l.u(2):E(l,function(e,t,n){var i,r,a;return O((function(o){return 1==o.a?((i=_t([e],n)).method="HEAD",E(o,t.request(0,i).promise,2)):(r=o.b,a=r.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}(e,t,n),3);if(2!=l.a&&(i=l.b)&&(s=Qi[i]))return l.return(s);throw new le(2,4,4e3,e)}))}function Zi(e){return 1==(e=new ce(e).ja.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",$i),$i.unregisterParserByMime=function(e){delete Qi[e]},$i.registerParserByMime=function(e,t){Qi[e]=t},$i.registerParserByExtension=function(e,t){Ji[e]=t};var Qi={},Ji={};function er(e,t,n){this.c=e,this.b=t,this.a=n}function tr(e,t,n,i,r,a,o,s,l){this.startTime=e,this.endTime=t,this.c=n,this.b=i,this.a=r,this.f=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l}function nr(e,t,n){this.f=e,this.rc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.j=0,this.m=!0,this.v=0,this.A=void 0===n||n}function ir(e,t){this.g=e,this.h=ar(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.j=t,this.c=function(){}}function rr(e){this.a=e}function ar(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.currentTime;for(var n=(e=u(Dn(e.a.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function or(e,t,n,i,r){var a=this;this.a=e,this.A=t,this.i=n,this.v=r,this.b=new Ot,this.j=!1,this.m=e.readyState,this.f=!1,this.c=i,this.h=!1,this.b.l(e,"waiting",(function(){return sr(a)})),this.g=new nt((function(){sr(a)})).ra(.25)}function sr(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.j)return}else e.j=!1;if(!e.a.paused){var t;if(e.a.readyState!=e.m&&(e.f=!1,e.m=e.a.readyState),!(t=!e.c)){var n=(t=e.c).g,i=ar(n),r=n.a.currentTime,a=Date.now()/1e3;t.a==r&&t.h==i||(t.f=a,t.a=r,t.h=i,t.b=!1),(i=(r=a-t.f)>=t.j&&i&&!t.b)&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime),t=!i}if(t){var o=e.i.smallGapLimit;if(r=e.a.currentTime,!(null==(n=function(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;var n=navigator.userAgent.match(/Edge\//)||Zt("Trident/")||qt()||Zt("CrKey")?.5:.1,i=Dn(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}));return 0<=i?i:null}(t=e.a.buffered,r))||0==n&&!e.h||(i=t.start(n),i>=e.A.Fa()))){o=(a=i-r)<=o;var s=!1;.001>a||(o||e.f||(e.f=!0,(r=new dt("largegap",{currentTime:r,gapSize:a})).cancelable=!0,e.v(r),e.i.jumpLargeGaps&&!r.defaultPrevented&&(s=!0)),!o&&!s)||(0!=n&&t.end(n-1),e.a.currentTime=i)}}}}}function lr(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ur.get(t),n.ha(e,t,i))}er.prototype.Hb=function(){return this.b},er.prototype.Db=function(){return this.a},V("shaka.media.InitSegmentReference",er),er.prototype.getEndByte=er.prototype.Db,er.prototype.getStartByte=er.prototype.Hb,tr.prototype.Ae=function(){return this.startTime},tr.prototype.ne=function(){return this.endTime},tr.prototype.Hb=function(){return this.b},tr.prototype.Db=function(){return this.a},V("shaka.media.SegmentReference",tr),tr.prototype.getEndByte=tr.prototype.Db,tr.prototype.getStartByte=tr.prototype.Hb,tr.prototype.getEndTime=tr.prototype.ne,tr.prototype.getStartTime=tr.prototype.Ae,(i=nr.prototype).getDuration=function(){return this.g},i.se=function(){return this.a},i.za=function(e){this.g=e},i.ze=function(){return this.f},i.Td=function(e){this.j=e},i.Pb=function(e){this.m=e},i.pd=function(e){this.h=e},i.bf=function(e){this.rc=e},i.me=function(){return this.rc},i.ob=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Zc(e[0].startTime),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,t),null!=this.f&&this.A&&(this.f=(Date.now()+this.j)/1e3-this.b-this.a)}},i.Zc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},i.Yc=function(e){this.a=Math.max(this.a,e)},i.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},i.S=function(){return 1/0==this.g&&!this.m},i.Ua=function(){return 1/0!=this.g&&!this.m},i.Ra=function(){return Math.max(this.v,this.La()-this.h)},i.Ud=function(e){this.v=e},i.La=function(){return this.S()||this.Ua()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.g):this.g},i.Gb=function(e){var t=Math.max(this.c,this.v);return 1/0==this.h?t:Math.max(t,Math.min(this.La()-this.h+e,this.Fa()))},i.kb=function(){return this.Gb(0)},i.Fa=function(){return Math.max(0,this.La()-(this.S()||this.Ua()?this.rc:0))},i.Xd=function(){return!(null==this.f||null!=this.b&&this.A)},V("shaka.media.PresentationTimeline",nr),nr.prototype.usingPresentationStartTime=nr.prototype.Xd,nr.prototype.getSeekRangeEnd=nr.prototype.Fa,nr.prototype.getSeekRangeStart=nr.prototype.kb,nr.prototype.getSafeSeekRangeStart=nr.prototype.Gb,nr.prototype.getSegmentAvailabilityEnd=nr.prototype.La,nr.prototype.setUserSeekStart=nr.prototype.Ud,nr.prototype.getSegmentAvailabilityStart=nr.prototype.Ra,nr.prototype.isInProgress=nr.prototype.Ua,nr.prototype.isLive=nr.prototype.S,nr.prototype.offset=nr.prototype.offset,nr.prototype.notifyMaxSegmentDuration=nr.prototype.Yc,nr.prototype.notifyMinSegmentStartTime=nr.prototype.Zc,nr.prototype.notifySegments=nr.prototype.ob,nr.prototype.getDelay=nr.prototype.me,nr.prototype.setDelay=nr.prototype.bf,nr.prototype.setSegmentAvailabilityDuration=nr.prototype.pd,nr.prototype.setStatic=nr.prototype.Pb,nr.prototype.setClockOffset=nr.prototype.Td,nr.prototype.getPresentationStartTime=nr.prototype.ze,nr.prototype.setDuration=nr.prototype.za,nr.prototype.getMaxSegmentDuration=nr.prototype.se,nr.prototype.getDuration=nr.prototype.getDuration,ir.prototype.release=function(){this.g=null,this.c=function(){}},or.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.g&&(this.g.stop(),this.g=null),this.c&&(this.c.release(),this.c=null),this.a=this.A=this.v=null},or.prototype.cd=function(){this.h=!0,sr(this)};var ur=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function cr(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.h=!1,this.b=new Ot,this.c=new gr(e),lr(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){pr(i,i.f)}))}function dr(e){return e.h?e.a.currentTime:e.f}function hr(e,t){0<e.a.readyState?vr(e.c,t):lr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){pr(e,e.f)}))}function pr(e,t){.001>Math.abs(e.a.currentTime-t)?fr(e):(e.b.ha(e.a,"seeking",(function(){fr(e)})),vr(e.c,0==e.a.currentTime?t:e.a.currentTime))}function fr(e){e.h=!0,e.b.l(e.a,"seeking",(function(){return e.g()}))}function gr(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new nt((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function vr(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.ra(.1)}function yr(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new Ot,lr(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.ha(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function mr(e,t,n,i,r,a){var o=this;this.c=e,this.a=t.presentationTimeline,this.D=t.minBufferTime||0,this.i=n,this.A=r,this.j=null,this.f=new or(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new ir(new rr(e),t.stallThreshold);return function(e,t){e.c=t}(i,(function(){n?e.currentTime+=n:(e.pause(),e.play())})),i}(e,n),a),this.b=new cr(e,(function(){var e=o.f;e.j=!0,e.h=!1,e.f=!1;var t=dr(o.b);return e=Er(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.j||o.j<t-1)?(o.j=t,hr(o.b,e),e=void 0):(o.A(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.getDuration()?e.a.kb():e.a.Fa():0>t&&(t=e.a.Fa()+t),br(e,Ar(e,t))}(this,i)),this.h=new nt((function(){if(0!=o.c.readyState&&!o.c.paused){var e=dr(o.b),t=o.a.kb(),n=o.a.Fa();3>n-t&&(t=n-3),e<t&&(e=Er(o,e),o.c.currentTime=e)}})).ra(.25)}function br(e,t){var n=e.a.getDuration();return t>=n?n-e.i.durationBackoff:t}function Er(e,t){var n=Math.max(e.D,e.i.rebufferingGoal),i=e.i.safeSeekOffset,r=e.a.kb(),a=e.a.Fa(),o=e.a.getDuration();3>a-r&&(r=a-3);var s=e.a.Gb(n),l=e.a.Gb(i);return n=e.a.Gb(n+i),t>=o?br(e,t):t>a?a:t<r?In(e.c.buffered,l)?l:n:t>=s||In(e.c.buffered,t)?t:n}function Ar(e,t){var n=e.a.kb();return t<n||t>(n=e.a.Fa())?n:t}function kr(e){this.a=e,this.b=null,this.c=0,this.f=!1}function Tr(e,t,n){return new kr([new tr(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function _r(e,t){this.b=e,this.a=t}function wr(){kr.call(this,[]),this.g=[]}function Sr(e){var t=this;this.a=e,this.f=!1,this.b=this.a.kc(),this.c=new nt((function(){t.a.Kd(.25*t.b)}))}function Cr(e){e.c.stop();var t=e.f?0:e.b;if(0<=t)try{return void(e.a.kc()!=t&&e.a.od(t))}catch(e){}e.c.ra(.25),0!=e.a.kc()&&e.a.od(0)}function Rr(e){var t=this;this.c=e,this.a=new Set,this.b=new nt((function(){Ir(t,!1)})).ra(.25)}function Ir(e,t){for(var n=u(e.a),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=e.c.currentTime,a=t,o=u(i.g.a),s=o.next();!s.done;s=o.next()){s=s.value;var l=i.f.get(s),c=r<s.startTime?Pr:r>s.endTime?Lr:Or;i.f.set(s,c);for(var d=u(i.h),h=d.next();!h.done;h=d.next())(h=h.value).bb==l&&h.ab==c&&h.Ta(s,a)}}}function xr(e){var t=this;this.b=function(){},this.a=new Set,this.f=e,this.c=new nt((function(){for(var e=t.f(),n=u(t.a),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&t.a.delete(i)})).ra(2)}function Dr(e){var t=this;this.g=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.h=[{bb:null,ab:Or,Ta:function(e,n){return t.a(e,n)}},{bb:Pr,ab:Or,Ta:function(e,n){return t.a(e,n)}},{bb:Lr,ab:Or,Ta:function(e,n){return t.a(e,n)}},{bb:Or,ab:Pr,Ta:function(e,n){return t.b(e,n)}},{bb:Or,ab:Lr,Ta:function(e,n){return t.b(e,n)}},{bb:Pr,ab:Lr,Ta:function(e,n){return t.c(e,n)}},{bb:Lr,ab:Pr,Ta:function(e,n){return t.c(e,n)}}]}cr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},gr.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},yr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},yr.prototype.m=function(e){this.c=this.f?this.c:e},yr.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},yr.prototype.v=function(){},mr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.f&&(this.f.release(),this.f=null),this.h&&(this.h.stop(),this.h=null),this.c=this.b=this.a=this.i=null,this.A=function(){}},mr.prototype.m=function(e){hr(this.b,e)},mr.prototype.g=function(){var e=dr(this.b);return 0<this.c.readyState&&!this.c.paused?Ar(this,e):e},mr.prototype.v=function(){this.f.cd()},(i=kr.prototype).destroy=function(){return _e("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},i.release=function(){this.f||(this.a=[],this.b&&this.b.stop(),this.b=null)},i.Ie=function(){this.f=!0},i.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return t+this.c}return this.a.length&&e<this.a[0].startTime?this.c:null},i.get=function(e){return 0==this.a.length||0>(e-=this.c)||e>=this.a.length?null:this.a[e]},i.offset=function(e){if(!this.f)for(var t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},i.mb=function(e){if(!this.f){var t,n=this.a[this.a.length-1];t=this.a.length?e.filter((function(e){return e.startTime>=n.startTime})):e,n&&t.length&&t[0].startTime==n.startTime&&this.a.pop(),this.a.push.apply(this.a,c(t))}},i.Pa=function(e){if(!this.f){var t=this.a.length;this.a=this.a.filter((function(t){return t.endTime>e})),this.c+=t-this.a.length}},i.Ka=function(e,t){if(!this.f){for(;this.a.length&&this.a[this.a.length-1].startTime>=t;)this.a.pop();for(;this.a.length&&this.a[0].endTime<=e;)this.a.shift(),this.c++;if(0!=this.a.length){var n=this.a[this.a.length-1];this.a[this.a.length-1]=new tr(n.startTime,t,n.c,n.b,n.a,n.f,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd)}}},i.tc=function(e,t){var n=this;this.f||(this.b&&this.b.stop(),this.b=new nt((function(){var e=t();n.a.push.apply(n.a,c(e)),0==n.a.length&&(n.b.stop(),n.b=null)})),this.b.ra(e))},kr.prototype[Symbol.iterator]=function(){return this.jb(0)},kr.prototype.jb=function(e){return new _r(this,this.find(e)||0)},V("shaka.media.SegmentIndex",kr),kr.forSingleSegment=Tr,kr.prototype.getIteratorForTime=kr.prototype.jb,kr.prototype.updateEvery=kr.prototype.tc,kr.prototype.fit=kr.prototype.Ka,kr.prototype.evict=kr.prototype.Pa,kr.prototype.merge=kr.prototype.mb,kr.prototype.offset=kr.prototype.offset,kr.prototype.get=kr.prototype.get,kr.prototype.find=kr.prototype.find,kr.prototype.markImmutable=kr.prototype.Ie,kr.prototype.release=kr.prototype.release,kr.prototype.destroy=kr.prototype.destroy,_r.prototype.seek=function(e){return this.a=this.b.jb(e).a,this.next().value},_r.prototype.current=function(){return this.b.get(this.a-1)},_r.prototype.next=function(){var e=this.b.get(this.a++);return{value:e,done:!e}},V("shaka.media.SegmentIterator",_r),_r.prototype.next=_r.prototype.next,_r.prototype.current=_r.prototype.current,_r.prototype.seek=_r.prototype.seek,v(wr,kr),(i=wr.prototype).clone=function(){var e=new wr;return e.g=this.g.slice(),e},i.release=function(){for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},i.find=function(e){for(var t=0,n=u(this.g),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.c+i.a.length}return null},i.get=function(e){for(var t=0,n=u(this.g),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.c+i.a.length}return null},i.offset=function(){},i.mb=function(){},i.Pa=function(){},i.Ka=function(){},i.tc=function(){},V("shaka.media.MetaSegmentIndex",wr),wr.prototype.updateEvery=wr.prototype.tc,wr.prototype.fit=wr.prototype.Ka,wr.prototype.evict=wr.prototype.Pa,wr.prototype.merge=wr.prototype.mb,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.release=wr.prototype.release,Sr.prototype.release=function(){this.c&&(this.c.stop(),this.c=null),this.a=null},Sr.prototype.set=function(e){this.b=e,Cr(this)},Rr.prototype.release=function(){this.b.stop();for(var e=u(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},xr.prototype.release=function(){this.b=function(){},this.a.clear(),this.c.stop()},Dr.prototype.release=function(){this.g=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}};var Pr=1,Or=2,Lr=3;function Mr(e,t){this.P=oe(e),this.a=t==Ur,this.C=0}function Nr(){return new le(2,3,3e3)}(i=Mr.prototype).wa=function(){return this.C<this.P.byteLength},i.ye=function(){return this.C},i.oe=function(){return this.P.byteLength},i.qa=function(){try{var e=this.P.getUint8(this.C);return this.C+=1,e}catch(e){throw Nr()}},i.Mb=function(){try{var e=this.P.getUint16(this.C,this.a);return this.C+=2,e}catch(e){throw Nr()}},i.K=function(){try{var e=this.P.getUint32(this.C,this.a);return this.C+=4,e}catch(e){throw Nr()}},i.Od=function(){try{var e=this.P.getInt32(this.C,this.a);return this.C+=4,e}catch(e){throw Nr()}},i.rb=function(){try{if(this.a)var e=this.P.getUint32(this.C,!0),t=this.P.getUint32(this.C+4,!0);else t=this.P.getUint32(this.C,!1),e=this.P.getUint32(this.C+4,!1)}catch(e){throw Nr()}if(2097151<t)throw new le(2,3,3001);return this.C+=8,t*Math.pow(2,32)+e},i.Wa=function(e){if(this.C+e>this.P.byteLength)throw Nr();var t=ae(this.P,this.C,e);return this.C+=e,t},i.skip=function(e){if(this.C+e>this.P.byteLength)throw Nr();this.C+=e},i.Qd=function(e){if(this.C<e)throw Nr();this.C-=e},i.seek=function(e){if(0>e||e>this.P.byteLength)throw Nr();this.C=e},i.ed=function(){for(var e=this.C;this.wa()&&0!=this.P.getUint8(this.C);)this.C+=1;return e=ae(this.P,e,this.C-e),this.C+=1,Be(e)},V("shaka.util.DataViewReader",Mr),Mr.prototype.readTerminatedString=Mr.prototype.ed,Mr.prototype.seek=Mr.prototype.seek,Mr.prototype.rewind=Mr.prototype.Qd,Mr.prototype.skip=Mr.prototype.skip,Mr.prototype.readBytes=Mr.prototype.Wa,Mr.prototype.readUint64=Mr.prototype.rb,Mr.prototype.readInt32=Mr.prototype.Od,Mr.prototype.readUint32=Mr.prototype.K,Mr.prototype.readUint16=Mr.prototype.Mb,Mr.prototype.readUint8=Mr.prototype.qa,Mr.prototype.getLength=Mr.prototype.oe,Mr.prototype.getPosition=Mr.prototype.ye,Mr.prototype.hasMoreData=Mr.prototype.wa;var Ur=1;function Br(){this.c=[],this.b=[],this.a=!1}function Fr(e){for(var t=null!=e.flags?12:8;e.reader.wa()&&!e.parser.a;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function Vr(e){for(var t=null!=e.flags?12:8,n=e.reader.K(),i=(n=u(J(n))).next();!i.done&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.a);i=n.next());}function Hr(e){return function(t){e(t.reader.Wa(t.reader.P.byteLength-t.reader.C))}}function jr(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Kr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}Mr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ur},(i=Br.prototype).box=function(e,t){var n=jr(e);return this.c[n]=Gr,this.b[n]=t,this},i.ea=function(e,t){var n=jr(e);return this.c[n]=zr,this.b[n]=t,this},i.stop=function(){this.a=!0},i.parse=function(e,t){var n=new Mr(e,0);for(this.a=!1;n.wa()&&!this.a;)this.qc(0,n,t)},i.qc=function(e,t,n){var i=t.C,r=t.K(),a=t.K();switch(r){case 0:r=t.P.byteLength-i;break;case 1:r=t.rb()}var o=this.b[a];if(o){var s=null,l=null;this.c[a]==zr&&(s=(l=t.K())>>>24,l&=16777215),a=i+r,n&&a>t.P.byteLength&&(a=t.P.byteLength),o({parser:this,partialOkay:n||!1,version:s,flags:l,reader:t=new Mr(t=0<(a-=t.C)?t.Wa(a):new Uint8Array(0),0),size:r,start:i+e})}else t.skip(Math.min(i+r-t.C,t.P.byteLength-t.C))},V("shaka.util.Mp4Parser",Br),Br.typeToString=Kr,Br.allData=Hr,Br.sampleDescription=Vr,Br.children=Fr,Br.prototype.parseNext=Br.prototype.qc,Br.prototype.parse=Br.prototype.parse,Br.prototype.stop=Br.prototype.stop,Br.prototype.fullBox=Br.prototype.ea,Br.prototype.box=Br.prototype.box;var Gr=0,zr=1;function Wr(e,t,n,i){return e=_t(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Yr(e,t){var n=this;this.s=t,this.o=e,this.i=null,this.f=1,this.c=this.b=null,this.a=new Map,this.h=!1,this.j=null,this.g=!1,this.F=new Dt((function(){return function(e){var t,n,i,r;return O((function(a){if(1==a.a){for(t=[],n=u(e.a.values()),i=n.next();!i.done;i=n.next())aa(r=i.value),t.push(oa(r));return E(a,Promise.all(t),2)}e.a.clear(),e.s=null,e.o=null,e.i=null,A(a)}))}(n)}))}function qr(e,t){var n=e.a.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ya&&(Zr(e,r,!1,0,!1),n.Ya=i)}else(i=n.Ya)&&(n.Ya=null,Zr(e,i,!0,0,!1))}}function $r(e,t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.b=t,e.h&&(t.video&&Zr(e,t.video,n,i,!1),t.audio&&Zr(e,t.audio,n,i,!1))}function Xr(e,t){e.c=t,e.h&&Zr(e,t,!0,0,!1)}function Zr(e,t,n,i,r){var a=e.a.get(t.type);a||"text"!=t.type?a&&(a.Ya&&(t.trickModeVideo?(a.Ya=t,t=t.trickModeVideo):a.Ya=null),a.stream!=t||r)&&("text"==t.type&&ni(e.s.L,Kt(t.mimeType,t.codecs)),a.stream=t,a.la=null,n&&(a.Ab?a.wc=!0:a.Ma?(a.$a=!0,a.fc=i,a.wc=!0):(aa(a),ia(e,a,!0,i).catch((function(t){e.s&&e.s.onError(t)})))),function(e,t){var n,i;return O((function(r){if(1==r.a)return t.ia?(n=t.stream,i=t.ia,n.segmentIndex?r.u(2):E(r,n.createSegmentIndex(),2)):r.return();if(t.ia!=i||t.stream!=n)return r.return();var a=e.s.jc(),o=ai(e.s.L,t.type),s=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),l=null==s?null:t.stream.segmentIndex.get(s);s=l&&l.a?l.a-l.b:null,l&&!s&&(s=(l.endTime-l.startTime)*(t.stream.bandwidth||0)/8),s?((l=l.f)&&(s+=(l.a?l.a-l.b:null)||0),a=8*s/(l=e.s.getBandwidthEstimate())<(o||0)-a-Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal)||t.ia.b.a>s):a=!1,a&&t.ia.abort(),A(r)}))}(e,a).catch((function(t){e.s&&e.s.onError(t)}))):function(e,t){var n,i,r,a;O((function(o){switch(o.a){case 1:return n=Le,k(o,2),E(o,ui(e.s.L,n.$),4);case 4:_(o,3);break;case 2:i=w(o),e.s&&e.s.onError(i);case 3:r=Kt(t.mimeType,t.codecs),ni(e.s.L,r),(e.s.L.h.isTextVisible()||e.i.alwaysStreamText)&&(a=Jr(t),e.a.set(n.$,a),ra(e,a,0)),A(o)}}))}(e,t)}function Qr(e,t){t.Ab||t.$a||(t.Ma?(t.$a=!0,t.fc=0):null==ri(e.s.L,t.type)?null==t.Ia&&ra(e,t,0):(aa(t),ia(e,t,!1,0).catch((function(t){e.s&&e.s.onError(t)}))))}function Jr(e){return{stream:e,type:e.type,la:null,pa:null,mc:null,Wc:null,Vc:null,Uc:null,Ya:null,endOfStream:!1,Ma:!1,Ia:null,$a:!1,fc:0,wc:!1,Ab:!1,gd:!1,Ib:!1,ia:null}}function ea(e,t){var n=e.o.presentationTimeline,i=n.La();return!(t.endTime<n.Ra()||t.startTime>i)}function ta(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function na(e,t,n){var i,r,a,o;return O((function(s){return 1==s.a?(i=Rt,r=Wr(n.c(),n.b,n.a,e.i.retryParameters),a=e.s.nb.request(i,r),t.ia=a,E(s,a.promise,2)):(o=s.b,t.ia=null,s.return(o.data))}))}function ia(e,t,n,i){var r,a;return O((function(o){return 1==o.a?(t.$a=!1,t.wc=!1,t.fc=0,t.Ab=!0,t.pa=null,t.mc=null,t.la=null,i?(r=e.s.jc(),a=e.s.L.getDuration(),E(o,e.s.L.remove(t.type,r+i,a),3)):E(o,ui(e.s.L,t.type),4)):3!=o.a?(Pt(e.F),n?E(o,e.s.L.flush(t.type),3):o.u(3)):(Pt(e.F),t.Ab=!1,t.endOfStream=!1,ra(e,t,0),void A(o))}))}function ra(e,t,n){var i=t.type;("text"!=i||e.a.has(i))&&(t.Ia=new tt((function(){var n;return O((function(i){return 1==i.a?(k(i,2),E(i,e.Kb(t),4)):2!=i.a?_(i,0):(n=w(i),e.s&&e.s.onError(n),void A(i))}))})).R(n))}function aa(e){null!=e.Ia&&(e.Ia.stop(),e.Ia=null)}function oa(e){return O((function(t){return e.ia?E(t,e.ia.abort(),0):t.u(0)}))}function sa(e,t){O((function(n){if(1==n.a)return E(n,rt(e.j),2);Pt(e.F),e.s.onError(t),t.handled||e.i.failureCallback(t),A(n)}))}function la(e,t){var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null},i=this;this.h=t,this.c=e,this.f=n,this.j=null,this.g=[],this.b=this.a=null,this.m=Promise.resolve().then((function(){return function(e){return O((function(t){if(e.F.a)t=t.u(0);else{if(0==e.g.length||e.a&&!e.a.Sa)var n=!1;else{e.a&&(e.a.xa.Va(),e.a=null);var i=(n=e.g.shift()).create(e.f);i?(n.xa.pb(),e.a={node:i.node,payload:i.payload,Sa:i.Sa,xa:n.xa}):n.xa.pc(),n=!0}n?n=Promise.resolve():e.a?n=function(e){var t,n;return O((function(i){switch(i.a){case 1:return e.c=e.h.ue(e.c,e.f,e.a.node,e.a.payload),k(i,2),e.b=e.h.je(e.c,e.f,e.a.payload),E(i,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.xa.nc(),e.a=null),_(i,0);break;case 2:return 7001==(t=w(i)).code?e.a.xa.Va():e.a.xa.onError(t),e.a=null,e.b=null,n=e,E(i,e.h.handleError(e.f,t),5);case 5:n.c=i.b,A(i)}}))}(e):(e.h.Le(e.c),e.j=new Me,n=e.j),t=E(t,n,1)}return t}))}(i)})),this.F=new Dt((function(){return function(e){var t,n;return O((function(i){if(1==i.a)return e.b&&e.b.abort(),ca(e),E(i,e.m,2);for(e.a&&e.a.xa.Va(),t=u(e.g),n=t.next();!n.done;n=t.next())n.value.xa.Va();e.a=null,e.g=[],e.h=null,A(i)}))}(i)}))}function ua(e,t){var n={pb:function(){},nc:function(){},Va:function(){},onError:function(){},pc:function(){},Qf:function(){}};return e.g.push({create:t,xa:n}),e.b&&e.b.abort(),ca(e),n}function ca(e){e.j&&(e.j.resolve(),e.j=null)}function da(e){this.a=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n);this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ha(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function pa(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function fa(){}function ga(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function va(e,t){var n=this;this.h=!1,this.f=[],this.a=e,this.g=t,this.b=document.createElement("div"),this.b.classList.add("shaka-text-container"),this.b.style.textAlign="center",this.b.style.display="flex",this.b.style.flexDirection="column",this.b.style.alignItems="center",this.b.style.justifyContent="flex-end",this.g.appendChild(this.b),this.j=new nt((function(){ya(n)})).ra(.25),this.c=new Map}function ya(e){function t(t){return e.f.includes(t)&&e.h&&t.startTime<=n&&t.endTime>=n}for(var n=e.a.currentTime,i=u(e.c.keys()),r=i.next();!r.done;r=i.next())if(!t(r=r.value)){var a=e.c.get(r);e.b.removeChild(a),e.c.delete(r)}for(i=new Set(e.c.values()),a=(r=u(Array.from(e.b.childNodes))).next();!a.done;a=r.next())a=a.value,i.has(a)||e.b.removeChild(a);for(r=(i=u(i=e.f.filter((function(n){return t(n)&&!e.c.has(n)})).sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})))).next();!r.done;r=i.next())ba(e,e.b,r.value)}function ma(e,t,n,i){var r=document.createElement("span");return i&&r.classList.add("shaka-nested-cue"),Ea(e,r,n,!0),t.appendChild(r),r}function ba(e,t,n){if(n.nestedCues.length){var i=document.createElement("p");i.style.width="100%",Ea(e,i,n,!1);for(var r=0;r<n.nestedCues.length;r++)ma(e,i,n.nestedCues[r],!0);t.appendChild(i),e.c.set(n,i)}else e.c.set(n,ma(e,t,n,!1))}function Ea(e,t,n,i){var r=t.style,a=0==n.nestedCues.length;n.spacer?(r.flexBasis="100%",r.height="0"):(r.whiteSpace="pre-line",t.textContent=n.payload,a&&(r.backgroundColor=n.backgroundColor),r.border=n.border,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=Aa(n.linePadding,n,e.g),r.paddingRight=Aa(n.linePadding,n,e.g),n.backgroundImage&&(r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==n.backgroundColor&&(r.backgroundColor="transparent")),n.backgroundImage&&n.region&&(t=n.region.widthUnits==qn?"%":"px",r.height=n.region.height+(n.region.heightUnits==qn?"%":"px"),r.width=n.region.width+t),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end",a?r.display="inline-block":(r.display="flex",r.flexDirection="row",r.flexWrap="wrap",r.margin="0",r.alignItems=r.justifyContent,r.justifyContent="center"),i&&(r.maxWidth="100%"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=Aa(n.fontSize,n,e.g),n.line?1==n.lineInterpretation&&(r.position="absolute",n.writingMode==Vn?n.lineAlign==jn?r.top=n.line+"%":"end"==n.lineAlign&&(r.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==jn?r.left=n.line+"%":"end"==n.lineAlign&&(r.right=n.line+"%"):n.lineAlign==jn?r.right=n.line+"%":"end"==n.lineAlign&&(r.left=n.line+"%")):n.region&&n.region.id&&!a&&(e=n.region.widthUnits==qn?"%":"px",i=n.region.viewportAnchorUnits==qn?"%":"px",r.height=n.region.height+(n.region.heightUnits==qn?"%":"px"),r.width=n.region.width+e,r.position="absolute",r.top=n.region.viewportAnchorY+i,r.left=n.region.viewportAnchorX+i),r.lineHeight=n.lineHeight,n.position&&(n.writingMode==Vn?r.paddingLeft=n.position:r.paddingTop=n.position),"line-left"==n.positionAlign?r.cssFloat="left":"line-right"==n.positionAlign&&(r.cssFloat="right"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,n.size&&(n.writingMode==Vn?r.width=n.size+"%":r.height=n.size+"%"))}function Aa(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),gf:i[2]}:null;if(!i)return e;var r=i.value;switch(i.gf){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function ka(){}function Ta(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=ft(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=ft(u)),l=Ta(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(W("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&Y("Unexpected number of arguments for "+l),e[a]=t[a]):(W("Invalid config, unrecognized key "+l),s=!1)}return s}function _a(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function wa(){}function Sa(){var e=1e6,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:fn,logLicenseExchange:!1,updateExpirationTime:1},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};(Zt("Web0S")||qt()||Zt("CrKey"))&&(r.stallSkip=0);var a={trackSelectionCallback:function(e){return O((function(t){return t.return(e)}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:function(){return new Ui},abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return O((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=ki(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return bi(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=u(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage))}))},o}function Ca(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ta(e,t,n||Sa(),i,"")}function Ra(){this.a=null,this.b=[]}function Ia(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function xa(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=u(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Da(){this.b=this.c=null,this.a=[]}function Pa(e,t,n){e.c!=t&&(e.c=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}))}function Oa(e,t,n){e.b!=t&&(e.b=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function La(){this.g=this.h=this.A=this.m=this.D=this.c=this.v=this.f=this.H=this.I=this.J=this.j=this.M=NaN,this.b=new Ra,this.a=new Da}function Ma(t,n){pt.call(this);var i=this;this.g=Vo,this.cc=this.a=null,this.T=!1,this.b=new Ot,this.Ic=this.j=this.xb=this.o=this.ac=this.m=this.c=this.bc=this.D=this.Yb=this.A=this.Ba=this.v=this.H=this.h=this.N=null,this.vd=1e9,this.i=Ga(this),this.xc={width:1/0,height:1/0},this.f=null,this.yb=new Gi(this.i.preferredAudioLanguage,this.i.preferredVariantRole,this.i.preferredAudioChannelCount),this.ca=this.i.preferredTextLanguage,this.Zb=this.i.preferredTextRole,this.Jc=[],n&&n(this),this.N=function(e){return new kt((function(t,n){e.j&&e.j.segmentDownloaded(t,n)}))}(this),this.I=null,Wo&&(this.I=De(Wo)),this.b.l(e,"online",(function(){i.hd()})),this.da={name:"detach"},this.Ea={name:"attach"},this.M={name:"unload"},this.Oc={name:"manifest-parser"},this.Nc={name:"manifest"},this.ta={name:"media-source"},this.Kc={name:"drm-engine"},this.J={name:"load"},this.Pc={name:"src-equals-drm-engine"},this.Ca={name:"src-equals"};var r=new Map;r.set(this.Ea,(function(e,t){return ut(function(e,t,n){return null==t.B&&(t.B=n.B,e.b.l(t.B,"error",(function(){var t=ro(e);t&&no(e,t)}))),e.a=t.B,Promise.resolve()}(i,e,t))})),r.set(this.da,(function(e){return e.B&&(i.b.sa(e.B,"error"),e.B=null),i.a=null,ut(e=Promise.resolve())})),r.set(this.M,(function(e){return ut(Ua(i,e))})),r.set(this.ta,(function(t){return ut(t=function(t,n){var i,r,a,o;return O((function(s){if(1==s.a)return i=e.muxjs?new Sn:new Cn,r=t.i.textDisplayFactory,a=De(r),t.Lc=r,E(s,(o=function(e,t,n,i){return new ei(e,t,n,i)}(n.B,i,a,(function(e,n,i){for(var r=(e=u(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var a=r.cueTime+n,o=i,s=u(r.frames),l=s.next();!l.done;l=s.next())Ba(t,a,o,"ID3",l.value);t.I&&t.I.onHlsTimedMetadata(r,a)}}))).A,2);t.H=o,A(s)}))}(i,t))})),r.set(this.Oc,(function(e,t){return ut(function(e,t,n){var i,r,a,o;return O((function(s){if(1==s.a)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.N,e.xb=i,a=e,E(s,Xi(i,r,e.i.manifest.retryParameters,t.mimeType),2);a.ac=s.b,e.m=De(e.ac),o=ft(e.i.manifest),n.B&&"AUDIO"===n.B.nodeName&&(o.disableVideo=!0),e.m.configure(o),A(s)}))}(i,e,t))})),r.set(this.Nc,(function(e){return function(e,t){var n=t.uri,i=e.N;e.bc=new xr((function(){return e.jd()})),function(e,t){e.b=t}(e.bc,(function(t){io(e,Po,t),e.I&&e.I.onDashTimedMetadata(t)}));var r={networkingEngine:i,filter:function(t){return O((function(n){return n.return(e.gb(t))}))},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=u(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"==(r=r.value).mimeType&&n.add(r.originalId);for(i=u(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=u(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=new wr;s={id:e.vd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:s,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.bc;e:{for(var i=u(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return no(e,t)}},a=Date.now()/1e3;return new at(function(){var t,i,o,s;return O((function(l){if(1==l.a)return t=e,E(l,e.m.start(n,r),2);if(t.o=l.b,i=Na(_o),e.dispatchEvent(i),0==e.o.variants.length)throw new le(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.o),o=Date.now()/1e3,s=o-a,e.f.v=s,A(l)}))}(),(function(){return e.m.stop()}))}(i,e)})),r.set(this.Kc,(function(){return ut(function(e){var t,n;return O((function(i){if(1==i.a)return t=Date.now()/1e3,n=!0,e.h=Fa(e,{nb:e.N,onError:function(t){no(e,t)},oc:function(t){ao(e,t)},onExpirationUpdated:function(t,n){oo(e,t,n)},onEvent:function(i){e.dispatchEvent(i),i.type==mo&&n&&(n=!1,e.f.c=Date.now()/1e3-t)}}),e.h.configure(e.i.drm),E(i,nn(e.h,e.o.variants,e.o.offlineSessionIds),2);e.gb(e.o),A(i)}))}(i))})),r.set(this.J,(function(e,t){return ut(function(e,t,n){var i,r,a,o,s,l,c,d,h,p;return O((function(f){switch(f.a){case 1:return t.startTime=n.startTime,i=t.B,r=t.uri,e.xb=r,e.A=new Sr({kc:function(){return t.B.playbackRate},od:function(e){t.B.playbackRate=e},Kd:function(e){t.B.currentTime+=e}}),a=function(){return Ya(e)},o=function(){return Wa(e)},e.b.l(i,"playing",a),e.b.l(i,"pause",a),e.b.l(i,"ended",a),e.b.l(i,"ratechange",o),s=e.i.abrFactory,e.j&&e.Ic==s||(e.Ic=s,e.j=De(s),"function"!=typeof e.j.playbackRateChanged&&(_e("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.j.playbackRateChanged=function(){}),e.j.configure(e.i.abr)),e.yb=new Gi(e.i.preferredAudioLanguage,e.i.preferredVariantRole,e.i.preferredAudioChannelCount),e.ca=e.i.preferredTextLanguage,function(e,t,n){0<t&&(e.S()||e.Ud(t)),t=e.getDuration(),n<t&&(e.S()||e.za(n))}(e.o.presentationTimeline,e.i.playRangeStart,e.i.playRangeEnd),E(f,e.h.zb(i),2);case 2:if(e.j.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.c&&t!=e.c.b&&(Pa(e.f.a,t,!0),$r(e.c,t,n,i),Xa(e))})),e.v=function(e,t){return new mr(e.a,e.o,e.i.streaming,t,(function(){if(e.Ba&&Ir(e.Ba,!0),e.c)for(var t=e.c,n=t.s.jc(),i=t.i.smallGapLimit,r=u(t.a.keys()),a=r.next();!a.done;a=r.next()){a=a.value;var o=t.a.get(a);o.la=null;var s=t.s.L;(s="text"==a?null!=(s=s.c).a&&null!=s.b&&n>=s.a&&n<s.b:In(s=oi(s,a),n,i))||(null!=ai(t.s.L,a)&&Qr(t,o),o.ia&&(o.ia.abort(),o.ia=null),"text"===a&&t.s.L.v.c())}e.D&&Ha(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.Ba=function(e){var t=new Dr(e.bc);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(t,(function(t){io(e,Oo,t)}),(function(t){io(e,Lo,t)}),(function(t,n){n||(io(e,Oo,t),io(e,Lo,t))}));var n=new Rr(e.a);return n.a.add(t),n}(e),l=Math.max(e.o.minBufferTime,e.i.streaming.rebufferingGoal),Va(e,l),_i(e.o,e.i.preferredAudioChannelCount),e.c=function(e){return new Yr(e.o,{jc:function(){return e.v.g()},getBandwidthEstimate:function(){return e.j.getBandwidthEstimate()},L:e.H,nb:e.N,onError:function(t){return no(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Me:function(){e.m&&e.m.update&&e.m.update()},cd:function(){e.v&&e.v.v(),Ha(e)}})}(e),e.c.configure(e.i.streaming),e.g=Ho,e.dispatchEvent(Na(Io)),c=qa(e)?e.j.chooseVariant():null,Pa(e.f.a,c,!0),$r(e.c,c,!1,0),(d=Li(e.o.textStreams,e.ca,e.Zb)[0]||null)&&Oa(e.f.a,d,!0),d?(c.audio&&function(e,t,n){return e=bi(e.i.preferredTextLanguage),t=bi(t.language),vi(n=bi(n.language),e)&&!vi(t,n)}(e,c.audio,d)&&(e.T=!0),e.T&&e.H.h.setTextVisibility(!0),eo(e)):e.T=!1,d&&(e.i.streaming.alwaysStreamText||e.Tc())&&Xr(e.c,d),!e.i.streaming.startAtSegmentBoundary){f.u(3);break}return h=e.v.g(),E(f,function(e,t){var n,i,r,a,o;return O((function(s){return 1==s.a?(n=e.audio,i=e.video,r=function(e,t){var n,i;return O((function(r){return 1==r.a?e?E(r,e.createSegmentIndex(),2):r.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(i=n.startTime,r.return(i)):r.return(null)}))},E(s,r(n,t),2)):3!=s.a?(a=s.b,E(s,r(i,t),3)):null!=(o=s.b)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(c,h),4);case 4:p=f.b,e.v.m(p);case 3:return E(f,e.c.start(),5);case 5:e.i.abr.enabled&&(e.j.enable(),to(e)),e.gb(e.o),Za(e),Xa(e),qa(e),e.o.variants.some((function(e){return e.primary})),e.b.ha(i,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.qd})),A(f)}}))}(i,e,t))})),r.set(this.Pc,(function(e){return ut(e=function(e,t){var n,i,r,a;return O((function(o){return 1==o.a?(n=Le,i=Date.now()/1e3,r=!0,e.h=Fa(e,{nb:e.N,onError:function(t){no(e,t)},oc:function(t){ao(e,t)},onExpirationUpdated:function(t,n){oo(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==mo&&r&&(r=!1,e.f.c=Date.now()/1e3-i)}}),e.h.configure(e.i.drm),a={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Da,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},E(o,nn(e.h,[a],[]),2)):E(o,e.h.zb(t.B),0)}))}(i,e))})),r.set(this.Ca,(function(e,t){return function(e,t,n){function i(){return Ya(e)}t.uri=n.uri,t.startTime=n.startTime,e.xb=t.uri,e.v=new yr(t.B),null!=t.startTime&&e.v.m(t.startTime),e.A=new Sr({kc:function(){return t.B.playbackRate},od:function(e){t.B.playbackRate=e},Kd:function(e){t.B.currentTime+=e}}),Va(e,e.i.streaming.rebufferingGoal),e.b.l(t.B,"playing",i),e.b.l(t.B,"pause",i),e.b.l(t.B,"ended",i),e.b.l(t.B,"ratechange",(function(){return Wa(e)})),"none"!=e.a.preload&&e.b.ha(e.a,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.qd})),e.a.audioTracks&&(e.b.l(e.a.audioTracks,"addtrack",(function(){return Za(e)})),e.b.l(e.a.audioTracks,"removetrack",(function(){return Za(e)})),e.b.l(e.a.audioTracks,"change",(function(){return Za(e)}))),e.a.textTracks&&(e.b.l(e.a.textTracks,"addtrack",(function(t){Za(e),function(e,t){var n=t.track;"metadata"==n.kind&&(n.mode="hidden",e.b.l(n,"cuechange",(function(){if(n.activeCues)for(var t=u(n.activeCues),i=t.next();!i.done;i=t.next())i=i.value,Ba(e,i.startTime,i.endTime,i.type,i.value),e.I&&e.I.onCueMetadataChange(i.value)})),new nt((function(){for(var t=function(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Qb().R(.5))}(e,t)})),e.b.l(e.a.textTracks,"removetrack",(function(){return Za(e)})),e.b.l(e.a.textTracks,"change",(function(){return Za(e)}))),t.B.src=t.uri,(qt()||Zt("Web0S"))&&t.B.load(),e.g=jo,e.dispatchEvent(Na(Io));var r=new Me;lr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){r.resolve()}));var a=!1;return e.Jc.push((function(){a=!0})),lr(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.b,(function(){return O((function(t){return 1==t.a?a?t.return():(function(e){var t=e.i.preferredAudioLanguage;if(""!=t){e.kd(t);var n=e.i.preferredVariantRole;""!=n&&e.kd(t,n)}}(e),Ka(e).find((function(e){return"disabled"!=e.mode}))?t.u(2):E(t,new Promise((function(t){e.b.ha(e.a.textTracks,"change",t),new nt(t).R(1)})),2)):a?t.return():(function(e){var t=e.i.preferredTextLanguage;if(""!=t){e.ld(t);var n=e.i.preferredTextRole;""!=n&&e.ld(t,n)}}(e),void A(t))}))})),e.a.error?r.reject(ro(e)):"none"==e.a.preload&&(Y('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),r.resolve()),e.b.ha(e.a,"error",(function(){r.reject(ro(e))})),new at(r,(function(){return r.reject(new le(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.W=new la(this.da,{ue:function(e,t,n,r){var a=null;return e==i.da&&(a=n==i.da?i.da:i.Ea),e==i.Ea&&(a=n==i.da||t.B!=r.B?i.da:n==i.Ea?i.Ea:n==i.ta||n==i.J?i.ta:n==i.Ca?i.Pc:null),e==i.ta&&(a=n==i.J&&t.B==r.B?i.Oc:i.M),e==i.Oc&&(a=po(i.J,i.Nc,i.M,n,t,r)),e==i.Nc&&(a=po(i.J,i.Kc,i.M,n,t,r)),e==i.Kc&&(a=po(i.J,i.J,i.M,n,t,r)),e==i.Pc&&(a=n==i.Ca&&t.B==r.B?i.Ca:i.M),e!=i.J&&e!=i.Ca||(a=i.M),e==i.M&&(a=r.B&&t.B==r.B?i.Ea:i.da),a},je:function(e,t,n){return i.dispatchEvent(Na(So,{state:e.name})),r.get(e)(t,n)},handleError:function(e){return O((function(t){return 1==t.a?E(t,Ua(i,e),2):t.return(e.B?i.Ea:i.da)}))},Le:function(e){i.dispatchEvent(Na(Co,{state:e.name}))}}),t&&this.zb(t,!0)}function Na(e,t){return new dt(e,t)}function Ua(e,t){var n,i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:return e.g!=Fo&&(e.g=Vo),n=e.Jc.map((function(e){return e()})),e.Jc=[],E(h,Promise.all(n),2);case 2:if(e.dispatchEvent(Na(No)),t.mimeType=null,t.startTime=null,t.uri=null,t.B&&(e.b.sa(t.B,"loadedmetadata"),e.b.sa(t.B,"playing"),e.b.sa(t.B,"pause"),e.b.sa(t.B,"ended"),e.b.sa(t.B,"ratechange")),e.Ba&&(e.Ba.release(),e.Ba=null),e.Yb&&(e.Yb.stop(),e.Yb=null),!e.m){h.u(3);break}return E(h,e.m.stop(),4);case 4:e.m=null,e.ac=null;case 3:if(!e.j){h.u(5);break}return E(h,e.j.stop(),5);case 5:if(!e.c){h.u(7);break}return E(h,e.c.destroy(),8);case 8:e.c=null;case 7:if(e.A&&(e.A.release(),e.A=null),e.v&&(e.v.release(),e.v=null),!e.H){h.u(9);break}return E(h,e.H.destroy(),10);case 10:e.H=null;case 9:if(e.I&&e.I.onAssetUnload(),!t.B||!t.B.src){h.u(11);break}return E(h,new Promise((function(e){return new nt(e).R(.1)})),12);case 12:t.B.removeAttribute("src"),t.B.load();case 11:if(!e.h){h.u(13);break}return E(h,e.h.destroy(),14);case 14:e.h=null;case 13:if(e.xb=null,e.D=null,e.o){for(i=u(e.o.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=u([a.audio,a.video]),s=o.next();!s.done;s=o.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.o.textStreams),s=c.next();!s.done;s=c.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.o=null,e.f=new La,e.Lc=null,za(e),A(h)}}))}function Ba(e,t,n,i,r){e.dispatchEvent(Na(wo,{startTime:t,endTime:n,Of:i,payload:r}))}function Fa(e,t){return new tn(t,e.i.drm.updateExpirationTime)}function Va(e,t){e.D=new zi,e.D.a=Yi,Wi(e.D,t,Math.min(.5,t/2)),za(e),e.Yb=new nt((function(){Ha(e)})).ra(.25)}function Ha(e){switch(e.g){case jo:if(e.a.ended)var t=!0;else{var n=Rn(e.a.buffered);t=null!=n&&n>=e.a.duration-1}break;case Ho:e:if(e.a.ended||ii(e.H))t=!0;else{if(e.o.presentationTimeline.S()){n=e.o.presentationTimeline.La();var i=Rn(e.a.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=xn(e.a.buffered,e.a.currentTime);var r=t,a=(n=e.D).b.get(n.a);t=n.a,i=r||i>=a?qi:Yi,n.a=i,t!=i&&za(e)}function ja(e){if(e.m){var t=ft(e.i.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.m.configure(t)}if(e.h&&e.h.configure(e.i.drm),e.c){e.c.configure(e.i.streaming);try{e.gb(e.o)}catch(t){no(e,t)}e.j&&qa(e),!(t=e.c.b)||t.allowedByApplication&&t.allowedByKeySystem||$a(e)}if(e.H&&(t=e.i.textDisplayFactory,e.Lc!=t)){var n=De(t),i=e.H,r=i.h;i.h=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.c&&(i.c.c=n),e.Lc=t,e.c&&(n=(t=e.c).a.get("text"))&&Zr(t,n.stream,!0,0,!0)}e.j&&(e.j.configure(e.i.abr),e.i.abr.enabled?e.j.enable():e.j.disable(),to(e)),e.D&&(t=e.i.streaming.rebufferingGoal,e.o&&(t=Math.max(t,e.o.minBufferTime)),Wi(e.D,t,Math.min(.5,t/2)))}function Ka(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Ga(e){var t=Sa();return t.streaming.failureCallback=function(t){e.S()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.hd())},t.textDisplayFactory=function(){return e.cc?new va(e.a,e.cc):new da(e.a)},t}function za(e){var t=e.Sc();if(e.f&&e.D&&e.v){var n=e.A;n.f=t,Cr(n),Ya(e)}e.dispatchEvent(Na(yo,{buffering:t}))}function Wa(e){var t=e.a.playbackRate;0!=t&&(e.A&&e.A.set(t),t=Na(Ro),e.dispatchEvent(t))}function Ya(e){if(e.f&&e.D){var t=e.f.b;e.D.a==Yi?Ia(t,"buffering"):e.a.paused?Ia(t,"paused"):e.a.ended?Ia(t,"ended"):Ia(t,"playing")}}function qa(e){try{so(e,e.o)}catch(t){return no(e,t),!1}var t=e.o.variants.filter((function(e){return Pi(e)}));return t=e.yb.create(t),e.j.setVariants(Array.from(t.values())),!0}function $a(e){var t;if(t=qa(e)?e.j.chooseVariant():null){if(t==e.c.b)return;Pa(e.f.a,t,!0),$r(e.c,t,!0,0),Qa(e)}Xa(e)}function Xa(e){lo(e,Na(vo))}function Za(e){lo(e,Na(Mo))}function Qa(e){lo(e,Na(Uo))}function Ja(e){lo(e,Na(xo))}function eo(e){lo(e,Na(Do))}function to(e){lo(e,Na(go,{Pf:e.i.abr.enabled}))}function no(e,t){if(e.g!=Fo){var n=Na(Eo,{detail:t});e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function io(e,t,n){e.dispatchEvent(Na(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function ro(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new le(2,3,3016,t,n,e.a.error.message)}function ao(e,t){if(e.c){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.o.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=s.value;if(s=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!Go.includes(c)}s!=a.allowedByKeySystem&&(r=!0)}}r&&qa(e),(i=e.c.b)&&!i.allowedByKeySystem&&$a(e),r&&Za(e)}}function oo(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),t=Na(Ao),e.dispatchEvent(t)}function so(e,t){var n=e.h?Vt(e.h.T):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=new Set,s=new Set,l=u(t.variants),c=l.next();!c.done;c=l.next()){var d=[];(c=c.value).audio&&d.push(c.audio),c.video&&d.push(c.video);for(var h=(d=u(d)).next();!h.done;h=d.next())if((h=h.value).keyIds.size)for(var p=(h=u(h.keyIds)).next();!p.done;p=h.next()){p=p.value;var f=n[i?"00":p];f?Go.includes(f)&&s.add(f):o.add(p)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new le(2,4,4012,n={hasAppRestrictions:a,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)})}function lo(e,t){O((function(n){if(1==n.a)return E(n,Promise.resolve(),2);e.g!=Fo&&e.dispatchEvent(t),A(n)}))}function uo(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(bi(n.language)):t.add("und");return t}function co(e){for(var t=new Map,n=(e=u(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=bi(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=u(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function ho(){return new le(2,7,7e3)}function po(e,t,n,i,r,a){return i==e&&r.B==a.B&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function fo(e){return new Promise((function(t,n){e.Va=function(){return n(ho())},e.nc=function(){return t()},e.onError=function(e){return n(e)},e.pc=function(){return n(ho())}}))}Yr.prototype.destroy=function(){return this.F.destroy()},Yr.prototype.configure=function(e){this.i=e,this.j=new it({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Yr.prototype.start=function(){var e=this;return O((function(t){if(1==t.a)return E(t,function(e){var t,n,i,r,a,o,s,l,c,d;return O((function(h){if(1==h.a){if(t=Le,!e.b)throw new le(2,5,5006);return n=new Map,i=new Set,e.b.audio&&(n.set(t.fb,e.b.audio),i.add(e.b.audio)),e.b.video&&(n.set(t.Da,e.b.video),i.add(e.b.video)),e.c&&(n.set(t.$,e.c),i.add(e.c)),r=e.s.L,a=e.i.forceTransmuxTS,E(h,r.init(n,a),2)}Pt(e.F);var p=e.o.presentationTimeline.getDuration();for(1/0>p?e.s.L.za(p):e.s.L.za(Math.pow(2,32)),o=u(n.keys()),s=o.next();!s.done;s=o.next())l=s.value,c=n.get(l),e.a.has(l)||(d=Jr(c),e.a.set(l,d),ra(e,d,0));A(h)}))}(e),2);Pt(e.F),e.h=!0,A(t)}))},Yr.prototype.Kb=function(e){var t,n,i,r,a=this;return O((function(o){switch(o.a){case 1:if(Pt(a.F),e.Ma||null==e.Ia||e.Ab)return o.return();if(e.Ia=null,!e.$a){o.u(2);break}return E(o,ia(a,e,e.wc,e.fc),3);case 3:return o.return();case 2:if(e.stream.segmentIndex){o.u(4);break}return t=e.stream,E(o,e.stream.createSegmentIndex(),5);case 5:if(t!=e.stream)return null==e.Ia&&ra(a,e,0),o.return();case 4:try{null!=(n=function(e,t){if(ta(t))return li(e.s.L,t.stream.originalId||""),null;var n=e.s.jc(),i=t.pa?t.pa.endTime:n,r=function(e,t,n){return"text"==t?null==(e=e.c).b||e.b<n?0:e.b-Math.max(n,e.a):xn(e=oi(e,t),n)}(e.s.L,t.type,n),a=Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.f;if(i>=e.o.presentationTimeline.getDuration())return t.endOfStream=!0,"video"==t.type&&(n=e.a.get("text"))&&ta(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,r>=a)return.5;if(r=ai(e.s.L,t.type),!(r=function(e,t,n,i){return t.la?t.la.current():t.pa||i?(t.la=t.stream.segmentIndex.jb(t.pa?t.pa.endTime:i),t.la.next().value):(t.la=t.stream.segmentIndex.jb(Math.max(n-e.i.inaccurateManifestTolerance,0)),(i=t.la.next().value)&&ea(e,i)||(t.la=t.stream.segmentIndex.jb(n),i=t.la.next().value),i)}(e,t,n,r))||!ea(e,r))return 1;a=1/0;for(var o=Array.from(e.a.values()),s=(o=u(o)).next();!s.done;s=o.next())ta(s=s.value)||(a=Math.min(a,s.pa?s.pa.endTime:n));return i>=a+e.o.presentationTimeline.a?1:(function(e,t,n,i){var r,a,o,s,l,u,c,d,h;return O((function(p){switch(p.a){case 1:return r=Le,a=t.stream,o=t.la,t.Ma=!0,s=function(e,t,n){var i,r,a,o,s,l,u;return O((function(c){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Wc&&r==t.Vc&&a==t.Uc||(s=function(){var n;return O((function(i){if(1==i.a)return k(i,2),t.Vc=r,t.Uc=a,t.Wc=o,E(i,function(e,t,n,i,r){return O((function(a){return t==Le.$?(e.c.v=n,function(e,t,n){e.f=t,e.g=n}(e.c,i,r),a.return()):E(a,Promise.all([di(e,t,(function(){var n=e.f[t].appendWindowStart,i=e.f[t].appendWindowEnd;e.f[t].abort(),e.f[t].appendWindowStart=n,e.f[t].appendWindowEnd=i,ci(e,t)})),di(e,t,(function(){var i=n;0>i&&(i+=.001),e.f[t].timestampOffset=i,ci(e,t)})),di(e,t,(function(){e.f[t].appendWindowStart=0,e.f[t].appendWindowEnd=r,e.f[t].appendWindowStart=i,ci(e,t)}))]),0)}))}(e.s.L,t.type,o,r,a),4);if(2!=i.a)return _(i,0);throw n=w(i),t.Vc=null,t.Uc=null,t.Wc=null,n}))},i.push(s())),!function(e,t){return e&&t?e.Hb()==t.Hb()&&e.Db()==t.Db()&&bt(e.c(),t.c()):e==t}(n.f,t.mc)&&(t.mc=n.f)&&(l=na(e,t,n.f),u=function(){var n,i,r;return O((function(a){switch(a.a){case 1:return k(a,2),E(a,l,4);case 4:return n=a.b,Pt(e.F),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(a,si(e.s.L,t.type,n,null,null,i),5);case 5:_(a,0);break;case 2:throw r=w(a),t.mc=null,r}}))},i.push(u())),E(c,Promise.all(i),0)}))}(e,t,i),l=na(e,t,i),k(p,2),E(p,Promise.all([s,l]),4);case 4:return u=p.b,Pt(e.F),e.g?p.return():t.$a?(t.Ma=!1,ra(e,t,0),p.return()):E(p,function(e,t,n,i,r,a){var o;return O((function(s){return 1==s.a?(o=i.closedCaptions&&0<i.closedCaptions.size,null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Br).ea("emsg",(function(t){var n=i.emsgSchemeIdUris,a=t.reader.ed(),o=t.reader.ed(),s=t.reader.K(),l=t.reader.K(),u=t.reader.K(),c=t.reader.K();t=t.reader.Wa(t.reader.P.byteLength-t.reader.C);var d=r.startTime+l/s;n.includes(a)&&("urn:mpeg:dash:event:2012"==a?e.s.Me():(n=new dt(bo,{detail:{startTime:d,endTime:d+u/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t}}),e.s.onEvent(n)))})).parse(a),E(s,function(e,t,n){var i,r,a;return O((function(o){if(1==o.a)return i=Math.max(e.i.bufferBehind,e.o.presentationTimeline.a),null==(r=ri(e.s.L,t.type))||.01>=(a=n-r-i)?o.return():E(o,e.s.L.remove(t.type,r,r+a),2);Pt(e.F),A(o)}))}(e,t,n),2)):3!=s.a?(Pt(e.F),E(s,si(e.s.L,t.type,a,r.startTime,r.endTime,o),3)):(Pt(e.F),void A(s))}))}(e,t,n,a,i,u[1]),5);case 5:if(Pt(e.F),e.g)return p.return();t.pa=i,o.next(),t.Ma=!1,t.gd=!1,c=e.s.L.ic(),d=c[t.type],JSON.stringify(d),t.$a||e.s.cd(),ra(e,t,0),_(p,0);break;case 2:if(h=w(p),Pt(e.F,h),e.g)return p.return();t.Ma=!1,t.type==r.$&&e.i.ignoreTextStreamFailures?e.a.delete(r.$):7001==h.code?(t.Ma=!1,t.Ia=null,ra(e,t,0)):3017==h.code?function(e,t,n){if(!Array.from(e.a.values()).some((function(e){return e!=t&&e.gd}))){var i=Math.round(100*e.f);if(20<i)e.f-=.2;else{if(!(4<i))return t.Ib=!0,e.g=!0,void e.s.onError(n);e.f-=.04}t.gd=!0}ra(e,t,4)}(e,t,h):(t.Ib=!0,h.severity=2,sa(e,h)),A(p)}}))}(e,t,n,r).catch((function(){})),null)}(a,e))&&(ra(a,e,n),e.Ib=!1)}catch(e){return sa(a,e),o.return()}if(i=Array.from(a.a.values()),!a.h||!i.every((function(e){return e.endOfStream}))){o.u(0);break}return E(o,a.s.L.endOfStream(),7);case 7:Pt(a.F),0!=(r=a.s.L.getDuration())&&r<a.o.presentationTimeline.getDuration()&&a.o.presentationTimeline.za(r),A(o)}}))},la.prototype.destroy=function(){return this.F.destroy()},(i=da.prototype).remove=function(e,t){return!!this.a&&(pa(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){function t(e){return e.spacer?"\n":e.nestedCues.length?e.nestedCues.map(t).join(""):e.payload}var n=e.map((function(e){if(e.nestedCues.length){var n=e.clone();return n.nestedCues=[],n.payload=t(e),n}return e})),i=[];e=this.a.cues?Array.from(this.a.cues):[];for(var r={},a=(n=u(n)).next();!a.done;r={cb:r.cb},a=n.next())r.cb=a.value,e.some(function(e){return function(t){return t.startTime==e.cb.startTime&&t.endTime==e.cb.endTime&&t.text==e.cb.payload}}(r))||(a=ha(r.cb))&&i.push(a);for(r=(e=u(e=i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)})))).next();!r.done;r=e.next())this.a.addCue(r.value)},i.destroy=function(){return this.a&&(pa(this.a,(function(){return!0})),this.a.mode="disabled"),this.a=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.a.mode},i.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},V("shaka.text.SimpleTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,V("shaka.util.Dom",fa),fa.removeAllChildren=ga,(i=va.prototype).append=function(e){for(var t=c(this.f).concat(),n={},i=(e=u(e)).next();!i.done;n={Sb:n.Sb},i=e.next())n.Sb=i.value,t.some(function(e){return function(t){return On(t,e.Sb)}}(n))||this.f.push(n.Sb);ya(this)},i.destroy=function(){this.g.removeChild(this.b),this.b=null,this.h=!1,this.f=[],this.j&&this.j.stop(),this.c.clear()},i.remove=function(e,t){return!!this.b&&(this.f=this.f.filter((function(n){return n.startTime<e||n.endTime>=t})),ya(this),!0)},i.isTextVisible=function(){return this.h},i.setTextVisibility=function(e){this.h=e},V("shaka.text.UITextDisplayer",va),va.prototype.setTextVisibility=va.prototype.setTextVisibility,va.prototype.isTextVisible=va.prototype.isTextVisible,va.prototype.remove=va.prototype.remove,va.prototype.destroy=va.prototype.destroy,va.prototype.append=va.prototype.append,V("shaka.util.ConfigUtils",ka),ka.convertToConfigObject=_a,ka.mergeConfigObjects=Ta,V("shaka.util.PlayerConfiguration",wa),wa.mergeConfigObjects=Ca,v(Ma,pt),(i=Ma.prototype).destroy=function(){var e,t=this;return O((function(n){switch(n.a){case 1:return t.g==Fo?n.return():(t.g=Fo,e=ua(t.W,(function(){return{node:t.da,payload:{B:null,mimeType:null,startTime:null,qd:NaN,uri:null},Sa:!1}})),E(n,new Promise((function(t){e.pb=function(){},e.nc=function(){t()},e.Va=function(){t()},e.onError=function(){t()},e.pc=function(){t()}})),2));case 2:return E(n,t.W.destroy(),3);case 3:if(t.b&&(t.b.release(),t.b=null),t.Ic=null,t.j=null,t.i=null,t.f=null,t.cc=null,!t.N){n.u(0);break}return E(n,t.N.destroy(),5);case 5:t.N=null,A(n)}}))},i.zb=function(e,t){if(t=void 0===t||t,this.g==Fo)return Promise.reject(ho());var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null};n.B=e,Wt()||(t=!1);var i=t?this.ta:this.Ea,r=ua(this.W,(function(){return{node:i,payload:n,Sa:!1}}));return r.pb=function(){},fo(r)},i.detach=function(){var e=this;if(this.g==Fo)return Promise.reject(ho());var t=ua(this.W,(function(){return{node:e.da,payload:{B:null,mimeType:null,startTime:null,qd:NaN,uri:null},Sa:!1}}));return t.pb=function(){},fo(t)},i.td=function(e){var t=this;if(e=void 0===e||e,this.g==Fo)return Promise.reject(ho());Wt()||(e=!1);var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null},i=ua(this.W,(function(i){var r=i.B&&e?t.ta:i.B?t.Ea:t.da;return n.B=i.B,{node:r,payload:n,Sa:!1}}));return i.pb=function(){},fo(i)},i.load=function(e,t,n){var i=this;if(this.g==Fo)return Promise.reject(ho());this.dispatchEvent(Na(To));var r={B:null,mimeType:null,startTime:null,qd:NaN,uri:null};r.uri=e,r.qd=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!Wt())return!0;var n=t.mimeType,i=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Zi(i)]),!!n&&""!=(t.B||Qt()).canPlayType(n)&&(!Wt()||!(n in Qi)&&!(Zi(i)in Ji)||$t()&&e.i.streaming.useNativeHlsOnSafari)}(this,r)?this.Ca:this.J,o=ua(this.W,(function(e){return null==e.B?null:(r.B=e.B,{node:a,payload:r,Sa:!0})}));return this.f=new La,o.pb=function(){},new Promise((function(e,t){o.pc=function(){return t(new le(2,7,7002))},o.nc=function(){e(),i.dispatchEvent(Na(ko))},o.Va=function(){return t(ho())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=_a(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(_e("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay);var n=Ca(this.i,e,Ga(this));return ja(this),n},i.getConfiguration=function(){var e=Ga(this);return Ca(e,this.i,Ga(this)),e},i.Ve=function(){for(var e in this.i)delete this.i[e];Ca(this.i,Ga(this),Ga(this)),ja(this)},i.pe=function(){return this.g},i.te=function(){return this.a},i.Fb=function(){return this.N},i.Qc=function(){return this.xb},i.Dd=function(){return function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];$.has(e)||($.add(e),Y.apply(z,c(n)))}("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!"),this.I},i.S=function(){return this.o?this.o.presentationTimeline.S():!(!this.a||!this.a.src)&&1/0==this.a.duration},i.Ua=function(){return!!this.o&&this.o.presentationTimeline.Ua()},i.Ge=function(){if(this.o){var e=this.o.variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},i.jd=function(){if(this.o){var e=this.o.presentationTimeline;return{start:e.kb(),end:e.Fa()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.keySystem=function(){return ln(this.drmInfo())},i.drmInfo=function(){return this.h?this.h.c:null},i.Eb=function(){return this.h?this.h.Eb():1/0},i.Sc=function(){return!!this.D&&this.D.a==Yi},i.ve=function(){return this.a?this.A?this.A.b:1:0},i.ff=function(e){0==e?Y("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.A.set(e),this.g==Ho&&(this.j.playbackRateChanged(e),qr(this.c,1<Math.abs(e))))},i.ee=function(){this.g==jo&&this.A.set(1),this.g==Ho&&(this.A.set(1),this.j.playbackRateChanged(1),qr(this.c,!1))},i.Rc=function(){if(this.o){for(var e=this.c?this.c.b:null,t=[],n=u(this.o.variants),i=n.next();!i.done;i=n.next())if(Pi(i=i.value)){var r=Ci(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return xi(e)})):[]},i.lc=function(){if(this.o){for(var e=this.c?this.c.c:null,t=[],n=u(this.o.textStreams),i=n.next();!i.done;i=n.next()){var r=Ri(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Ka(this).map((function(e){var t=Di(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t})):[]},i.Sd=function(e){if(this.o&&this.c){var t=this.o.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.c.c&&(Oa(this.f.a,t,!1),Xr(this.c,t),Ja(this),this.ca=t.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(var n=(t=u(t=Ka(this))).next();!n.done;n=t.next())Ii(n=n.value)==e.id?n.mode=this.T?"showing":"hidden":n.mode="disabled";Ja(this)}},i.We=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.o&&this.c){this.i.abr.enabled&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.o.variants.find((function(t){return t.id==e.id}));i&&Pi(i)&&i!=this.c.b&&(Pa(this.f.a,i,!1),$r(this.c,i,t,n),Qa(this),this.yb=new Ki(i),qa(this))}else if(this.a&&this.a.audioTracks){for(n=(t=u(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())Ii(n=n.value)==e.id&&(n.enabled=!0);Qa(this)}},i.le=function(){return co(this.Rc())},i.De=function(){return co(this.lc())},i.ke=function(){return Array.from(uo(this.Rc()))},i.Ce=function(){return Array.from(uo(this.lc()))},i.kd=function(e,t){if(this.o&&this.v)this.yb=new Gi(e,t||"",0,""),$a(this);else if(this.a&&this.a.audioTracks){for(var n=Array.from(this.a.audioTracks),i=bi(e),r=null,a=null,o=(n=u(n)).next();!o.done;o=n.next()){var s=xi(o=o.value);bi(s.language)==i&&(r=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o))}a?(a.enabled=!0,Qa(this)):r&&(r.enabled=!0,Qa(this))}},i.ld=function(e,t){if(this.o&&this.v){this.ca=e,this.Zb=t||"";var n=Li(this.o.textStreams,this.ca,this.Zb)[0]||null;n&&n!=this.c.c&&(Oa(this.f.a,n,!1),this.i.streaming.alwaysStreamText||this.Tc())&&(Xr(this.c,n),Ja(this))}else{var i=bi(e);(n=this.lc().find((function(e){return bi(e.language)==i&&(!t||e.roles.includes(t))})))&&this.Sd(n)}},i.Xe=function(e){if(this.o&&this.v){for(var t=null,n=u(this.o.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.yb=new Gi(t.language,"",0,e),$a(this))}},i.Tc=function(){var e=this.T;return this.H?this.H.h.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Ka(this).some((function(e){return"showing"==e.mode})):e},i.cf=function(e){if(e=!!e,this.T!=e){if(this.T=e,this.g==Ho)this.H.h.setTextVisibility(e),this.i.streaming.alwaysStreamText||(e?this.c.c||0<(e=Li(this.o.textStreams,this.ca,this.Zb)).length&&(Xr(this.c,e[0]),Ja(this)):function(e){var t=e.a.get("text");t&&(aa(t),oa(t).catch((function(){})),e.a.delete("text")),e.c=null}(this.c));else if(this.a&&this.a.src&&this.a.textTracks)for(var t=Ka(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");eo(this)}},i.xe=function(){if(!this.S())return null;var e=this.W.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.o?new Date(1e3*(this.o.presentationTimeline.f+t)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Ed=function(){if(!this.S())return null;if(this.o)return new Date(1e3*this.o.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},i.ic=function(){if(this.g==Ho)return this.H.ic();var e={total:[],audio:[],video:[],text:[]};return this.g==jo&&(e.total=Dn(this.a.buffered)),e},i.getStats=function(){if(this.g!=Ho&&this.g!=jo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Ya(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.f,n=Number(e.totalVideoFrames);t.J=Number(e.droppedVideoFrames),t.I=n,this.f.H=Number(e.corruptedVideoFrames)}e=this.h&&(e=this.h).H?e.H:NaN,this.f.D=e,this.g==Ho&&((e=this.c.b)&&(this.f.h=(this.A?this.A.b:1)*e.bandwidth),e&&e.video&&(t=this.f,n=e.video.height||NaN,t.M=e.video.width||NaN,t.j=n),this.S()&&(e=this.Ed().valueOf()+1e3*this.jd().end,this.f.m=(Date.now()-e)/1e3),this.o&&this.o.presentationTimeline&&(this.f.A=this.o.presentationTimeline.a),e=this.j.getBandwidthEstimate(),this.f.g=e);var i=this.f;e=i.M,t=i.j,n=i.h;for(var r=i.I,a=i.J,o=i.H,s=i.g,l=i.f,c=i.v,d=i.c,h=xa(i.b,"playing"),p=xa(i.b,"paused"),f=xa(i.b,"buffering"),g=i.D,v=i.m,y=i.A,m=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.b),b=[],E=(i=u(i.a.a)).next();!E.done;E=i.next())E=E.value,b.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:d,playTime:h,pauseTime:p,bufferingTime:f,licenseTime:g,liveLatency:v,maxSegmentDuration:y,stateHistory:m,switchHistory:b}},i.addTextTrack=function(e,t,n,i,r,a){if(this.g==jo)throw Error("State error!");if(this.g!=Ho)throw Error("State error!");var o=this.o.presentationTimeline.getDuration();if(1/0==o)throw new le(1,4,4033);return e={id:this.vd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Tr(0,o,[e]),mimeType:i,codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},this.o.textStreams.push(e),Za(this),Ri(e)},i.nd=function(e,t){this.xc.width=e,this.xc.height=t},i.hd=function(){if(this.g==Ho){var e=this.c;if(e.F.a)e=!1;else if(e.g)e=!1;else{for(var t=u(e.a.values()),n=t.next();!n.done;n=t.next())(n=n.value).Ib&&(n.Ib=!1,ra(e,n,.1));e=!0}}else e=!1;return e},i.qe=function(){return Y("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.o},i.re=function(){return this.ac},i.Vd=function(e){this.cc=e},i.gb=function(e){if(function(e,t,n){n.variants=n.variants.filter((function(n){if(e&&e.M&&!mn(e,n))return!1;var i=n.audio;return n=n.video,!(i&&!ti(i)||n&&!ti(n)||i&&t&&t.audio&&!Si(i,t.audio)||n&&t&&t.video&&!Si(n,t.video))})),n.textStreams=n.textStreams.filter((function(e){return Zn(Kt(e.mimeType,e.codecs))}))}(this.h,this.c?this.c.b:null,e),!e.variants.some(Pi))throw new le(2,4,4032);for(var t=this.i.restrictions,n=this.xc,i=!1,r=u(e.variants),a=r.next();!a.done;a=r.next()){var o=(a=a.value).allowedByApplication;a.allowedByApplication=wi(a,t,n),o!=a.allowedByApplication&&(i=!0)}if(i&&this.c&&Za(this),t=this.h?this.h.c:null)for(i=(n=u(e.variants)).next();!i.done;i=n.next())for(r=(i=u(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]))).next();!r.done;r=i.next())if((r=r.value).keySystem==t.keySystem)for(a=(r=u(r.initData||[])).next();!a.done;a=r.next())a=a.value,sn(this.h,a.initDataType,a.initData);so(this,e)},V("shaka.Player",Ma),Ma.prototype.setVideoContainer=Ma.prototype.Vd,Ma.prototype.getManifestParserFactory=Ma.prototype.re,Ma.prototype.getManifest=Ma.prototype.qe,Ma.prototype.retryStreaming=Ma.prototype.hd,Ma.prototype.setMaxHardwareResolution=Ma.prototype.nd,Ma.prototype.addTextTrack=Ma.prototype.addTextTrack,Ma.prototype.getStats=Ma.prototype.getStats,Ma.prototype.getBufferedInfo=Ma.prototype.ic,Ma.prototype.getPresentationStartTimeAsDate=Ma.prototype.Ed,Ma.prototype.getPlayheadTimeAsDate=Ma.prototype.xe,Ma.prototype.setTextTrackVisibility=Ma.prototype.cf,Ma.prototype.isTextTrackVisible=Ma.prototype.Tc,Ma.prototype.selectVariantsByLabel=Ma.prototype.Xe,Ma.prototype.selectTextLanguage=Ma.prototype.ld,Ma.prototype.selectAudioLanguage=Ma.prototype.kd,Ma.prototype.getTextLanguages=Ma.prototype.Ce,Ma.prototype.getAudioLanguages=Ma.prototype.ke,Ma.prototype.getTextLanguagesAndRoles=Ma.prototype.De,Ma.prototype.getAudioLanguagesAndRoles=Ma.prototype.le,Ma.prototype.selectVariantTrack=Ma.prototype.We,Ma.prototype.selectTextTrack=Ma.prototype.Sd,Ma.prototype.getTextTracks=Ma.prototype.lc,Ma.prototype.getVariantTracks=Ma.prototype.Rc,Ma.prototype.cancelTrickPlay=Ma.prototype.ee,Ma.prototype.trickPlay=Ma.prototype.ff,Ma.prototype.getPlaybackRate=Ma.prototype.ve,Ma.prototype.isBuffering=Ma.prototype.Sc,Ma.prototype.getExpiration=Ma.prototype.Eb,Ma.prototype.drmInfo=Ma.prototype.drmInfo,Ma.prototype.keySystem=Ma.prototype.keySystem,Ma.prototype.seekRange=Ma.prototype.jd,Ma.prototype.isAudioOnly=Ma.prototype.Ge,Ma.prototype.isInProgress=Ma.prototype.Ua,Ma.prototype.isLive=Ma.prototype.S,Ma.prototype.getAdManager=Ma.prototype.Dd,Ma.prototype.getAssetUri=Ma.prototype.Qc,Ma.prototype.getNetworkingEngine=Ma.prototype.Fb,Ma.prototype.getMediaElement=Ma.prototype.te,Ma.prototype.getLoadMode=Ma.prototype.pe,Ma.prototype.resetConfiguration=Ma.prototype.Ve,Ma.prototype.getConfiguration=Ma.prototype.getConfiguration,Ma.prototype.configure=Ma.prototype.configure,Ma.prototype.load=Ma.prototype.load,Ma.prototype.unload=Ma.prototype.td,Ma.prototype.detach=Ma.prototype.detach,Ma.prototype.attach=Ma.prototype.zb,Ma.probeSupport=function(){var e,t,n,i,r;return O((function(a){if(1==a.a)return E(a,function(){var e,t,n,i,r,a;return O((function(o){return 1==o.a?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return O((function(o){switch(o.a){case 1:return k(o,2),E(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.b,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),Zt("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),E(o,t.createMediaKeys(),5);case 5:_(o,0);break;case 2:w(o),i.set(e,null),A(o)}}))},a=e.map((function(e){return r(e)})),E(o,Promise.all(a),2)):o.return(Vt(i))}))}(),2);e=a.b;var o={};if(Wt()){for(var s in Qi)o[s]=!0;for(var l in Ji)o[l]=!0}s={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var c=(l=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!c.done;c=l.next())o[c=c.value]=Wt()?!!Qi[c]:Yt(c);for(var d in s)o[d]=Wt()?!!Ji[d]:Yt(s[d]);for(t=o,o={},s=(d=u('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!s.done;s=d.next())o[s=s.value]=Wt()?!!Zn(s)||MediaSource.isTypeSupported(s)||Je(s):Yt(s),o[l=s.split(";")[0]]=o[l]||o[s];for(r in n={manifest:t,media:o,drm:e},i=zo)n[r]=i[r]();return a.return(n)}))},Ma.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=Xt();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Wt()||Yt("application/x-mpegurl"))},Ma.setAdManagerFactory=function(e){Wo=e},Ma.registerSupportPlugin=function(e,t){zo[e]=t},Ma.prototype.destroy=Ma.prototype.destroy;var go="abrstatuschanged",vo="adaptation",yo="buffering",mo="drmsessionupdate",bo="emsg",Eo="error",Ao="expirationupdated",ko="loaded",To="loading",_o="manifestparsed",wo="metadata",So="onstatechange",Co="onstateidle",Ro="ratechange",Io="streaming",xo="textchanged",Do="texttrackvisibility",Po="timelineregionadded",Oo="timelineregionenter",Lo="timelineregionexit",Mo="trackschanged",No="unloading",Uo="variantchanged",Bo={nf:go,pf:vo,qf:yo,rf:mo,tf:bo,Error:Eo,uf:Ao,wf:"largegap",xf:ko,yf:To,zf:_o,Metadata:wo,Af:So,Bf:Co,Cf:Ro,Df:Io,Ef:xo,Ff:Do,Gf:Po,Hf:Oo,If:Lo,Jf:Mo,Kf:No,Lf:Uo},Fo=0,Vo=1,Ho=2,jo=3;Ma.LoadMode={DESTROYED:Fo,NOT_LOADED:Vo,MEDIA_SOURCE:Ho,SRC_EQUALS:jo},Ma.version="v3.0.7";var Ko=["3","0"];Ce=new function(e){this.a=e,this.c=we,this.b=Se}(new Te(Number(Ko[0]),Number(Ko[1])));var Go=["output-restricted","internal-error"],zo={},Wo=null;function Yo(){this.a=[],this.f=this.b=this.c=0}function qo(e,t){var n=this;this.c=e,this.a=t,this.f=!1,this.g=this.a.getVolume(),this.b=new Ot,this.b.l(this.a,google.ima.AdEvent.Type.PAUSED,(function(){n.f=!0})),this.b.l(this.a,google.ima.AdEvent.Type.RESUMED,(function(){n.f=!1}))}function $o(e,t,n,i){var r=this;this.h=e,this.a=t,this.m=NaN,this.f=i,this.j=null,this.b=new Ot,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.h,this.a)).initialize(),this.g=new google.ima.AdsLoader(e),this.g.getSettings().setPlayerType("shaka-player"),this.g.getSettings().setPlayerVersion("v3.0.7"),this.c=null,this.b.ha(this.g,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){!function(e,t){e.f(new dt("ads-loaded",{loadTime:Date.now()/1e3-e.m})),e.c=t.getAdsManager(e.a),e.f(new dt("ima-ad-manager-loaded",{imaAdsManager:e.c}));var n=e.c.getCuePoints();if(n.length){for(var i=[],r=(n=u(n)).next();!r.done;r=n.next())i.push(new ns(r.value));e.f(new dt("ad-cue-points-changed",{cuepoints:i}))}!function(e){e.b.l(e.c,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Xo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){Zo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.STARTED,(function(t){Zo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(t){e.f(new dt("ad-first-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.MIDPOINT,(function(t){e.f(new dt("ad-midpoint",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(t){e.f(new dt("ad-third-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.COMPLETE,(function(t){e.f(new dt("ad-complete",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){Qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){Qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPED,(function(t){e.f(new dt("ad-skipped",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(t){e.f(new dt("ad-volume-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_MUTED,(function(t){e.f(new dt("ad-muted",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.PAUSED,(function(t){e.j.f=!0,e.f(new dt("ad-paused",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.RESUMED,(function(t){e.j.f=!1,e.f(new dt("ad-resumed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(t){e.f(new dt("ad-skip-state-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CLICK,(function(){e.f(new dt("ad-clicked"))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_PROGRESS,(function(t){e.f(new dt("ad-progress",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BUFFERING,(function(t){e.f(new dt("ad-buffering",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.IMPRESSION,(function(t){e.f(new dt("ad-impression",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.DURATION_CHANGE,(function(t){e.f(new dt("ad-duration-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.USER_CLOSE,(function(t){e.f(new dt("ad-closed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOADED,(function(t){e.f(new dt("ad-loaded",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){e.f(new dt("all-ads-completed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(t){e.f(new dt("ad-linear-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_METADATA,(function(t){e.f(new dt("ad-metadata",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOG,(function(t){e.f(new dt("ad-recoverable-error",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BREAK_READY,(function(t){e.f(new dt("ad-break-ready",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.INTERACTION,(function(t){e.f(new dt("ad-interaction",{originalEvent:t}))}))}(e);try{e.c.init(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.b.l(e.a,"loadeddata",(function(){e.c.resize(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),e.c.start()}catch(t){Qo(e,null)}}(r,e)})),this.b.l(this.g,google.ima.AdEvent.Type.AD_ERROR,(function(e){Xo(r,e)})),this.a.onended=function(){r.g.contentComplete()}}function Xo(e,t){t.getError(),Qo(e,null),e.f(new dt("ad-cue-points-changed",{cuepoints:[]}))}function Zo(e,t){var n=t.getAd();e.j=new qo(n,e.c),e.f(new dt("ad-started",{ad:e.j,sdkAdObject:n,originalEvent:t})),e.h.setAttribute("ad-active","true"),e.a.pause()}function Qo(e,t){e.f(new dt("ad-stopped",{originalEvent:t})),e.h.removeAttribute("ad-active"),e.a.play()}function Jo(e,t){this.c=e,this.b=null,this.a=t}function es(e,t,n,i){var r=this;this.v=e,this.a=t,this.g=null,this.H=NaN,this.f=i,this.D=!1,this.A=this.h=this.j=null,this.m="",this.b=new Ot,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.c=new google.ima.dai.api.StreamManager(this.a,this.v,e),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.f(new dt("ads-loaded",{loadTime:Date.now()/1e3-e.H}));var n=t.getStreamData().url;e.g.resolve(n),e.g=null,e.D||e.b.l(e.a,"seeked",(function(){var t=e.a.currentTime;if(0!=t){e.c.streamTimeForContentTime(t);var n=e.c.previousCuePointForStreamTime(t);n&&!n.played&&(e.j=t,e.a.currentTime=n.start)}}))}(r,e)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.m.length?r.g.resolve(r.m):r.g.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.g=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.h=new Jo(e,r.a),r.A&&(r.h.b=r.A),r.f(new dt("ad-started",{ad:r.h})),r.v.setAttribute("ad-active","true")})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.v.removeAttribute("ad-active");var e=r.a.currentTime;r.j&&r.j>e&&(r.a.currentTime=r.j,r.j=null)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.A=e.getStreamData().adProgressData,r.h&&(r.h.b=r.A)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.f(new dt("ad-first-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.f(new dt("ad-midpoint"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.f(new dt("ad-third-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.f(new dt("ad-complete")),r.f(new dt("ad-stopped")),r.v.removeAttribute("ad-active"),r.h=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.f(new dt("ad-skipped")),r.f(new dt("ad-stopped"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push(new ns(n.start,n.end));r.f(new dt("ad-cue-points-changed",{cuepoints:e}))}))}function ts(){pt.call(this),this.a=this.b=null,this.f=new Yo,this.c=navigator.language}function ns(e,t){this.start=e,this.end=void 0===t?null:t}function is(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof dt){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=u(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=u(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=u(Dn(t))).next();!i.done;i=n.next()){var a=(i=i.value).end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function rs(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}(i=qo.prototype).getDuration=function(){return this.c.getDuration()},i.getRemainingTime=function(){return this.a.getRemainingTime()},i.isPaused=function(){return this.f},i.isSkippable=function(){return 0<=this.c.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.a.getAdSkippableState()},i.skip=function(){return this.a.skip()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.resume()},i.getVolume=function(){return this.a.getVolume()},i.setVolume=function(e){return this.a.setVolume(e)},i.isMuted=function(){return 0==this.a.getVolume()},i.resize=function(e,t){this.a.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.g=this.getVolume(),this.setVolume(0)):this.setVolume(this.g)},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.c=null},V("shaka.ads.ClientSideAd",qo),qo.prototype.release=qo.prototype.release,qo.prototype.getPositionInSequence=qo.prototype.getPositionInSequence,qo.prototype.getSequenceLength=qo.prototype.getSequenceLength,qo.prototype.setMuted=qo.prototype.setMuted,qo.prototype.resize=qo.prototype.resize,qo.prototype.isMuted=qo.prototype.isMuted,qo.prototype.setVolume=qo.prototype.setVolume,qo.prototype.getVolume=qo.prototype.getVolume,qo.prototype.play=qo.prototype.play,qo.prototype.pause=qo.prototype.pause,qo.prototype.skip=qo.prototype.skip,qo.prototype.canSkipNow=qo.prototype.canSkipNow,qo.prototype.getTimeUntilSkippable=qo.prototype.getTimeUntilSkippable,qo.prototype.isSkippable=qo.prototype.isSkippable,qo.prototype.isPaused=qo.prototype.isPaused,qo.prototype.getRemainingTime=qo.prototype.getRemainingTime,qo.prototype.getDuration=qo.prototype.getDuration,$o.prototype.stop=function(){this.c&&this.c.stop(),this.h&&ga(this.h)},(i=Jo.prototype).getDuration=function(){return this.b?this.b.duration:-1},i.getRemainingTime=function(){return this.b?this.b.duration-this.b.currentTime:-1},i.isPaused=function(){return this.a.paused},i.isSkippable=function(){return this.c.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.a.currentTime+=this.getRemainingTime()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.play()},i.getVolume=function(){return this.a.volume},i.setVolume=function(e){this.a.volume=e},i.isMuted=function(){return this.a.muted},i.resize=function(){},i.setMuted=function(e){this.a.muted=e},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.b=this.c=null},V("shaka.ads.ServerSideAd",Jo),Jo.prototype.release=Jo.prototype.release,Jo.prototype.getPositionInSequence=Jo.prototype.getPositionInSequence,Jo.prototype.getSequenceLength=Jo.prototype.getSequenceLength,Jo.prototype.setMuted=Jo.prototype.setMuted,Jo.prototype.resize=Jo.prototype.resize,Jo.prototype.isMuted=Jo.prototype.isMuted,Jo.prototype.setVolume=Jo.prototype.setVolume,Jo.prototype.getVolume=Jo.prototype.getVolume,Jo.prototype.play=Jo.prototype.play,Jo.prototype.pause=Jo.prototype.pause,Jo.prototype.skip=Jo.prototype.skip,Jo.prototype.canSkipNow=Jo.prototype.canSkipNow,Jo.prototype.getTimeUntilSkippable=Jo.prototype.getTimeUntilSkippable,Jo.prototype.isSkippable=Jo.prototype.isSkippable,Jo.prototype.isPaused=Jo.prototype.isPaused,Jo.prototype.getRemainingTime=Jo.prototype.getRemainingTime,Jo.prototype.getDuration=Jo.prototype.getDuration,es.prototype.stop=function(){this.c.reset(),this.m="",this.j=null},es.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.c.onTimedMetadata(t)}},v(ts,pt),(i=ts.prototype).setLocale=function(e){this.c=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new le(2,10,1e4);this.b=new $o(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.onAssetUnload=function(){this.b&&this.b.stop(),this.dispatchEvent(new dt("ad-stopped")),this.f=new Yo},i.requestClientSideAds=function(e){if(!this.b)throw new le(1,10,10001);var t=this.b;t.m=Date.now()/1e3,t.g.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new le(2,10,10002);this.a=new es(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.a)throw new le(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="Shaka Player",e.adTagParameters.mpv="v3.0.7";var i=t;return(n=this.a).g?n=Promise.reject(new le(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.D=!0),n.g=new Me,n.c.requestStream(e),n.m=i||"",n.H=Date.now()/1e3,n=n.g),n},i.replaceServerSideAdTagParameters=function(e){if(!this.a)throw new le(1,10,10003);(e.mpt||e.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.0.7",this.a.c.replaceAdTagParameters(e)},i.getStats=function(){var e=this.f;return{loadTimes:e.a,started:e.c,playedCompletely:e.b,skipped:e.f}},i.onDashTimedMetadata=function(e){if(this.a&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.a.c.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.a&&this.a.c.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.a&&this.a.onCueMetadataChange(e)},V("shaka.ads.AdManager",ts),ts.prototype.onCueMetadataChange=ts.prototype.onCueMetadataChange,ts.prototype.onHlsTimedMetadata=ts.prototype.onHlsTimedMetadata,ts.prototype.onDashTimedMetadata=ts.prototype.onDashTimedMetadata,ts.prototype.getStats=ts.prototype.getStats,ts.prototype.replaceServerSideAdTagParameters=ts.prototype.replaceServerSideAdTagParameters,ts.prototype.requestServerSideStream=ts.prototype.requestServerSideStream,ts.prototype.initServerSide=ts.prototype.initServerSide,ts.prototype.requestClientSideAds=ts.prototype.requestClientSideAds,ts.prototype.onAssetUnload=ts.prototype.onAssetUnload,ts.prototype.initClientSide=ts.prototype.initClientSide,ts.prototype.setLocale=ts.prototype.setLocale,ts.ADS_LOADED="ads-loaded",ts.AD_STARTED="ad-started",ts.AD_FIRST_QUARTILE="ad-first-quartile",ts.AD_MIDPOINT="ad-midpoint",ts.AD_THIRD_QUARTILE="ad-third-quartile",ts.AD_COMPLETE="ad-complete",ts.AD_STOPPED="ad-stopped",ts.AD_SKIPPED="ad-skipped",ts.AD_VOLUME_CHANGED="ad-volume-changed",ts.AD_MUTED="ad-muted",ts.AD_PAUSED="ad-paused",ts.AD_RESUMED="ad-resumed",ts.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ts.CUEPOINTS_CHANGED="ad-cue-points-changed",ts.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ts.AD_CLICKED="ad-clicked",ts.AD_PROGRESS="ad-progress",ts.AD_BUFFERING="ad-buffering",ts.AD_IMPRESSION="ad-impression",ts.AD_DURATION_CHANGED="ad-duration-changed",ts.AD_CLOSED="ad-closed",ts.AD_LOADED="ad-loaded",ts.ALL_ADS_COMPLETED="all-ads-completed",ts.AD_LINEAR_CHANGED="ad-linear-changed",ts.AD_METADATA="ad-metadata",ts.AD_RECOVERABLE_ERROR="ad-recoverable-error",ts.AD_BREAK_READY="ad-break-ready",ts.AD_INTERACTION="ad-interaction",Wo=function(){return new ts};var as="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),os="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ss=["loop","playbackRate"],ls=["pause","play"],us={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},cs={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ds=[["getConfiguration","configure"]],hs=[["isTextTrackVisible","setTextTrackVisibility"]],ps="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),fs=["attach","detach","load","unload"];function gs(e,t,n,i,r,a){var o=this;this.T=e,this.f=new nt(t),this.W=n,this.m=!1,this.D=i,this.M=r,this.I=a,this.b=this.h=!1,this.J="",this.j=null,this.v=function(){return Es(o)},this.A=function(e,t){var n=rs(t);switch(n.type){case"event":var i=n.targetName;n=new dt((n=n.event).type,n),o.D(i,n);break;case"update":for(var r in i=n.update)for(var a in n=o.a[r]||{},i[r])n[a]=i[r][a];o.m&&(o.W(),o.m=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=o.c[r],delete o.c[r],a)if(n){for(i in r=new le(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},this.a={video:{},player:{}},this.H=0,this.c={},this.g=null,Ss.add(this)}function vs(e,t,n){ws=n,n.addUpdateListener(e.v),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.A),Es(e),ks(e,{type:"init",initState:t,appData:e.j}),e.g.resolve()}function ys(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.g.reject(new le(2,8,n,t))}function ms(e,t){var n=e.I();e.g=new Me,e.m=!0,vs(e,n,t)}function bs(e){var t=ws;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.A)}function Es(e){var t=!!ws&&"connected"==ws.status;if(e.b&&!t){for(var n in e.M(),e.a)e.a[n]={};As(e)}e.b=t,e.J=t?ws.receiver.friendlyName:"",e.f.Qb()}function As(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new le(1,7,7e3))}}function ks(e,t){var n=is(t),i=ws;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),q)}catch(t){throw i=new dt("error",{detail:n=new le(2,8,8005,t)}),e.D("player",i),e.hb(),n}}(i=gs.prototype).destroy=function(){return Ss.delete(this),As(this),ws&&bs(this),this.f&&(this.f.stop(),this.f=null),this.M=this.D=null,this.b=this.h=!1,this.A=this.v=this.g=this.c=this.a=this.j=null,Promise.resolve()},i.fa=function(){return this.b},i.fd=function(){return this.J},i.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.T.length){this.h=!0,this.f.Qb();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(Ss),n=t.next();!n.done;n=t.next())ms(n.value,e)}),(function(e){for(var t=u(Ss),n=t.next();!n.done;n=t.next())n=n.value,_s="available"==e,n.f.Qb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),_s&&this.f.R(Ts),(t=ws)&&t.status!=chrome.cast.SessionStatus.STOPPED?ms(this,t):ws=null}},i.md=function(e){this.j=e,this.b&&ks(this,{type:"appData",appData:this.j})},i.cast=function(e){var t=this;return O((function(n){if(!t.h)throw new le(1,8,8e3);if(!_s)throw new le(1,8,8001);if(t.b)throw new le(1,8,8002);return t.g=new Me,chrome.cast.requestSession((function(n){return vs(t,e,n)}),(function(e){return ys(t,e)})),E(n,t.g,0)}))},i.hb=function(){if(this.b){if(As(this),ws){bs(this);try{ws.stop((function(){}),(function(){}))}catch(e){}ws=null}Es(this)}},i.get=function(e,t){var n=this;if("video"==e){if(ls.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Pd.apply(n,[e,t].concat(c(r)))}}else if("player"==e){if(cs[t]&&!this.get("player","isLive")())return function(){};if(ps.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Pd.apply(n,[e,t].concat(c(r)))};if(fs.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Se.apply(n,[e,t].concat(c(r)))};if(us[t])return function(){return n.a[e][t]}}return this.a[e][t]},i.set=function(e,t,n){this.a[e][t]=n,ks(this,{type:"set",targetName:e,property:t,value:n})},i.Pd=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];ks(this,{type:"call",targetName:e,methodName:t,args:i})},i.Se=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Me;var a=this.H.toString();this.H++,this.c[a]=r;try{ks(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r};var Ts=.02,_s=!1,ws=null,Ss=new Set;function Cs(e,t,n){pt.call(this);var i=this;this.f=e,this.c=t,this.b=this.j=this.g=this.m=this.h=null,this.A=n,this.v=new Map,this.a=new gs(n,(function(){return xs(i)}),(function(){return Ds(i)}),(function(e,t){return Ls(i,e,t)}),(function(){return Ps(i)}),(function(){return Is(i)})),function(e){e.a.init(),e.b=new Ot;for(var t=u(as),n=t.next();!n.done;n=t.next())e.b.l(e.f,n.value,(function(t){e.a.fa()||(t=new dt(t.type,t),e.g.dispatchEvent(t))}));for(var i in Bo)e.b.l(e.c,Bo[i],(function(t){e.a.fa()||e.j.dispatchEvent(t)}));for(var r in e.h={},t={},e.f)t.tb=r,Object.defineProperty(e.h,t.tb,{configurable:!1,enumerable:!0,get:function(t){return function(){return Os(e,t.tb)}}(t),set:function(t){return function(n){var i=t.tb;e.a.fa()?e.a.set("video",i,n):e.f[i]=n}}(t)}),t={tb:t.tb};e.m={},Rs(e,(function(t){Object.defineProperty(e.m,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.v.has(t)&&(t=e.v.get(t)),"addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.h};if("getSharedConfiguration"==t)return e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.c.Fb()};if("getAdManager"==t)return function(){return e.c.Dd()};if("setVideoContainer"==t)return function(t){return e.c.Vd(t)};if(e.a.fa()){if("getManifest"==t||"drmInfo"==t)return function(){return Y(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Y(t+"() does not work while casting!"),Promise.resolve()}}return e.a.fa()&&0==Object.keys(e.a.a.video).length&&us[t]||!e.a.fa()?e.c[t].bind(e.c):e.a.get("player",t)}(e,t)}})})),function(e){var t=new Map;Rs(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.v.set(n,r):e.v.set(r,n)}else t.set(i,n)}))}(e),e.g=new pt,e.g.$b=e.h,e.j=new pt,e.j.$b=e.m}(this)}function Rs(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.c,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=u(Object.getOwnPropertyNames(a)),l=s.next();!l.done;l=s.next())n(l=l.value)&&(r.add(l),t(l,i[l]));a=Object.getPrototypeOf(a)}}function Is(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.c.Qc(),startTime:null};e.f.pause();for(var n=u(ss),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.f[i];for(e.f.ended||(t.startTime=e.f.currentTime),i=(n=u(ds)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.c[r[0]](),t.player[i]=r}for(i=(n=u(hs)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.c[r[0]](),t.playerAfterLoad[i]=r;return t}function xs(e){var t=new dt("caststatuschanged");e.dispatchEvent(t)}function Ds(e){var t=new dt(e.h.paused?"pause":"play");e.g.dispatchEvent(t)}function Ps(e){for(var t=u(ds),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}var r=e.a.get("player","getAssetUri")();n=e.a.get("video","ended"),t=Promise.resolve();var a=e.f.autoplay;i=null,n||(i=e.a.get("video","currentTime")),r&&(e.f.autoplay=!1,t=e.c.load(r,i));var o={};for(i=(n=u(ss)).next();!i.done;i=n.next())i=i.value,o[i]=e.a.get("video",i);t.then((function(){if(e.f){for(var t=u(ss),n=t.next();!n.done;n=t.next())n=n.value,e.f[n]=o[n];for(n=(t=u(hs)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}e.f.autoplay=a,r&&e.f.play()}}),(function(t){t=new dt(Eo,{detail:t}),e.c.dispatchEvent(t)}))}function Os(e,t){if("addEventListener"==t)return function(t,n,i){return e.g.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.g.removeEventListener(t,n,i)};if(e.a.fa()&&0==Object.keys(e.a.a.video).length){var n=e.f[t];if("function"!=typeof n)return n}return e.a.fa()?e.a.get("video",t):("function"==typeof(n=e.f[t])&&(n=n.bind(e.f)),n)}function Ls(e,t,n){e.a.fa()&&("video"==t?e.g.dispatchEvent(n):"player"==t&&e.j.dispatchEvent(n))}function Ms(e,t,n,i){pt.call(this);var r=this;this.a=e,this.c=t,this.b=new Ot,this.J={video:e,player:t},this.D=n||function(){},this.M=i||function(e){return e},this.f=null,this.H=!1,this.j=!0,this.h=0,this.A=!1,this.v=!0,this.m=this.g=null,this.I=new nt((function(){Fs(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Ns(e)},t.onSenderDisconnected=function(){return Ns(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Ks(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.g),Ks(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.g)},e.m=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.m.onMessage=function(t){return function(e,t){var n=rs(t.data);switch(n.type){case"PLAY":e.a.play(),Gs(e);break;case"PAUSE":e.a.pause(),Gs(e);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(e.a.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(e.a.play(),Gs(e)):r&&"PLAYBACK_PAUSE"==r&&(e.a.pause(),Gs(e));break;case"STOP":e.c.td().then((function(){e.c&&Gs(e)}));break;case"GET_STATUS":Hs(e,Number(n.requestId));break;case"VOLUME":i=(r=n.volume).level,r=r.muted;var a=e.a.volume,o=e.a.muted;null!=i&&(e.a.volume=Number(i)),null!=r&&(e.a.muted=r),a==e.a.volume&&o==e.a.muted||Gs(e);break;case"LOAD":e.h=0,e.A=!1,e.v=!1,i=n.media,r=n.currentTime,a=e.M(i.contentId),o=n.autoplay||!0,e.D(i.customData),o&&(e.a.autoplay=!0),e.c.load(a,r).then((function(){e.c&&Hs(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Ks(e,{requestId:Number(n.requestId),type:i},e.m)}));break;default:Ks(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.m)}}(e,t)},e.g=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.g.onMessage=function(t){return function(e,t){var n=rs(t.data);switch(n.type){case"init":e.h=0,e.A=!1,e.v=!0,function(e,t,n){var i,r,a,o,s,l,u,c,d;O((function(h){switch(h.a){case 1:for(i in t.player)r=t.player[i],e.c[i](r);return e.D(n),a=e.a.autoplay,t.manifest?(e.a.autoplay=!1,k(h,5),E(h,e.c.load(t.manifest,t.startTime),7)):E(h,Promise.resolve(),3);case 7:_(h,3);break;case 5:return o=w(h),s=new dt(Eo,{detail:o}),e.c.dispatchEvent(s),h.return();case 3:if(!e.c)return h.return();for(l in t.video)u=t.video[l],e.a[l]=u;for(c in t.playerAfterLoad)d=t.playerAfterLoad[c],e.c[c](d);e.a.autoplay=a,t.manifest&&(e.a.play(),Gs(e)),A(h)}}))}(e,n.initState,n.appData),Fs(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){var a=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){a.setSystemVolumeLevel(n);break}if("muted"==r){a.setSystemVolumeMuted(n);break}}e.J[i][r]=n;break;case"call":(i=e.J[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.h=0,e.A=!1);var o=n.id,s=t.senderId;n=(a=e.J[i])[r].apply(a,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.v=!0}))),n.then((function(){return js(e,s,o,null)}),(function(t){return js(e,s,o,t)}))}}(e,t)},t.start();for(var n=(t=u(as)).next();!n.done;n=t.next())e.b.l(e.a,n.value,(function(t){return Bs(e,"video",t)}));for(var i in Bo)e.b.l(e.c,Bo[i],(function(t){return Bs(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.c.nd(3840,2160):e.c.nd(1920,1080),e.b.l(e.a,"loadeddata",(function(){e.A=!0})),e.b.l(e.c,"loading",(function(){e.j=!1,Us(e)})),e.b.l(e.a,"playing",(function(){e.j=!1,Us(e)})),e.b.l(e.a,"pause",(function(){Us(e)})),e.b.l(e.c,"unloading",(function(){e.j=!0,Us(e)})),e.b.l(e.a,"ended",(function(){new nt((function(){e.a&&e.a.ended&&(e.j=!0,Us(e))})).R(Ws)}))}(this)}function Ns(e){e.h=0,e.v=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Us(e)}function Us(e){var t;O((function(n){return 1==n.a?E(n,Promise.resolve(),2):e.c?(t=new dt("caststatuschanged"),e.dispatchEvent(t),Vs(e)||Gs(e),void A(n)):n.return()}))}function Bs(e,t,n){e.c&&(Fs(e),Ks(e,{type:"event",targetName:t,event:n},e.g))}function Fs(e){e.I.R(zs);for(var t={video:{},player:{}},n=u(os),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.a[i];if(e.c.S())for(var r in cs)0==e.h%cs[r]&&(t.player[r]=e.c[r]());for(var a in us)0==e.h%us[a]&&(t.player[a]=e.c[a]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.A&&(e.h+=1),Ks(e,{type:"update",update:t},e.g),Vs(e)}function Vs(e){return!(!e.v||!e.a.duration&&!e.c.S()||(Hs(e),e.v=!1,0))}function Hs(e,t){var n={contentId:e.c.Qc(),streamType:e.c.S()?"LIVE":"BUFFERED",contentType:""};e.c.S()||(n.duration=e.a.duration),e.f&&(n.metadata=e.f),Gs(e,void 0===t?0:t,n)}function js(e,t,n,i){e.c&&Ks(e,{type:"asyncComplete",id:n,error:i},e.g,t)}function Ks(e,t,n,i){e.H&&(e=is(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Gs(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.j?Ys:e.c.Sc()?$s:e.a.paused?Xs:qs,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),Ks(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.m)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=u(Ss)).next();!t.done;t=e.next())t.value.init()},v(Cs,pt),(i=Cs.prototype).destroy=function(e){return e&&this.a.hb(),this.b&&(this.b.release(),this.b=null),e=[],this.c&&(e.push(this.c.destroy()),this.c=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.m=this.h=this.f=null,Promise.all(e)},i.Ee=function(){return this.h},i.we=function(){return this.m},i.de=function(){return this.a.h&&_s},i.fa=function(){return this.a.fa()},i.fd=function(){return this.a.fd()},i.cast=function(){var e,t=this;return O((function(n){return 1==n.a?(e=Is(t),E(n,t.a.cast(e),2)):t.c?E(n,t.c.td(),0):n.return()}))},i.md=function(e){this.a.md(e)},i.df=function(){!function(e){if(e.b){var t=e.I();chrome.cast.requestSession((function(n){return vs(e,t,n)}),(function(t){return ys(e,t)}))}}(this.a)},i.hb=function(){this.a.hb()},i.fe=function(e){var t=this;return O((function(n){if(1==n.a)return e==t.A?n.return():(t.A=e,t.a.hb(),E(n,t.a.destroy(),2));t.a=null,t.a=new gs(e,(function(){return xs(t)}),(function(){return Ds(t)}),(function(e,n){return Ls(t,e,n)}),(function(){return Ps(t)}),(function(){return Is(t)})),t.a.init(),A(n)}))},V("shaka.cast.CastProxy",Cs),Cs.prototype.changeReceiverId=Cs.prototype.fe,Cs.prototype.forceDisconnect=Cs.prototype.hb,Cs.prototype.suggestDisconnect=Cs.prototype.df,Cs.prototype.setAppData=Cs.prototype.md,Cs.prototype.cast=Cs.prototype.cast,Cs.prototype.receiverName=Cs.prototype.fd,Cs.prototype.isCasting=Cs.prototype.fa,Cs.prototype.canCast=Cs.prototype.de,Cs.prototype.getPlayer=Cs.prototype.we,Cs.prototype.getVideo=Cs.prototype.Ee,Cs.prototype.destroy=Cs.prototype.destroy,v(Ms,pt),(i=Ms.prototype).isConnected=function(){return this.H},i.He=function(){return this.j},i.$e=function(e){this.f=e},i.ie=function(){this.f=null},i.af=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.title=e},i.Ze=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.images=[{url:e}]},i.Ye=function(e){this.f||(this.f={}),this.f.artist=e,this.f.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return O((function(n){if(1==n.a)return t.b&&(t.b.release(),t.b=null),e=[],t.c&&(e.push(t.c.destroy()),t.c=null),t.I&&(t.I.stop(),t.I=null),t.a=null,t.J=null,t.D=null,t.H=!1,t.j=!0,t.g=null,t.m=null,E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),A(n)}))},V("shaka.cast.CastReceiver",Ms),Ms.prototype.destroy=Ms.prototype.destroy,Ms.prototype.setContentArtist=Ms.prototype.Ye,Ms.prototype.setContentImage=Ms.prototype.Ze,Ms.prototype.setContentTitle=Ms.prototype.af,Ms.prototype.clearContentMetadata=Ms.prototype.ie,Ms.prototype.setContentMetadata=Ms.prototype.$e,Ms.prototype.isIdle=Ms.prototype.He,Ms.prototype.isConnected=Ms.prototype.isConnected;var zs=.5,Ws=5,Ys="IDLE",qs="PLAYING",$s="BUFFERING",Xs="PAUSED";function Zs(e){var t=this;this.a=[],this.b=[],this.data=[],(new Br).box("moov",Fr).ea("pssh",(function(e){if(!(1<e.version)){var n=ae(e.reader.P,-12,e.size);if(t.data.push(n),t.a.push(Xe(e.reader.Wa(16))),0<e.version){n=e.reader.K();for(var i=(n=u(J(n))).next();!i.done;i=n.next())i=Xe(e.reader.Wa(16)),t.b.push(i)}}})).parse(e)}function Qs(e,t){var n=el(e,t);return 1!=n.length?null:n[0]}function Js(e,t,n){return 1!=(e=tl(e,t,n)).length?null:e[0]}function el(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function tl(e,t,n){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))}function nl(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function il(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function rl(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function al(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function ol(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function sl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ll(e){return 0==(e=Number(e))%1?e:null}function ul(e){return 0==(e=Number(e))%1&&0<e?e:null}function cl(e){return 0==(e=Number(e))%1&&0<=e?e:null}function dl(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function hl(e,t){var n=new DOMParser,i=null,r=null;try{r=n.parseFromString(e,"text/xml")}catch(e){}return r&&r.documentElement.tagName==t&&(i=r.documentElement),i&&0<i.getElementsByTagName("parsererror").length?null:i}function pl(e,t){try{return hl(Be(e),t)}catch(e){return null}}function fl(e,t){var n=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=gl(n.value))&&t.push(n);return t}(e),i=null,r=[],a=[],o=new Set(n.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new le(2,4,4010);if(t||(a=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Rd||(i=e.init||i,!1)}))).length&&0==(r=function(e,t){for(var n=[],i=u(t),r=i.next();!r.done;r=i.next()){r=r.value;var a=vl.get(r.Rd);if(a){var o;if(o=Js(r.node,"urn:microsoft:playready","pro")){o=qe(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,c=s.length+16+l,d=new Uint8Array(c),h=oe(d),p=0;h.setUint32(p,c),p+=4,h.setUint32(p,1886614376),p+=4,h.setUint32(p,0),p+=4,d.set(s,p),p+=s.length,h.setUint32(p,l),p+=4,d.set(o,p),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=Oe(a,r.init||e||o),(a=yl.get(a))&&(o.licenseServerUri=a(r)),n.push(o)}}return n}(i,a)).length&&(r=[Oe("",i)]),n.length&&(t||!a.length))for(r=[],a=(n=u(vl.values())).next();!a.done;a=n.next())"org.w3.clearkey"!=(a=a.value)&&r.push(Oe(a,i));if(o=Array.from(o)[0]||null)for(a=(n=u(r)).next();!a.done;a=n.next())for(var s=(a=u(a.value.initData)).next();!s.done;s=a.next())s.value.keyId=o;return{yd:o,Mf:i,drmInfos:r,Cd:!0}}function gl(e){var t=e.getAttribute("schemeIdUri"),n=nl(e,"urn:mpeg:cenc:2013","default_KID"),i=tl(e,"urn:mpeg:cenc:2013","pssh").map(il);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new le(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:qe(e),keyId:null}}))}catch(e){throw new le(2,4,4007)}return{node:e,Rd:t,keyId:n,init:0<r.length?r:null}}var vl=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),yl=(new Map).set("com.widevine.alpha",(function(e){return(e=Js(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Js(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=oe(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=ae(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=qe(e.textContent)).filter((function(e){return 1===e.type}))[0])&&(e=hl(e=Fe(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}));function ml(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function bl(e,t){var n=El(e,t,"timescale"),i=1;n&&(i=ul(n)||1),(n=ul((n=El(e,t,"duration"))||""))&&(n/=i);var r=El(e,t,"startNumber"),a=Number(El(e,t,"presentationTimeOffset"))||0,o=cl(r||"");null!=r&&null!=o||(o=1);var s=Al(e,t,"SegmentTimeline");if(r=null,s){r=i;var l=e.O.duration||1/0,c=el(s,"S");s=[];for(var d=-a,h=(c=u(ee(c))).next();!h.done;h=c.next()){var p=(h=h.value).item,f=h.next,g=rl(p,"t",cl);h=rl(p,"d",cl);var v=rl(p,"r",ll);if(null!=g&&(g-=a),!h)break;if(p=null!=g?g:d,0>(g=v||0))if(f){if(null==(f=rl(f,"t",cl)))break;if(p>=f)break;g=Math.ceil((f-p)/h)-1}else{if(1/0==l)break;if(p/r>=l)break;g=Math.ceil((l*r-p)/h)-1}for(0<s.length&&p!=d&&(s[s.length-1].end=p/r),g=(f=u(J(g+1))).next();!g.done;g=f.next())d=p+h,s.push({start:p/r,end:d/r,kf:p}),p=d}r=s}return{timescale:i,Z:n,sb:o,Ha:a/i||0,ud:a,timeline:r}}function El(e,t,n){return[t(e.G),t(e.aa),t(e.ka)].filter(xe).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Al(e,t,n){return[t(e.G),t(e.aa),t(e.ka)].filter(xe).map((function(e){return Qs(e,n)})).reduce((function(e,t){return e||t}))}function kl(e,t,n,i,r,a){if(a=void 0===a?0:a,nl(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=nl(e,"http://www.w3.org/1999/xlink","href"),s=nl(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return ot(new le(2,4,4028));if("onLoad"!=s)return ot(new le(2,4,4027));var d=Pe([i],[o]);return r.request(0,_t(d,t)).U((function(i){if(!(i=pl(i.data,e.tagName)))return ot(new le(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=(i=u(Array.from(i.attributes))).next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return kl(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return kl(e,t,n,i,r,a)}))),o}o=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==nl(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&o.push(kl(l,t,n,i,r,a)));return ct(o).U((function(){return e}))}function Tl(e,t,n,i,r,a,o){var s,l=(new Br).ea("sidx",(function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var l=o.reader.K();if(0==l)throw new le(2,3,3005);if(0==o.version)var c=o.reader.K(),d=o.reader.K();else c=o.reader.rb(),d=o.reader.rb();o.reader.skip(2);var h=o.reader.Mb();for(e=e+o.size+d,h=u(J(h)),d=h.next();!d.done;d=h.next()){var p=o.reader.K();d=(2147483648&p)>>>31,p&=2147483647;var f=o.reader.K();if(o.reader.skip(4),1==d)throw new le(2,3,3006);s.push(new tr(c/l+n,(c+f)/l+n,(function(){return a}),e,e+p-1,t,n,i,r)),c+=f,e+=p}return o.parser.stop(),s}(t,i,r,a,o,n,e)}));if(e&&l.parse(e),s)return s;throw new le(2,3,3004)}function _l(e){this.b=oe(e),this.a=new Mr(this.b,0)}function wl(e){var t=Sl(e);if(7<t.length)throw new le(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=Sl(e);e:{for(var r=(i=u(Cl)).next();!r.done;r=i.next())if(ne(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.b.byteLength-e.a.C;else{if(8==t.length&&224&t[1])throw new le(2,3,3001);i=0;for(var a=(r=u(ee(t))).next();!a.done;a=r.next()){var o=(a=a.value).item;i=0==a.Y?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.a.C+t<=e.b.byteLength?t:e.b.byteLength-e.a.C,i=oe(e.b,e.a.C,t),e.a.skip(t),new Rl(n,i)}function Sl(e){var t=e.a.C,n=e.a.qa();if(0==n)throw new le(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.a.skip(n-1),ae(e.b,t,n)}_l.prototype.wa=function(){return this.a.wa()};var Cl=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Rl(e,t){this.id=e,this.a=t}function Il(e){if(8<e.a.byteLength)throw new le(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new le(2,3,3001);for(var t=0,n=u(J(e.a.byteLength)),i=n.next();!i.done;i=n.next())t=256*t+(i=e.a.getUint8(i.value));return t}function xl(e){var t=new _l(e.a);if(179!=(e=wl(t)).id)throw new le(2,3,3013);if(e=Il(e),183!=(t=wl(t)).id)throw new le(2,3,3012);t=new _l(t.a);for(var n=0;t.wa();){var i=wl(t);if(241==i.id){n=Il(i);break}}return{lf:e,Re:n}}function Dl(e,t){var n=Al(e,t,"Initialization");if(!n)return null;var i=e.G.oa,r=n.getAttribute("sourceURL");r&&(i=Pe(e.G.oa,[r])),r=0;var a=null;return(n=rl(n,"range",sl))&&(r=n.start,a=n.end),new er((function(){return i}),r,a)}function Pl(e,t){var n=Number(El(e,Ll,"presentationTimeOffset"))||0,i=El(e,Ll,"timescale"),r=1;i&&(r=ul(i)||1);var a=n/r||0,o=Dl(e,Ll);!function(e,t){if(Nl(e,t),!Ml(e))throw new le(2,4,4002)}(e,o);var s=gt(e);return{ib:function(){var e=Al(s,Ll,"RepresentationIndex"),n=s.G.oa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Pe(s.G.oa,[e])),e=Ml(s),Ol(s,t,o,n,e.start,e.end,a)}}}function Ol(e,t,n,i,r,a,o){var s,l,u,c,d,h,p,f,g,v,y,m,b,A,k;return O((function(T){var _;if(1==T.a)return s=e.presentationTimeline,l=!e.Oa||!e.O.Hd,u=e.O.start,c=e.O.duration,d=e.G.mimeType.split("/")[1],p=null,f=[(h=t)(i,r,a),"webm"==d?h(n.c(),n.b,n.a):null],h=null,E(T,Promise.all(f),2);if(g=T.b,v=g[0],y=g[1]||null,b=u-o,A=u,k=c?u+c:1/0,"mp4"==d)var w=Tl(v,r,i,n,b,A,k);else{if(440786851!=wl(w=new _l(y)).id)throw new le(2,3,3008);var S=wl(w);if(408125543!=S.id)throw new le(2,3,3009);for(w=S.a.byteOffset,S=new _l(S.a),_=null;S.wa();){var C=wl(S);if(357149030==C.id){_=C;break}}if(!_)throw new le(2,3,3010);for(_=new _l(_.a),C=1e6,S=null;_.wa();){var R=wl(_);if(2807729==R.id)C=Il(R);else if(17545==R.id)if(4==R.a.byteLength)S=R.a.getFloat32(0);else{if(8!=R.a.byteLength)throw new le(2,3,3003);S=R.a.getFloat64(0)}}if(null==S)throw new le(2,3,3011);if(S=(_={ef:_=C/1e9,duration:S*_}).ef,_=_.duration,475249515!=(C=wl(new _l(v))).id)throw new le(2,3,3007);w=function(e,t,n,i,r,a,o,s,l){function u(){return r}var c=[];e=new _l(e.a);for(var d=null,h=null;e.wa();){var p=wl(e);if(187==p.id){var f=xl(p);f&&(p=n*f.lf,f=t+f.Re,null!=d&&c.push(new tr(d+o,p+o,u,h,f-1,a,o,s,l)),d=p,h=f)}}return null!=d&&c.push(new tr(d+o,i+o,u,h,null,a,o,s,l)),c}(C,w,S,_,i,n,b,A,k)}return m=w,s.ob(m),p=new kr(m),l&&p.Ka(A,k),T.return(p)}))}function Ll(e){return e.Nb}function Ml(e){var t=Al(e,Ll,"RepresentationIndex");return e=sl((e=El(e,Ll,"indexRange"))||""),t&&(e=rl(t,"range",sl,e)),e}function Nl(e,t){var n=e.G.mimeType.split("/")[1];if("text"!=e.G.contentType&&"mp4"!=n&&"webm"!=n)throw new le(2,4,4006);if("webm"==n&&!t)throw new le(2,4,4005)}function Ul(e,t){var n=Dl(e,Bl),i=function(e){var t=function(e){return[e.G.Na,e.aa.Na,e.ka.Na].filter(xe).map((function(e){return el(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0),{Ke:t.getAttribute("media"),start:(t=rl(t,"mediaRange",sl,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=bl(e,Bl)).sb;0==n&&(n=1);var i=0;return e.Z?i=e.Z*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Z:e.Z,startTime:i,sb:n,Ha:e.Ha,timeline:e.timeline,lb:t}}(e);if(!i.Z&&!i.timeline&&1<i.lb.length)throw new le(2,4,4002);if(!i.Z&&!e.O.duration&&!i.timeline&&1==i.lb.length)throw new le(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new le(2,4,4002);var r=null,a=null;return e.ka.id&&e.G.id&&(a=e.ka.id+","+e.G.id,r=t[a]),n=function(e,t,n,i,r){var a=i.lb.length;i.timeline&&i.timeline.length!=i.lb.length&&(a=Math.min(i.timeline.length,i.lb.length));for(var o=e-i.Ha,s=t?e+t:1/0,l=[],c=i.startTime,d={},h=(a=u(J(a))).next();!h.done;d={Cc:d.Cc},h=a.next()){h=h.value;var p=i.lb[h];d.Cc=Pe(n,[p.Ke]);var f=void 0;f=null!=i.Z?c+i.Z:i.timeline?i.timeline[h].end:c+t,l.push(new tr(e+c,e+f,function(e){return function(){return e.Cc}}(d),p.start,p.end,r,o,e,s)),c=f}return l}(e.O.start,e.O.duration,e.G.oa,i,n),r?(r.mb(n),r.Pa(e.presentationTimeline.Ra())):(e.presentationTimeline.ob(n),r=new kr(n),a&&e.Oa&&(t[a]=r)),e.Oa&&e.O.Hd||r.Ka(e.O.start,e.O.duration?e.O.start+e.O.duration:1/0),{ib:function(){return Promise.resolve(r)}}}function Bl(e){return e.Na}function Fl(e,t,n,i,r){var a=function(e){var t=El(e,Vl,"initialization");if(!t)return null;var n=e.G.id,i=e.bandwidth||null,r=e.G.oa;return new er((function(){var e=ml(t,n,null,i,null);return Pe(r,[e])}),0,null)}(e),o=function(e){var t=bl(e,Vl),n=El(e,Vl,"media");return e=El(e,Vl,"index"),{Z:t.Z,timescale:t.timescale,sb:t.sb,Ha:t.Ha,ud:t.ud,timeline:t.timeline,Xc:n,Jb:e}}(e);!function(e){var t=e.Jb?1:0;if(t+=e.timeline?1:0,0==(t+=e.Z?1:0))throw new le(2,4,4002);if(1!=t&&(e.Jb&&(e.timeline=null),e.Z=null),!e.Jb&&!e.Xc)throw new le(2,4,4002)}(o);var s=gt(e);if(o.Jb)return Nl(e,a),{ib:function(){var e=ml(o.Jb,s.G.id,null,s.bandwidth||null,null);return e=Pe(s.G.oa,[e]),Ol(s,t,a,e,0,null,o.Ha)}};if(o.Z)return i||(e.presentationTimeline.Yc(o.Z),e.presentationTimeline.Zc(e.O.start)),{ib:function(){return function(e,t,n,i){function r(e){var n=(e-h)*d,r=n+t.Ha;return new tr(n+=s,Math.min(n+d,c),(function(){var t=ml(f,v,e,g,r*p);return Pe(y,[t])}),0,null,i,m,s,c)}function a(){var e=[Math.max(o.Ra(),s),Math.min(o.La(),c)].map((function(e){return e-s}));return[Math.ceil(e[0]/d),Math.ceil(e[1]/d)-1].map((function(e){return e+h}))}var o=e.presentationTimeline,s=e.O.start,l=e.O.duration,c=l?s+l:1/0,d=t.Z,h=t.sb,p=t.timescale,f=t.Xc,g=e.bandwidth||null,v=e.G.id,y=e.G.oa,m=s-t.Ha,b=a();l=b[1];var E=[];for(e=e.Oa?Math.max(b[0],b[1]-n+1):b[0];e<=l;++e)n=r(e),E.push(n);var A=new kr(E);if(o.La()<c){var k=l+1;A.tc(d,(function(){A.Pa(o.Ra());var e=u(a());e.next(),e=e.next().value;for(var t=[];k<=e;){var n=r(k);t.push(n),k++}return t}))}return Promise.resolve(A)}(s,o,r,a)}};var l=null;i=null,e.ka.id&&e.G.id&&(i=e.ka.id+","+e.G.id,l=n[i]);var c=function(e,t,n){var i=e.O.start,r=e.O.duration,a=i-t.Ha;r=r?i+r:1/0;for(var o=[],s={},l=u(ee(t.timeline)),c=l.next();!c.done;s={Bc:s.Bc,Dc:s.Dc,Gc:s.Gc,yc:s.yc,Hc:s.Hc,zc:s.zc},c=l.next()){var d=(c=c.value).item,h=d.start,p=d.kf;d=d.end,s.Gc=c.Y+t.sb,s.Hc=p+t.ud,s.Dc=e.G.id,s.yc=e.bandwidth||null,s.Bc=t.Xc,s.zc=e.G.oa,o.push(new tr(i+h,i+d,function(e){return function(){var t=ml(e.Bc,e.Dc,e.Gc,e.yc||null,e.Hc);return Pe(e.zc,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}(s,o,a),d=e.O.start,h=e.O.duration?e.O.start+e.O.duration:1/0,p=1/0!=h;return l?(p&&new kr(c).Ka(d,h),l.mb(c),l.Pa(e.presentationTimeline.Ra())):(e.presentationTimeline.ob(c),l=new kr(c),i&&e.Oa&&(n[i]=l)),p&&l.Ka(d,h),{ib:function(){return Promise.resolve(l)}}}function Vl(e){return e.Ob}function Hl(){this.f=[],this.a=[],this.b=[],this.c=[],this.g=new Set}function jl(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,k,T,_,w,S,C,R,I,x,D,P,L;return O((function(O){switch(O.a){case 1:if(i=Le,function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).dc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&mt(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.dc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).vc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&mt(r.roles,s.roles)&&Ht(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.vc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&mt(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),!n&&1==t.length){r=t[0],e.a=r.dc,e.b=r.vc,e.c=r.textStreams,O.u(2);break}for(a=-1,o=u(ee(t)),s=o.next();!s.done;s=o.next())l=s.value,c=l.Y,d=l.item,e.g.has(d.id)||(e.g.add(d.id),-1==a&&(a=c));if(-1==a)return O.return();for(h=t.map((function(e){return e.dc})),p=t.map((function(e){return e.vc})),f=t.map((function(e){return e.textStreams})),g=u(f),v=g.next();!v.done;v=g.next())v.value.push({id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new kr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(O,Gl(e.a,h,a,Wl,ql),3);case 3:return E(O,Gl(e.b,p,a,Wl,ql),4);case 4:return E(O,Gl(e.c,f,a,Wl,ql),2);case 2:if(y=0,m=[],e.b.length&&e.a.length)for(S=u(e.a),C=S.next();!C.done;C=S.next())for(R=C.value,I=u(e.b),x=I.next();!x.done;x=I.next())D=x.value,P=bn(R.drmInfos,D.drmInfos),R.drmInfos.length&&D.drmInfos.length&&!P.length||(L=y++,m.push({id:L,language:R.language,primary:R.primary,audio:R,video:D,bandwidth:(R.bandwidth||0)+(D.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0}));else for(b=e.b.concat(e.a),k=u(b),T=k.next();!T.done;T=k.next())_=T.value,w=y++,m.push({id:w,language:_.language,primary:_.primary,audio:_.type==i.fb?_:null,video:_.type==i.Da?_:null,bandwidth:_.bandwidth||0,drmInfos:_.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});e.f=m,A(O)}}))}function Kl(e){var t,n,i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,k;return O((function(T){switch(T.a){case 1:if(t=Le,1==e.length)return T.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.fb}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.Da}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.$}))})),a=u(r),o=a.next();!o.done;o=a.next())o.value.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(T,Gl([],n,0,Yl,$l),2);case 2:return s=T.b,E(T,Gl([],i,0,Yl,$l),3);case 3:return l=T.b,E(T,Gl([],r,0,Yl,$l),4);case 4:if(c=T.b,d=0,l.length&&s.length)for(g=u(s),v=g.next();!v.done;v=g.next())for(y=v.value,m=u(l),b=m.next();!b.done;b=m.next())A=b.value,k=d++,A.variantIds.push(k),y.variantIds.push(k);else for(h=l.concat(s),p=u(h),f=p.next();!f.done;f=p.next())f.value.variantIds=[d++];return T.return(l.concat(s,c))}}))}function Gl(e,t,n,i,r){var a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,k,T,_,w;return O((function(S){switch(S.a){case 1:for(a=Le,o=[],s=u(ee(t)),l=s.next();!l.done;l=s.next())c=l.value,d=c.Y,h=c.item,d>=n?o.push(new Set(h)):o.push(new Set);p=u(e),f=p.next();case 2:if(f.done){S.u(4);break}return E(S,function(e,t,n,i,r){var a;return O((function(o){return 1==o.a?(a=Xl(t,e))?E(o,Promise.all(a.map((function(e){return e.createSegmentIndex()}))),2):o.return(!1):(zl(e,a,n,i,r),o.return(!0))}))}(f.value,t,n,r,o),5);case 5:if(!S.b)throw new le(2,4,4037);f=p.next(),S.u(2);break;case 4:g=u(o),v=g.next();case 6:if(v.done){S.u(8);break}y=v.value,m=u(y),b=m.next();case 9:if(b.done){v=g.next(),S.u(6);break}return E(S,function(e,t,n,i,r){var a,o;return O((function(s){return 1==s.a?(a=n(e),(o=Xl(t,a))?a.createSegmentIndex?E(s,Promise.all(o.map((function(e){return e.createSegmentIndex()}))),2):s.u(2):s.return(null)):(zl(a,o,0,i,r),s.return(a))}))}(b.value,t,i,r,o),12);case 12:(A=S.b)&&e.push(A),b=m.next(),S.u(9);break;case 8:for(k=u(o),v=k.next();!v.done;v=k.next())for(T=v.value,_={},w=u(T),b=w.next();!b.done;_={eb:_.eb},b=w.next())if(_.eb=b.value,(_.eb.type!=a.$||_.eb.language)&&e.some(function(e){return function(t){return t.mimeType==e.eb.mimeType&&Gt(t.codecs)[0]==Gt(e.eb.codecs)[0]}}(_)))throw new le(2,4,4037);return S.return(e)}}))}function zl(e,t,n,i,r){for(var a=(t=u(ee(t))).next();!a.done;a=t.next()){var o=a.value;if(a=o.Y,o=o.item,a>=n){i(e,o);var s=!0;"audio"==e.type&&0==Ei(e.language,o.language)&&(s=!1),s&&r[a].delete(o)}}}function Wl(e){return(e=Object.assign({},e)).originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new wr,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e}function Yl(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ql(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),n=bn(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new le(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}e.segmentIndex.g.push(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Wl(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),ql(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ql(e.trickModeVideo,t)}function $l(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,c(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}}function Xl(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){for(var a=t,o={audio:Zl,video:Zl,text:Ql}[a.type],s={audio:Jl,video:eu,text:tu}[a.type],l=null,c=(r=u(r.value)).next();!c.done;c=r.next())!o(a,c=c.value)||l&&!s(a,l,c)||(l=c);if(!(a=l))return null;n.push(a)}return n}function Zl(e,t){var n;if(!(n=t.mimeType!=e.mimeType||Gt(t.codecs)[0]!=Gt(e.codecs)[0])&&(n=e.drmInfos)){n=e.drmInfos;var i=t.drmInfos;n=!(!n.length||!i.length||0<bn(n,i).length)}return!n}function Ql(e,t){return!!e.language&&(!t.language||0!=Ei(e.language,t.language)&&t.kind==e.kind)}function Jl(e,t,n){if(e.id==n.id)return!0;var i=Ei(e.language,t.language),r=Ei(e.language,n.language);return r>i||!(r<i)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&((i=nu(e.channelsCount,t.channelsCount,n.channelsCount))==ru||i!=ou&&((i=nu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==ru||i!=ou&&!(!e.bandwidth||iu(e.bandwidth,t.bandwidth,n.bandwidth)!=ru)))))}function eu(e,t,n){if(e.id==n.id)return!0;var i=nu(e.width*e.height,t.width*t.height,n.width*n.height);if(i==ru)return!0;if(i==ou)return!1;if(e.frameRate){if((i=nu(e.frameRate,t.frameRate,n.frameRate))==ru)return!0;if(i==ou)return!1}return!(!e.bandwidth||iu(e.bandwidth,t.bandwidth,n.bandwidth)!=ru)}function tu(e,t,n){if(e.id==n.id)return!0;var i=Ei(e.language,t.language),r=Ei(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function nu(e,t,n){if(t==e&&e!=n)return ou;if(n==e&&e!=t)return ru;if(t>e){if(n<=e||n-e<t-e)return ru;if(n-e>t-e)return ou}else{if(n>e)return ou;if(e-n<e-t)return ru;if(e-n>e-t)return ou}return au}function iu(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?ru:t<e?ou:au}Hl.prototype.release=function(){for(var e=u(this.a.concat(this.b,this.c)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.a=[],this.b=[],this.c=[],this.f=[]};var ru=1,au=0,ou=-1;function su(){var e=this;this.s=this.i=null,this.b=[],this.o=null,this.m=1,this.f={},this.a=new Hl,this.h=0,this.j=new H(5),this.g=new nt((function(){e.Kb()})),this.c=new Et}function lu(e){var t,n,i,r,a,o,s;return O((function(l){return 1==l.a?(t=_t(e.b,e.i.retryParameters),n=e.s.networkingEngine,i=Date.now(),r=n.request(0,t),At(e.c,r),E(l,r.promise,2)):3!=l.a?(a=l.b,e.s?(a.uri&&!e.b.includes(a.uri)&&e.b.unshift(a.uri),E(l,function(e,t,n){var i,r,a,o;return O((function(s){if(1==s.a){if(!(i=pl(t,"MPD")))throw new le(2,4,4001,n);return r=e.i.dash.xlinkFailGracefully,a=kl(i,e.i.retryParameters,r,n,e.s.networkingEngine),At(e.c,a),E(s,a.promise,2)}return o=s.b,s.return(function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m,b,A,T,S,C,R;return O((function(I){switch(I.a){case 1:i=[n],0<(r=el(t,"Location").map(il).filter(xe)).length&&(a=Pe(i,r),i=e.b=a),o=el(t,"BaseURL").map(il),s=Pe(i,o),l=e.i.dash.ignoreMinBufferTime,c=0,l||(c=rl(t,"minBufferTime",ol)||0),e.h=rl(t,"minimumUpdatePeriod",ol,-1),d=rl(t,"availabilityStartTime",al),h=rl(t,"timeShiftBufferDepth",ol),p=e.i.dash.ignoreSuggestedPresentationDelay,f=null,p||(f=rl(t,"suggestedPresentationDelay",ol)),g=rl(t,"maxSegmentDuration",ol),v=t.getAttribute("type")||"static",e.o?y=e.o.presentationTimeline:(m=e.i.defaultPresentationDelay||1.5*c,y=new nr(d,null!=f?f:m,e.i.dash.autoCorrectDrift)),b={Oa:"static"!=v,presentationTimeline:y,ka:null,O:null,aa:null,G:null,bandwidth:0,Fd:!1};for(var x=rl(t,"mediaPresentationDuration",ol),D=[],P=0,L=el(t,"Period"),M=(L=u(ee(L))).next();!M.done;M=L.next()){var N=M.value;M=N.item,N=N.next,P=rl(M,"start",ol,P);var U=rl(M,"duration",ol),B=null;if(N){var F=rl(N,"start",ol);null!=F&&(B=F-P)}else null!=x&&(B=x-P);if(null==B&&(B=U),M=uu(e,b,s,{start:P,duration:B,node:M,Hd:null==B||!N}),D.push(M),null==B){P=null;break}P+=B}return T=(A=null!=x?{periods:D,duration:x,zd:!1}:{periods:D,duration:P,zd:!0}).duration,S=A.periods,y.Pb("static"==v),"static"!=v&&A.zd||y.za(T||1/0),y.S()&&!isNaN(e.i.availabilityWindowOverride)&&(h=e.i.availabilityWindowOverride),null==h&&(h=1/0),y.pd(h),y.Yc(g||1),E(I,jl(e.a,S,b.Oa),2);case 2:if(e.o){e.o.variants=e.a.f,e.o.textStreams=e.a.c,I.u(3);break}if(e.o={presentationTimeline:y,variants:e.a.f,textStreams:e.a.c,offlineSessionIds:[],minBufferTime:c||0},!y.Xd()){I.u(3);break}return C=el(t,"UTCTiming"),E(I,function(e,t,n){var i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.i.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=u(i),o=a.next();case 2:if(o.done){h.u(4);break}switch(s=o.value,k(h,5),l=s.scheme,c=s.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Y("NTP UTCTiming scheme is not supported");break;default:Y("Unrecognized scheme in UTCTiming element",l)}h.u(9);break;case 7:return E(h,pu(e,t,c,"HEAD"),10);case 10:return h.return(h.b);case 8:return E(h,pu(e,t,c,"GET"),11);case 11:return h.return(h.b);case 9:_(h,3);break;case 5:w(h);case 3:o=a.next(),h.u(2);break;case 4:return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,s,C),5);case 5:if(R=I.b,!e.s)return I.return();y.Td(R);case 3:return e.s.makeTextStreamsForClosedCaptions(e.o),E(I,e.s.filter(e.o),0)}}))}(e,o,n))}))}(e,a.data,a.uri),3)):l.return(0)):(o=Date.now(),s=(o-i)/1e3,j(e.j,1,s),l.return(s))}))}function uu(e,t,n,i){t.ka=hu(i.node,null,n),t.O=i,t.ka.id||(t.ka.id="__shaka_period_"+i.start);for(var r=(n=u(n=el(i.node,"EventStream"))).next();!r.done;r=n.next())fu(e,i.start,i.duration,r.value);if(n=el(i.node,"AdaptationSet").map((function(n){return function(e,t,n){if(t.aa=hu(n,t.ka,null),"image"==t.aa.contentType)return null;var i=!1,r=el(n,"Role"),a=r.map((function(e){return e.getAttribute("value")})).filter(xe),o=void 0,s="text"==t.aa.contentType;s&&(o="subtitle");for(var l=(r=u(r)).next();!l.done;l=r.next()){var d=(l=l.value).getAttribute("schemeIdUri");if(null==d||"urn:mpeg:dash:role:2011"==d)switch(l=l.getAttribute("value"),l){case"main":i=!0;break;case"caption":case"subtitle":o=l}}d=el(n,"EssentialProperty"),r=null,l=!1;for(var h=(d=u(d)).next();!h.done;h=d.next())"http://dashif.org/guidelines/trickmode"==(h=h.value).getAttribute("schemeIdUri")?r=h.getAttribute("value"):l=!0;d=el(n,"Accessibility");var p=new Map;for(d=u(d),h=d.next();!h.done;h=d.next()){var f=h.value;if(h=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==h||"urn:scte:dash:cc:cea-708:2015"==h)if(h=1,null!=f)for(var g=(f=u(f.split(";"))).next();!g.done;g=f.next()){var v=g.value,y=g=void 0;v.includes("=")?(g=(v=v.split("="))[0].startsWith("CC")?v[0]:"CC"+v[0],y=v[1].split(",")[0].split(":").pop()):(g="CC"+h,h+=2,y=v),p.set(g,bi(y))}else p.set("CC1","und");else"urn:mpeg:dash:role:2011"==h&&null!=f&&(a.push(f),"captions"==f&&(o="caption"))}if(l)return null;var m=fl(l=el(n,"ContentProtection"),e.i.dash.ignoreDrmInfo),b=bi(n.getAttribute("lang")||"und"),k=n.getAttribute("label");if((l=el(n,"Label"))&&l.length&&(l=l[0]).textContent&&(k=l.textContent),l=el(n,"Representation"),0==(n=l.map((function(n){return function(e,t,n,i,r,a,o,s,l,u){if(t.G=hu(u,t.aa,null),!function(e){var t=e.Nb?1:0;return t+=e.Na?1:0,0==(t+=e.Ob?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Nb&&(e.Na=null),e.Ob=null),!0)}(t.G))return null;var c=t.O.start;t.bandwidth=rl(u,"bandwidth",ul)||0;var d=t.G.contentType;d="text"==d||"application"==d;try{var h=function(t,n,i){return function(e,t,n,i){var r,a,o,s,l;return O((function(u){return 1==u.a?(r=Rt,a=Wr(t,n,i,e.i.retryParameters),o=e.s.networkingEngine,s=o.request(r,a),At(e.c,s),E(u,s.promise,2)):(l=u.b,u.return(l.data))}))}(e,t,n,i)};if(t.G.Nb)var p=Pl(t,h);else if(t.G.Na)p=Ul(t,e.f);else if(t.G.Ob)p=Fl(t,h,e.f,!!e.o,e.i.dash.initialSegmentLimit);else{var f=t.G.oa,g=t.O.duration||0;p={ib:function(){return Promise.resolve(Tr(c,g,f))}}}}catch(e){if(d&&4002==e.code)return null;throw e}d=function(e,t,n){var i=fl(e,n);if(t.Cd)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Cd=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new le(2,4,4008);return i.yd||t.yd}(d=el(u,"ContentProtection"),n,e.i.dash.ignoreDrmInfo),d=new Set(d?[d]:[]),el(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(t.G.mimeType="audio/eac3-joc");var v={id:e.m++,originalId:t.G.id,createSegmentIndex:function(){var e;return O((function(t){if(1==t.a)return v.segmentIndex?t.u(0):(e=v,E(t,p.ib(),3));e.segmentIndex=t.b,A(t)}))},segmentIndex:null,mimeType:t.G.mimeType,codecs:t.G.codecs,frameRate:t.G.frameRate,pixelAspectRatio:t.G.pixelAspectRatio,bandwidth:t.bandwidth,width:t.G.width,height:t.G.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:d,language:r,label:a,type:t.aa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.G.emsgSchemeIdUris,roles:s,channelsCount:t.G.$c,audioSamplingRate:t.G.audioSamplingRate,closedCaptions:l};return v}(e,t,m,o,b,k,i,a,p,n)})).filter((function(e){return!!e}))).length){if(e.i.dash.ignoreEmptyAdaptationSet||s)return null;throw new le(2,4,4003)}if(!t.aa.contentType||"application"==t.aa.contentType)for(t.aa.contentType=gu(n[0].mimeType,n[0].codecs),s=u(n),d=s.next();!d.done;d=s.next())d.value.type=t.aa.contentType;for(s=u(n),d=s.next();!d.done;d=s.next())for(d=d.value,h=u(m.drmInfos),f=h.next();!f.done;f=h.next())(f=f.value).keyIds=f.keyIds&&d.keyIds?new Set(c(f.keyIds).concat(c(d.keyIds))):f.keyIds||d.keyIds;return s=l.map((function(e){return e.getAttribute("id")})).filter(xe),{id:t.aa.id||"__fake__"+e.m++,contentType:t.aa.contentType,language:b,Nf:i,streams:n,drmInfos:m.drmInfos,sd:r,Ue:s}}(e,t,n)})).filter(xe),t.Oa){i=[];for(var a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(a.value.Ue)).next();!o.done;o=a.next())i.push(o.value);if(i.length!=new Set(i).size)throw new le(2,4,4018)}for(i=n.filter((function(e){return!e.sd})),r=(n=u(n=n.filter((function(e){return e.sd})))).next();!r.done;r=n.next()){a=(r=r.value).sd.split(" ");for(var s=(o=u(i)).next();!s.done;s=o.next()){var l=s.value;if(a.includes(l.id)){s={};for(var d=(l=u(l.streams)).next();!d.done;s={Rb:s.Rb,Xb:s.Xb},d=l.next())s.Xb=d.value,s.Rb=jt,s.Xb.trickModeVideo=r.streams.find(function(e){return function(t){return e.Rb.a(e.Xb.codecs)==e.Rb.a(t.codecs)}}(s))}}}if(r=e.i.disableAudio?[]:cu(i,"audio"),a=e.i.disableVideo?[]:cu(i,"video"),n=e.i.disableText?[]:cu(i,"text"),!a.length&&!r.length)throw new le(2,4,4004);for(i=[],o=(r=u(r)).next();!o.done;o=r.next())i.push.apply(i,c(o.value.streams));for(r=[],o=(a=u(a)).next();!o.done;o=a.next())r.push.apply(r,c(o.value.streams));for(a=[],o=(n=u(n)).next();!o.done;o=n.next())a.push.apply(a,c(o.value.streams));return{id:t.ka.id,dc:i,vc:r,textStreams:a}}function cu(e,t){return e.filter((function(e){return e.contentType==t}))}function du(e,t){0>e.h||e.g.R(Math.max(3,e.h-t,K(e.j)))}function hu(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,$c:null,audioSamplingRate:null},n=n||t.oa;for(var i=el(e,"BaseURL").map(il),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,s=rl(e,"frameRate",dl)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=el(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(c=u(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);return c=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16)){for(e=0;t;)1&t&&++e,t>>=1;return e}}}return null}(c=el(e,"AudioChannelConfiguration"))||t.$c,h=rl(e,"audioSamplingRate",cl)||t.audioSamplingRate,r||(r=gu(a,o)),{oa:Pe(n,i),Nb:Qs(e,"SegmentBase")||t.Nb,Na:Qs(e,"SegmentList")||t.Na,Ob:Qs(e,"SegmentTemplate")||t.Ob,width:rl(e,"width",cl)||t.width,height:rl(e,"height",cl)||t.height,contentType:r,mimeType:a,codecs:o,frameRate:s,pixelAspectRatio:l,emsgSchemeIdUris:d,id:e.getAttribute("id"),$c:c,audioSamplingRate:h}}function pu(e,t,n,i){var r,a,o,s,l,u;return O((function(c){if(1==c.a)return r=Pe(t,[n]),(a=_t(r,e.i.retryParameters)).method=i,o=e.s.networkingEngine.request(4,a),At(e.c,o),E(c,o.promise,2);if(s=c.b,"HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);l=s.headers.date}else l=Be(s.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function fu(e,t,n,i){for(var r=i.getAttribute("schemeIdUri")||"",a=i.getAttribute("value")||"",o=rl(i,"timescale",cl)||1,s=(i=u(el(i,"Event"))).next();!s.done;s=i.next()){var l=rl(s=s.value,"presentationTime",cl)||0,c=rl(s,"duration",cl)||0;c=(l=l/o+t)+c/o,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),s={schemeIdUri:r,value:a,startTime:l,endTime:c,id:s.getAttribute("id")||"",eventElement:s},e.s.onTimelineRegionAdded(s)}}function gu(e,t){return Zn(Kt(e,t))?"text":e.split("/")[0]}function vu(e,t,n,i){this.a=e,this.type=t,this.V=n,this.segments=i||null}function yu(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function mu(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function bu(e,t){var n=e.getAttribute(t);if(!n)throw new le(2,4,4023,t);return n.value}function Eu(e,t){this.V=t,this.a=e}function Au(e,t){this.name=e,this.value=t}function ku(e,t){return e.filter((function(e){return e.name==t}))}function Tu(e,t){return e.filter((function(e){return bu(e,"TYPE")==t}))}function _u(e,t){var n=ku(e,t);return n.length?n[0]:null}function wu(e,t,n){return n=void 0===n?0:n,(e=_u(e,t))?Number(e.value):n}function Su(e){this.b=e,this.a=0}function Cu(e){Ru(e,/[ \t]+/gm)}function Ru(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.results)}function Iu(e){return e.a==e.b.length?null:(e=Ru(e,/[^ \t\n]*/gm))?e[0]:null}function xu(){this.a=0}function Du(e,t,n){var i=(t=(t=Be(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new le(2,4,4015);t=0;for(var r=!0,a=u(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Pu(e.a++,o),--e.a,Ou.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}a=[],r=!0;for(var s=(o=u(ee(i))).next();!s.done;s=o.next()){var l=s.value;s=l.Y;var c=l.item;if(l=l.next,/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=Pu(e.a++,c),Lu.includes(c.name)){if(1!=t)throw new le(2,4,4017);for(c=i.splice(s,i.length-s),i=n,r=[],o=[],s=null,l=(c=u(c)).next();!l.done;l=c.next())l=l.value,/^(#EXT)/.test(l)?(l=Pu(e.a++,l),Ou.includes(l.name)?a.push(l):"EXT-X-MAP"==l.name?s=l:o.push(l)):/^#(?!EXT)/m.test(l)||(l=Pe([i],[l.trim()])[0],s&&o.push(s),r.push(new Eu(l,o)),o=[]);return new vu(n,t,a,r)}a.push(c),"EXT-X-STREAM-INF"==c.name&&(c.a.push(new Au("URI",l)),r=!0)}}return new vu(n,t,a)}function Pu(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new le(2,4,4016,t);var i,r=n[1],a=n[2];if(n=[],a){var o;(o=Ru(a=new Su(a),/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Ru(a,s);)n.push(new Au(o[1],o[2]||o[3]))}return new yu(e,r,n,i)}(i=su.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i=this;return O((function(r){if(1==r.a)return i.b=[e],i.s=t,E(r,lu(i),2);if(n=r.b,i.s&&du(i,n),!i.s)throw new le(2,7,7001);return r.return(i.o)}))},i.stop=function(){for(var e=u(Object.values(this.f)),t=e.next();!t.done;t=e.next())t.value.release();return this.a&&this.a.release(),this.i=this.s=null,this.b=[],this.o=null,this.f={},this.a=null,null!=this.g&&(this.g.stop(),this.g=null),this.c.destroy()},i.update=function(){var e,t=this;return O((function(n){return 1==n.a?(k(n,2),E(n,lu(t),4)):2!=n.a?_(n,0):(e=w(n),t.s&&e?(t.s.onError(e),void A(n)):n.return())}))},i.onExpirationUpdated=function(){},i.Kb=function(){var e,t,n=this;return O((function(i){switch(i.a){case 1:return e=0,k(i,2),E(i,lu(n),4);case 4:e=i.b,_(i,3);break;case 2:t=w(i),n.s&&(t.severity=1,n.s.onError(t));case 3:if(!n.s)return i.return();du(n,e),A(i)}}))},V("shaka.dash.DashParser",su),Ji.mpd=function(){return new su},Qi["application/dash+xml"]=function(){return new su},Qi["video/vnd.mpeg.dash.mpd"]=function(){return new su},yu.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},yu.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Ou="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Lu="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Mu(){}function Nu(e){try{var t=Uu(e);return lt({uri:e,Nd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ot(e)}}function Uu(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new le(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new le(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?qe(t):He(t),contentType:i}}function Bu(){var e=this;this.i=this.s=null,this.Ca=1,this.j=new Map,this.g=new Map,this.ta=new Set,this.a=new Map,this.b=null,this.J="",this.H=new xu,this.ca=0,this.h=new nt((function(){e.Kb()})),this.c=sc,this.o=null,this.M=0,this.T=1/0,this.m=new Et,this.W=[],this.A=new Map,this.Ba=!1,this.f=new Map,this.D=null,this.I=new Map,this.v=new Map}function Fu(e,t){var n,i,r,a,o,s,l,u,c;return O((function(d){if(1==d.a)return n=cc,i=t.be,E(d,nc(e,_t([i],e.i.retryParameters),0),2);if(3!=d.a){if(r=d.b,1!=(a=Du(e.H,r.data,r.uri)).type)throw new le(2,4,4017);return o=ku(a.V,"EXT-X-DEFINE"),s=Vu(e,o),l=t.stream,E(d,qu(e,t.uc,a,l.mimeType,t.Id,s),3)}u=d.b,l.segmentIndex.mb(u),u.length&&l.segmentIndex.Pa(u[0].startTime),c=u[u.length-1],_u(a.V,"EXT-X-ENDLIST")&&(tc(e,n.$d),e.b.za(c.endTime)),A(d)}))}function Vu(e,t){for(var n=new Map,i=u(t),r=i.next();!r.done;r=i.next()){var a=r.value;r=mu(a,"NAME");var o=mu(a,"VALUE");a=mu(a,"IMPORT"),r&&o&&n.set(r,o),a&&(r=e.j.get(a))&&n.set(a,r)}return n}function Hu(e,t){var n=[];e.i.disableVideo||n.push("avc1.42E01E"),e.i.disableAudio||n.push("mp4a.40.2");var i=mu(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var r=[],a=(i=u(i)).next();!a.done;a=i.next()){var o=Gt(a=a.value)[0];n.has(o)||(r.push(a),n.add(o))}return r}function ju(e){return bi(e=mu(e,"LANGUAGE")||"und")}function Ku(e,t){var n,i,r,a,o,s,l,u,c,d,h;return O((function(p){if(1==p.a){n=bu(t,"GROUP-ID"),i="";var f=bu(t,"TYPE").toLowerCase();return"subtitles"==f&&(f="text"),"text"!=(r=f)&&n&&e.f.has(n)&&(i=e.f.get(n)),a=Ju(bu(t,"URI"),e.j),e.a.has(a)?p.return(e.a.get(a)):(o=ju(t),s=mu(t,"NAME"),l=t.getAttribute("DEFAULT"),u="YES"==l,f="audio"==r&&(f=mu(t,"CHANNELS"))?parseInt(f.split("/")[0],10):null,c=f,d=mu(t,"CHARACTERISTICS"),E(p,Gu(e,a,i,r,o,u,s,c,null,d),2))}return h=p.b,e.g.has(n)?e.g.get(n).push(h):e.g.set(n,[h]),null==h?p.return(null):e.a.has(a)?p.return(e.a.get(a)):(e.a.set(a,h),p.return(h))}))}function Gu(e,t,n,i,r,a,o,s,l,d){var h,p,f,g,v,y,m,b,A,T,S,C,R,I,x,D,P,L,M,N,U,B,F,V,H,j,K,G,z,W,q,$,X,Z,Q,J;return O((function(ee){switch(ee.a){case 1:return h=Pe([e.J],[t])[0],E(ee,nc(e,_t([h],e.i.retryParameters),0),2);case 2:if(p=ee.b,h=p.uri,1!=(f=Du(e.H,p.data,h)).type)throw new le(2,4,4017);if(g=[],f.segments)for(v=u(f.segments),y=v.next();!y.done;y=v.next())m=y.value,b=ku(m.V,"EXT-X-KEY"),g.push.apply(g,c(b));for(A=!1,T=[],S=new Set,C=u(g),R=C.next();!R.done;R=C.next())if(I=R.value,"NONE"!=(x=bu(I,"METHOD"))){if(A=!0,"AES-128"==x)return e.Ba=!0,ee.return(null);if(D=bu(I,"KEYFORMAT"),L=(P=oc[D])?P(I):null){if(L.keyIds)for(M=u(L.keyIds),N=M.next();!N.done;N=M.next())U=N.value,S.add(U);T.push(L)}}if(A&&!T.length)throw new le(2,4,4026);return B=ku(f.V,"EXT-X-DEFINE"),F=Vu(e,B),function(e,t){var n=_u(t.V,"EXT-X-PLAYLIST-TYPE"),i=_u(t.V,"EXT-X-ENDLIST");i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i?tc(e,sc):(tc(e,n?uc:lc),i=ec(t.V,"EXT-X-TARGETDURATION"),i=Number(i.value),e.M=Math.max(i,e.M),e.T=Math.min(i,e.T))}(e,f),E(ee,function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f;return O((function(g){if(1==g.a)return a=Le,o=Rt,s=Ju(i.segments[0].a,r),l=new ce(s),u=l.ja.split(".").pop(),c=ac[t],(d=c[u])?g.return(d):t==a.$?n&&"vtt"!=n&&"wvtt"!=n?g.return("application/mp4"):g.return("text/vtt"):((h=_t([s],e.i.retryParameters)).method="HEAD",E(g,nc(e,h,o),2));if(p=g.b,!(f=p.headers["content-type"]))throw new le(2,4,4021,u);return g.return(f.split(";")[0])}))}(e,i,n,f,F),3);case 3:return V=ee.b,rc.includes(V)&&(n=""),H=new Map,k(ee,4),E(ee,qu(e,t,f,V,H,F),6);case 6:j=ee.b,_(ee,5);break;case 4:if(4035==(K=w(ee)).code)return Y("Skipping unsupported HLS stream",V,t),ee.return(null);throw K;case 5:if(G=j[0].startTime,z=j[j.length-1].endTime,W=new kr(j),q="text"==i?"subtitle":void 0,$=[],d)for(X=u(d.split(",")),Z=X.next();!Z.done;Z=X.next())Q=Z.value,$.push(Q);return J={id:e.Ca++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:W,mimeType:V,codecs:n,kind:q,encrypted:A,drmInfos:T,keyIds:S,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:$,channelsCount:s,audioSamplingRate:null,closedCaptions:l},ee.return({stream:J,uc:t,be:h,Jd:G,Je:z,Id:H})}}))}function zu(e,t,n,i){return(n=_u(n,"EXT-X-MAP"))?(t=[i=Ju(Pe([t],[bu(n,"URI")])[0],i),mu(n,"BYTERANGE","")].join("-"),e.I.has(t)||(n=function(e,t){var n=0,i=null,r=mu(t,"BYTERANGE");return r&&(n=r.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1),new er((function(){return[e]}),n,i)}(i,n),e.I.set(t,n)),e.I.get(t)):null}function Wu(e,t,n,i,r,a){var o=n.V,s=Ju(n.a,a);n=ec(o,"EXTINF").value.split(","),n=i+Number(n[0]),a=0;var l=null;return(o=_u(o,"EXT-X-BYTERANGE"))&&(a=o.value.split("@"),o=Number(a[0]),l=(a=a[1]?Number(a[1]):t.a+1)+o-1),new tr(i,n,(function(){return[s]}),a,l,e,r,0,1/0)}function Yu(e){if(e.b){for(var t=u(e.W),n=t.next();!n.done;n=t.next())e.b.ob(n.value);e.W=[]}}function qu(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,v,y,m,b,A,k,T,_;return O((function(w){switch(w.a){case 1:if(o=n.segments,l=wu(n.V,"EXT-X-MEDIA-SEQUENCE",0),e.c!=sc&&r.has(l)){c=r.get(l),w.u(2);break}if(null!=e.D){w.u(3);break}return s=zu(e,n.a,o[0].V,a),d=e,E(w,Xu(e,t,s,i,l,!1,o[0],a),4);case 4:d.D=w.b;case 3:c=e.D;case 2:o[0].a.split("/").pop(),h=wu(n.V,"EXT-X-DISCONTINUITY-SEQUENCE"),p=e.v.get(h)||0,f=[],g=u(ee(o)),v=g.next();case 5:if(v.done){w.u(7);break}if(y=v.value,m=y.Y,b=y.item,A=f[f.length-1],k=0==m?c:A.endTime,T=l+m,r.set(T,k),s=zu(e,n.a,b.V,a),!_u(b.V,"EXT-X-DISCONTINUITY")){w.u(8);break}return h++,E(w,function(e,t,n,i,r,a,o,s,l){var u,c;return O((function(d){return 1==d.a?(u=0,e.v.has(t)?(u=e.v.get(t),d.u(2)):E(d,Xu(e,n,i,r,a,!0,o,s),3)):(2!=d.a&&(c=d.b,u=l-c,e.v.set(t,u)),d.return(u))}))}(e,h,t,s,i,T,b,a,k),9);case 9:p=w.b;case 8:_=Wu(s,A,b,k,p,a),f.push(_),v=g.next(),w.u(5);break;case 7:return e.W.push(f),Yu(e),w.return(f)}}))}function $u(e,t){var n,i,r,a,o,s;return O((function(l){switch(l.a){case 1:return n=Rt,i=Wr(t.c(),t.b,t.a,e.i.retryParameters),e.i.hls.useFullSegmentsForStartTime?l.return(nc(e,i,n)):(r=Wr(t.c(),t.b,t.b+2048-1,e.i.retryParameters),k(l,2),E(l,nc(e,r,n),4));case 4:return a=l.b,l.return(a);case 2:if(7001==(o=w(l)).code)throw o;return Y("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),E(l,nc(e,i,n),5);case 5:return s=l.b,l.return(s)}}))}function Xu(e,t,n,i,r,a,o,s){var l,u,c,d,h,p,f,g;return O((function(v){switch(v.a){case 1:if(l=Wu(n,null,o,0,0,s),e.o&&!a&&(u=e.a.get(t),null!=(c=u.Id.get(r))))return v.return(c);if(i=i.toLowerCase(),rc.includes(i))throw Y("Raw formats are not yet supported.  Skipping "+i),new le(1,4,4035);if("video/webm"==i)throw Y("WebM in HLS is not yet supported.  Skipping."),new le(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){v.u(2);break}return d=[$u(e,l)],n&&d.push($u(e,n)),E(v,Promise.all(d),3);case 3:return h=v.b,p=h[0],f=h[1]||h[0],v.return(function(e,t,n,i){var r=0;if((new Br).box("moov",Fr).box("trak",Fr).box("mdia",Fr).ea("mdhd",(function(e){e.reader.skip(0==e.version?8:16),r=e.reader.K(),e.parser.stop()})).parse(i,!0),!r)throw new le(2,4,4030,e,t);var a=0,o=!1;if((new Br).box("moof",Fr).box("traf",Fr).ea("tfdt",(function(e){a=(0==e.version?e.reader.K():e.reader.rb())/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new le(2,4,4030,e,t);return a}(t,p.uri,p.data,f.data));case 2:if("video/mp2t"!=i){v.u(4);break}return E(v,$u(e,l),5);case 5:return g=v.b,v.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.qa())&&(a.seek(o+192),s=a.qa()),71!=s&&(a.seek(o+204),s=a.qa()),71!=s&&r(),a.Qd(1)}function r(){throw new le(2,4,4030,e,t)}for(var a=new Mr(n,0),o=0,s=0;;)if(o=a.C,71!=(s=a.qa())&&r(),8191==(8191&(n=a.Mb())))i();else if(16384&n){if(0!=(n=(48&a.qa())>>4)&&2!=n||r(),3==n&&(n=a.qa(),a.skip(n)),1==a.K()>>8)return a.skip(3),0!=(n=a.qa()>>6)&&1!=n||r(),0==a.qa()&&r(),(1073741824*((14&(n=a.qa()))>>1)+((65534&a.Mb())<<14|(65534&a.Mb())>>1))/9e4;i()}else i()}(t,g.uri,g.data));case 4:throw new le(2,4,4030,t)}}))}function Zu(e,t){if(1==t.length)return t[0];var n=Qu(e,t);if(null!=n)return n;throw new le(2,4,4025,t)}function Qu(e,t){for(var n=u(ic[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return"text"==e?"":null}function Ju(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=u(i)).next();!r.done;r=i.next()){var a=(r=r.value).slice(2,r.length-1),o=t.get(a);if(!o)throw new le(2,4,4039,a);n=n.replace(r,o)}return n}function ec(e,t){var n=_u(e,t);if(!n)throw new le(2,4,4024,t);return n}function tc(e,t){e.c=t,e.b&&e.b.Pb(e.c==sc),e.c!=sc||e.h.stop()}function nc(e,t,n){if(!e.m)throw new le(2,7,7001);return t=e.s.networkingEngine.request(n,t),At(e.m,t),t.promise}V("shaka.net.DataUriPlugin",Mu),Mu.parse=Nu,Tt("data",Nu),(i=Bu.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i,r=this;return O((function(a){return 1==a.a?(r.s=t,E(a,nc(r,_t([e],r.i.retryParameters),0),2)):3!=a.a?(n=a.b,r.J=n.uri,E(a,function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:if(0!=(n=Du(e.H,t,e.J)).type)throw new le(2,4,4022);for(var m=u(ku(n.V,"EXT-X-DEFINE")),b=m.next();!b.done;b=m.next()){var A=b.value;b=mu(A,"NAME"),A=mu(A,"VALUE"),b&&A&&(e.j.has(b)||e.j.set(b,A))}for(i=ku(n.V,"EXT-X-MEDIA"),b=(m=u(r=ku(n.V,"EXT-X-STREAM-INF"))).next();!b.done;b=m.next()){var T=b.value;A=mu(T,"AUDIO"),b=mu(T,"VIDEO");var _=mu(T,"SUBTITLES");if(T=Hu(e,T),_){var S=Qu("text",T);e.f.set(_,S),yt(T,S)}A&&(_=Zu("audio",T),e.f.set(A,_)),b&&(A=Zu("video",T),e.f.set(b,A))}return E(y,function(e,t){var n;return O((function(i){return 1==i.a?(t=t.filter((function(e){var t=mu(e,"URI")||"";return"SUBTITLES"!=mu(e,"TYPE")&&""!=t}))).length?E(i,Ku(e,t[0]),2):i.u(2):(n=t.slice(1).map((function(t){return Ku(e,t)})),E(i,Promise.all(n),0))}))}(e,i),2);case 2:for(b=(m=u(m=Tu(i,"CLOSED-CAPTIONS"))).next();!b.done;b=m.next())b=ju(_=b.value),A=bu(_,"GROUP-ID"),_=bu(_,"INSTREAM-ID"),e.A.get(A)||e.A.set(A,new Map),e.A.get(A).set(_,b);return E(y,function(e,t){var n,i,r;return O((function(a){return 1==a.a?(n=t.map((function(t){var n,i,r,a,o,s,l;return O((function(c){return 1==c.a?(n=mu(t,"FRAME-RATE"),i=Number(bu(t,"BANDWIDTH")),r=mu(t,"RESOLUTION"),a=u(r?r.split("x"):[null,null]),o=a.next().value,s=a.next().value,E(c,function(e,t,n,i){var r,a,o,s,l,c,d,h,p,f,g,v,y,m;return O((function(b){if(1==b.a)return r=Le,a=Hu(e,t),o=mu(t,"AUDIO"),s=mu(t,"VIDEO"),c=(l=o||s)&&e.g.has(l)?e.g.get(l):[],d={audio:o?c:[],video:s?c:[]},p=!1,f=bu(t,"URI"),g=d.audio.find((function(e){return e&&e.uc==f})),v=Qu(r.Da,a),y=n||i||v,1!=a.length||y?!c.length&&1<a.length?(h=r.Da,a=[a.join(",")]):d.audio.length&&g?(h=r.fb,p=!0):h=d.video.length?r.fb:r.Da:h=r.fb,p?b.u(2):E(b,function(e,t,n,i){var r,a,o,s;return O((function(l){if(1==l.a){if(r=Ju(bu(t,"URI"),e.j),e.a.has(r))return l.return(e.a.get(r));var u=mu(t,"CLOSED-CAPTIONS");return a="video"==i&&u&&"NONE"!=u?e.A.get(u):null,o=Zu(i,n),E(l,Gu(e,r,o,i,"und",!1,null,null,a,null),2)}return null==(s=l.b)?l.return(null):e.a.has(r)?l.return(e.a.get(r)):(e.a.set(r,s),l.return(s))}))}(e,t,a,h),3);if(2!=b.a&&(m=b.b),m)d[m.stream.type]=[m];else if(null===m)return b.return(null);return function(e){for(var t=(e=u(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}(d),b.return(d)}))}(e,t,r,n),2)):(l=c.b)?c.return(function(e,t,n,i,r,a,o){for(var s=u(n),l=s.next();!l.done;l=s.next()){var c=a,d=o;(l=l.value.stream)&&(l.width=Number(r)||void 0,l.height=Number(c)||void 0,l.frameRate=Number(d)||void 0)}for(r=e.i.disableAudio,(!t.length||r)&&(t=[null]),r=e.i.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=u(t),a=t.next();!a.done;a=t.next())for(a=a.value,o=u(n),s=o.next();!s.done;s=o.next()){var h=s.value;s=a?a.stream:null,l=h?h.stream:null,c=a?a.stream.drmInfos:null,d=h?h.stream.drmInfos:null,h=(h?h.uc:"")+" - "+(a?a.uc:""),s&&l&&c.length&&d.length&&!(0<bn(c,d).length)||e.ta.has(h)||(s={id:e.Ca++,language:s?s.language:"und",primary:!!s&&s.primary||!!l&&l.primary,audio:s,video:l,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0},r.push(s),e.ta.add(h))}return r}(e,l.audio,l.video,i,o,s,n)):c.return([])}))})),E(a,Promise.all(n),2)):(i=a.b,r=(r=i.reduce(Re,[])).filter((function(e){return null!=e})),a.return(r))}))}(e,r),3);case 3:return a=y.b,E(y,function(e,t){var n,i,r,a,o,s,l,c,d,h,p;return O((function(f){if(1==f.a)return n=Tu(t,"SUBTITLES"),i=n.map((function(t){var n,i;return O((function(r){if(1==r.a)return e.i.disableText?r.return(null):(k(r,2),E(r,Ku(e,t),4));if(2!=r.a)return n=r.b,r.return(n.stream);if(i=w(r),e.i.hls.ignoreTextStreamFailures)return r.return(null);throw i}))})),E(f,Promise.all(i),2);for(r=f.b,a=u(n),o=a.next();!o.done;o=a.next())if(s=o.value,l=bu(s,"GROUP-ID"),(c=e.f.get(l))&&(d=e.g.get(l)))for(h=u(d),p=h.next();!p.done;p=h.next())p.value.stream.codecs=c;return f.return(r.filter((function(e){return e})))}))}(e,i),4);case 4:if(o=y.b,!e.s)throw new le(2,7,7001);if(e.Ba&&0==a.length)throw new le(2,4,4034);for(l=s=1/0,c=u(e.a.values()),d=c.next();!d.done;d=c.next())h=d.value,s=Math.min(s,h.Jd),"text"!=h.stream.type&&(l=Math.min(l,h.Je-h.Jd));if(e.c!=sc?(e.b=new nr(0,e.i.defaultPresentationDelay||3*e.M),e.b.Pb(!1)):(e.b=new nr(null,0),e.b.Pb(!0)),Yu(e),e.c!=sc)e.ca=e.T,p=cc,e.c==p.Zd&&(f=e.b.rc,isNaN(e.i.availabilityWindowOverride)||(f=e.i.availabilityWindowOverride),e.b.pd(f));else for(e.b.za(l),e.b.offset(-s),g=u(e.a.values()),d=g.next();!d.done;d=g.next())(v=d.value).stream.segmentIndex.offset(-s),v.stream.segmentIndex.Ka(0,l);return e.o={presentationTimeline:e.b,variants:a,textStreams:o,offlineSessionIds:[],minBufferTime:0},e.s.makeTextStreamsForClosedCaptions(e.o),E(y,e.s.filter(e.o),0)}}))}(r,n.data),3)):(0<(i=r.ca)&&r.h.R(i),a.return(r.o))}))},i.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.m&&(e.push(this.m.destroy()),this.m=null),this.i=this.s=null,this.ta.clear(),this.o=null,this.a.clear(),this.g.clear(),this.f.clear(),this.j.clear(),Promise.all(e)},i.update=function(){var e,t,n,i=this;return O((function(r){if(1==r.a)return i.c==sc?r.return():(e=[],i.D=null,(t=Array.from(i.a.values())).length?E(r,Fu(i,t[0]),2):r.u(2));for(n=1;n<t.length;n++)e.push(Fu(i,t[n]));return E(r,Promise.all(e),0)}))},i.onExpirationUpdated=function(){},i.Kb=function(){var e,t,n=this;return O((function(i){return 1==i.a?n.s?(k(i,2),E(i,n.update(),4)):i.return():2!=i.a?(e=n.ca,n.h.R(e),_(i,0)):(t=w(i),n.s?(t.severity=1,n.s.onError(t),n.h.R(.1),void A(i)):i.return())}))},V("shaka.hls.HlsParser",Bu);var ic={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},rc=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],ac={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},oc={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=bu(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Oe("com.widevine.alpha",[{initDataType:"cenc",initData:t=ae((t=Uu(t=bu(e,"URI"))).data)}]),(e=mu(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null}},sc="VOD",lc="EVENT",uc="LIVE",cc={$d:sc,sf:lc,Zd:uc};function dc(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Nd:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Ve(t)}catch(e){}throw new le(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function hc(){}function pc(e,t,n,i){var r=new mc;Ft(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new vc,o={wd:!1,Wd:!1};if(e=new at(e=function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:return a=gc,o=yc,c=u=0,d=Date.now(),k(y,2),E(y,a(e,n),4);case 4:return s=y.b,h=s.clone().body.getReader(),f=(p=s.headers.get("Content-Length"))?parseInt(p,10):0,new o({start:function(e){function t(){var n,i;return O((function(a){switch(a.a){case 1:return k(a,2),E(a,h.read(),4);case 4:n=a.b,_(a,3);break;case 2:return w(a),a.return();case 3:n.done||(u+=n.value.byteLength),(100<(i=Date.now())-d||n.done)&&(r(i-d,u-c,f-u),c=u,d=i),n.done?e.close():(e.enqueue(n.value),t()),A(a)}}))}t()}}),E(y,s.arrayBuffer(),5);case 5:l=y.b,_(y,3);break;case 2:if(g=w(y),i.wd)throw new le(1,1,7001,e,t);if(i.Wd)throw new le(1,1,1003,e,t);throw new le(1,1,1002,e,g,t);case 3:return v={},s.headers.forEach((function(e,t){v[t.trim()]=e})),y.return(dc(v,l,s.status,e,s.url,t))}}))}(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.wd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new nt((function(){o.Wd=!0,a.abort()}));s.R(t/1e3),e.finally((function(){s.stop()}))}return e}function fc(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}Ji.m3u8=function(){return new Bu},Qi["application/x-mpegurl"]=function(){return new Bu},Qi["application/vnd.apple.mpegurl"]=function(){return new Bu},V("shaka.net.HttpFetchPlugin",hc),hc.isSupported=fc,hc.parse=pc;var gc=e.fetch,vc=e.AbortController,yc=e.ReadableStream,mc=e.Headers;function bc(){}function Ec(e,t,n,i){var r=new Ac,a=Date.now(),o=0;return new at(new Promise((function(s,l){for(var c in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){l(new le(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=u(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=dc(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){l(e)}},r.onerror=function(t){l(new le(1,1,1002,e,t,n))},r.ontimeout=function(){l(new le(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(c.toLowerCase(),t.headers[c]);r.send(t.body)})),(function(){return r.abort(),Promise.resolve()}))}fc()&&(Tt("http",pc,2),Tt("https",pc,2)),V("shaka.net.HttpXHRPlugin",bc),bc.parse=Ec;var Ac=e.XMLHttpRequest;function kc(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Tc(e){var t=this;this.N=e,this.a=new Map,this.F=new Dt((function(){var e=Array.from(t.a.values());return Promise.all(e.map((function(e){return e.catch((function(){}))})))})),this.b=[],this.Md=function(){},this.Ld=function(){},this.Cb=new kc}function _c(e){var t=e.b.map((function(e){return e()}));return e.b=[],Promise.all(t)}function wc(e,t,n,i,r,a){Pt(e.F);var o=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.Cb,i);return i=(e.a.get(t)||Promise.resolve()).then((function(){var t,i,s,l,u,c,d;return O((function(h){if(1==h.a)return E(h,function(e,t){var n,i,r,a;return O((function(o){return 1==o.a?(n=Rt,i=e.N.request(n,t),r=function(){return i.abort()},e.b.push(r),E(o,i.promise,2)):(a=o.b,yt(e.b,r),o.return(a.data))}))}(e,n),2);if(t=h.b,e.F.a)throw new le(2,9,7001);if(r)for(l in i=ae(t),(s=new Zs(i)).data)u=Number(l),c=s.data[u],d=s.a[u],e.Ld(c,d);e.Cb.close(o,t.byteLength);var p=e.Cb;return e.Md(0==p.b?0:p.f/p.b,e.Cb.a),h.return(a(t))}))})),e.a.set(t,i),i}function Sc(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new Me,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Cc(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(){var e;return O((function(i){if(1==i.a)return null==r.result?(n(),i.return()):(e=r.result,E(i,t(e.key,e.value,e),2));e.continue(),A(i)}))}}))}function Rc(e){this.b=e,this.a=[]}function Ic(e,t){return xc(e,t,"readwrite")}function xc(e,t,n){var i=new Sc(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){yt(e.a,i)}),(function(){yt(e.a,i)})),i}function Dc(e,t,n){this.b=new Rc(e),this.c=t,this.a=n}function Pc(e){return Promise.reject(new le(2,9,9011,"Cannot add new value to "+e))}function Oc(e,t,n,i){t=(e=Ic(e.b,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Vb:r.Vb},a=n.next())r.Vb=a.value,t.delete(r.Vb).onsuccess=function(e){return function(){return i(e.Vb)}}(r);return e.promise()}function Lc(e,t,n){var i,r,a,o,s,l,c;return O((function(d){if(1==d.a){for(i=xc(e.b,t,"readonly"),r=i.store(),a={},o=[],s={},l=u(n),c=l.next();!c.done;s={wb:s.wb,ub:s.ub},c=l.next())s.ub=c.value,s.wb=r.get(s.ub),s.wb.onsuccess=function(e){return function(){null==e.wb.result&&o.push(e.ub),a[e.ub]=e.wb.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new le(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function Mc(e){this.a=new Rc(e)}function Nc(){this.a=new Map}function Uc(e,t,n){if(!(e=e.a.get(t)))throw new le(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new le(2,9,9013,"Could not find cell with name "+n);return t}function Bc(e,t){Fc.set(e,t)}Tt("http",Ec,1),Tt("https",Ec,1),kc.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Tc.prototype.destroy=function(){return this.F.destroy()},Sc.prototype.abort=function(){var e=this;return O((function(t){if(1==t.a){try{e.c.abort()}catch(e){}return k(t,2),E(t,e.a,4)}if(2!=t.a)return _(t,0);w(t),A(t)}))},Sc.prototype.store=function(){return this.b},Sc.prototype.promise=function(){return this.a},Rc.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(i=Dc.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Pc(this.c)},i.removeSegments=function(e,t){return Oc(this,this.c,e,t)},i.getSegments=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,Lc(n,n.c,e),2):(t=i.b,i.return(t.map((function(e){return n.xd(e)}))))}))},i.addManifests=function(){return Pc(this.a)},i.updateManifestExpiration=function(e,t){var n=Ic(this.b,this.a),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Oc(this,this.a,e,t)},i.getManifests=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,Lc(n,n.a,e),2):(t=i.b,i.return(Promise.all(t.map((function(e){return n.Bb(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return O((function(i){return 1==i.a?(e=xc(n.b,n.a,"readonly"),t=new Map,E(i,Cc(e,(function(e,i){var r;return O((function(a){if(1==a.a)return E(a,n.Bb(i),2);r=a.b,t.set(e,r),A(a)}))})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},i.xd=function(e){return e},i.Bb=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,l,c=this;return O((function(d){if(1==d.a){for(n=Ic(c.b,e),i=n.store(),r=[],a={},o=u(t),s=o.next();!s.done;a={Wb:a.Wb},s=o.next())l=s.value,a.Wb=i.add(l),a.Wb.onsuccess=function(e){return function(){r.push(e.Wb.result)}}(a);return E(d,n.promise(),2)}return d.return(r)}))},Mc.prototype.destroy=function(){return this.a.destroy()},Mc.prototype.getAll=function(){var e,t,n=this;return O((function(i){return 1==i.a?(e=xc(n.a,"session-ids","readonly"),t=[],E(i,Cc(e,(function(e,n){t.push(n)})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},Mc.prototype.add=function(e){for(var t=Ic(this.a,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Mc.prototype.remove=function(e){var t,n=this;return O((function(i){return 1==i.a?E(i,Cc(t=Ic(n.a,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):E(i,t.promise(),0)}))},Nc.prototype.destroy=function(){for(var e=[],t=u(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Nc.prototype.init=function(){var e=this;Fc.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=u(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",Nc),Nc.unregister=function(e){Fc.delete(e)},Nc.register=Bc,Nc.prototype.destroy=Nc.prototype.destroy;var Fc=new Map;function Vc(){Dc.apply(this,arguments)}function Hc(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?jc(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=jc(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}(n,e.startTime,t)}))}function jc(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new le(2,9,9004,"Could not parse uri "+e)}function Kc(){Dc.apply(this,arguments)}function Gc(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}function zc(){Dc.apply(this,arguments)}function Wc(){this.h=this.f=this.c=this.b=this.a=this.g=null}function Yc(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function qc(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new Yc(t,n,i,Number(e[4])):null}function $c(e,t){this.b=e,this.a=t}function Xc(e,t){var n=new nr(null,0);n.za(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=u(t),o=a.next();!o.done;o=a.next()){var s=u(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=u(n),o=a.next();!o.done;o=a.next())for(s=u(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=u(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=Zc(e,r,i),s=u(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=u(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Zc(e,r,i),o=u(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return"text"==e.type})).map((function(t){return Zc(e,t,n)}));var a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=u(i.values()),s=o.next();!s.done;s=o.next())(s=s.value).audio&&s.audio.encrypted&&(s.audio.drmInfos=a),s.video&&s.video.encrypted&&(s.video.drmInfos=a);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r}}function Zc(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new Yc("segment",e.b,e.a,t.dataKey);return new tr(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Yc("segment",e.b,e.a,t);return new er((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd)}(e,t)}));return n.ob(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new kr(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,closedCaptions:t.closedCaptions}}function Qc(){this.a=null}function Jc(){}function ed(e){var t=qc(e);return e=t&&"manifest"==t.a?lt(e={uri:e,Nd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.a?function(e,t){var n=new Nc;return lt(void 0).U((function(){return n.init()})).U((function(){return Uc(n,t.ya(),t.ba())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):ot(new le(2,1,9004,e))}function td(e,t,n){var i,r,a,o,s,l;return O((function(c){switch(c.a){case 1:i=[];for(var d=[],h=u(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=u(d),v=g.next();!v.done;v=g.next())if(nd((v=v.value).info,p)){v.sessionIds.push(p.sessionId),f=!0;break}f||d.push({info:p,sessionIds:[p.sessionId]})}r=u(d),a=r.next();case 2:if(a.done){c.u(4);break}return o=a.value,s=function(e,t,n){var i,r;return O((function(a){switch(a.a){case 1:return i=new tn({nb:t,onError:function(){},oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(a,2),i.configure(e),E(a,function(e,t,n,i,r,a){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}],o.set(t,r),hn(e,o)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:_(a,3);break;case 2:return w(a),E(a,i.destroy(),5);case 5:return a.return([]);case 3:return k(a,6),E(a,an(i),8);case 8:_(a,7);break;case 6:return w(a),E(a,i.destroy(),9);case 9:return a.return([]);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return O((function(t){return 1==t.a?(k(t,2),E(t,function(e,t){var n,i,r;return O((function(a){return 1==a.a?E(a,pn(e,t),2):(n=a.b)?(i=[],(r=e.f.get(n))&&(r.Aa=new Me,i.push(r.Aa)),i.push(n.remove()),E(a,Promise.all(i),0)):a.return()}))}(i,e),4)):2!=t.a?(r.push(e),_(t,0)):(w(t),void A(t))}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,o),E(c,s,5);case 5:l=c.b,i=i.concat(l),a=r.next(),c.u(2);break;case 4:return c.return(i)}}))}function nd(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&mt(e.audioCapabilities,t.audioCapabilities,n)&&mt(e.videoCapabilities,t.videoCapabilities,n)}function id(e,t){var n=Xc(new $c(e.ya(),e.ba()),t),i=t.appMetadata||{};return n=rd(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function rd(e){for(var t=[],n=function(e){return e.filter((function(e){return Pi(e)}))}(e.variants),i=(n=u(n)).next();!i.done;i=n.next())t.push(Ci(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(Ri(n.value));return t}function ad(){this.a={}}function od(e,t){var n=e.a[t];return null==n&&(n=0),n}function sd(e){var t=this;if(e&&e.constructor!=Ma)throw new le(2,9,9008);this.N=this.i=null,e?(this.i=e.i,this.N=e.Fb()):(this.i=Sa(),this.N=new kt),this.sc=[],this.Lb=[],this.dd=[],this.a=new Map,this.a.set(null,Promise.resolve(null)),this.b=new Map;var n=!e;this.F=new Dt((function(){var e,i,r,a,o;return O((function(s){switch(s.a){case 1:return E(s,Promise.all(t.dd.map((function(e){return _c(e)}))),2);case 2:for(e=function(){},i=[],r=u(t.Lb),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.u(4);break}return E(s,t.N.destroy(),4);case 4:t.i=null,t.N=null,A(s)}}))}))}function ld(){if(Wt())e:{for(var e=u(Fc.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function ud(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function cd(e,t,n){return O((function(i){return E(i,function(e,t,n,i){var r,a,o;return O((function(s){return 1==s.a?i.drmInfo?(r=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new le(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:ud(i,!1),videoCapabilities:ud(i,!0)}})),E(s,td(t,e,a),2)):s.return():3!=s.a?(o=s.b,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.N,e.i.drm,n,t),0)}))}function dd(e,t,n){function i(){}var r=function(e){for(var t=[],n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.push(i.initSegmentKey),t.push(i.dataKey);return t}(n);return id(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function hd(e,t,n,i,r,a,o){var s={id:a.id,originalId:a.originalId,primary:a.primary,type:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,encrypted:a.encrypted,keyIds:a.keyIds,segments:[],variantIds:[],roles:a.roles,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,closedCaptions:a.closedCaptions},l=a.id;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(a,r.presentationTimeline.Ra(),(function(r){var u=function(e,t,n,i,r,a,o,s){return e.a.has(o)?e.a.get(o):(s=Wr(o.c(),o.b,o.a,s.streaming.retryParameters),t=wc(t,n,s,.5*od(a,i),!0,(function(t){var n;return O((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.sc.push(n[0]),i.return(n[0]))}))})),e.a.set(o,t),t)}(e,t,l,a.id,n,i,r.f,o),c=function(e,t,n,i,r,a,o,s){var l=[o.c()[0],o.b,o.a].join("-");return e.b.has(l)?e.b.get(l):(s=Wr(o.c(),o.b,o.a,s.streaming.retryParameters),t=wc(t,n,s,function(e,t,n){return n=n.endTime-n.startTime,od(e,t)*n}(a,i,o),!1,(function(t){var n;return O((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.sc.push(n[0]),i.return(n[0]))}))})),e.b.set(l,t),t)}(e,t,l,a.id,n,i,r,o);!function(e,t,n){Pt(e.F);var i=(e.a.get(t)||Promise.resolve()).then((function(){return O((function(e){return E(e,n(),0)}))}));e.a.set(t,i)}(t,l,(function(){var e,t;return O((function(n){return 1==n.a?E(n,u,2):3!=n.a?(e=n.b,E(n,c,3)):(t=n.b,s.segments.push({initSegmentKey:e,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,dataKey:t}),void A(n))}))}))})),s}function pd(e){if(e.F.a)throw new le(2,9,7001)}function fd(){if(!ld())throw new le(2,9,9e3)}function gd(e,t){return O((function(n){return 1==n.a?(e.Lb.push(t),T(n),E(n,t,4)):2!=n.a?n.return(n.b):(S(n),yt(e.Lb,t),C(n,0))}))}function vd(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(Vc,Dc),Vc.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return O((function(o){return n=Ic(a.b,a.a),i=n.store(),r=new Me,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new le(2,9,9012,"Could not find values for "+e))},E(o,Promise.all([n.promise(),r]),0)}))},Vc.prototype.Bb=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=Hc(e.periods[n],r),t.push(a);return E(s,Kl(t),2)}return o=s.b,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},Vc.prototype.xd=function(e){return{data:e.data}},v(Kc,Dc),Kc.prototype.Bb=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=u(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(Gc(h,l.startTime,l.startTime+r));a=c,t.push(a)}return E(s,Kl(t),2)}return o=s.b,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o})}))},v(zc,Dc),zc.prototype.hasFixedKeySpace=function(){return!1},zc.prototype.addSegments=function(e){return this.add(this.c,e)},zc.prototype.addManifests=function(e){return this.add(this.a,e)},zc.prototype.Bb=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Wc.prototype).init=function(){var t=this,n=new Me,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result;t.g=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new Vc(e,"segment","manifest"):null,t.a=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new Kc(e,"segment-v2","manifest-v2"):null,t.b=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new Kc(e,"segment-v3","manifest-v3"):null,t.c=r,r=(r=e.objectStoreNames).contains("manifest-v5")&&r.contains("segment-v5")?new zc(e,"segment-v5","manifest-v5"):null,t.f=r,e=e.objectStoreNames.contains("session-ids")?new Mc(e):null,t.h=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new le(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return O((function(t){switch(t.a){case 1:if(!e.a){t.u(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.u(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.u(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.f){t.u(8);break}return E(t,e.f.destroy(),8);case 8:if(!e.h){t.u(10);break}return E(t,e.h.destroy(),10);case 10:e.g&&e.g.close(),A(t)}}))},i.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),this.f&&e.set("v5",this.f),e},i.getEmeSessionCell=function(){return this.h},i.erase=function(){var t=this;return O((function(n){switch(n.a){case 1:if(!t.a){n.u(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.u(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.u(6);break}return E(n,t.c.destroy(),6);case 6:if(!t.f){n.u(8);break}return E(n,t.f.destroy(),8);case 8:return t.g&&t.g.close(),E(n,function(){var t=new Me,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new le(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.g=null,t.a=null,t.b=null,t.c=null,t.f=null,E(n,t.init(),0)}}))},Bc("idb",(function(){return Zt("CrKey")||!e.indexedDB?null:new Wc})),Yc.prototype.ya=function(){return this.g},Yc.prototype.ba=function(){return this.f},Yc.prototype.key=function(){return this.c},Yc.prototype.toString=function(){return this.b},(i=Qc.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,l=this;return O((function(u){switch(u.a){case 1:if(n=qc(e),l.a=n,null==n||"manifest"!=n.a)throw new le(2,1,9004,e);return i=new Nc,T(u),E(u,i.init(),4);case 4:return E(u,Uc(i,n.ya(),n.ba()),5);case 5:return E(u,u.b.getManifests([n.key()]),6);case 6:return r=u.b,a=r[0],o=new $c(n.ya(),n.ba()),s=Xc(o,a),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return S(u),E(u,i.destroy(),7);case 7:C(u,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,l,u=this;return O((function(c){switch(c.a){case 1:return n=u.a,i=new Nc,k(c,2,3),E(c,i.init(),5);case 5:return E(c,Uc(i,n.ya(),n.ba()),6);case 6:return E(c,(r=c.b).getManifests([n.key()]),7);case 7:if(a=c.b,o=a[0],s=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!s||!l){c.u(3);break}return E(c,r.updateManifestExpiration(n.key(),t),3);case 3:return S(c),E(c,i.destroy(),10);case 10:C(c,0);break;case 2:w(c),c.u(3)}}))},Qi["application/x-offline-manifest"]=function(){return new Qc},V("shaka.offline.OfflineScheme",Jc),Jc.plugin=ed,Tt("offline",ed),(i=sd.prototype).destroy=function(){return this.F.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=_a(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(_e("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Ca(this.i,e)},i.getConfiguration=function(){var e=Sa();return Ca(e,this.i,Sa()),e},i.Fb=function(){return this.N},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Tc(this.N);this.dd.push(a);var o=new at(t=function(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,v;return O((function(y){switch(y.a){case 1:return fd(),s=o=null,l=new Nc,d=c=null,k(y,2,3),E(y,i(),5);case 5:return o=y.b,E(y,function(e,t,n,i){var r,a,o,s,l;return O((function(u){if(1==u.a)return r=null,a=e.N,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},n.configure(i.manifest),pd(e),E(u,n.start(t,o),2);if(3!=u.a)return s=u.b,pd(e),l=vd(s),E(u,Promise.all(Q(l,(function(e){return e.createSegmentIndex()}))),3);if(pd(e),r)throw r;return u.return(s)}))}(e,t,o,r),6);case 6:if(h=y.b,pd(e),h.presentationTimeline.S()||h.presentationTimeline.Ua())throw new le(2,9,9005,t);return E(y,function(e,t,n,i){var r;return O((function(a){switch(a.a){case 1:return(r=new tn({nb:e.N,onError:n,oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),E(a,function(e,t,n){return e.v=[],e.A=n,rn(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,an(r),3);case 3:return E(a,on(r),4);case 4:return a.return(r)}}))}(e,h,(function(e){d=d||e}),r),7);case 7:if(s=y.b,pd(e),d)throw d;return E(y,e.gb(h,s,r),8);case 8:return E(y,l.init(),9);case 9:return pd(e),E(y,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{ya:n,ba:i},ba:e})}))})),t)return t;throw new le(2,9,9013,"Could not find a cell that supports add-operations")}(l),10);case 10:return c=y.b,pd(e),E(y,function(e,t,n,i,r,a,o,s){var l,c,d,h,p,f,g,v,y,m;return O((function(b){switch(b.a){case 1:return l=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=rd(t),appMetadata:n}}(r,i,a),c=o.offline.progressCallback,function(e,t,n){e.Md=t,e.Ld=n}(s,(function(e,t){l.size=t,c(l,e)}),(function(e,t){p&&o.offline.usePersistentLicense&&f==t&&sn(n,"cenc",e)})),d=i.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),h=i.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),f=null,(p=d&&!h)&&(g=n.c,f=yd.get(g.keySystem)),T(b),y=v=function(e,t,n,i,r,a,o,s){for(var l=new ad,c=u(r.variants),d=c.next();!d.done;d=c.next()){var h=l,p=(d=d.value).audio,f=d.video;if(p&&!f&&(h.a[p.id]=p.bandwidth||d.bandwidth),!p&&f&&(h.a[f.id]=f.bandwidth||d.bandwidth),p&&f){var g=p.bandwidth||393216,v=f.bandwidth||d.bandwidth-g;0>=v&&(v=d.bandwidth),h.a[p.id]=g,h.a[f.id]=v}}for(c=u(r.textStreams),h=c.next();!h.done;h=c.next())l.a[h.value.id]=52;for(h=vd(r),c=new Map,h=u(h),d=h.next();!d.done;d=h.next())d=d.value,p=hd(e,t,n,l,r,d,s),c.set(d.id,p);for(e=u(r.variants),d=e.next();!d.done;d=e.next())(t=d.value).audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return e=Array.from(c.values()),s=s.offline.usePersistentLicense,(t=i.c)&&s&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:a,duration:r.presentationTimeline.getDuration(),size:0,expiration:i.Eb(),streams:e,sessionIds:s?cn(i):[],drmInfo:t,appMetadata:o}}(e,s,t,n,i,r,a,o),E(b,function(e){return O((function(t){return 1==t.a?E(t,Promise.all(e.a.values()),2):t.return(e.Cb.a)}))}(s),4);case 4:if(y.size=b.b,v.expiration=n.Eb(),m=cn(n),v.sessionIds=o.offline.usePersistentLicense?m:[],d&&o.offline.usePersistentLicense&&!m.length)throw new le(2,9,9007);return b.return(v);case 2:return S(b),E(b,s.destroy(),5);case 5:C(b,0)}}))}(e,c.ba,s,h,t,n,r,a),11);case 11:if(p=y.b,pd(e),d)throw d;return E(y,c.ba.addManifests([p]),12);case 12:return f=y.b,pd(e),g=new Yc("manifest",c.path.ya,c.path.ba,f[0]),y.return(id(g,p));case 3:return S(y),e.sc=[],E(y,l.destroy(),13);case 13:if(!o){y.u(14);break}return E(y,o.stop(),14);case 14:if(!s){y.u(16);break}return E(y,s.destroy(),16);case 16:C(y,0);break;case 2:if(v=w(y),!c){y.u(18);break}return E(y,c.ba.removeSegments(e.sc,(function(){})),18);case 18:throw d||v}}))}(this,e,t||{},(function(){var t;return O((function(a){return 1==a.a?E(a,Xi(e,i.N,r.manifest.retryParameters,n||null),2):(t=a.b,a.return(De(t)))}))}),r,a),(function(){return _c(a)}));return o.finally((function(){yt(i.dd,a)})),o.then=function(e){return _e("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},function(e,t){var n=t.promise;return e.Lb.push(n),t.finally((function(){yt(e.Lb,n)}))}(this,o)},i.Be=function(){return _e("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},i.gb=function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,v,y,m;return O((function(b){if(1==b.a){for(i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return wi(e,t,n)}))}(e,n.restrictions,i),function(e){e.variants=e.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&ti(e.audio)),e.video&&(t=t&&ti(e.video)),t}))}(e),function(e,t){e.variants=e.variants.filter((function(e){return mn(t,e)}))}(e,t),r=[],a=n.preferredAudioChannelCount,_i(e,a),o=u(e.variants),s=o.next();!s.done;s=o.next())l=s.value,r.push(Ci(l));for(c=u(e.textStreams),d=c.next();!d.done;d=c.next())h=d.value,r.push(Ri(h));return E(b,n.offline.trackSelectionCallback(r),2)}for(p=b.b,f=new Set,g=new Set,v=u(p),y=v.next();!y.done;y=v.next())"variant"==(m=y.value).type&&f.add(m.id),"text"==m.type&&g.add(m.id);e.variants=e.variants.filter((function(e){return f.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return g.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),i=n.next();!i.done;i=n.next())for(var r=(i=u(t)).next();!r.done;r=i.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),i=n.next();!i.done;i=n.next());}(e),A(b)}))},i.remove=function(e){return gd(this,function(e,t){var n,i,r,a,o,s;return O((function(l){switch(l.a){case 1:if(fd(),null==(n=qc(t))||"manifest"!=n.a)throw new le(2,9,9004,t);return i=n,r=new Nc,T(l),E(l,r.init(),4);case 4:return E(l,Uc(r,i.ya(),i.ba()),5);case 5:return E(l,(a=l.b).getManifests([i.key()]),6);case 6:return o=l.b,s=o[0],E(l,Promise.all([cd(e,s,r),dd(a,i,s)]),2);case 2:return S(l),E(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.Te=function(){return gd(this,function(e){var t,n,i,r,a,o,s,l,c,d;return O((function(h){switch(h.a){case 1:return fd(),t=e.N,n=e.i.drm,i=new Nc,r=!1,T(h),E(h,i.init(),4);case 4:a=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),o=u(a),s=o.next();case 5:if(s.done){h.u(2);break}return E(h,(l=s.value).getAll(),8);case 8:return c=h.b,E(h,td(n,t,c),9);case 9:return d=h.b,E(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),s=o.next(),h.u(5);break;case 2:return S(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}(this))},i.list=function(){return gd(this,O((function(i){switch(i.a){case 1:return fd(),e=[],t=new Nc,T(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({ya:n,ba:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return O((function(n){if(1==n.a)return E(n,i.getAllManifests(),2);n.b.forEach((function(n,i){var r=id(new Yc("manifest",t.ya,t.ba,i),n);e.push(r)})),A(n)}))}))})),E(i,n,2);case 2:return S(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},V("shaka.offline.Storage",sd),sd.deleteAll=function(){var e;return O((function(t){return 1==t.a?(e=new Nc,T(t),E(t,function(e){var t,n;return O((function(i){return 1==i.a?(t=Array.from(e.a.values()),(n=0<t.length)||Fc.forEach((function(e){(e=e())&&t.push(e)})),E(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.u(0):E(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.a?(S(t),E(t,e.destroy(),5)):C(t,0)}))},sd.prototype.list=sd.prototype.list,sd.prototype.removeEmeSessions=sd.prototype.Te,sd.prototype.remove=sd.prototype.remove,sd.prototype.getStoreInProgress=sd.prototype.Be,sd.prototype.store=sd.prototype.store,sd.prototype.getNetworkingEngine=sd.prototype.Fb,sd.prototype.getConfiguration=sd.prototype.getConfiguration,sd.prototype.configure=sd.prototype.configure,sd.prototype.destroy=sd.prototype.destroy,sd.support=ld;var yd=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function md(){}function bd(e,t){for(var n={priority:t||0,ce:e},i=u(ee(Ed)),r=i.next();!r.done;r=i.next()){var a=(r=r.value).Y;if(r.item.priority<n.priority)return void Ed.splice(a,0,n)}Ed.push(n)}zo.offline=ld,V("shaka.polyfill",md),md.register=bd,md.installAll=function(){for(var e=u(Ed),t=e.next();!t.done;t=e.next()){t=t.value;try{t.ce()}catch(e){Y("Error installing polyfill!",e)}}};var Ed=[];function Ad(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function kd(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function Td(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function _d(e,t){try{var n=new Cd(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function wd(e){var t=this.mediaKeys;return t&&t!=e&&Id(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Id(e,this):Promise.resolve()}function Sd(e){if(oe(e=ae(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=He(e=Fe(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=re(e),this.dispatchEvent(t)}function Cd(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=u(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(i.audioCapabilities.push(l),o=!0));if(r.videoCapabilities)for(l=(r=u(r.videoCapabilities)).next();!l.done;l=r.next())(s=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Rd(e){this.a=new WebKitMediaKeys(e),this.b=new Ot}function Id(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"webkitneedkey",Sd);try{return lr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.webkitSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function xd(e){pt.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new Ot,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new Pd}function Dd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function Pd(){this.size=0,this.a=void 0}function Od(e,t){try{var n=new Md(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ld(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=re(function(e){if(!e)return e;var t=new Zs(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=u(t.data)).next();!i.done;n={Tb:n.Tb},i=t.next())n.Tb=i.value,e.some(function(e){return function(t){return ne(t,e.Tb)}}(n))||e.push(n.Tb);return Ze.apply(ze,c(e))}(e.initData)),this.dispatchEvent(t)}}function Md(e,t){this.keySystem=e;for(var n=!1,i=u(t),r=i.next();!r.done;r=i.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.audioCapabilities.push(l),n=!0));if(r.videoCapabilities)for(l=(s=u(r.videoCapabilities)).next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Nd(e){var t=this.mediaKeys;return t&&t!=e&&Bd(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Bd(e,this):Promise.resolve()}function Ud(e){this.a=new MSMediaKeys(e),this.b=new Ot}function Bd(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"msneedkey",Ld);try{return lr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.msSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Fd(e){pt.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new Ot,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new Hd}function Vd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function Hd(){this.size=0,this.a=void 0}function jd(){return Promise.reject(Error("The key system specified is not supported."))}function Kd(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Gd(){throw new TypeError("Illegal constructor.")}function zd(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Wd(e){return rh?rh+e.charAt(0).toUpperCase()+e.slice(1):e}function Yd(e,t){try{var n=new $d(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function qd(e){var t=this.mediaKeys;return t&&t!=e&&Zd(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Zd(e,this),Promise.resolve()}function $d(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=u(t),o=a.next();!o.done;o=a.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var c=u(o.audioCapabilities),d=c.next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType.split(";")[0],this.a)&&(s.audioCapabilities.push(d),i=!0));if(o.videoCapabilities)for(d=(c=u(o.videoCapabilities)).next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),i=!0));if(l||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Xd(e){this.g=e,this.a=null,this.b=new Ot,this.c=[],this.f=new Map}function Zd(e,t){e.a=t,e.b.Xa();var n=rh;t&&(e.b.l(t,n+"needkey",(function(t){var n=document.createEvent("CustomEvent");n.initCustomEvent("encrypted",!1,!1,null),n.initDataType="cenc",n.initData=re(t.initData),e.a.dispatchEvent(n)})),e.b.l(t,n+"keymessage",(function(t){var n=Qd(e,t.sessionId);n&&(t=new dt("message",{messageType:null==n.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),n.b&&(n.b.resolve(),n.b=null),n.dispatchEvent(t))})),e.b.l(t,n+"keyadded",(function(t){(t=Qd(e,t.sessionId))&&(nh(t,"usable"),t.a&&t.a.resolve(),t.a=null)})),e.b.l(t,n+"keyerror",(function(t){var n=Qd(e,t.sessionId);n&&n.handleError(t)})))}function Qd(e,t){var n=e.f.get(t);return n||((n=e.c.shift())?(n.sessionId=t,e.f.set(t,n),n):null)}function Jd(e,t,n){pt.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new ih}function eh(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=ae(He("LOAD_SESSION|"+n));else{var r=He("PERSISTENT|");i=Ze(r,t)}else i=ae(t)}catch(e){return Promise.reject(e)}e.b=new Me;var a=Wd("generateKeyRequest");try{e.f[a](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new nt((function(){try{e.f[a](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).R(.01)}return e.b}function th(e,t,n){if(e.a)e.a.then((function(){return th(e,t,n)})).catch((function(){return th(e,t,n)}));else{if(e.a=t,"webkit-org.w3.clearkey"==e.c){var i=Be(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.a.reject(Error("Response is not a valid JSON Web Key Set.")),e.a=null),i=qe(r.keys[0].k),r=qe(r.keys[0].kid)}else i=ae(n),r=null;var a=Wd("addKey");try{e.f[a](e.c,i,r,e.sessionId)}catch(t){e.a.reject(t),e.a=null}}}function nh(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function ih(){this.size=0,this.a=void 0}bd((function(){op()}),-1),bd((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ad),document.addEventListener("webkitfullscreenerror",Ad),document.addEventListener("mozfullscreenchange",Ad),document.addEventListener("mozfullscreenerror",Ad),document.addEventListener("MSFullscreenChange",Ad),document.addEventListener("MSFullscreenError",Ad)}})),bd((function(){Zt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=kd)})),bd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),bd((function(){})),bd((function(){var t=Xt();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(Td(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):Td()):(Zt("Tizen 2")||Zt("Tizen 3")||Zt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Gt(t)[0]&&e(t)}}())})),Cd.prototype.createMediaKeys=function(){var e=new Rd(this.keySystem);return Promise.resolve(e)},Cd.prototype.getConfiguration=function(){return this.a},Rd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new xd(this.a,e)},Rd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(xd,pt),(i=xd.prototype).generateRequest=function(e,t){var n=this;this.a=new Me;try{var i=this.g.createSession("video/mp4",ae(t));this.f=i,this.sessionId=i.sessionId||"",this.b.l(this.f,"webkitkeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new dt("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:re(e.message)}),n.dispatchEvent(e)})),this.b.l(i,"webkitkeyadded",(function(){n.c&&(Dd(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Dd(n,"output-not-allowed");break;default:Dd(n,"internal-error")}})),Dd(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new Me;try{this.f.update(ae(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Pd.prototype).forEach=function(e){this.a&&e(this.a,wn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=wn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},bd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wd,e.MediaKeys=Rd,e.MediaKeySystemAccess=Cd,navigator.requestMediaKeySystemAccess=_d)})),Md.prototype.createMediaKeys=function(){var e=new Ud(this.keySystem);return Promise.resolve(e)},Md.prototype.getConfiguration=function(){return this.a},Ud.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Fd(this.a,e)},Ud.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Fd,pt),(i=Fd.prototype).generateRequest=function(e,t){var n=this;this.a=new Me;try{this.f=this.g.createSession("video/mp4",ae(t),null),this.b.l(this.f,"mskeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new dt("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:re(e.message)}),n.dispatchEvent(e)})),this.b.l(this.f,"mskeyadded",(function(){n.a?(Vd(n,"usable"),n.a.resolve(),n.a=null):n.c&&(Vd(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(this.f,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Vd(n,"output-not-allowed");break;default:Vd(n,"internal-error")}})),Vd(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new Me;try{this.f.update(ae(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Hd.prototype).forEach=function(e){this.a&&e(this.a,wn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=wn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},bd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=Ud,e.MediaKeySystemAccess=Md,navigator.requestMediaKeySystemAccess=Od,HTMLMediaElement.prototype.setMediaKeys=Nd)})),Gd.prototype.createSession=function(){},Gd.prototype.setServerCertificate=function(){},zd.prototype.getConfiguration=function(){},zd.prototype.createMediaKeys=function(){},bd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=jd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Kd,e.MediaKeys=Gd,e.MediaKeySystemAccess=zd)}),-10),$d.prototype.createMediaKeys=function(){var e=new Xd(this.a);return Promise.resolve(e)},$d.prototype.getConfiguration=function(){return this.b},Xd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.a||document.createElement("video");return t.src||(t.src="about:blank"),e=new Jd(t,this.g,e),this.c.push(e),e},Xd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Jd,pt),(i=Jd.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?nh(this,"output-restricted"):nh(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return eh(this,t,null)},i.load=function(e){return"persistent-license"==this.g?eh(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Me;return th(this,t,e),t},i.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Wd("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=ih.prototype).forEach=function(e){this.a&&e(this.a,wn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=wn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var rh="";function ah(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function oh(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function sh(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function lh(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function uh(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function ch(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function dh(t,n,i){return new e.TextTrackCue(t,n,i)}function hh(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function ph(){}function fh(e){var t=[];if(!e)return t;for(var n=u(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=fh(i),t=t.concat(i));return t.length||t.push(e),t}function gh(e){if(!e)return[];for(var t=[],n=(e=u(e.childNodes)).next();!n.done;n=e.next())(n=n.value)instanceof Element&&(n.hasAttribute("begin")?t.push(n):t=t.concat(gh(n)));return t}function vh(e,t){for(var n="",i=u(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=vh(r,t):n+=t?r=(r=r.textContent.trim()).replace(/\s+/g," "):r.textContent;return n}function yh(e,t,n,i,r,a,o,s,l,c){if(l&&"br"==e.nodeName)return(e=new Pn(0,0,"")).spacer=!0,e;var d=/^[\s\n]*$/.test(e.textContent),h=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||h&&d||h&&!l)return null;d=_h(e.getAttribute("begin"),n),h=_h(e.getAttribute("end"),n);var p=_h(e.getAttribute("dur"),n);if(null==h&&null!=p&&(h=d+p),!l&&(null==d||null==h))throw new le(2,2,2001);if(d=l&&null==d?0:d+t,h=l&&null==h?0:h+t,p="",l=[],Array.from(e.childNodes).some((function(e){return e.nodeType==Node.TEXT_NODE&&/\S+/.test(e.textContent)})))p=vh(e,s);else for(var f=u(e.childNodes),g=f.next();!g.done;g=f.next())(g=yh(g.value,t,n,i,r,a,o,s,!0,c))&&(g.startTime=g.startTime||d,g.endTime=g.endTime||h,l.push(g));if((t=new Pn(d,h,p)).nestedCues=l,c&&(t.cellResolution=c),(a=Th(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var v=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==v}))[0]}return function(e,t,n,i,r){"rtl"==bh(t,n,r,"direction")&&(e.direction="rtl");var a=bh(t,n,r,"writingMode");if("tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Fn),(a=bh(t,n,r,"textAlign"))?(e.positionAlign=Vh[a],e.lineAlign=Fh[a],e.textAlign=Nn[a.toUpperCase()]):e.textAlign="start",(a=bh(t,n,r,"displayAlign"))&&(e.displayAlign=Bn[a.toUpperCase()]),(a=bh(t,n,r,"color"))&&(e.color=a),(a=bh(t,n,r,"backgroundColor"))&&(e.backgroundColor=a),(a=bh(t,n,r,"border"))&&(e.border=a),(a=bh(t,n,r,"fontFamily"))&&(e.fontFamily=a),(a=bh(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=bh(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=bh(t,n,r,"lineHeight"))&&a.match(Dh)&&(e.lineHeight=a),(a=bh(t,n,r,"fontSize"))&&(a.match(Dh)||a.match(xh))&&(e.fontSize=a),(a=bh(t,n,r,"fontStyle"))&&(e.fontStyle=Wn[a.toUpperCase()]),i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=bh(t,n,r,"letterSpacing"))&&i.match(Dh)&&(e.letterSpacing=i),(i=bh(t,n,r,"linePadding"))&&i.match(Dh)&&(e.linePadding=i),(i=bh(t,n,r,"opacity"))&&(e.opacity=parseFloat(i)),(n=Eh(n,r,"textDecoration"))&&mh(e,n),(t=Ah(t,r,"textDecoration"))&&mh(e,t)}(t,e,a,i=Th(e,"backgroundImage",i,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0],r),t}function mh(e,t){for(var n=u(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&yt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&yt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&yt(e.textDecoration,"overline")}}function bh(e,t,n,i){return(e=Ah(e,n,i))?e:Eh(t,n,i)}function Eh(e,t,n){if(!e)return null;for(var i=fh(e),r=(i=u(i)).next();!r.done;r=i.next())if(r=nl(r.value,"http://www.w3.org/ns/ttml#styling",n))return r;return kh(e,t,n)}function Ah(e,t,n){var i=nl(e,"http://www.w3.org/ns/ttml#styling",n);return i||kh(e,t,n)}function kh(e,t,n){e=Th(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=nl(e[r],"urn:ebu:tt:style",n);a||(a=nl(e[r],"http://www.w3.org/ns/ttml#styling",n)),a||(a=Ah(e[r],t,n)),a&&(i=a)}return i}function Th(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?nl(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=u(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=u(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}return a}function _h(e,t){var n=null;if(Oh.test(e)){n=Oh.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else Lh.test(e)?n=wh(Lh,e):Mh.test(e)?n=wh(Mh,e):Nh.test(e)?(n=Nh.exec(e),n=Number(n[1])/t.frameRate):Uh.test(e)?(n=Uh.exec(e),n=Number(n[1])/t.a):Bh.test(e)&&(n=wh(Bh,e));return n}function wh(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function Sh(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}bd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)rh="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Yd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qd,e.MediaKeys=Xd,e.MediaKeySystemAccess=$d}})),bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=oh,Object.defineProperty(t,"disablePictureInPicture",{get:lh,set:uh,enumerable:!0,configurable:!0}),document.exitPictureInPicture=sh,document.addEventListener("webkitpresentationmodechanged",ah,!0))}})),bd((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=ch)}})),bd((function(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=dh;else if(6==n)t=hh;else{try{var i=!!dh(1,2,"")}catch(e){i=!1}i&&(t=dh)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}})),ph.prototype.parseInit=function(){},ph.prototype.parseMedia=function(e,t){var n=Be(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new le(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new le(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new le(2,2,2005,"TTML does not contain <tt> tag.");var o=nl(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=nl(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=nl(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=nl(r,"http://www.w3.org/ns/ttml#parameter","tickRate"),d=nl(r,"http://www.w3.org/ns/ttml#parameter","cellResolution");if(a=r.getAttribute("xml:space")||"default",n=nl(r,"http://www.w3.org/ns/ttml#styling","extent"),"default"!=a&&"preserve"!=a)throw new le(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new Sh(o,s,l,c),d=d&&(d=/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,s=fh(r.getElementsByTagName("metadata")[0]),l=fh(r.getElementsByTagName("styling")[0]);for(var h=[],p=u(c=fh(r.getElementsByTagName("layout")[0])),f=p.next();!f.done;f=p.next()){var g=f.value,v=n;f=new Yn;var y,m,b=g.getAttribute("xml:id");b?(f.id=b,b=null,v&&(b=Ih.exec(v)||Ph.exec(v)),v=b?Number(b[1]):null,b=b?Number(b[2]):null,(y=Eh(g,l,"extent"))&&null!=(y=(m=Ih.exec(y))||Ph.exec(y))&&(f.width=null!=v?100*Number(y[1])/v:Number(y[1]),f.height=null!=b?100*Number(y[2])/b:Number(y[2]),f.widthUnits=m||null!=v?qn:0,f.heightUnits=m||null!=b?qn:0),(g=Eh(g,l,"origin"))&&null!=(y=(m=Ih.exec(g))||Ph.exec(g))&&(f.viewportAnchorX=null!=v?100*Number(y[1])/v:Number(y[1]),f.viewportAnchorY=null!=b?100*Number(y[2])/b:Number(y[2]),f.viewportAnchorUnits=m||null!=v?qn:0)):f=null,f&&h.push(f)}for(n=gh(r.getElementsByTagName("body")[0]),r=(n=u(n)).next();!r.done;r=n.next())(r=yh(r.value,t.periodStart,o,s,l,c,h,a,!1,d))&&i.push(r)}return i},V("shaka.text.TtmlTextParser",ph),ph.prototype.parseMedia=ph.prototype.parseMedia,ph.prototype.parseInit=ph.prototype.parseInit;var Ch,Rh,Ih=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,xh=/^(\d{1,2}(?:\.\d+)?|100)%$/,Dh=/^(\d+px|\d+em|\d*\.?\d+c)$/,Ph=/^(\d+)px (\d+)px$/,Oh=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Lh=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Mh=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Nh=/^(\d*(?:\.\d*)?)f$/,Uh=/^(\d*(?:\.\d*)?)t$/,Bh=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Fh={left:jn,center:"center",right:"end",start:jn,end:"end"},Vh={left:"line-left",center:"center",right:"line-right"};function Hh(){this.m=new ph}function jh(){}function Kh(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Mn:Nn[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Kn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Hn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Kn[n[2].toUpperCase()]))}function Gh(e){if(null==(e=Ru(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function zh(){this.a=null}function Wh(e,t,n){var i,r,a;return(new Br).box("payl",Hr((function(e){i=Be(e)}))).box("iden",Hr((function(e){r=Be(e)}))).box("sttg",Hr((function(e){a=Be(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Pn(i,r,e),t&&(e.id=t),n)for(t=new Su(n),n=Iu(t);n;)Kh(e,n,[]),Cu(t),n=Iu(t);return e}(i,r,a,t,n):null}
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function Yh(){}function qh(){Ch?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Ch=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=$h):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function $h(e,t){var n,i=this;return O((function(r){return 1==r.a?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Ch.call(i,e,t),2)):rp(n=r.b)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Ch,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Xh,r.return(Xh.call(i,e,t)))}))}function Xh(e,t){var n,i,r,a,o,s,l,c,d,h,p=this;return O((function(f){if(1==f.a){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=ip(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())o=a.value,s=Zh(o.videoCapabilities,n),l=Zh(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=l,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(f,Ch.call(p,e,i),2)}return h=f.b,f.return(new np(h,n))}))}function Zh(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Qh(){}function Jh(){navigator.mediaCapabilities?(Rh=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ep):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ep(e){var t,n=this;return O((function(i){return 1==i.a?(console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(i,Rh.call(n,e),2)):(t=i.b,e.keySystemConfiguration?rp(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Rh,i.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=tp,i.return(tp.call(n,e))):i.return(t))}))}function tp(e){var t,n,i,r,a,o,s,l=this;return O((function(u){return 1==u.a?(console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=ip(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?u.return(o):E(u,Rh.call(l,e),2)):((s=u.b).keySystemAccess&&(s.keySystemAccess=new np(s.keySystemAccess,t)),u.return(s))}))}function np(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function ip(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function rp(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function ap(){}function op(){qh(),Jh()}Jn["application/ttml+xml"]=function(){return new ph},Hh.prototype.parseInit=function(e){var t=!1;if((new Br).box("moov",Fr).box("trak",Fr).box("mdia",Fr).box("minf",Fr).box("stbl",Fr).ea("stsd",Vr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new le(2,2,2007)},Hh.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Br).box("mdat",Hr((function(e){i=!0,r=r.concat(n.m.parseMedia(e,t))}))).parse(e,!1),!i)throw new le(2,2,2007);return r},V("shaka.text.Mp4TtmlParser",Hh),Hh.prototype.parseMedia=Hh.prototype.parseMedia,Hh.prototype.parseInit=Hh.prototype.parseInit,Jn['application/mp4; codecs="stpp"']=function(){return new Hh},Jn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Hh},Jn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Hh},jh.prototype.parseInit=function(){},jh.prototype.parseMedia=function(e,t){var n=Be(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new le(2,2,2e3);if(n=t.periodStart,i[0].includes("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(n=Gh(new Su(r[1]))))throw new le(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}a=[];for(var o=(r=u(i[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new Su(o);var s=new Yn;Iu(o),Cu(o);for(var l=Iu(o);l;){var c=s,d=l;(l=/^id=(.*)$/.exec(d))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),Cu(o),l=Iu(o)}a.push(s)}for(r=[],o=(i=u(i.slice(1))).next();!o.done;o=i.next()){if(l=n,1==(c=o.value.split("\n")).length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{o=null,c[0].includes("--\x3e")||(o=c[0],c.splice(0,1)),d=Gh(s=new Su(c[0]));var h=Ru(s,/[ \t]+--\x3e[ \t]+/g),p=Gh(s);if(null==d||null==h||null==p)throw new le(2,2,2001);for(c=new Pn(d+l,p+l,c.slice(1).join("\n").trim()),Cu(s),l=Iu(s);l;)Kh(c,l,a),Cu(s),l=Iu(s);null!=o&&(c.id=o),o=c}o&&r.push(o)}return r},V("shaka.text.VttTextParser",jh),jh.prototype.parseMedia=jh.prototype.parseMedia,jh.prototype.parseInit=jh.prototype.parseInit,Jn["text/vtt"]=function(){return new jh},Jn['text/vtt; codecs="vtt"']=function(){return new jh},Jn['text/vtt; codecs="wvtt"']=function(){return new jh},zh.prototype.parseInit=function(e){var t=this,n=!1;if((new Br).box("moov",Fr).box("trak",Fr).box("mdia",Fr).ea("mdhd",(function(e){0==e.version?(e.reader.skip(4),e.reader.skip(4),t.a=e.reader.K(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),t.a=e.reader.K(),e.reader.skip(8)),e.reader.skip(4)})).box("minf",Fr).box("stbl",Fr).ea("stsd",Vr).box("wvtt",(function(){n=!0})).parse(e),!this.a)throw new le(2,2,2008);if(!n)throw new le(2,2,2008)},zh.prototype.parseMedia=function(e,t){if(!this.a)throw new le(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,l=!1,c=null;if((new Br).box("moof",Fr).box("traf",Fr).ea("tfdt",(function(e){o=!0,i=0==e.version?e.reader.K():e.reader.rb()})).ea("tfhd",(function(e){var t=e.flags;(e=e.reader).skip(4),1&t&&e.skip(8),2&t&&e.skip(4),c=8&t?e.K():null})).ea("trun",(function(e){s=!0;var t=e.version,n=e.flags,i=(e=e.reader).K();1&n&&e.skip(4),4&n&&e.skip(4);for(var a=[],o=(i=u(J(i))).next();!o.done;o=i.next())o={duration:null,sampleSize:null,rd:null},256&n&&(o.duration=e.K()),512&n&&(o.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(o.rd=0==t?e.K():e.Od()),a.push(o);r=a})).box("mdat",Hr((function(e){l=!0,n=e}))).parse(e,!1),!l&&!o&&!s)throw new le(2,2,2008);for(var d=i,h=new Mr(n,0),p=u(r),f=p.next();!f.done;f=p.next()){var g=(f=f.value).duration||c,v=f.rd?i+f.rd:d;d=v+(g||0);var y=0;do{var m=h.K();y+=m;var b=null;"vttc"==Kr(h.K())?8<m&&(b=h.Wa(m-8)):h.skip(m-8),g&&b&&(m=Wh(b,t.periodStart+v/this.a,t.periodStart+d/this.a),a.push(m))}while(f.sampleSize&&y<f.sampleSize)}return a.filter(xe)},V("shaka.text.Mp4VttParser",zh),zh.prototype.parseMedia=zh.prototype.parseMedia,zh.prototype.parseInit=zh.prototype.parseInit,Jn['application/mp4; codecs="wvtt"']=function(){return new zh},V("EmeEncryptionSchemePolyfill",Yh),Yh.install=qh,V("McEncryptionSchemePolyfill",Qh),Qh.install=Jh,np.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},np.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},V("EncryptionSchemePolyfills",ap),ap.install=op,void 0!==n&&n.exports&&(n.exports=ap)}.call(i,n,n,void 0),i.shaka)t[r]=i.shaka[r]}()}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
    !*** ./src/clappr-dash-shaka-playback.js ***!
    \*******************************************/
/*! no static exports found */function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(/*! clappr */"clappr"),o=(r=n(/*! shaka-player */"./node_modules/shaka-player/dist/shaka-player.compiled.js"))&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,e);var t=h(n);function n(){var e;s(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._levels=[],e._pendingAdaptationEvent=!1,e._isShakaReadyState=!1,e._minDvrSize=void 0===e.options.shakaMinimumDvrSize?60:e.options.shakaMinimumDvrSize,e}return c(n,[{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getMediaElement().currentTime-this.seekRange.start:0}},{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return o.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.seekRange():{start:0,end:0}}},{key:"currentLevel",set:function(e){var t=this;this._currentLevelId=e;var n=-1===this._currentLevelId;this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_START),n?(this._player.configure({abr:{enabled:!0}}),this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))},get:function(){return this._currentLevelId||-1}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationStartTimeAsDate",get:function(){return this.shakaPlayerInstance&&this.shakaPlayerInstance.getPresentationStartTimeAsDate()?new Date(this.shakaPlayerInstance.getPresentationStartTimeAsDate().getTime()+1e3*this.seekRange.start):0}},{key:"bandwidthEstimate",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().estimatedBandwidth:null}}],[{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o.default.polyfill.installAll();var n=o.default.Player.isBrowserSupported(),i=e.split("?")[0].match(/.*\.(.*)$/)||[];return n&&("mpd"===i[1]||t.indexOf("application/dash+xml")>-1)}},{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return o.default}}]),c(n,[{key:"getProgramDateTime",value:function(){return this.presentationStartTimeAsDate}},{key:"_updateDvr",value:function(e){this.trigger(a.Events.PLAYBACK_DVR,e),this.trigger(a.Events.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(a.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),this.dvrEnabled&&this._updateDvr(e<this._duration-3),e+=this._startTime,this.el.currentTime=e}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"play",value:function(){this._player||this._setup(),this.isReady?(this._stopped=!1,this._src=this.el.src,l(f(n.prototype),"play",this).call(this),this._startTimeUpdateTimer()):this.once(n.Events.SHAKA_READY,this.play)}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return l(f(n.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,l(f(n.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,l(f(n.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(n.Events.SHAKA_READY),this.trigger(a.Events.PLAYBACK_READY,this.name)}},{key:"error",value:function(e){a.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._stopped=!0,this._player?(this._sendStats(),this._player.unload().then((function(){l(f(n.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){a.Log.error("shaka could not be unloaded")}))):l(f(n.prototype),"stop",this).call(this)}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(a.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),a.Log.error("shaka could not be destroyed")})):this._destroy(),l(f(n.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1;var t=function(){e._player=e._createPlayer(),e._setInitialConfig(),e._loadSource()};this._player?this._player.destroy().then((function(){return t()})):t()}},{key:"_createPlayer",value:function(){var e=new o.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e}},{key:"_setInitialConfig",value:function(){this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player)}},{key:"_loadSource",value:function(){var e=this;this._player.load(this._options.src).then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(a.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:"".concat(e.height,"p")}})).reverse(),this.trigger(a.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this,t=this._options.shakaSendStatsInterval||3e4;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_sendStats",value:function(){this.trigger(a.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var t={shakaError:e,videoError:this.el.error},i=t.shakaError.detail||t.shakaError,r=i.category,s=i.code,u=i.severity;if(t.videoError||!s&&!r)return l(f(n.prototype),"_onError",this).call(this);var c=u===o.default.util.Error.Severity.CRITICAL,d={code:"".concat(r,"_").concat(s),description:"Category: ".concat(r,", code: ").concat(s,", severity: ").concat(u),level:c?a.PlayerError.Levels.FATAL:a.PlayerError.Levels.WARN,raw:e},h=this.createError(d);a.Log.error("Shaka error event:",h),this.trigger(a.Events.PLAYBACK_ERROR,h)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),a.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(a.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(a.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(a.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,a.Log.debug("shaka was destroyed")}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.textTracks||[]).filter((function(e){return"subtitle"===e.kind})).map((function(t){return{id:e++,name:t.label||t.language,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return l(f(n.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return void a.Log.warn('Track id "'.concat(e,'" not found'));if(this._shakaTTVisible&&!0===t.track.active)return void a.Log.info('Track id "'.concat(e,'" already showing'))}t?(this._player.selectTextTrack(t.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(a.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}}]),n}(a.HTML5Video);t.default=g,e.exports=t.default},clappr:
/*!******************************************************************************************!*\
    !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
    \******************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(ct)}))),xh='@font-face {\n  font-family: "opensans-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "opensans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-xbold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "clearsans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "clearsans-bolditalic";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bolditalic.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "globotipo-tx-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n.clappr-player#wp3-player-0 {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "lucida grande", tahoma, verdana, arial, sans-serif;\n  text-shadow: none;\n  box-sizing: border-box;\n  display: block;\n  max-width: none;\n  box-sizing: inherit;\n  float: none;\n  -webkit-tap-highlight-color: transparent; }\n  .clappr-player#wp3-player-0:focus {\n    outline: 0; }\n  .clappr-player#wp3-player-0.fullscreen {\n    width: 100% !important;\n    height: 100% !important; }\n  .clappr-player#wp3-player-0.nocursor {\n    cursor: none; }\n';or(xh);var Dh='.clappr-player#wp3-player-0 div, .clappr-player#wp3-player-0 span, .clappr-player#wp3-player-0 applet, .clappr-player#wp3-player-0 object, .clappr-player#wp3-player-0 iframe,\n.clappr-player#wp3-player-0 h1, .clappr-player#wp3-player-0 h2, .clappr-player#wp3-player-0 h3, .clappr-player#wp3-player-0 h4, .clappr-player#wp3-player-0 h5, .clappr-player#wp3-player-0 h6, .clappr-player#wp3-player-0 p, .clappr-player#wp3-player-0 blockquote, .clappr-player#wp3-player-0 pre,\n.clappr-player#wp3-player-0 a, .clappr-player#wp3-player-0 abbr, .clappr-player#wp3-player-0 acronym, .clappr-player#wp3-player-0 address, .clappr-player#wp3-player-0 big, .clappr-player#wp3-player-0 cite, .clappr-player#wp3-player-0 code,\n.clappr-player#wp3-player-0 del, .clappr-player#wp3-player-0 dfn, .clappr-player#wp3-player-0 em, .clappr-player#wp3-player-0 img, .clappr-player#wp3-player-0 ins, .clappr-player#wp3-player-0 kbd, .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 s, .clappr-player#wp3-player-0 samp,\n.clappr-player#wp3-player-0 small, .clappr-player#wp3-player-0 strike, .clappr-player#wp3-player-0 strong, .clappr-player#wp3-player-0 sub, .clappr-player#wp3-player-0 sup, .clappr-player#wp3-player-0 tt, .clappr-player#wp3-player-0 var,\n.clappr-player#wp3-player-0 b, .clappr-player#wp3-player-0 u, .clappr-player#wp3-player-0 i, .clappr-player#wp3-player-0 center,\n.clappr-player#wp3-player-0 dl, .clappr-player#wp3-player-0 dt, .clappr-player#wp3-player-0 dd, .clappr-player#wp3-player-0 ol, .clappr-player#wp3-player-0 ul, .clappr-player#wp3-player-0 li,\n.clappr-player#wp3-player-0 fieldset, .clappr-player#wp3-player-0 form, .clappr-player#wp3-player-0 label, .clappr-player#wp3-player-0 legend,\n.clappr-player#wp3-player-0 table, .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 tbody, .clappr-player#wp3-player-0 tfoot, .clappr-player#wp3-player-0 thead, .clappr-player#wp3-player-0 tr, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td,\n.clappr-player#wp3-player-0 article, .clappr-player#wp3-player-0 aside, .clappr-player#wp3-player-0 canvas, .clappr-player#wp3-player-0 details, .clappr-player#wp3-player-0 embed,\n.clappr-player#wp3-player-0 figure, .clappr-player#wp3-player-0 figcaption, .clappr-player#wp3-player-0 footer, .clappr-player#wp3-player-0 header, .clappr-player#wp3-player-0 hgroup,\n.clappr-player#wp3-player-0 menu, .clappr-player#wp3-player-0 nav, .clappr-player#wp3-player-0 output, .clappr-player#wp3-player-0 ruby, .clappr-player#wp3-player-0 section, .clappr-player#wp3-player-0 summary,\n.clappr-player#wp3-player-0 time, .clappr-player#wp3-player-0 mark, .clappr-player#wp3-player-0 audio, .clappr-player#wp3-player-0 video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n.clappr-player#wp3-player-0 table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n.clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n.clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 blockquote {\n  quotes: none; }\n  .clappr-player#wp3-player-0 q:before, .clappr-player#wp3-player-0 q:after, .clappr-player#wp3-player-0 blockquote:before, .clappr-player#wp3-player-0 blockquote:after {\n    content: "";\n    content: none; }\n\n.clappr-player#wp3-player-0 a img {\n  border: none; }\n';or(Dh);var Ph=Pi(Pi(Pi(Pi({DFP:Yr,DAI:ia,GloboMediaControl:_a},{PlayButton:wa,TimeIndicator:xa,LiveIndicator:Fo,LiveButton:ho,Volume:yo,Seekbar:Eo,FullscreenButton:Ra,Settings:ks,BackButton:Ca,VideoInfo:Rs,Share:Oo,SkipRecap:Ma,SkipIntro:Na,StartOver:lo,QuickSeek:wo,QuickSeekHint:Co,ChromecastSenderIndicator:Bs,MediaControlPlaceHolder:al}),{},{Pip:Ho,TapToUnmute:Uo,ErrorScreen:$s,Chromecast:Ns,ThumbPreview:_s,SeekTime:ya},Th),{},{Subtitle:nc,Poster:ml,Spinner:El,StreamSense:_l,Comscore:cl,WebmediaAPIHit:Rl,Horizon:fc,WaitingRoom:Dc,PlayerStats:ol,GloboYouBora:Wc,GoogleAnalytics:Ic,BitrateCapping:Ad,LockClient:Td,Cuepoints:sl,EPG:gl,ClickToPause:ha},_h),{},{Overlay:Zs,DrawerHeader:il,SimulcastPing:wd,WatchSession:Sd}),Oh=[Ih,Rh,Ch],Lh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["play_button","time_indicator","live_indicator","live_button","volume","seekbar","seekbar_info","fullscreen_button","settings","back_button","video_info","share","skip_recap","skip_intro","start_over","quick_seek","quick_seek_hint","chromecast_sender_indicator","media_control_placeholder"],n=e.filter((function(e){return e&&-1===t.indexOf(e)}));return t.concat(n)},Mh=Un.LocalStorage,Nh=Un.getHostname,Uh=Un.getHostAndPathName,Bh=window.WM&&window.WM.Settings||{},Fh={limited:V.isFirefox&&V.isAndroid,preferredLevel:Mh.load("selectedlevel",parseInt),changeFavicon:!1,mediacontrol:{plugins:Lh()},chromecast:{appId:function(){if(Bh.CastSenders){var e=Object.keys(Bh.CastSenders).find((function(e){return e===Nh()||e===Uh()}));return e&&Bh.CastSenders[e]}}()},preload:"none",hlsMinimumDvrSize:120,useDvrControls:!1,useBackgroundButton:!1,useHardwareVideoDecoder:!1,playback:{controls:!1,preload:"none",playInline:!0,recycleVideo:V.isMobile},gaAccount:null,gaTrackerName:null,allowLocation:!1,disableVideoTagContextMenu:!0,stretched:!1,maxQualityLevel:"max",playerExperiments:Bh.PlayerExperiments||{},allowRestrictedContent:Bh.allowRestrictedContent,videoInfo:{inlineEnabled:!1,fullscreenEnabled:!0},includeResetStyle:!0,customStyle:{mainStyle:xh,resetStyle:Dh},customErrors:Gs,shouldDeviceUseWebVTT:!0};Object.values(Ph).forEach((function(e){return Ye.registerPlugin(e)})),Oh.forEach((function(e){return Ye.registerPlayback(e)}));var Vh=Un.DOM.hasPlayerElement,Hh=Un.session,jh=Un.getExperimentAlternative,Kh=window.WM&&window.WM.Settings||{},Gh=Kh&&Kh.Domains||[],zh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,e);var n=c(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,r);var a=r.hasSourceMapped(i.source);a&&(i.source=a);var s=o(o({},Fh),i);s.clapprStats={runEach:1e3,onReport:function(t){return e.onMetricsReceived(t)}},s.mediacontrol.plugins=Lh(s.mediaControl&&s.mediaControl.plugins),s.bitrateCappingDisabled=Kh.bitrateCapping&&Kh.bitrateCapping.disabled||Kh.bitrateCappingDisabled,s.stretched&&(s.width=s.stretchWidth||s.width,s.height=s.stretchHeight||s.height),r.overrideOptions(s),s.plugins&&(s.plugins.loadExternalPluginsFirst=!1),!s.includeResetStyle&&delete s.customStyle.resetStyle,"string"==typeof(e=n.call(this,s)).options.defaultAudio&&(e.options.defaultAudio=e._forceNewAudioFormat(e.options)),"string"==typeof e.options.defaultSubtitle&&(e.options.defaultSubtitle=e._forceNewSubtitleFormat(e.options));var l=jh(e.options,"player-isolated-experiment-02");V.isAndroid&&"android_dvr"===l&&(V.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}}),V.isiOS&&"ios_dvr"===l&&(V.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}});var u=/hlsjs-live-sync-duration-count-(\d+)/,c=l.match(u)&&l.match(u)[1];return c&&(e.options.HLSJSConfiguration={liveSyncDurationCount:c}),e}return i(r,[{key:"eventsMapping",get:function(){return Object.assign(d(s(r.prototype),"eventsMapping",this),{onPipAdded:Fn.PLAYER_PIP_ADDED,onPipDiscarded:Fn.PLAYER_PIP_DISCARDED,onMasterAdded:Fn.PLAYER_MASTER_ADDED,onMasterChanged:Fn.PLAYER_MASTER_CHANGED,onPipToMaster:Fn.PLAYER_PIPTOMASTER,onMediaControlShow:Fn.PLAYER_MEDIACONTROL_SHOW,onMediaControlHide:Fn.PLAYER_MEDIACONTROL_HIDE,onBackButtonClicked:Fn.BACK_BUTTON_CLICKED,onDrawerShow:Fn.DID_SHOW_DRAWER,onDrawerHide:Fn.DID_HIDE_DRAWER,onDrawerShowHint:Fn.DID_SHOW_DRAWER_HINT,onDrawerHideHint:Fn.DID_HIDE_DRAWER_HINT,onSubtitleChanged:Fn.WM_SUBTITLE_CHANGED,onAudioChanged:Fn.WM_AUDIO_CHANGED,onDidLoadCuepoints:Fn.DID_LOAD_CUEPOINTS,onDidReachCuepoint:Fn.DID_REACH_CUEPOINT})}},{key:"defaultOptions",get:function(){return Fh}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}}],[{key:"version",get:function(){return"7.51.1"}},{key:"allVersions",get:function(){return{Player:"7.51.1",PlayerCore:"1.24.0",PlayerPlugins:"1.50.1",Clappr:ut,ShakaPlayer:gt.Player.version,HLSjs:ft.version}}}]),i(r,[{key:"onMetricsReceived",value:function(e){this.container.trigger(Fn.WM_STATS_REPORTED,e)}},{key:"normalizeSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sources||(void 0===e.source?[]:["".concat(e.source)]);return 0===(t=t.map((function(e){return"".concat(e||"")}))).length?["no.op"]:t}},{key:"isUnsupportedBrowser",value:function(){return V.version<{chrome:41,firefox:38,ie:12,msie:12,safari:8}[V.name.toLowerCase()]}},{key:"isCrawlerBot",value:function(){var e=window.navigator.userAgent,t=/Applebot/.test(e),n=/YandexBot/.test(e),i=/Googlebot/.test(e),r=/BingPreview/.test(e);return t||i||n||r}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.core.createError(e)}},{key:"_onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.level===Le.Levels.FATAL){var t=o(o({},e),{},{videoSessionId:Hh.getVideoSessionId(this.options.playerId)});d(s(r.prototype),"_onError",this).call(this,t),this.options.onError&&this.options.onError(t),this.container&&(this.container.disableMediaControl(),this.container.stop(),this.container.destroy())}}},{key:"attachTo",value:function(e){d(s(r.prototype),"attachTo",this).call(this,e),this.validatePlayerEnvironment()}},{key:"validatePlayerEnvironment",value:function(){var e=this.playback&&"function"==typeof this.playback.onError,t=!r.isAllowedDomain(window.location.hostname)&&!r.isDevMode()&&e,n=(this.isUnsupportedBrowser()||this.isCrawlerBot())&&e;t&&this.playback.onError(Gs.NOT_ALLOWED_DOMAIN,{useCodePrefix:!1}),n&&this.playback.onError(Gs.UNSUPPORTED_BROWSER,{useCodePrefix:!1})}},{key:"load",value:function(e){if(Vh(this.element)){var t=r.hasSourceMapped(e)||e;d(s(r.prototype),"load",this).call(this,t),this.validatePlayerEnvironment()}}},{key:"configure",value:function(e){var t=r.hasSourceMapped(e.source);t&&(e.source=t),this.options.stretched&&(e.width||e.height)&&(e.width=this.options.stretchWidth||e.width,e.height=this.options.stretchHeight||e.height),this.hasSourceChanged(e)||(delete e.sources,delete e.source),e.env=Qt.get(e.env,e.httpOnly),"string"==typeof e.defaultAudio&&(e.defaultAudio=this._forceNewAudioFormat(e)),"string"==typeof e.defaultSubtitle&&(e.defaultSubtitle=this._forceNewSubtitleFormat(e)),r.overrideOptions(e,this.options),e.plugins&&(e.plugins.loadExternalPluginsFirst=!1),d(s(r.prototype),"configure",this).call(this,e),this.validatePlayerEnvironment()}},{key:"hasSourceChanged",value:function(e){var t=this.normalizeSources(this.options),n=this.normalizeSources(e);return t[0]!==n[0]}},{key:"_forceNewAudioFormat",value:function(e){return{language:e.defaultAudio}}},{key:"_forceNewSubtitleFormat",value:function(e){return{language:e.defaultSubtitle,role:"subtitle"}}},{key:"_addEventListeners",value:function(){var e=this;d(s(r.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,Fn.WM_PIP_ADDED,this.onPipAdded),this.listenTo(this.core,Fn.WM_PIP_DISCARDED,this.onPipDiscarded),this.listenTo(this.core,Fn.WM_MASTER_ADDED,this.onMasterAdded),this.listenTo(this.core,Fn.WM_MASTER_CHANGED,this.onMasterChanged),this.listenTo(this.core,Fn.BACK_BUTTON_CLICKED,this.onBackButtonClicked),this.listenTo(this.core.mediaControl,be.MEDIACONTROL_SHOW,(function(){return e.trigger(Fn.PLAYER_MEDIACONTROL_SHOW)})),this.listenTo(this.core.mediaControl,be.MEDIACONTROL_HIDE,(function(){return e.trigger(Fn.PLAYER_MEDIACONTROL_HIDE)})),this.listenTo(this.core,Fn.DID_SHOW_DRAWER,this.onDrawerShow),this.listenTo(this.core,Fn.DID_HIDE_DRAWER,this.onDrawerHide),this.listenTo(this.core,Fn.DID_SHOW_DRAWER_HINT,this.onDrawerShowHint),this.listenTo(this.core,Fn.DID_HIDE_DRAWER_HINT,this.onDrawerHideHint)}},{key:"_addContainerEventListeners",value:function(){d(s(r.prototype),"_addContainerEventListeners",this).call(this),this.listenTo(this.container,Fn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Fn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Fn.DID_LOAD_CUEPOINTS,this.onDidLoadCuepoints),this.listenTo(this.container,Fn.DID_REACH_CUEPOINT,this.onDidReachCuepoint),this.listenTo(this.container,Fn.WM_AUDIO_CHANGED,this.onAudioChanged)}},{key:"onDrawerHide",value:function(){this.trigger(Fn.DID_HIDE_DRAWER)}},{key:"onDrawerShow",value:function(){this.trigger(Fn.DID_SHOW_DRAWER)}},{key:"onDrawerHideHint",value:function(){this.trigger(Fn.DID_HIDE_DRAWER_HINT)}},{key:"onDrawerShowHint",value:function(){this.trigger(Fn.DID_SHOW_DRAWER_HINT)}},{key:"onDidLoadCuepoints",value:function(e){this.trigger(Fn.DID_LOAD_CUEPOINTS,e)}},{key:"onDidReachCuepoint",value:function(e){this.trigger(Fn.DID_REACH_CUEPOINT,e)}},{key:"onSubtitleChanged",value:function(e){this.trigger(Fn.WM_SUBTITLE_CHANGED,e)}},{key:"onAudioChanged",value:function(e){this.trigger(Fn.WM_AUDIO_CHANGED,e)}},{key:"onBackButtonClicked",value:function(){this.trigger(Fn.BACK_BUTTON_CLICKED)}},{key:"onPipAdded",value:function(){this.trigger(Fn.PLAYER_PIP_ADDED)}},{key:"onPipDiscarded",value:function(){this.trigger(Fn.PLAYER_PIP_DISCARDED)}},{key:"onMasterAdded",value:function(){this.trigger(Fn.PLAYER_MASTER_ADDED)}},{key:"onMasterChanged",value:function(){this.trigger(Fn.PLAYER_MASTER_CHANGED)}},{key:"onPipToMaster",value:function(){this.trigger(Fn.PLAYER_PIPTOMASTER)}},{key:"version",value:function(){return r.version}},{key:"allVersions",value:function(){return r.allVersions}}],[{key:"overrideOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.chromeless&&t.chromeless&&(e.chromeless=t.chromeless),e.videoInfo&&(e.videoInfo=o(o({},Fh.videoInfo),e.videoInfo));var n=e.chromecast||{},i=n.appId||Fh.chromecast.appId;e.chromecast={enabled:n.enabled&&!V.isChromecast&&!!i,appId:i,enableBingeWatch:n.enableBingeWatch}}},{key:"hasSourceMapped",value:function(e){return V.isChrome&&Kh.sourceMapping&&Kh.sourceMapping[e]}}]),r}(zn);return V.supportsFakeLocation=/puffin/i.test(navigator.userAgent),V.supportsTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,V.isHybridDevice=V.supportsTouchEvents&&!V.isMobile,zh.isDevMode=function(){return!1},zh.isAllowedDomain=function(e){return!Kh.Domains||Gh.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Clappr,window.$=window.$||$,e.DrawerBottom=tl,e.Environment=Qt,e.Errors=Gs,e.Events=Fn,e.MediaControlPlugin=hr,e.Playbacks=Oh,e.Player=zh,e.Plugins=Ph,e.Styler=Bn,e.mergeMediaControlPlugins=Lh,e.playerStyle=xh,e}({});
//# sourceMappingURL=player.min.js.map
