!function(){function t(e,a,o){function i(s,r){if(!a[s]){if(!e[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=a[s]={exports:{}};e[s][0].call(d.exports,function(t){var a=e[s][1][t];return i(a||t)},d,d.exports,t,e,a,o)}return a[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}return t}()({1:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),r=t("./request"),c=o(r),u=t("./msk"),d=o(u),p=function(){function t(e){i(this,t),this.base_api=e,this.anonymous=!1,this.browser_id=!1,this.client_id=!1,this.customer_id=!1,this.access_token=!1,this.queue=[],this.running=!1,this.data={},this.msk=new d["default"](this.base_api),this.limits={trackingPage:2},this.timestamp={cart:0}}return s(t,[{key:"updateAnonymousData",value:function(t){this.anonymous=t}},{key:"updateBrowser",value:function(t){this.browser_id=t,this.run()}},{key:"updateClient",value:function(t){this.msk.updateClient(t),this.client_id=t,this.run()}},{key:"updateCustomer",value:function(t){this.msk.updateCustomer(t),this.customer_id=t,this.run()}},{key:"updateAccessToken",value:function(t){this.msk.updateAccessToken(t),this.access_token=t,this.run()}},{key:"delayedCall",value:function(t){t.callback||(t.callback=function(t,e){}),this.queue.push(t),this.run()}},{key:"asyncCall",value:function(t,e){setTimeout(function(){t.apply(t,e)},0)}},{key:"run",value:function(){var t=this;if(!this.running&&this.browser_id&&this.client_id&&this.customer_id&&this.access_token&&0!==this.queue.length){this.running=!0;var e=this.queue.pop();e.attempts||(e.attempts=1);var a=e.route;a=a.replace("{{browser_id}}",this.browser_id),a=a.replace("{{client_id}}",this.client_id),a=a.replace("{{customer_id}}",this.customer_id),(0,c["default"])(e.method,this.base_api+a,function(a,o){a&&!o?t.asyncCall(e.callback,[a,null]):o&&(e.attempts<=2&&t.onRequestError?t.asyncCall(t.onRequestError,[o,e]):t.asyncCall(e.callback,[null,a])),t.running=!1,t.queue.length>0&&t.run()},e.data,this.access_token)}}},{key:"auth",value:function(t,e){return t?("object"===n(this.anonymous)&&(t.history=JSON.stringify(this.anonymous)),void(0,c["default"])("POST",this.base_api+"auth/customer",e,t)):void e(null,new Error("Invalid data"))}},{key:"getRecommendations",value:function(t,e){this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/recommendations",data:{metadata:JSON.stringify(t)},callback:e})}},{key:"getLastViewed",value:function(t,e){this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/products",data:{metadata:JSON.stringify(t)},callback:e})}},{key:"setContact",value:function(t,e){var a=this;"object"===("undefined"==typeof t?"undefined":n(t))&&(this.data.contact=t,t={metadata:JSON.stringify(t)},this.msk.execute(t,function(t,o){t&&!o&&a.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/contacts/save",data:t,callback:e})}))}},{key:"tracking",value:function(t,e){this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/start",data:{metadata:JSON.stringify(t)},callback:e})}},{key:"saveProductGetDataInPlatform",value:function(t,e,a){this.delayedCall({method:"GET",route:"clients/{{client_id}}/apikey-platform/"+t+"/product/"+e,callback:a})}},{key:"trackingPage",value:function(t,e){"object"===("undefined"==typeof t?"undefined":n(t))&&(this.data.page=t,("product"===this.data.page.type||"category"===this.data.page.type||"search"===this.data.page.type)&&this.limits.trackingPage>0&&(this.limits.trackingPage--,this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/pageview",data:{metadata:JSON.stringify({page:t.type,details:t.metadata})},callback:e})))}},{key:"trackingInteraction",value:function(t,e){this.data.interaction=t,this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/interaction",data:{metadata:JSON.stringify(t)},callback:e})}},{key:"trackingEvent",value:function(t,e){this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/event",data:{metadata:JSON.stringify(t)},callback:e})}},{key:"trackingCart",value:function(t,e){if("object"===("undefined"==typeof t?"undefined":n(t))){this.data.cart=t.metadata;var a=Math.round((new Date).getTime()/1e3);if(a-this.timestamp.cart<=5)return;this.timestamp.cart=a,this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/cart",data:{metadata:JSON.stringify({cart:t.cart,products:t.metadata,info:t.information})},callback:e}),window.__sbcrt=this.data.cart}}},{key:"trackingOrder",value:function(t,e){"object"===("undefined"==typeof t?"undefined":n(t))&&(this.data.order=t.metadata,this.delayedCall({method:"POST",route:"clients/{{client_id}}/customers/{{customer_id}}/tracking/order",data:{metadata:JSON.stringify({order:t.order,cart:t.cart,details:t.metadata,info:t.information})},callback:e}))}}]),t}();a["default"]=p},{"./msk":8,"./request":9}],2:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){var t=window.location.host;return t.indexOf("pontofrio.com.br")!==-1||t.indexOf("casasbahia.com.br")!==-1||t.indexOf("extra.com.br")!==-1}function s(){var t=window.location.host;return"/"===window.location.pathname&&t.indexOf("carrinho.pontofrio.com.br")===-1&&t.indexOf("carrinho.casasbahia.com.br")===-1&&t.indexOf("carrinho.extra.com.br")===-1}Object.defineProperty(a,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),u=t("./cookie"),d=t("./request"),p=o(d),l=t("./load-resource"),f=o(l),h=t("./languages"),m=o(h),_=function(){function t(e,a,o){i(this,t),this.base_api=e,this.base_statics=a,this.templates={},this.language=o,this.languages=new m["default"],this.config={SHOPPUSH:{PLUGIN:this.base_statics+"tags/plugins/shoppush.js?version=1.1",TEMPLATE_JS:this.base_statics+"tags/templates/shoppush.js?version=1.1",TEMPLATE_CSS:this.base_statics+"tags/templates/css/shoppush.css?version=1.1",IMAGE_ICON:this.base_statics+"shopback/assets/images/shopback.png?version=1.1",IMAGE_BELL:this.base_statics+"shoppush/assets/images/shoppush-bell.png?version=1.1",IMAGE_BELL_WHITE:this.base_statics+"shoppush/assets/images/shoppush-bell-white.png?version=1.1",CLIENT_DOMAIN:String(document.domain)},SHOPSMART:{PLUGIN:this.base_statics+"tags/plugins/shopsmart.js?version=1.1",TEMPLATE_JS:this.base_statics+"tags/templates/shopsmart.js?version=1.1",TEMPLATE_CSS:this.base_statics+"tags/templates/css/shopsmart.css?version=1.1",CLIENT_DOMAIN:String(document.domain)},SHOPLIVE:{PLUGIN:this.base_statics+"tags/plugins/shoplive.js?version=1.1",TEMPLATE_JS:this.base_statics+"tags/templates/shoplive.js?version=1.1",TEMPLATE_CSS:this.base_statics+"tags/templates/css/shoplive.css?version=1.1",IMAGE_ICON:this.base_statics+"shopback/assets/images/shopback.png?version=1.1",IMAGE_BELL:this.base_statics+"shoppush/assets/images/shoppush-bell.png?version=1.1",IMAGE_BELL_WHITE:this.base_statics+"shoppush/assets/images/shoppush-bell-white.png?version=1.1",CLIENT_DOMAIN:String(document.domain)},SHOPBOT:{PLUGIN:this.base_statics+"tags/plugins/shopbot.js?version=1.1",TEMPLATE_JS:this.base_statics+"tags/templates/shopbot.js?version=1.1",TEMPLATE_CSS:this.base_statics+"tags/templates/css/shopbot.css?version=1.1",CLIENT_DOMAIN:String(document.domain)}},"object"===r(window.shopback)&&window.shopback&&"function"==typeof window.shopback.jQuery&&window.shopback.jQuery?this.$=window.shopback.jQuery:this.$=!1,this.$||"function"!=typeof window.jQuery||(this.$=window.jQuery),this.contacts={}}return c(t,[{key:"initialize",value:function(t,e){if(!this.$)return!1;if(this.contacts=e,0!==t.length)for(var a=0;a<t.length;a++)this.loadCampaign(t[a])}},{key:"loadCampaign",value:function(t){var e=this;if("shoppush"!==t.platform||this.contacts.webpush!==!0){var a=navigator.platform.toUpperCase().indexOf("MAC")>=0,o=/(iPhone|iPod|iPad)/i.test(navigator.platform),i=location.href.indexOf("linx_user=true")>-1,n=navigator.userAgent.indexOf("Instagram")!==-1;if(i||!(a||o||n)){if("undefined"!=typeof this.config[t.platform.toUpperCase()].PLUGIN&&!window[t.platform])return void this.loadDependency(t,"PLUGIN");if("closed"!==(0,u.getCookie)("sback_campaign_"+t.id))return"undefined"==typeof this.config[t.platform.toUpperCase()].TEMPLATE_JS||this.templates[t.platform]?"undefined"==typeof this.config[t.platform.toUpperCase()].TEMPLATE_CSS||this.$('link[href$="'+this.config[t.platform.toUpperCase()].TEMPLATE_CSS+'"]').length?void("shoppush"===t.platform?this.prepareShoppush(t):"shopsmart"===t.platform?this.watchShopsmart(t):"shoplive"===t.platform?this.watchShoplive(t):"shopbot"===t.platform&&this.watchShopbot(t)):void this.loadDependency(t,"TEMPLATE_CSS",!1,"css"):void this.loadDependency(t,"TEMPLATE_JS",function(){e.templates[t.platform]=window[t.platform+"_templates"]||{},window[t.platform+"_templates"]=null});if("shoppush"===t.platform&&this.contacts.webpush===!1){var s=this.languages.request(this.language,t.platform,!1);window.shoppush.updateWebpushSubscription(t.id,t.settings,t.close.duration,t.info.manifest,s,t.template)}}}}},{key:"prepareShoppush",value:function(t){var e=this;if((!n()||s())&&!("safari"in window||!1 in window||t.settings.secure&&!1 in navigator)){var a=this.languages.request(this.language,t.platform,!1);if("default"===t.template.type)window.shoppush.showRequest(t.id,t.settings,t.close.duration,t.info.manifest,a,t.template),this.setInteraction("shoppush",t.id,"view");else if("custom"===t.template.type){if(t.template.content.image_thumb=t.settings.icon.url,"click-overlay"===t.trigger)return void(window.shopback.showPushRequest=function(){window.shoppush.showRequest(t.id,t.settings,t.close.duration,t.info.manifest,a,t.template)});this.$("body").append('<div id="shopback-'+t.id+'" class="shoppush-container"></div>'),this.$("#shopback-"+t.id).attr("data-platform",t.platform).attr("data-close",t.close.duration).html(this.requestTemplate("shoppush",t.template.content)),this.$("#shopback-"+t.id+" .shoppush-prompt-close").bind("click",function(a){e.closeCampaign(t.id,!1)}),this.$("#shopback-"+t.id+" .shoppush-disallow-btn").bind("click",function(a){e.closeCampaign(t.id,!1)}),this.$("#shopback-"+t.id+" .shoppush-accept-btn").bind("click",function(o){window.shoppush.showRequest(t.id,t.settings,t.close.duration,t.info.manifest,a,t.template),e.setInteraction("shoppush",t.id,"click"),e.closeCampaign(t.id,!1)}),"site"===t.template.content.font&&this.$("#shopback-"+t.id+" .shoppush-prompt-with-font").removeClass("shoppush-prompt-with-font");try{"alert"===t.template.content.layout&&"string"==typeof t.template.content.btncolor&&(document.querySelector(".shoppush-accept-btn").style.background=t.template.content.btncolor,document.querySelector(".shoppush-accept-btn").style.border="1px solid "+t.template.content.btncolor),"alert"===t.template.content.layout&&"string"==typeof t.template.content.bgcolor&&(document.querySelector(".shoppush-alert").style.background=t.template.content.bgcolor,document.querySelector(".shoppush-disallow-btn").style.textTransform="uppercase",document.querySelector(".shoppush-accept-btn").style.textTransform="uppercase"),"alert"===t.template.content.layout&&"string"==typeof t.template.content.btntextcolor&&(document.querySelector(".shoppush-accept-btn").style.color=t.template.content.btntextcolor)}catch(o){}if("disabled"===t.template.content.buttons&&(this.$("#shopback-"+t.id+" .shoppush-prompt-btn").remove(),this.$("#shopback-"+t.id+" .shoppush-prompt").css("cursor","pointer"),this.$("#shopback-"+t.id+" .shoppush-prompt").bind("click",function(o){window.shoppush.showRequest(t.id,t.settings,t.close.duration,t.info.manifest,a,t.template),e.setInteraction("shoppush",t.id,"click"),e.closeCampaign(t.id,!1)})),t.template.content.powered===!1&&this.$("#shopback-"+t.id+" .powered-link-wrapper").remove(),t.template.content.powered_text!==!1&&this.$("a.powered-link").html(t.template.content.powered_text),t.template.content.powered_link!==!1&&this.$("a.powered-link").attr("href",t.template.content.powered_link),"click-element"===t.trigger)this.$(".shoppush_notify_prompt").bind("click",function(a){e.showCampaign(t.id),e.setInteraction("shoppush",t.id,"view")});else{if(this.showCampaign(t.id),"undefined"!=typeof t.close.auto_close){this.closeCampaign(t.id,t.close.auto_close.duration);var i=1e3*t.close.auto_close.delay;setTimeout(function(){var a=e.$("#shopback-"+t.id);a.remove(),e.$(".shoppush-container").remove(),e.$(".shoppush-container-show").remove()},i)}this.setInteraction("shoppush",t.id,"view")}}}}},{key:"watchShopsmart",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this,a=window.shopback.client_id,o=window.shopback.currentProducts();if(a&&o.length>0){var o=o.join(",");(0,p["default"])("GET",this.base_api+"clients/"+a+"/products/"+o+"/cross_selling",function(a,o){if(a&&!o&&a.data.length>0){var i=a.data[0];i.image=i.images[0],i.price=String(i.price).split(".").join("."),i.layout=t.template.content.layout,e.prepareShopsmart(t,a.data[0])}})}else setTimeout(watchShopsmart,1e3,t)})},{key:"prepareShopsmart",value:function(t,e){this.languages.request(this.language,t.platform,!1);this.$("body").append('<div id="shopback-'+t.id+'" class="shopsmart-container"></div>'),this.$("#shopback-"+t.id).attr("data-platform",t.platform).attr("data-close",t.close.duration).html(this.requestTemplate("shopsmart",e)),this.showCampaign(t.id)}},{key:"watchShoplive",value:function(t){window.shopback.client_id,window.shopback.customer_id;this.prepareShoplive(t,t.template.content)}},{key:"prepareShoplive",value:function(t,e){this.languages.request(this.language,t.platform,!1);if(console.log("Busca por campanhas"),!window.shopback.shoplive_time){var a=!0,o=this;window.shopback.shoplive_time=setInterval(function(){console.log("loop"),a&&(0,p["default"])("GET",o.base_api+"clients/"+window.shopback.client_id+"/customers/"+window.shopback.customer_id+"/live",function(i,n){i&&!n&&i.data.details&&(clearInterval(window.shopback.shoplive_time),e.title=i.data.details.content.title,e.message=i.data.details.content.message,e.link=i.data.details.content.link,console.log(i),o.$("body").append('<div id="shopback-'+t.id+'" class="shoplive-container"></div>'),o.$("#shopback-"+t.id).attr("data-platform",t.platform).html(o.requestTemplate("shoplive",e)),o.showCampaign(t.id),a=!1)})},1e4)}}},{key:"watchShopbot",value:function(t){window.shopback.client_id,window.shopback.customer_id;this.prepareShopbot(t,t.template.content)}},{key:"prepareShopbot",value:function(t,e){this.languages.request(this.language,t.platform,!1);this.$("body").append('<div id="shopback-'+t.id+'" class="shopbot-container"></div>'),this.$("#shopback-"+t.id).attr("data-platform",t.platform).html(this.requestTemplate("shopbot",e)),this.showCampaign(t.id)}},{key:"showCampaign",value:function(t){var e=this.$("#shopback-"+t);"shoppush"!==e.attr("data-platform")||window.shoppush_opened?"shopsmart"===e.attr("data-platform")?e.removeClass("shopsmart-container").addClass("shopsmart-container-show").css("opacity","1"):"shoplive"===e.attr("data-platform")?e.removeClass("shoplive-container").addClass("shoplive-container-show").css("opacity","1"):"shopbot"===e.attr("data-platform")&&e.removeClass("shopbot-container").addClass("shopbot-container-show").css("opacity","1"):(e.removeClass("shoppush-container").addClass("shoppush-container-show").css("opacity","1"),window.shoppush_opened=!0)}},{key:"setInteraction",value:function(t,e,a){133!=window._st_account&&window.shopback.setMetadata("interaction",{platform:t,category:"onsite",campaign:e,type:a,subtype:"campaign"})}},{key:"closeCampaign",value:function(t,e){var a=this.$("#shopback-"+t);e?(0,u.setCookie)("sback_campaign_"+t,"closed",0,e,!0):((0,u.setCookie)("sback_campaign_"+t,"closed",0,a.attr("data-close"),!0),a.remove(),this.$(".shoppush-container").remove(),this.$(".shoppush-container-show").remove())}},{key:"loadDependency",value:function(t,e,a,o){var i=this;(0,f["default"])(this.config[t.platform.toUpperCase()][e],function(){a&&a(),i.loadCampaign(t)},o)}},{key:"requestTemplate",value:function(t,e){return"undefined"!=typeof this.templates[t]&&("undefined"!=typeof this.templates[t][e.layout+".html"]&&this.renderizeTemplate(t,this.templates[t][e.layout+".html"],e))}},{key:"renderizeTemplate",value:function(t,e,a){var o,i,n=this,s=e.match(/{{var_(.*?)}}/gi),r=e.match(/{{lang_(.*?)}}/gi);return s&&s.forEach(function(i){o=i.replace("{{var_","").replace("}}",""),e="string"==typeof a[o]||"number"==typeof a[o]?e.replace(i,a[o]):"string"==typeof n.config[t.toUpperCase()][o.toUpperCase()]?e.replace(i,n.config[t.toUpperCase()][o.toUpperCase()]):"number"==typeof n.config[t.toUpperCase()][o.toUpperCase()]?e.replace(i,n.config[t.toUpperCase()][o.toUpperCase()]):e.replace(i,"")}),r&&r.forEach(function(a){o=a.replace("{{lang_","").replace("}}",""),i=n.languages.request(n.language,t,o),e="string"==typeof i||"number"==typeof i?e.replace(a,i):e.replace(a,"")}),e}}]),t}();a["default"]=_},{"./cookie":4,"./languages":6,"./load-resource":7,"./request":9}],3:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),s=t("./request"),r=o(s),c=t("./msk"),u=o(c),d=function(){function t(e,a){i(this,t),this.base_pool=e,this.access_token=null,this.client_id=null,this.customer_id=null,this.queue=[],this.filter_map={email:"e",facebook:"f",webpush:"w",celphone:"c",telephone:"t"},this.msk=new u["default"](a)}return n(t,[{key:"updateAccessToken",value:function(t){this.msk.updateAccessToken(t),this.access_token=t}},{key:"updateClient",value:function(t){this.msk.updateClient(t),this.client_id=t}},{key:"updateCustomer",value:function(t){this.msk.updateCustomer(t),this.customer_id=t}},{key:"getBrowserID",value:function(t){var e=String(window.location.href);"/"!=window.location.pathname&&window.location.pathname.length>1&&(e=String(window.location.href).split(String(window.location.pathname))[0]),(0,r["default"])("GET",this.base_pool+"browser?source="+encodeURIComponent(e),t)}},{key:"getInformation",value:function(t,e,a){var o=String(window.location.href);"/"!=window.location.pathname&&window.location.pathname.length>1&&(o=String(window.location.href).split(String(window.location.pathname))[0]),e?(0,r["default"])("GET",this.base_pool+"get?filter="+t+"&strict="+e+"&source="+encodeURIComponent(o),a,!1,this.access_token):(0,r["default"])("GET",this.base_pool+"get?filter="+t+"&source="+encodeURIComponent(o),a,!1,this.access_token)}},{key:"setData",value:function(t,e){t&&(e||t.pool===!0)&&this.queue.push(t)}},{key:"hasData",value:function(){return 0!==this.queue.length}},{key:"sendData",value:function(t){var e=this;if(0!==this.queue.length&&this.access_token){var a=this.queue.pop();a&&this.filter_map[a.type]&&this.msk.execute({metadata:JSON.stringify({client:this.client_id,customer:this.customer_id,value:a.value,domain:a.domain?a.domain:"all"})},function(o,i){o&&!i&&(0,r["default"])("POST",e.base_pool+"set?filter="+e.filter_map[a.type]+"&source="+encodeURIComponent(window.location.href),t,o,e.access_token),e.queue.length>0&&e.sendData(t)})}}}]),t}();a["default"]=d},{"./msk":8,"./request":9}],4:[function(t,e,a){"use strict";function o(t,e,a,o,i){var n=new Date,s=n.getTime();o?n.setTime(s+1e3*o):n.setTime(s+36e5*a);var r=n.toUTCString(),c=t+"="+e+";expires="+r;c+=i?";domain="+location.host.replace(/^www/,"")+";path=/":"",document.cookie=c}function i(t){var e=document.cookie,a=e.indexOf(t+"=");if(a===-1)e=!1;else{a=e.indexOf("=",a)+1;var o=e.indexOf(";",a);o===-1&&(o=e.length),e=unescape(e.substring(a,o))}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.setCookie=o,a.getCookie=i},{}],5:[function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),s=function(){function t(){o(this,t),this.from_zanox={},this.from_criteo={},this.from_chaordic={},this.from_impulse={}}return n(t,[{key:"detectFromChaordic",value:function(){if("object"!==i(window.chaordic_meta))return!1;if("undefined"==typeof window.chaordic_meta.page)return!1;if("string"==typeof window.chaordic_meta.page&&["cart","product","transaction","confirmation"].indexOf(window.chaordic_meta.page)>-1&&(this.from_chaordic.page=window.chaordic_meta.page),"object"===i(window.chaordic_meta.page)&&"string"==typeof window.chaordic_meta.page.name&&["cart","product","transaction","confirmation"].indexOf(window.chaordic_meta.page.name)>-1&&(this.from_chaordic.page=window.chaordic_meta.page.name),!this.from_chaordic.page)return!1;if("product"===this.from_chaordic.page){if("string"==typeof window.chaordic_meta.pid?this.from_chaordic.metadata={product_id:window.chaordic_meta.pid}:"string"==typeof window.chaordic_meta.product.id&&(this.from_chaordic.metadata={product_id:window.chaordic_meta.product.id}),"object"===i(window.chaordic_meta.product.skus)){for(var t=[],e=0;e<window.chaordic_meta.product.skus.length;e++)window.chaordic_meta.product.skus[e].sku&&t.push(window.chaordic_meta.product.skus[e].sku);t.length>0&&(this.from_chaordic.metadata.product_skus=t)}}else if("cart"===this.from_chaordic.page){var a=!1;if("object"===i(window.chaordic_meta.cart)?"object"===i(window.chaordic_meta.cart.items)&&(a=window.chaordic_meta.cart.items):"object"===i(window.chaordic_meta.items)&&(a=window.chaordic_meta.items),!a)return!1;for(var o=[],e=0;e<a.length;e++)a[e].quantity&&(a[e].product||a[e].pid||a[e].sku)&&("object"===i(a[e].product)?o.push({product_id:a[e].product.id,price:a[e].product.price,quantity:a[e].quantity}):"string"!=typeof a[e].pid&&"string"!=typeof a[e].sku||o.push({product_id:a[e].pid,product_sku:a[e].sku,price:a[e].price,quantity:a[e].quantity}));o.length>0&&(this.from_chaordic.metadata={products:o})}else if("transaction"===this.from_chaordic.page||"confirmation"===this.from_chaordic.page){this.from_chaordic.page="confirmation";var n=!1;if("undefined"!=typeof window.chaordic_meta.id?n=window.chaordic_meta.id:"undefined"!=typeof window.chaordic_meta.transaction.id&&(n=window.chaordic_meta.transaction.id),n){var s=!1;if("object"===i(window.chaordic_meta.transaction)?"object"===i(window.chaordic_meta.transaction.items)&&(s=window.chaordic_meta.transaction.items):"object"===i(window.chaordic_meta.items)&&(s=window.chaordic_meta.items),!s)return!1;for(var o=[],r=0,e=0;e<s.length;e++)s[e].quantity&&(s[e].product||s[e].pid||s[e].sku)&&("object"===i(s[e].product)?(r+=s[e].product.price*s[e].quantity,o.push({product_id:s[e].product.id,price:s[e].product.price,quantity:s[e].quantity})):"string"!=typeof s[e].pid&&"string"!=typeof s[e].sku||(r+=s[e].price*s[e].quantity,o.push({product_id:s[e].pid,product_sku:s[e].sku,price:s[e].price,quantity:s[e].quantity})));o.length>0&&(this.from_chaordic.metadata={id:n,price:r,products:o})}}return!(!this.from_chaordic.page||!this.from_chaordic.metadata)&&this.from_chaordic}},{key:"detectFromImpulse",value:function(){if("object"!==i(window.impulseMetadata))return!1;if("undefined"==typeof window.impulseMetadata.page)return!1;if("string"==typeof window.impulseMetadata.page&&["cart","product","transaction","confirmation"].indexOf(window.impulseMetadata.page)>-1&&(this.from_impulse.page=window.impulseMetadata.page),"object"===i(window.impulseMetadata.page)&&"string"==typeof window.impulseMetadata.page.name&&["cart","product","transaction","confirmation"].indexOf(window.impulseMetadata.page.name)>-1&&(this.from_impulse.page=window.impulseMetadata.page.name),!this.from_impulse.page)return!1;if("product"===this.from_impulse.page){if("string"==typeof window.impulseMetadata.pid?this.from_impulse.metadata={product_id:window.impulseMetadata.pid}:"string"==typeof window.impulseMetadata.product.id&&(this.from_impulse.metadata={product_id:window.impulseMetadata.product.id}),"object"===i(window.impulseMetadata.product.skus)){for(var t=[],e=0;e<window.impulseMetadata.product.skus.length;e++)window.impulseMetadata.product.skus[e].sku&&t.push(window.impulseMetadata.product.skus[e].sku);t.length>0&&(this.from_impulse.metadata.product_skus=t)}}else if("cart"===this.from_impulse.page){var a=!1;if("object"===i(window.impulseMetadata.cart)?"object"===i(window.impulseMetadata.cart.items)&&(a=window.impulseMetadata.cart.items):"object"===i(window.impulseMetadata.items)&&(a=window.impulseMetadata.items),!a)return!1;for(var o=[],e=0;e<a.length;e++)a[e].quantity&&(a[e].product||a[e].pid||a[e].sku)&&("object"===i(a[e].product)?o.push({product_id:a[e].product.id,price:a[e].product.price,quantity:a[e].quantity}):"string"!=typeof a[e].pid&&"string"!=typeof a[e].sku||o.push({product_id:a[e].pid,product_sku:a[e].sku,price:a[e].price,quantity:a[e].quantity}));o.length>0&&(this.from_impulse.metadata={products:o})}else if("transaction"===this.from_impulse.page||"confirmation"===this.from_impulse.page){this.from_impulse.page="confirmation";var n=!1;if("undefined"!=typeof window.impulseMetadata.id?n=window.impulseMetadata.id:"undefined"!=typeof window.impulseMetadata.transaction.id&&(n=window.impulseMetadata.transaction.id),n){var s=!1;if("object"===i(window.impulseMetadata.transaction)?"object"===i(window.impulseMetadata.transaction.items)&&(s=window.impulseMetadata.transaction.items):"object"===i(window.impulseMetadata.items)&&(s=window.impulseMetadata.items),!s)return!1;for(var o=[],r=0,e=0;e<s.length;e++)s[e].quantity&&(s[e].product||s[e].pid||s[e].sku)&&("object"===i(s[e].product)?(r+=s[e].product.price*s[e].quantity,o.push({product_id:s[e].product.id,price:s[e].product.price,quantity:s[e].quantity})):"string"!=typeof s[e].pid&&"string"!=typeof s[e].sku||(r+=s[e].price*s[e].quantity,o.push({product_id:s[e].pid,product_sku:s[e].sku,price:s[e].price,quantity:s[e].quantity})));o.length>0&&(this.from_impulse.metadata={id:n,price:r,products:o})}}return!(!this.from_impulse.page||!this.from_impulse.metadata)&&this.from_impulse}},{key:"detectFromZanox",value:function(){if("object"!==i(window.zanox))return!1;if("string"==typeof window.zx_identifier)this.from_zanox.page="product",this.from_zanox.metadata={product_id:window.zx_identifier};else if("object"===i(window.zxprodids)&&"object"===i(window.zxqtds)&&"undefined"==typeof window.zx_transaction){this.from_zanox.page="cart";for(var t=[],e=zxprodids[0].split(","),a=zxqtds[0].split(","),o=zxprecos[0].split(","),n=0;n<e.length;n++)a[n]&&o[n]&&t.push({product_id:String(e[n]),price:parseFloat(o[n]),quantity:parseInt(a[n])});t.length>0&&(this.from_zanox.metadata={products:t})}else"string"==typeof window.zx_transaction&&"undefined"!=typeof window.zx_total_amount&&(this.from_zanox.page="confirmation",this.from_zanox.metadata={id:window.zx_transaction,price:window.zx_total_amount,products:[]});return!(!this.from_zanox.page||!this.from_zanox.metadata)&&this.from_zanox}},{key:"detectFromCriteo",value:function(){for(var t,e=!1,a=!1,o=document.querySelectorAll("script[data-owner]"),n=o.length-1;n>-1;){if(t=o[n],/widget\.criteo\.com/.test(t.src)){e=t.src;break}n--}if(!e)return!1;if(e=this.parseURL(e),"object"!==i(e.searchObject))return!1;for(var s in e.searchObject){if(e.searchObject[s]=decodeURIComponent(decodeURIComponent(e.searchObject[s])),e.searchObject[s].indexOf("e=vp")>-1){a=e.searchObject[s];break}if(e.searchObject[s].indexOf("e=vb")>-1){a=e.searchObject[s];break}if(e.searchObject[s].indexOf("e=vc")>-1){a=e.searchObject[s];break}}if(!a)return!1;for(var r={},c=a.split("&"),u=0;u<c.length;u++){var d=c[u].split("=");r[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}if("string"!=typeof r.e)return!1;if("vp"===r.e)"string"==typeof r.p&&(this.from_criteo.page="product",this.from_criteo.metadata={product_id:r.p});else if("vb"===r.e){if("string"==typeof r.p){this.from_criteo.page="cart";var p=[];r.p=r.p.replace("[","").replace("]","").split(",");for(var u=0;u<r.p.length;u++){for(var l={},c=r.p[u].split("&"),f=0;f<c.length;f++){var d=c[f].split("=");"i"===d[0]?l.product_id=String(decodeURIComponent(d[1])):"pr"===d[0]?l.price=parseFloat(decodeURIComponent(d[1])):"q"===d[0]&&(l.quantity=parseInt(decodeURIComponent(d[1])))}l.product_id&&l.price&&l.quantity&&p.push(l)}p.length>0&&(this.from_criteo.metadata={products:p})}}else if("vc"===r.e&&"string"==typeof r.p&&"string"==typeof r.id){this.from_criteo.page="confirmation";var h=0,p=[];r.p=r.p.replace("[","").replace("]","").split(",");for(var u=0;u<r.p.length;u++){for(var l={},c=r.p[u].split("&"),f=0;f<c.length;f++){var d=c[f].split("=");"i"===d[0]?l.product_id=String(decodeURIComponent(d[1])):"pr"===d[0]?l.price=parseFloat(decodeURIComponent(d[1])):"q"===d[0]&&(l.quantity=parseInt(decodeURIComponent(d[1])))}l.product_id&&l.price&&l.quantity&&(p.push(l),h+=l.quantity*l.price)}p.length>0&&(this.from_criteo.metadata={id:r.id,price:h,products:p})}return!(!this.from_criteo.page||!this.from_criteo.metadata)&&this.from_criteo}},{key:"parseURL",value:function(t){var e,a,o,i=document.createElement("a"),n={};for(i.href=t,e=i.search.replace(/^\?/,"").split("&"),o=0;o<e.length;o++)a=e[o].split("="),n[a[0]]=a[1];return{protocol:i.protocol,host:i.host,hostname:i.hostname,port:i.port,pathname:i.pathname,search:i.search,searchObject:n,hash:i.hash}}}]),t}();a["default"]=s},{}],6:[function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),s=function(){function t(){o(this,t),this.languages={},
this.languages.pt_BR={},this.languages.pt_BR.shoppush={},this.languages.pt_BR.shoppush.btn_allow="Permitir",this.languages.pt_BR.shoppush.btn_deny="Agora n&atilde;o",this.languages.pt_BR.shoppush.powered="Powered by Linx Digital",this.languages.pt_BR.shoppush.are_asking="est&aacute; solicitando",this.languages.pt_BR.shoppush.show_notifications="Mostrar notifica&ccedil;&otilde;es",this.languages.pt_BR.shoppush.popup_wants_send="deseja enviar notifica&ccedil;&otilde;es",this.languages.pt_BR.shoppush.popup_notification_title="Exemplo de Notifica&ccedil;&atilde;o",this.languages.pt_BR.shoppush.popup_notification_message="Veja como aparecer&aacute; em seu aparelho.",this.languages.pt_BR.shopsmart={},this.languages.pt_BR.shoplive={},this.languages.pt_BR.shoplive.btn_allow="Permitir",this.languages.pt_BR.shoplive.btn_deny="Agora n&atilde;o",this.languages.pt_BR.shoplive.powered="Powered by Linx Digital",this.languages.pt_BR.shoplive.are_asking="est&aacute; solicitando",this.languages.pt_BR.shoplive.show_notifications="Mostrar notifica&ccedil;&otilde;es",this.languages.pt_BR.shoplive.popup_wants_send="deseja enviar notifica&ccedil;&otilde;es",this.languages.pt_BR.shoplive.popup_notification_title="Exemplo de Notifica&ccedil;&atilde;o",this.languages.pt_BR.shoplive.popup_notification_message="Veja como aparecer&aacute; em seu aparelho.",this.languages.pt_BR.shopbot={},this.languages.pt_BR.shopbot.btn_allow="Permitir",this.languages.pt_BR.shopbot.btn_deny="Agora n&atilde;o",this.languages.pt_BR.shopbot.powered="Powered by Linx Digital",this.languages.pt_BR.shopbot.are_asking="est&aacute; solicitando",this.languages.pt_BR.shopbot.show_notifications="Mostrar notifica&ccedil;&otilde;es",this.languages.pt_BR.shopbot.popup_wants_send="deseja enviar notifica&ccedil;&otilde;es",this.languages.pt_BR.shopbot.popup_notification_title="Exemplo de Notifica&ccedil;&atilde;o",this.languages.pt_BR.shopbot.popup_notification_message="Veja como aparecer&aacute; em seu aparelho.",this.languages.es_ES={},this.languages.es_ES.shoppush={},this.languages.es_ES.shoppush.btn_allow="Aceptar",this.languages.es_ES.shoppush.btn_deny="Ahora no",this.languages.es_ES.shoppush.powered="Powered by Linx Digital",this.languages.es_ES.shoppush.are_asking="est&aacute; solicitando",this.languages.es_ES.shoppush.show_notifications="Mostrar notificaciones",this.languages.es_ES.shoppush.popup_wants_send="desea enviar notificaciones",this.languages.es_ES.shoppush.popup_notification_title="Ejemplo de notificaci&oacute;n",this.languages.es_ES.shoppush.popup_notification_message="Vea cómo aparecer&aacute; en su aparato."}return n(t,[{key:"request",value:function(t,e,a){return"object"===i(this.languages[t])&&(e===!1&&a===!1?this.languages[t]:"object"===i(this.languages[t][e])&&(a===!1?this.languages[t][e]:"undefined"!=typeof this.languages[t][e][a]&&this.languages[t][e][a]))}}]),t}();a["default"]=s},{}],7:[function(t,e,a){"use strict";function o(t,e,a){var o=!1,i=!1;"css"===a?(i=document.createElement("link"),i.href=t,i.rel="stylesheet",i.type="text/css"):(i=document.createElement("script"),i.src=t,i.async=!0),i&&(i.onreadystatechange=i.onload=function(){o||i.readyState&&!/loaded|complete/.test(i.readyState)||(o=!0,e&&e())},document.querySelector("head").appendChild(i))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=o},{}],8:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),s=t("./request"),r=o(s),c=function(){function t(e){i(this,t),this.base_api=e,this.access_token=null,this.client_id=null,this.customer_id=null}return n(t,[{key:"updateAccessToken",value:function(t){this.access_token=t}},{key:"updateClient",value:function(t){this.client_id=t}},{key:"updateCustomer",value:function(t){this.customer_id=t}},{key:"execute",value:function(t,e){return t&&this.access_token&&this.client_id&&this.customer_id?void(0,r["default"])("POST",this.base_api+"clients/"+this.client_id+"/customers/"+this.customer_id+"/secrets/create",function(a,o){if(a&&!o){var i=a.data.secret,n=btoa(encodeURIComponent(JSON.stringify(t)));n=n.split("").reverse().join(""),n=n.split("");var s=i.substr(0,24),r=i.substr(24);r=r.split("");for(var c={},u=0;u<r.length;u++)u%2==0&&(c["key_"+r[u]]=r[u+1]);for(var d=[],u=0;u<n.length;u++)c.hasOwnProperty("key_"+n[u])?d.push(c["key_"+n[u]]):d.push(n[u]);d.push(s),e({code:d.join("")},!1)}},!1,this.access_token):void e(null,new Error("Invalid data"))}}]),t}();a["default"]=c},{"./request":9}],9:[function(t,e,a){"use strict";function o(t,e,a,o,i){var n=new Headers;n.append("Content-Type","application/json"),n.append("referer-new",location.href),i&&n.append("Authorization","Bearer "+i);var s={method:t,headers:n,credentials:"include",mode:"cors"};o&&(s.body=JSON.stringify(o)),fetch(e,s).then(function(t){return t.status>=200&&t.status<300||404===t.status?t.json():Promise.reject(t.statusText)}).then(function(t){a(t,null)})["catch"](function(t){a(null,t)})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=o},{}],10:[function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("./components/cookie"),s=t("./components/load-resource"),r=o(s),c=t("./components/request"),u=(o(c),t("./components/api")),d=o(u),p=t("./components/helper"),l=o(p),f=t("./components/cookie-pool"),h=o(f),m=t("./components/campaigns"),_=o(m);!function(t,e){function a(){t.is_running&&(window.localStorage.setItem("sback_time_spent",Math.round(((new Date).getTime()-Y.LOCAL_DATE)/1e3)),setTimeout(a,200))}function o(){if(!location.hostname.includes("apamoveis"))if(String(Y.LOCATION)!==String(location.href)){t.is_running=!1,delete window.shopback;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src="//static.shopback.net/tags/init.js?nocache="+(new Date).getTime(),e.setAttribute("data-client",Y.CLIENT);try{document.querySelector("head").appendChild(e)}catch(a){console.log("Changing address, now is without SB tag")}}else setTimeout(o,500)}function s(t){if(t.length<1)return t;if("undefined"==typeof t.deny)return t;var e="deny";if("undefined"!=typeof t.deny_reverse&&t.deny_reverse===!0)var e="allow";var a={};a[e]={};for(var o=t.deny.split("|"),i=0;i<o.length;i++){var n=o[i].split(":");a[e][n[0]]=n[1].split(";")}return{filters:a}}function c(t,e){if(!t&&!e)return void console.log("Invalid parameters for Recommendations");if("function"==typeof t&&(e=t,t={}),"object"===("undefined"==typeof t?"undefined":i(t))&&"function"==typeof e){var a=[],o=window.localStorage.getItem("sback_anonymous")||"{}";o=JSON.parse(o);var n=o.visits_products?o.visits_products:[];if("object"===("undefined"==typeof n?"undefined":i(n)))for(var s=0;s<n.length&&!(a.length>=5);s++)"object"===i(n[s].metadata)&&"string"==typeof n[s].metadata.product_id&&(a.indexOf(n[s].metadata.product_id)>-1||a.push(n[s].metadata.product_id));J.API.getRecommendations({options:t,visits:a,keywords:encodeURIComponent(document.title)},e)}}function u(t){var e=[],a=window.localStorage.getItem("sback_anonymous")||"{}";a=JSON.parse(a);var o=a.visits_products?a.visits_products:[];if("object"===("undefined"==typeof o?"undefined":i(o)))for(var n=0;n<o.length&&!(e.length>=5);n++)"object"===i(o[n].metadata)&&"string"==typeof o[n].metadata.product_id&&(e.indexOf(o[n].metadata.product_id)>-1||e.push(o[n].metadata.product_id));J.API.getLastViewed({visits:e},t)}function p(t,e){"string"==typeof t&&"object"===("undefined"==typeof e?"undefined":i(e))&&Y.METADATAS.indexOf(t)>-1&&(G("Set "+t+" metadata",e),F[t.toUpperCase()]=e)}function f(t){return"object"===("undefined"==typeof t?"undefined":i(t))&&(!(!t.page||"string"!=typeof t.page)&&(!(!t.metadata||"object"!==i(t.metadata))&&(Y.PAGE=t.page,void("product"===t.page?p("page",{type:"product",metadata:t.metadata}):"cart"===t.page?p("cart",t.metadata.products):"confirmation"===t.page&&p("order",t.metadata)))))}function m(t){if(t=new RegExp("[?&]"+encodeURIComponent(t)+"=([^&]*)").exec(document.location.search))return decodeURIComponent(t[1])}function g(t){if("object"===("undefined"==typeof t?"undefined":i(t))&&"object"===i(t.caller)&&"automatic"===t.caller.type){var e=[],a=[];if(t.caller.rules.length<1)return!1;for(var o=0;o<t.caller.rules.length;o++){var n=t.caller.rules[o],s=!1,r=!1;if("url"===n.element)s=String(location.href),"http://"!==n.value.substr(0,7)&&"https://"!==n.value.substr(0,8)&&(s=String(document.location.href).split(document.domain+"/")[1]),r=s;else if("window"===n.element){for(var c=n.subelement.split("."),u=0;u<c.length&&(s=u<1?"undefined"!=typeof window[c[u]]&&window[c[u]]:"undefined"!=typeof s[c[u]]&&s[c[u]],s);u++);"function"==typeof s.toString&&(r=s.toString())}else"html-id"===n.element?(s=document.querySelector("#"+n.subelement),s||(s=!1),"undefined"!=typeof s.innerHTML&&(r=s.innerHTML)):"html-class"===n.element&&(s=document.querySelector("."+n.subelement),s||(s=!1),"undefined"!=typeof s.innerHTML&&(r=s.innerHTML));if("equal"===n.filter&&(n.value===r?e.push(n.value):a.push(n.value)),"different"===n.filter&&(n.value!==r?e.push(n.value):a.push(n.value)),"starts-with"===n.filter&&(r.substr(0,n.value.length)===n.value?e.push(n.value):a.push(n.value)),"ends-with"===n.filter&&(r.substr(n.value.length*-1)===n.value?e.push(n.value):a.push(n.value)),"contains"===n.filter&&(r.indexOf(n.value)>-1?e.push(n.value):a.push(n.value)),"not-contains"===n.filter&&(r.indexOf(n.value)===-1?e.push(n.value):a.push(n.value)),"smaller-than"===n.filter&&(isNaN(r)?a.push(n.value):r<n.value?e.push(n.value):a.push(n.value)),"bigger-than"===n.filter&&(isNaN(r)?a.push(n.value):r>n.value?e.push(n.value):a.push(n.value)),"exists"===n.filter&&(s?e.push(n.value):a.push(n.value)),"not-exists"===n.filter&&(s?a.push(n.value):e.push(n.value)),"has-attr"===n.filter&&("function"==typeof s.getAttribute?s.getAttribute(n.value)?e.push(n.value):a.push(n.value):s.hasOwnProperty(n.value)?e.push(n.value):a.push(n.value)),"has-attr-value"===n.filter){var d=!1;if("function"==typeof s.getAttribute){for(var l in s.attributes)if(s.attributes[l].value===n.value){d=!0,e.push(n.value);break}d||a.push(n.value)}else{for(var l in s)if(s[l]===n.value){d=!0,e.push(n.value);break}d||a.push(n.value)}}}var f=!1;if("any-rules"===t.caller.criteria?e.length>0&&(f=!0):"all-rules"===t.caller.criteria&&e.length>0&&a.length<1&&(f=!0),f===!0){G("Positive status for event",t);var h=!1;if("object"===i(t.metadata)&&"enabled"===t.metadata.status){G("Checking event metadata",t);var h=w(t);"object"!==("undefined"==typeof h?"undefined":i(h))?h=!1:Object.keys(h).length<1&&(h=!1),G("Result of event metadata",h?h:{})}return h?"product"===t.metadata.type?p("page",{type:"product",metadata:h}):p(t.metadata.type,h):J.API.trackingEvent({event:t.id}),!0}return G("Negative status for event",t),!1}}function w(t){if("object"===("undefined"==typeof t?"undefined":i(t))&&"object"===i(t.metadata)&&"enabled"===t.metadata.status){var e=!1,a=!1;if("window"===t.metadata.from.type){for(var o=t.metadata.from.element.split("."),n=0;n<o.length;n++){if(n<1)e="undefined"!=typeof window[o[n]]&&window[o[n]];else if(Array.isArray(e)){for(var s=!1,r=0;r<e.length;r++)if("undefined"!=typeof e[r][o[n]]){s=!0,e="undefined"!=typeof e[r][o[n]]&&e[r][o[n]];break}s||(e=!1)}else e="undefined"!=typeof e[o[n]]&&e[o[n]];if(!e)break}if(!e||"object"!==("undefined"==typeof e?"undefined":i(e)))return!1;if("cart"===t.metadata.type){if(a=[],!Array.isArray(e))return!1;for(var n=0;n<e.length;n++){var c=e[n];if("object"===("undefined"==typeof c?"undefined":i(c))&&!Array.isArray(c)){for(var u={},r=0;r<t.metadata.attributes.length;r++){var d=t.metadata.attributes[r];"undefined"!=typeof c[d.value]&&"object"!==i(c[d.value])&&(u[d.name]=c[d.value])}Object.keys(u).length===t.metadata.attributes.length&&a.push(u)}}}else{a={};for(var r=0;r<t.metadata.attributes.length;r++){var d=t.metadata.attributes[r];if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("undefined"!=typeof e[n][d.value]&&"object"!==i(e[n][d.value])){a[d.name]=e[n][d.value];break}}else"undefined"!=typeof e[d.value]&&"object"!==i(e[d.value])&&(a[d.name]=e[d.value])}Object.keys(a).length!==t.metadata.attributes.length&&(a=!1)}}else if("html"===t.metadata.from.type){if(isNaN(t.metadata.from.element)&&(e=document.querySelector(t.metadata.from.element)),!e||"object"!==("undefined"==typeof e?"undefined":i(e)))return!1;if("cart"===t.metadata.type){a=[];for(var u={},r=0;r<t.metadata.attributes.length;r++){var d=t.metadata.attributes[r];e.querySelector(d.value)&&(u[d.name]=e.querySelectorAll(d.value))}if(u.length!==t.metadata.attributes.length)return!1;for(var p={},l=Object.keys(u),r=0;r<u[l[0]].length;r++)u[l[0]][r]&&u[l[1]][r]&&"undefined"!=typeof u[l[0]][r].innerHTML&&"undefined"!=typeof u[l[1]][r].innerHTML&&(p[l[0]]=u[l[0]][r].innerHTML,p[l[1]]=u[l[1]][r].innerHTML,a.push(p))}else{a={};for(var r=0;r<t.metadata.attributes.length;r++){var d=t.metadata.attributes[r];e.querySelector(d.value)&&(a[d.name]=e.querySelector(d.value).innerHTML)}Object.keys(a).length!==t.metadata.attributes.length&&(a=!1)}}return!(!a||Object.keys(a).length<1)&&a}}function y(t,e){t&&!e&&Y.ANONYMOUS&&(Y.ANONYMOUS_DATA=window.localStorage.getItem("sback_anonymous")||"{}",Y.ANONYMOUS_DATA=JSON.parse(Y.ANONYMOUS_DATA),J.API.updateAnonymousData(Y.ANONYMOUS_DATA),J.API.updateClient(null),J.API.updateCustomer(null),J.API.updateAccessToken(null),J.COOKIE_POOL.updateClient(null),J.COOKIE_POOL.updateCustomer(null),J.COOKIE_POOL.updateAccessToken(null),(0,n.setCookie)("sback_access_token","",-1),R())}function b(t,e){t&&!e&&(J.COOKIE_POOL.hasData()?J.COOKIE_POOL.sendData(y):y(t,e))}function v(t,e){if(Y.CHAORDIC.apikey&&Y.CHAORDIC.impulse_js)return!1;if(!Y.CHAORDIC.enabled)return!1;if(Y.CHAORDIC.apikey&&Y.CHAORDIC.loader_js)if(console.log("SB chamando o chaordic.js"),window._sb_lock_chaordic_meta||(window.chaordic_meta=t),window.shopback_chaordic)e||window.chaordic.initialize();else{window.shopback_chaordic=!0;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.defer=!0,a.src="//static.chaordicsystems.com/static/loader.js",a.setAttribute("data-apikey",Y.CHAORDIC.apikey),window.vtex&&(window.chaordic_meta&&(window.chaordic_meta=void 0),a.setAttribute("data-module","vtex"),a.setAttribute("data-initialize","false")),document.querySelector("head").appendChild(a)}if(Y.CHAORDIC.cookie_pool&&!Y.CHAORDIC.impulse_js){var o=(0,n.getCookie)("chaordic_sback")||!1;if(!o&&_st_app.user_id){var i=window.chaordic_meta&&(window.chaordic_meta.user||window.chaordic_meta.anonymousUser);if(!i){var s=atob(_st_app.user_id).split(".")[2],r={email:null,extraInfo:{}};void 0!==s?(r.email=JSON.parse(atob(s)).email,r.extraInfo={shopback:!0}):(r.email=atob(_st_app.user_id),r.extraInfo={shopbackLogged:!0}),null!==r&&(chaordic=window.chaordic||[],chaordic.push(["updateUserEmail",r]))}(0,n.setCookie)("chaordic_sback",1,24)}Y.CHAORDIC.enabled=!1}}function O(){var e="object"===i(F.HELPER)&&F.HELPER,a="object"===i(F.CONTACT)&&F.CONTACT,o="object"===i(F.PAGE)&&F.PAGE,s="object"===i(F.CART)&&F.CART,c="object"===i(F.ORDER)&&F.ORDER,u="object"===i(F.EVENTS)&&F.EVENTS,d="object"===i(F.INTERACTION)&&F.INTERACTION,p="object"===i(F.BILLET)&&F.BILLET;if(e&&e.length>0)for(var l=0;l<e.length;l++){var f=e[l];Y.HELPERS.indexOf(f)===-1&&(Y.HELPERS.push(f),(0,r["default"])(Y.BASE_URL_HELPERS+f+".js"))}if(a&&JSON.stringify(a)!==JSON.stringify(J.API.data.contact)&&Y.CONTACTS.indexOf(a.type)>-1&&(G("Found new CONTACT metadata",a),J.COOKIE_POOL.setData(a,Y.PARTNER),J.API.setContact(a,function(t,e){t&&!e&&(Y.ANONYMOUS_DATA=window.localStorage.getItem("sback_anonymous")||"{}",Y.ANONYMOUS_DATA=JSON.parse(Y.ANONYMOUS_DATA),Y.ANONYMOUS_DATA.contact=a.type,Y.CUSTOMER_CONTACTS[a.type]=!0,window.localStorage.setItem("sback_anonymous",JSON.stringify(Y.ANONYMOUS_DATA)),window.localStorage.setItem("sback_contacts",JSON.stringify(Y.CUSTOMER_CONTACTS)),b(t,e))})),o)if(t.page_type=o.type,Y.ANONYMOUS){if(JSON.stringify(o)!==JSON.stringify(z.PAGE)&&(G("Found new PAGE metadata",o),z.PAGE=o,Y.ANONYMOUS_DATA=window.localStorage.getItem("sback_anonymous")||"{}",Y.ANONYMOUS_DATA=JSON.parse(Y.ANONYMOUS_DATA),"product"===z.PAGE.type)){var h=z.PAGE;h.date=Y.SERVER_DATE,Y.ANONYMOUS_DATA.visits_products=Y.ANONYMOUS_DATA.visits_products?Y.ANONYMOUS_DATA.visits_products:[],"object"===i(Y.ANONYMOUS_DATA.visits_products)?(Y.ANONYMOUS_DATA.visits_products.unshift(h),Y.ANONYMOUS_DATA.visits_products.length>=8&&Y.ANONYMOUS_DATA.visits_products.pop()):(Y.ANONYMOUS_DATA.visits_products=[],Y.ANONYMOUS_DATA.visits_products.unshift(h)),window.localStorage.setItem("sback_anonymous",JSON.stringify(Y.ANONYMOUS_DATA));try{v({page:"product",pid:o.metadata.product_id})}catch(m){G("Error on enableChaordicMeta for product",m)}}}else if(JSON.stringify(o)!==JSON.stringify(J.API.data.page)&&(G("Found new PAGE metadata",o),J.API.trackingPage(o),z.PAGE=o,Y.ANONYMOUS_DATA=window.localStorage.getItem("sback_anonymous")||"{}",Y.ANONYMOUS_DATA=JSON.parse(Y.ANONYMOUS_DATA),"product"===z.PAGE.type)){var h=z.PAGE;h.date=Y.SERVER_DATE,Y.ANONYMOUS_DATA.visits_products=Y.ANONYMOUS_DATA.visits_products?Y.ANONYMOUS_DATA.visits_products:[],"object"===i(Y.ANONYMOUS_DATA.visits_products)?(Y.ANONYMOUS_DATA.visits_products.unshift(h),Y.ANONYMOUS_DATA.visits_products.length>=8&&Y.ANONYMOUS_DATA.visits_products.pop()):(Y.ANONYMOUS_DATA.visits_products=[],Y.ANONYMOUS_DATA.visits_products.unshift(h)),window.localStorage.setItem("sback_anonymous",JSON.stringify(Y.ANONYMOUS_DATA));try{v({page:"product",pid:o.metadata.product_id})}catch(m){G("Error on enableChaordicMeta for product",m)}}if(s&&JSON.stringify(s)!==JSON.stringify(J.API.data.cart)){G("Found new CART metadata",s),J.API.trackingCart({cart:Y.CART,metadata:s,information:Y.INTERACTIONS},function(t,e){if(t&&!e){Y.CART=t.data.cart,(0,n.setCookie)("sback_cart",Y.CART,24);try{v({page:"cart",items:t.data.products}),window.localStorage.setItem("sback_cart_items",JSON.stringify(t.data.products))}catch(e){G("Error on enableChaordicMeta for cart",e)}}});try{if(Array.isArray(s))for(var l=0;l<s.length;l++)"undefined"!=typeof s[l].product_id&&$.push(s[l].product_id)}catch(_){console.log("Error on products requests from cart",_)}}if(c&&JSON.stringify(c)!==JSON.stringify(J.API.data.order)){G("Found new ORDER metadata",c),J.API.trackingOrder({order:Y.ORDER,cart:Y.CART,metadata:c,information:Y.INTERACTIONS},function(t,e){t&&!e&&(Y.CART=!1,Y.ORDER=t.data.order,(0,n.setCookie)("sback_cart","",-1),(0,n.setCookie)("sback_order",Y.ORDER,.1))});try{var w=window.localStorage.getItem("sback_cart_items")||"[]";w=JSON.parse(w),v({page:"transaction",id:String(c.id),items:w})}catch(m){G("Error on enableChaordicMeta for transaction",m)}}u&&u.forEach(function(t,e){Y.DEBUG_EVENTS.indexOf(t.id)===-1&&(Y.DEBUG_EVENTS.push(t.id),G("Found new EVENT metadata",t)),g(t)===!0&&u.splice(e,1)}),d&&JSON.stringify(d)!==JSON.stringify(J.API.data.interaction)&&J.API.trackingInteraction(d,null),p&&(J.API.trackingEvent(p),F.BILLET=""),setTimeout(function(){O()},1e3)}function k(){if("object"===i(window._sback_cart_data)){var t=!1,e=!1,a=!1,o=!1;try{t=J.HELPER.detectFromChaordic(),o=J.HELPER.detectFromImpulse(),e=J.HELPER.detectFromZanox(),a=J.HELPER.detectFromCriteo()}catch(n){G("Erro ao obter informações de metadata para cart",n)}o||t||e||a?o?f(o):t?f(t):e?f(e):a&&f(a):p("cart",window._sback_cart_data)}setTimeout(function(){k()},1e3)}function S(){if("object"===i(window._cv_data)&&window._cv_data&&window._cv_data.order_id&&window._cv_data.valor){var t=!1,e=!1,a=!1;try{t=J.HELPER.detectFromChaordic(),e=J.HELPER.detectFromZanox(),a=J.HELPER.detectFromCriteo()}catch(o){}t||e||a?e?f(e):a?f(a):t&&f(t):p("order",{id:window._cv_data.order_id?window._cv_data.order_id:"unknown",price:window._cv_data.valor?window._cv_data.valor:1})}setTimeout(function(){S()},1e3)}function A(){var t=(0,n.getCookie)("sb_days")||!1,e=1;return t&&(e=Math.round(((new Date).getTime()-t)/1e3)),e}function E(e,a){if(e&&!a){if("object"!==i(e.keys))return!1;if(e.keys.length<1)return!1;t.setMetadata("contact",{type:"automatic",values:e.keys})}}function C(t){if(Y.PARTNER)return!1;var e=((0,n.getCookie)("sback_customer_e")||!1,(0,n.getCookie)("sback_customer_f")||!1,(0,n.getCookie)("sback_customer_w")||!1);(0,n.getCookie)("sback_customer_c")||!1,(0,n.getCookie)("sback_customer_t")||!1;t.webpush===!0||e||(J.COOKIE_POOL.getInformation("w",!1,E),(0,n.setCookie)("sback_customer_w",!0,12))}function T(t,e){if(!t||e)return void console.log("Failed when try to set pageview");if(t.data){var o=(0,n.getCookie)("sback_current_session")||!1,s=(0,n.getCookie)("sback_total_sessions")||!1,r=(0,n.getCookie)("sb_days")||!1;o||((0,n.setCookie)("sback_current_session",1,1),s?(0,n.setCookie)("sback_total_sessions",parseInt(s,0)+1,8760):(0,n.setCookie)("sback_total_sessions",1,8760)),r||(0,n.setCookie)("sb_days",(new Date).getTime(),8760),Y.ANONYMOUS=t.data.anonymous,Y.SERVER_DATE=t.data.time,Y.ANONYMOUS?(Y.ANONYMOUS_DATA=window.localStorage.getItem("sback_anonymous")||"{}",Y.ANONYMOUS_DATA=JSON.parse(Y.ANONYMOUS_DATA),Y.ANONYMOUS_DATA.first_seen||(Y.ANONYMOUS_DATA.first_seen={referrer:encodeURIComponent(document.referrer),date:Y.SERVER_DATE}),Y.ANONYMOUS_DATA.last_seen={referrer:encodeURIComponent(document.referrer),date:Y.SERVER_DATE},Y.ANONYMOUS_DATA.visits_products||(Y.ANONYMOUS_DATA.visits_products=[]),window.localStorage.setItem("sback_anonymous",JSON.stringify(Y.ANONYMOUS_DATA)),G("Saving information about session for anonymous customer")):(a(),Y.SESSION=t.data.session,Y.PAGEVIEW=t.data.pageview,(0,n.setCookie)("sback_session",Y.SESSION,1),(0,n.setCookie)("sback_pageview",Y.PAGEVIEW,720),G("Saving information about session for identified customer")),C(Y.CUSTOMER_CONTACTS);try{t.data.config&&(G("Load config",t.data.config),"object"===i(t.data.config.chaordic)&&(G("Load config for chaordic",t.data.config.chaordic),Y.CHAORDIC.apikey=t.data.config.chaordic.apikey,Y.CHAORDIC.cookie_pool=t.data.config.chaordic.cookie_pool,Y.CHAORDIC.impulse_js=t.data.config.chaordic.impulse_js,Y.CHAORDIC.loader_js=t.data.config.chaordic.loader_js),"/"===window.document.location.pathname?v(window.document.location.href.indexOf("qa.sephora.com.br")==-1?{page:"home"}:{page:"other"}):setTimeout(function(){v({page:"other"},!0)},5e3))}catch(c){console.log("Error when add chaordic info",c)}t.data.page?"unknown"!==t.data.page.type&&(F.PAGE=t.data.page,G("Updating PAGE metadata",F.PAGE),"object"===i(t.data.page.metadata)&&"string"==typeof t.data.page.metadata.product_id&&$.push(t.data.page.metadata.product_id)):t.data.helpers&&(F.HELPER=t.data.helpers,G("Updating HELPER metadata",F.HELPER)),t.data.events&&(F.EVENTS=t.data.events,G("Updating EVENTS metadata",F.EVENTS)),t.data.campaigns&&(G("Init campaigns",t.data.campaigns),J.CAMPAIGNS=new _["default"](Y.BASE_URL_API,Y.BASE_URL_STATICS,Y.LANGUAGE),J.CAMPAIGNS.initialize(t.data.campaigns,Y.CUSTOMER_CONTACTS)),setTimeout(function(){O()},100),setTimeout(function(){k()},100),setTimeout(function(){S()},100);var u=(0,n.getCookie)("sback_pid")||!1;u&&(p("interaction",{platform:u,campaign:"unknown",category:"offsite",type:"click",subtype:"campaign"}),(0,n.setCookie)("sback_pid","",-1))}}function N(e,a){return!e||a?void console.log("Customer identification failed"):"undefined"==typeof e.data?void(Y.RECONNECTS<3&&(Y.RECONNECTS++,R())):"undefined"==typeof e.data.client||"undefined"==typeof e.data.customer||"undefined"==typeof e.data.access_token?void(Y.RECONNECTS<3&&(Y.RECONNECTS++,R())):(G("Saving session"),Y.CLIENT=e.data.client,Y.CUSTOMER=e.data.customer,Y.ACCESS_TOKEN=e.data.access_token,Y.PARTNER=e.data.partner,Y.LANGUAGE=e.data.language,Y.TIMEZONE=e.data.timezone,t.client_id=Y.CLIENT,t.customer_id=Y.CUSTOMER,(0,n.setCookie)("sback_client",Y.CLIENT,8640),(0,n.setCookie)("sback_access_token",Y.ACCESS_TOKEN,22),(0,n.setCookie)("sback_partner",Y.PARTNER,8640),(0,n.getCookie)("sback_customer")||(0,n.setCookie)("sback_customer",Y.CUSTOMER,8640,!1,!0),Object.keys(e.data.contacts).length>0&&(Y.CUSTOMER_CONTACTS=e.data.contacts,window.localStorage.setItem("sback_contacts",JSON.stringify(Y.CUSTOMER_CONTACTS)),G("Updating customer contacts")),window.localStorage.setItem("sback_language",Y.LANGUAGE),window.localStorage.setItem("sback_timezone",Y.TIMEZONE),J.API.updateAnonymousData(null),J.API.updateClient(Y.CLIENT),J.API.updateCustomer(Y.CUSTOMER),J.API.updateAccessToken(Y.ACCESS_TOKEN),J.COOKIE_POOL.updateClient(Y.CLIENT),J.COOKIE_POOL.updateCustomer(Y.CUSTOMER),J.COOKIE_POOL.updateAccessToken(Y.ACCESS_TOKEN),G("Init customer tracking"),void J.API.tracking({session:Y.SESSION,pageview:Y.PAGEVIEW,referrer_url:encodeURIComponent(document.referrer),referrer_spent:Y.TIME_SPENT,interactions:Y.INTERACTIONS,page:Y.PAGE},T))}function I(t,e){return e||!t?void console.log("Browser identification failed"):(Y.BROWSER=t.id,Y.BROWSER_QUERY=t.query,Y.BROWSER=Y.BROWSER.split(" ").join(""),(0,n.setCookie)("sback_browser",Y.BROWSER,8640),G("Updating browser ID"),J.API.updateBrowser(Y.BROWSER),G("Authenticating customer"),void J.API.auth({client:Y.CLIENT,customer:Y.CUSTOMER,browser:Y.BROWSER,browser_query:Y.BROWSER_QUERY},N))}function R(){Y.PARTNER="true"===(0,n.getCookie)("sback_partner"),Y.SESSION=(0,n.getCookie)("sback_session")||!1,Y.PAGEVIEW=(0,n.getCookie)("sback_pageview")||!1,Y.CART=(0,n.getCookie)("sback_cart")||!1,Y.ORDER=(0,n.getCookie)("sback_order")||!1,Y.TIME_SPENT=window.localStorage.getItem("sback_time_spent")||!1,Y.LANGUAGE=window.localStorage.getItem("sback_language")||Y.LANGUAGE,Y.TIMEZONE=window.localStorage.getItem("sback_timezone")||Y.TIMEZONE;var e=(0,n.getCookie)("sback_customer"),a=(0,n.getCookie)("sback_client"),o=(0,n.getCookie)("sback_browser"),i=(0,n.getCookie)("sback_access_token");if(e&&a&&o&&i){Y.CLIENT=a,Y.CUSTOMER=e,Y.BROWSER=o,Y.ACCESS_TOKEN=i,J.API.updateClient(Y.CLIENT),J.API.updateCustomer(Y.CUSTOMER),J.API.updateBrowser(Y.BROWSER),J.API.updateAccessToken(Y.ACCESS_TOKEN),J.COOKIE_POOL.updateClient(Y.CLIENT),J.COOKIE_POOL.updateCustomer(Y.CUSTOMER),J.COOKIE_POOL.updateAccessToken(Y.ACCESS_TOKEN);var s=window.localStorage.getItem("sback_contacts")||"{}";s=JSON.parse(s),Object.keys(s).length>0&&(Y.CUSTOMER_CONTACTS=s),(0,n.getCookie)("sback_refresh_wp")||(Y.CUSTOMER_CONTACTS.webpush=!1,(0,n.setCookie)("sback_refresh_wp","no",24)),t.client_id=Y.CLIENT,t.customer_id=Y.CUSTOMER,G("Init customer tracking"),J.API.tracking({session:Y.SESSION,pageview:Y.PAGEVIEW,referrer_url:encodeURIComponent(document.referrer),referrer_spent:Y.TIME_SPENT,interactions:Y.INTERACTIONS,page:Y.PAGE},T)}else G("Retrieving customer browser information"),J.COOKIE_POOL.getBrowserID(I)}function P(t){try{var e=J.HELPER.detectFromChaordic(),a=J.HELPER.detectFromZanox(),o=J.HELPER.detectFromCriteo();Y.DEBUG_MODE&&(console.log("Informações para chaordic",e),console.log("Informações para zanox",a),console.log("Informações para criteo",o)),a?f(a):o?f(o):e&&f(e)}catch(i){G("Erro ao obter informações de metadata")}R()}function M(){G("Enable public methods"),t.getCookie=n.getCookie,t.setCookie=n.setCookie,t.setMetadata=p,t.trackingDays=A,t.currentProducts=x,t.getRecommendations=c,t.getLastViewed=u,t.debugMessage=G,t.version="1.1 - Deploy: 21/09/18 11:53",t.jQuery||(t.jQuery=window.jQuery),t.getRecommendation=c,t.api={getRecommendations:function(e,a){return e||a?("function"==typeof e&&(a=e,e={}),void("object"===("undefined"==typeof e?"undefined":i(e))&&"function"==typeof a&&(e=s(e),t.getRecommendations(e,function(t,e){a(e,t)})))):void console.log("Invalid parameters for legacy function api.Recommendations")}},P()}function L(){J.HELPER=new l["default"],M()}function j(){J.COOKIE_POOL=new h["default"](Y.BASE_URL_COOKIES,Y.BASE_URL_API),L()}function U(t,e){if(t)if(403===t.status){if(J.API.updateClient(null),J.API.updateCustomer(null),J.API.updateAccessToken(null),J.COOKIE_POOL.updateClient(null),J.COOKIE_POOL.updateCustomer(null),J.COOKIE_POOL.updateAccessToken(null),e.attempts>2)return;e.attempts++,J.API.delayedCall(e),(0,n.setCookie)("sback_access_token","",-1),R()}else{if(e.attempts>2)return;e.attempts++,J.API.delayedCall(e)}}function D(){J.API=new d["default"](Y.BASE_URL_API),J.API.onRequestError=U,j()}function x(){return $}function q(){if(Y.INTERACTIONS=window.localStorage.getItem("sback_interactions")||!1,Y.INTERACTIONS)try{Y.INTERACTIONS=JSON.parse(Y.INTERACTIONS)}catch(t){Y.INTERACTIONS={utm_source:!1,utm_medium:!1,utm_campaign:!1,utm_term:!1,utm_content:!1}}else Y.INTERACTIONS={utm_source:!1,utm_medium:!1,utm_campaign:!1,utm_term:!1,utm_content:!1};var e=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];m("utm_source")&&(Y.INTERACTIONS.utm_source=m("utm_source"),e.splice(e.indexOf("utm_source"),1)),m("utm_medium")&&(Y.INTERACTIONS.utm_medium=m("utm_medium"),e.splice(e.indexOf("utm_medium"),1)),m("utm_campaign")&&(Y.INTERACTIONS.utm_campaign=m("utm_campaign"),e.splice(e.indexOf("utm_campaign"),1)),m("utm_term")&&(Y.INTERACTIONS.utm_term=m("utm_term"),e.splice(e.indexOf("utm_term"),1)),m("utm_content")&&(Y.INTERACTIONS.utm_content=m("utm_content"),e.splice(e.indexOf("utm_content"),1)),e.length>0&&e.length<5&&e.forEach(function(t,e){Y.INTERACTIONS[t]=!1}),window.localStorage.setItem("sback_interactions",JSON.stringify(Y.INTERACTIONS)),D()}function B(t){G("Inside request metadata function",e),location.href.indexOf("sbpid=shoptarget")>-1&&((0,n.setCookie)("sback_pid","shoptarget",24),G("Click from platform shoptarget")),"object"===i(e.page)?(F.PAGE=e.page,G("Has PAGE metadata",F.PAGE),delete e.page):"object"===i(window.shopback_product)&&(F.PAGE={type:"product",metadata:window.shopback_product},G("Has PAGE metadata (b)",F.PAGE),delete window.shopback_product),"object"===i(e.cart)&&(F.CART=e.cart,G("Has CART metadata",F.CART),delete e.cart),"object"===i(e.order)&&(F.ORDER=e.order,G("Has ORDER metadata",F.ORDER),delete e.order),setTimeout(B,1500),t===!0&&q()}function G(t,e){return!!t&&void(Y.DEBUG_MODE&&(e?console.log("ShopBack Debug: "+t,e):console.log("ShopBack Debug: "+t)))}function H(){if(V++,V>6)return void console.log("Maximum initialize tries exceeded");if(!window.Promise)return void(0,r["default"])(Y.BASE_URL_STATICS+Y.FILE_POLYFILL_PROMISE,H);if(!window.fetch)return void(0,r["default"])(Y.BASE_URL_STATICS+Y.FILE_POLYFILL_FETCH,H);if(!window.btoa)return void(0,r["default"])(Y.BASE_URL_STATICS+Y.FILE_POLYFILL_BASE64,H);if(!Function.prototype.bind)return void(0,r["default"])(Y.BASE_URL_STATICS+Y.FILE_POLYFILL_BIND,H);if(!window.jQuery&&!t.jQuery&&3143!=window._st_account&&70!=window._st_account&&2865!=window._st_account&&5187!=window._st_account&&4959!=window._st_account)return void(0,r["default"])(Y.BASE_URL_STATICS+Y.FILE_JQUERY,H);if("undefined"!=typeof Prototype&&parseFloat(Prototype.Version.substr(0,3))<1.7&&"undefined"!=typeof Array.prototype.toJSON){var e=JSON.stringify;JSON.stringify=function(t){var a=Array.prototype.toJSON;delete Array.prototype.toJSON;var o=e(t);return Array.prototype.toJSON=a,o}}if(Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),location.href.indexOf("shopback_debug_mode=true")>-1&&(Y.DEBUG_MODE=!0),location.href.indexOf("shopback_staging_mode=true")>-1&&(Y.STAGING_MODE=!0,Y.BASE_URL_API="https://reengage-newapi.apps.linximpulse.net/"),t.is_running!==!0){if(t.is_running=!0,"yes"===window.localStorage.getItem("sback_im_int_debug")){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.defer=!0,a.src="//static.shopback.net/tags/extras/integration.js?nocache="+(new Date).getTime(),
document.querySelector("head").appendChild(a)}o();for(var i,s=document.querySelectorAll("script[data-client]"),c=s.length-1;c>-1;){if(i=s[c],/init\.js/.test(i.src)&&String(i.src).indexOf(Y.BASE_URL_STATICS)>-1){Y.CLIENT=i.getAttribute("data-client"),Y.CUSTOMER=(0,n.getCookie)("sback_customer")?(0,n.getCookie)("sback_customer"):"anonymous";try{if(document.location.href.indexOf("latam.com.br")>-1)return;if(document.location.href.indexOf("farmrio.com.br")>-1)return}catch(u){console.log("Error")}B(!0);break}c--}}}var Y={DOMAIN:"shopback.net",BASE_URL_API:"https://api.shopback.net/",BASE_URL_COOKIES:"https://ckies.net/",BASE_URL_STATICS:"//static.shopback.net/",BASE_URL_HELPERS:"//static.shopback.net/tags/helpers/",FILE_POLYFILL_PROMISE:"tags/polyfill/promise.js",FILE_POLYFILL_FETCH:"tags/polyfill/fetch.js",FILE_POLYFILL_BASE64:"tags/polyfill/base64.js",FILE_POLYFILL_BIND:"tags/polyfill/bind.js",FILE_JQUERY:"tags/jquery.js",ANONYMOUS:!0,ANONYMOUS_DATA:[],CLIENT:!1,CUSTOMER:!1,CUSTOMER_CONTACTS:{email:!1,webpush:!1,facebook:!1,celphone:!1,telephone:!1},PARTNER:!1,SESSION:!1,PAGEVIEW:!1,TIME_SPENT:!1,ACCESS_TOKEN:!1,CART:!1,ORDER:!1,INTERACTIONS:!1,HELPERS:[],METADATAS:["page","cart","order","contact","interaction","billet"],CONTACTS:["email","facebook","webpush","celphone","telephone","automatic"],LOCATION:String(location.href),PAGE:!1,VERSION:"2.0",LANGUAGE:"pt_BR",TIMEZONE:"America/Sao_Paulo",LOCAL_DATE:(new Date).getTime(),RECONNECTS:0,SERVER_DATE:!1,DEBUG_MODE:!1,STAGING_MODE:!1,DEBUG_EVENTS:[],CHAORDIC:{apikey:!1,user:!1,cookie_pool:!1,impulse_js:!1,loader_js:!1,enabled:!0}},J={API:!1,COOKIE_POOL:!1,CAMPAIGNS:!1,HELPER:!1},F={HELPER:!1,PAGE:{type:"unknown"}},z={PAGE:{type:"unknown"}},$=[];window._st_account=window._st_account,window.impulseSuite&&window.impulseSuite.config&&window.impulseSuite.config.integrationFlags&&window.impulseSuite.config.integrationFlags.shopback&&window.impulseSuite.config.integrationFlags.shopback.stAccount&&(window._st_account=window.impulseSuite.config.integrationFlags.shopback.stAccount),window._sb_lock_chaordic_meta=window._sb_lock_chaordic_meta||!1,window._sb_chaordic_apikey=Y.CHAORDIC.apikey,window._sb_chaordic_cookie_pool=Y.CHAORDIC.cookie_pool,window._sb_chaordic_impulse_js=Y.CHAORDIC.impulse_js,window._sb_chaordic_loader_js=Y.CHAORDIC.loader_js;var V=0;H()}(window.shopback=window.shopback||{},window.shopback_metadata=window.shopback_metadata||{})},{"./components/api":1,"./components/campaigns":2,"./components/cookie":4,"./components/cookie-pool":3,"./components/helper":5,"./components/load-resource":7,"./components/request":9}]},{},[10]);